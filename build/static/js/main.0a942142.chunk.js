(this.webpackJsonpmarxan_web=this.webpackJsonpmarxan_web||[]).push([[0],{1039:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(41),r=a.n(s),o=(a(480),a(96)),l=a(44),c=a.n(l),p=a(77),u=a(2),h=a(3),d=a(4),m=a(5),g=a(423),f=a(258),y=a(424),v=a.n(y),b=a(425),k=a.n(b),S=a(60),E=a.n(S);a(580),a(581);function w(e){return/^\d+$/.test(e)}function x(e){return!!(w(e)&&e<=100&&e>=0)}function P(e,t){var a=e.colorSchemes[t];return Object.keys(a).filter((function(e){return"properties"!==e})).map((function(e){return Number(e)})).reduce((function(e,t){return Math.max(e,t)}))}function C(e,t,a){var n,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];switch(t){case"m2":n=1;break;case"Ha":n=1e-4;break;case"Km2":n=1e-6}var o=Number((e*n).toPrecision(s));o=r&&o>1e3?o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):o.toString();var l=-1!==t.indexOf("2")?i.a.createElement("span",null,t.substr(0,t.indexOf("2")),i.a.createElement("span",{className:"superscript"},"2")):i.a.createElement("span",null,t);return a?i.a.createElement("span",null,o," ",l):o+" "+t}function O(e,t){var a=-180===t[0]?179:t[0],n=t[2];t[0]<0&&t[2]>0&&(t[2]-t[0]>t[0]+180+(180-t[2])&&(a=t[2],n=t[0]+360));e.fitBounds([a,t[1],n,t[3]],{padding:{top:10,bottom:10,left:10,right:10},easing:function(e){return 1}})}var D=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"zoom",value:function(){var e=this.map.getSource("marxan_planning_units_source");e&&e.bounds&&O(this.map,e.bounds)}},{key:"onAdd",value:function(e){return this.map=e,this._btn=document.createElement("button"),this._btn.className="mapboxgl-ctrl-icon homeIcon",this._btn.title="Zoom to the extent of the project",this._btn.type="button",this._btn["aria-label"]="Toggle Pitch",this._btn.onclick=this.zoom.bind(this),this._container=document.createElement("div"),this._container.className="mapboxgl-ctrl mapboxgl-ctrl-group",this._container.appendChild(this._btn),this._container}},{key:"onRemove",value:function(e){this._container.parentNode.removeChild(this._container),this.map=void 0}},{key:"getDefaultPosition",value:function(){return"bottom-right"}}]),a}(n.Component),j=D,F=a(261),A=a.n(F),R=a(262),T=a.n(R),I=a(52),N=a.n(I),L=a(53),_=a.n(L),U=a(426),M=a.n(U),B=a(427),G=a.n(B),z=a(428),V=a.n(z),W=a(263),H=a.n(W),K=a(264),Q=a.n(K),X=a(429),Y=a.n(X),q=a(430),J=a.n(q),Z=a(9),$=a(6),ee=a(29),te=a(147),ae=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={adminMenuOpen:!1},n}return Object(h.a)(a,[{key:"openFeaturesDialog",value:function(e){this.props.openFeaturesDialog(!1)}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(te.Toolbar,{style:{display:this.props.open?"block":"none",backgroundColor:"rgb(0, 188, 212)",height:"36px",padding:"0px 18px"},className:"appBar"},i.a.createElement(te.ToolbarGroup,null,i.a.createElement(Z.a,{icon:$.c,onClick:this.props.openProjectsDialog,title:"Projects",className:"appBarIcon",style:{fontSize:"20px"}}),i.a.createElement(Z.a,{icon:$.z,onClick:this.openFeaturesDialog.bind(this),title:"Features",className:"appBarIcon",style:{fontSize:"20px"}}),i.a.createElement(Z.a,{icon:$.B,onClick:this.props.openPlanningGridsDialog.bind(this),title:"Planning grids",className:"appBarIcon",style:{fontSize:"20px"}}),i.a.createElement(te.ToolbarSeparator,{style:{marginLeft:"12px",marginRight:"12px"}}),i.a.createElement(Z.a,{style:{fontSize:"20px"},icon:this.props.infoPanelOpen?$.a:ee.a,onClick:this.props.toggleInfoPanel,title:this.props.infoPanelOpen?"Hide the project window":"Show the project window",className:"appBarIcon"}),i.a.createElement(Z.a,{style:{fontSize:"20px"},icon:this.props.resultsPanelOpen?$.b:ee.b,onClick:this.props.toggleResultsPanel,title:this.props.resultsPanelOpen?"Hide the results window":"Show the results window",className:"appBarIcon"}),i.a.createElement(te.ToolbarSeparator,{style:{marginLeft:"12px",marginRight:"12px"}}),i.a.createElement(Z.a,{icon:$.I,onClick:this.props.showToolsMenu,title:"Tools and analysis",className:"appBarIcon",style:{fontSize:"19px"}}),i.a.createElement(Z.a,{icon:$.F,onClick:this.props.showUserMenu,title:"User: "+this.props.user+" ("+this.props.userRole+")",className:"appBarIcon",style:{fontSize:"20px"}}),i.a.createElement(Z.a,{icon:$.t,onClick:this.props.showHelpMenu,title:"Help and support",className:"appBarIcon",style:{fontSize:"19px"}}))))}}]),a}(i.a.Component),ne=ae,ie=a(431),se=a.n(ie),re=a(432),oe=a.n(re),le=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props.style?this.props.style:{},t={display:!1!==this.props.show?"inline-block":"none",marginLeft:"4px",marginRight:"4px",padding:"0px",minWidth:"30px",width:this.props.label?"":"24px",height:"24px"};return Object.assign(e,t),i.a.createElement(oe.a,Object.assign({},this.props,{style:e,overlayStyle:{lineHeight:"24px",height:"24px"},buttonStyle:{lineHeight:"24px",height:"24px"}}))}}]),a}(i.a.Component),ce=le,pe=a(58),ue=a.n(pe),he=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={searchText:""},n}return Object(h.a)(a,[{key:"openDocumentation",value:function(){window.open("https://docs.marxanweb.org/"+this.props.helpLink)}},{key:"searchTextChange",value:function(e){this.setState({searchText:e.target.value}),this.props.searchTextChanged&&this.props.searchTextChanged(e.target.value)}},{key:"clearSearch",value:function(){this.searchTextChange({target:{value:""}})}},{key:"render",value:function(){var e=this.props.offsetX?{marginLeft:this.props.offsetX+"px",width:"400px"}:this.props.rightX?{right:this.props.rightX+"px",width:"400px",left:null}:{},t=this.props.offsetY?{marginTop:this.props.offsetY-60+"px"}:{},a=Object.assign(e,t),n=this.props.showCancelButton?i.a.createElement(ce,{label:this.props.cancelLabel?this.props.cancelLabel:"Cancel",primary:!0,onClick:this.props.onCancel,disabled:this.props.cancelDisabled}):null,s=this.props.hideOKButton?null:i.a.createElement(ce,{label:this.props.okLabel?this.props.okLabel:"OK",primary:!0,onClick:this.props.onOk,disabled:this.props.okDisabled}),r=this.props.contentStyle?this.props.contentStyle:this.props.contentWidth?{width:this.props.contentWidth+"px"}:{};return i.a.createElement(se.a,Object.assign({},this.props,{onRequestClose:this.props.onCancel,overlayStyle:this.props.showOverlay?{display:"block"}:{display:"none"},titleClassName:"dialogTitleStyle",contentStyle:r,titleStyle:this.props.titleBarIcon?{marginLeft:"27px"}:null,className:"dialogGeneric",style:a,actions:[this.props.actions,n,s],children:[this.props.titleBarIcon?i.a.createElement(Z.a,{icon:this.props.titleBarIcon,style:{position:"absolute",top:"18px",left:"24px"},key:"k1"}):null,this.props.showSearchBox?i.a.createElement("div",{style:{right:"70px",position:"absolute",top:"13px"},title:"search",key:"k27"},i.a.createElement("input",{value:this.state.searchText,onChange:this.searchTextChange.bind(this),style:{border:"1px solid rgba(0,0,0,0.1)",borderRadius:"30px",width:"90px",height:"22px",fontFamily:"Roboto, sans-serif",fontSize:"12px",fontWeight:"400",color:"rgba(0,0,0,0.7)",paddingLeft:"10px"}}),i.a.createElement(Z.a,{onClick:this.clearSearch.bind(this),icon:$.w,className:"appBarIcon docs",style:{fontSize:"13px",position:"absolute",top:"1px",right:"2px",color:""===this.state.searchText?"rgba(0, 0, 0, 0.6)":"rgb(255, 64, 129)"},title:""===this.state.searchText?"Search":"Clear search"})):null,i.a.createElement(ue.a,{className:"spin",style:{display:this.props.loading||this.props.showSpinner?"inline-block":"none",color:"rgb(255, 64, 129)",position:"absolute",top:"15px",right:"41px",height:"22px",width:"22px"},key:"spinner"}),this.props.children,this.props.helpLink?i.a.createElement(Z.a,{icon:ee.g,onClick:this.openDocumentation.bind(this),title:"Open documentation for this window",className:"appBarIcon docs",style:{fontSize:"18px"},key:"helpLink"}):null]}))}}]),a}(i.a.Component),de=he,me=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(de,Object.assign({},this.props,{showOverlay:!0,showCancelButton:!1,hideOKButton:!0,contentWidth:358,title:"Loading..",modal:!0})))}}]),a}(i.a.Component),ge=me,fe=a(260),ye=a.n(fe),ve=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props.style?this.props.style:{display:"block"};return i.a.createElement(ye.a,Object.assign({},this.props,{inputStyle:{fontSize:"12px"},style:e,floatingLabelFixed:!0}))}}]),a}(i.a.Component),be=ve,ke=a(23),Se=a.n(ke),Ee=a(11),we=a.n(Ee),xe=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"handleKeyPress",value:function(e){"Enter"===e.nativeEvent.key&&this.props.onOk()}},{key:"selectServer",value:function(e,t,a){this.props.selectServer(this.props.marxanServers[t])}},{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement(de,Object.assign({},this.props,{showOverlay:!0,okDisabled:!(this.props.user&&this.props.password&&this.props.marxanServer&&(!this.props.marxanServer||!this.props.marxanServer.offline)),okLabel:this.props.marxanServer&&!this.props.marxanServer.offline&&!this.props.marxanServer.corsEnabled&&this.props.marxanServer.guestUserEnabled?"Login (Read-Only)":"Login",showCancelButton:!0,cancelLabel:"Register",cancelDisabled:!!(void 0===this.props.marxanServer||this.props.marxanServer&&this.props.marxanServer.offline||this.props.marxanServer&&!this.props.marxanServer.corsEnabled),helpLink:"user.html#log-in-window",contentWidth:358,offsetY:200,children:[i.a.createElement("div",{key:"21"},i.a.createElement(Se.a,{id:"SelectMarxanServer",floatingLabelText:"Marxan Server",floatingLabelFixed:!0,underlineShow:!1,menuItemStyle:{fontSize:"12px"},labelStyle:{fontSize:"12px"},style:{width:"320px"},value:this.props.marxanServer&&this.props.marxanServer.name,onChange:this.selectServer.bind(this),children:this.props.marxanServers.map((function(e){var t=e.offline||e.corsEnabled||e.guestUserEnabled?e.name:e.name+" (Guest user disabled)";return i.a.createElement(we.a,{value:e.name,key:e.name,primaryText:t,style:{fontSize:"12px"},innerDivStyle:{padding:"0px 10px 0px 52px"},leftIcon:e.offline?i.a.createElement(Z.a,{style:{height:"12px",marginTop:"5px"},icon:$.D}):e.corsEnabled?null:i.a.createElement(Z.a,{style:{height:"12px",marginTop:"5px"},icon:$.q}),title:e.offline?e.host+" (offline)\n"+e.description:e.corsEnabled?e.host+"\n"+e.description:e.guestUserEnabled?e.host+" (read-only)\n"+e.description:e.host+" (guest user disabled)\n"+e.description})}))}),i.a.createElement("div",{style:{height:"124px"},id:"logindiv",key:"logindiv"},i.a.createElement(be,{id:"TextUsername",style:{marginTop:"-14px"},floatingLabelText:"Username",onChange:function(t,a){return e.props.changeUserName(a)},value:this.props.user,disabled:!!(this.props.loading||this.props.marxanServer&&!this.props.marxanServer.corsEnabled),onKeyPress:this.handleKeyPress.bind(this)}),i.a.createElement(be,{id:"TextPassword",floatingLabelText:"Password",type:"password",onChange:function(t,a){return e.props.changePassword(a)},value:this.props.password,disabled:!!(this.props.loading||this.props.marxanServer&&!this.props.marxanServer.corsEnabled),onKeyPress:this.handleKeyPress.bind(this)})),i.a.createElement("div",{style:{position:"absolute",bottom:"4px",fontSize:"11px"}},this.props.marxanClientReleaseVersion))],onRequestClose:this.props.onOk,title:"Login",modal:!0})))}}]),a}(i.a.Component),Pe=xe,Ce=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={validForm:!1,user:void 0,name:void 0,email:void 0,validEmail:!0},n}return Object(h.a)(a,[{key:"createNewUser",value:function(){try{this.validateEmail()}catch(e){return void e.message}this.props.onOk(this.state.user,this.state.password,this.state.name,this.state.email)}},{key:"validateEmail",value:function(){var e=/^(([^<>()\]\\.,;:\s@"]+(\.[^<>()\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(this.state.email).toLowerCase());if(this.setState({validEmail:e}),!e)throw new Error("Invalid email address")}},{key:"render",value:function(){var e=this,t=[i.a.createElement("div",{key:"RegisterDialogDiv"},i.a.createElement(be,{floatingLabelText:"Username",onChange:function(t,a){return e.setState({user:a})}}),i.a.createElement(be,{floatingLabelText:"Password",type:"password",onChange:function(t,a){return e.setState({password:a})}}),i.a.createElement(be,{floatingLabelText:"Full name",onChange:function(t,a){return e.setState({name:a})}}),i.a.createElement(be,{floatingLabelText:"Email address",errorText:this.state.validEmail?"":"Invalid email address",onChange:function(t,a){return e.setState({email:a})}}))];return i.a.createElement(de,Object.assign({},this.props,{contentWidth:358,onOk:this.createNewUser.bind(this),okDisabled:!(this.state.user&&this.state.password&&this.state.name&&this.state.email)||this.props.loading,showCancelButton:!0,cancelDisabled:this.props.loading,helpLink:"user.html#new-user-registration",title:"Register",children:t,onRequestClose:this.props.onCancel}))}}]),a}(i.a.Component),Oe=Ce,De=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"handleKeyPress",value:function(e){"Enter"===e.nativeEvent.key&&this.props.resendPassword()}},{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement(de,Object.assign({},this.props,{contentWidth:358,showCancelButton:!0,okDisabled:!this.props.email||this.props.loading,cancelDisabled:this.props.resending,title:"Resend password",children:[i.a.createElement("div",{key:"resendDiv"},i.a.createElement(be,{floatingLabelText:"email address",onChange:function(t,a){return e.props.changeEmail(a)},value:this.props.email,className:"loginUserField",disabled:this.props.loading,onKeyPress:this.handleKeyPress.bind(this)}))],onRequestClose:this.props.onCancel})))}}]),a}(i.a.Component),je=De,Fe=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e;switch(this.props.type){case"Hardware Issue":e=i.a.createElement(Z.a,{icon:$.n,style:{color:"red",paddingRight:"5px",fontSize:"18px"}});break;case"Data Update":case"Software Update":e=i.a.createElement(Z.a,{icon:$.h,style:{color:"rgba(255,0,0,0.7)",paddingRight:"5px",fontSize:"18px"}});break;case"Training":e=i.a.createElement(Z.a,{icon:$.d,style:{paddingRight:"5px",fontSize:"18px"}});break;case"News":e=i.a.createElement(Z.a,{icon:$.r,style:{paddingRight:"5px",fontSize:"18px"}});break;default:e=null}return i.a.createElement("div",{className:"notification"},i.a.createElement("div",{className:"notificationType",title:this.props.type},e,i.a.createElement("span",{dangerouslySetInnerHTML:{__html:this.props.html},className:"notificationText"}),i.a.createElement("span",{className:"removeNotification",onClick:this.props.removeNotification,title:"Dismiss"},"x")))}}]),a}(i.a.Component),Ae=Fe,Re=a(259),Te=a.n(Re),Ie=a(35),Ne=a.n(Ie),Le=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={checked:!0},n}return Object(h.a)(a,[{key:"toggleShowWelcomeScreen",value:function(e,t){this.setState({checked:t})}},{key:"onOk",value:function(){this.props.saveOptions({SHOWWELCOMESCREEN:this.state.checked}),this.props.onOk()}},{key:"openNewProjectDialog",value:function(){this.onOk(),this.props.openNewProjectDialog()}},{key:"render",value:function(){var e=this,t=this.props.notifications&&this.props.notifications.filter((function(e){return e.visible}));t=t.map((function(t){return i.a.createElement(Ae,{html:t.html,type:t.type,key:t.id,removeNotification:e.props.removeNotification.bind(e,t)})}));var a=i.a.createElement("div",{className:"notifications"},t,i.a.createElement("div",{className:"notificationPointer"}));return i.a.createElement(de,Object.assign({},this.props,{contentWidth:768,offsetY:80,title:"Welcome",helpLink:"user.html#welcome",onOk:this.onOk.bind(this),showCancelButton:!1,autoDetectWindowHeight:!1,bodyStyle:{padding:"0px 24px 0px 24px"},children:i.a.createElement(i.a.Fragment,{key:"welcomeKey"},i.a.createElement("div",{className:"welcomeContent"},i.a.createElement("div",{className:"tabTitle"},"What do you want to do?"),i.a.createElement("div",{className:"task"},i.a.createElement("div",{className:"taskItem"},i.a.createElement(ce,{icon:i.a.createElement(Z.a,{icon:$.k}),title:"Design a protected area network",onClick:this.openNewProjectDialog.bind(this),className:"resetNotifications"}),i.a.createElement("span",null,"Create a new protected area network for a country")),i.a.createElement("div",{className:"taskItem"},i.a.createElement(ce,{icon:i.a.createElement(Z.a,{icon:$.k}),title:"Extend a protected area network",onClick:this.openNewProjectDialog.bind(this),className:"resetNotifications"}),i.a.createElement("span",null,"Extend an existing protected area network for a country")),i.a.createElement("div",{className:"taskItem"},i.a.createElement(ce,{icon:i.a.createElement(Z.a,{icon:$.k}),title:"Do a gap analysis",onClick:this.openNewProjectDialog.bind(this),className:"resetNotifications"}),i.a.createElement("span",null,"Do a national gap analysis"))),i.a.createElement("div",{style:{verticalAlign:"middle"}},i.a.createElement(Te.a,{icon:i.a.createElement(Z.a,{icon:$.A}),title:"Reset notifications",onClick:this.props.resetNotifications,style:{minWidth:"24px",height:"24px",lineHeight:"24px",color:"rgba(0,0,0,0.67)",position:"absolute",bottom:"10px"}})),i.a.createElement("div",{className:"notifications"},a),i.a.createElement("div",{className:"welcomeToolbar"},i.a.createElement(Ne.a,{label:"Show at startup",style:{fontSize:"12px"},checked:this.state.checked,onCheck:this.toggleShowWelcomeScreen.bind(this),className:"showAtStartupChk"}))))}))}}]),a}(i.a.Component),_e=Le,Ue=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"openUsersDialog",value:function(){this.props.openUsersDialog(),this.props.hideToolsMenu()}},{key:"openRunLogDialog",value:function(){this.props.openRunLogDialog(),this.props.hideToolsMenu()}},{key:"openGapAnalysisDialog",value:function(){this.props.openGapAnalysisDialog(),this.props.hideToolsMenu()}},{key:"openResetDialog",value:function(){this.props.openResetDialog(),this.props.hideToolsMenu()}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(N.a,{open:this.props.open,anchorEl:this.props.menuAnchor,onRequestClose:this.props.hideToolsMenu},i.a.createElement(_.a,{desktop:!0,onMouseLeave:this.props.hideToolsMenu,menuItemStyle:{backgroundColor:"rgb(0, 188, 212)",color:"white"},listStyle:{width:"120px",backgroundColor:"rgb(0, 188, 212)"},selectedMenuItemStyle:{color:"rgb(24,24,24)"}},i.a.createElement(we.a,{style:{display:"Admin"===this.props.userRole?"inline-block":"none"},leftIcon:i.a.createElement(Z.a,{style:{fontSize:"20px"},icon:$.H,color:"white"}),onClick:this.openUsersDialog.bind(this),title:"Manage Users"},"Users"),i.a.createElement(we.a,{leftIcon:i.a.createElement(Z.a,{style:{fontSize:"20px"},icon:$.v,color:"white"}),onClick:this.openRunLogDialog.bind(this),title:"Admin"===this.props.userRole?"View Run Log and stop runs":"View Run Log"},"Run log"),i.a.createElement(we.a,{style:{display:"Admin"===this.props.userRole&&this.props.marxanServer.enable_reset?"inline-block":"none"},leftIcon:i.a.createElement(Z.a,{style:{fontSize:"20px"},icon:$.o,color:"white"}),onClick:this.openResetDialog.bind(this),title:"Reset database"},"Reset"),i.a.createElement(we.a,{style:{display:"ReadOnly"!==this.props.userRole?"inline-block":"none"},leftIcon:i.a.createElement(Z.a,{style:{fontSize:"20px"},icon:$.e,color:"white"}),onClick:this.openGapAnalysisDialog.bind(this),title:"Gap Analysis",disabled:null===this.props.metadata.pu_country},null===this.props.metadata.pu_country?"Gap Analysis (not available)":"Gap Analysis"))))}}]),a}(i.a.Component),Me=Ue,Be=a(433),Ge=a.n(Be),ze=a(51),Ve=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(N.a,{open:this.props.open,anchorEl:this.props.menuAnchor,anchorOrigin:{horizontal:"left",vertical:"bottom"},targetOrigin:{horizontal:"left",vertical:"top"},onRequestClose:this.props.hideUserMenu},i.a.createElement(_.a,{desktop:!0,onMouseLeave:this.props.hideUserMenu,menuItemStyle:{backgroundColor:"rgb(0, 188, 212)",color:"white"},listStyle:{width:"120px",backgroundColor:"rgb(0, 188, 212)"},selectedMenuItemStyle:{color:"rgb(24,24,24)"}},i.a.createElement(we.a,{style:{display:"ReadOnly"!==this.props.userRole?"block":"none"},primaryText:"Settings",onClick:this.props.openUserSettingsDialog.bind(this),leftIcon:i.a.createElement(Z.a,{style:{fontSize:"20px",marginBottom:"7px"},icon:$.i,color:"white"})}),i.a.createElement(we.a,{style:{display:"ReadOnly"!==this.props.userRole?"block":"none"},primaryText:"Profile",onClick:this.props.openProfileDialog,leftIcon:i.a.createElement(Z.a,{style:{fontSize:"20px",marginBottom:"7px"},icon:$.l,color:"white"})}),i.a.createElement(we.a,{style:{display:"ReadOnly"!==this.props.userRole?"block":"none"},primaryText:"Change password",onClick:this.props.openChangePasswordDialog,leftIcon:i.a.createElement(Z.a,{style:{fontSize:"20px",marginBottom:"7px"},icon:$.G,color:"white"})}),i.a.createElement(we.a,{primaryText:"Log out",onClick:this.props.logout.bind(this),leftIcon:i.a.createElement(Ge.a,{color:ze.white})}))))}}]),a}(i.a.Component),We=Ve,He=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"openDocumentation",value:function(){window.open(this.props.DOCS_ROOT)}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(N.a,{open:this.props.open,anchorEl:this.props.menuAnchor,anchorOrigin:{horizontal:"left",vertical:"bottom"},targetOrigin:{horizontal:"left",vertical:"top"},onRequestClose:this.props.hideHelpMenu},i.a.createElement(_.a,{desktop:!0,onMouseLeave:this.props.hideHelpMenu,menuItemStyle:{backgroundColor:"rgb(0, 188, 212)",color:"white"},listStyle:{width:"120px",backgroundColor:"rgb(0, 188, 212)"},selectedMenuItemStyle:{color:"rgb(24,24,24)"},width:"102px"},i.a.createElement(we.a,{primaryText:"Documentation",onClick:this.openDocumentation.bind(this),leftIcon:i.a.createElement(Z.a,{style:{height:"18px",marginTop:"4px",fontSize:"18px"},icon:$.t,color:"white"})}),i.a.createElement(we.a,{primaryText:"Server Details",onClick:this.props.openServerDetailsDialog,leftIcon:i.a.createElement(Z.a,{style:{height:"18px",marginTop:"4px",fontSize:"18px"},icon:$.x,color:"white"})}),i.a.createElement(we.a,{primaryText:"About",onClick:this.props.openAboutDialog,leftIcon:i.a.createElement(Z.a,{style:{height:"18px",marginTop:"4px",fontSize:"18px"},icon:$.p,color:"white"})}))))}}]),a}(i.a.Component),Ke=He,Qe=a(76),Xe=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={saveEnabled:!1},n.options={},n}return Object(h.a)(a,[{key:"setOption",value:function(e,t){this.setState({saveEnabled:!0}),this.options[e]=t,this.props.saveOptions(this.options)}},{key:"updateOptions",value:function(){this.props.onOk()}},{key:"changeBasemap",value:function(e,t,a){var n=this.props.basemaps[t];this.props.changeBasemap(n),this.setOption("BASEMAP",n.name)}},{key:"toggleUseFeatureColors",value:function(e,t){this.setOption("USEFEATURECOLORS",t)}},{key:"toggleShowWelcomeScreen",value:function(e,t){this.setOption("SHOWWELCOMESCREEN",t)}},{key:"setReportUnit",value:function(e,t){this.setOption("REPORTUNITS",t)}},{key:"render",value:function(){return i.a.createElement(de,Object.assign({},this.props,{contentWidth:370,offsetY:80,showCancelButton:!1,onOk:this.updateOptions.bind(this),helpLink:"user.html#settings",title:"Settings",children:i.a.createElement("div",{key:"k14"},i.a.createElement(Se.a,{floatingLabelText:"Basemap style",floatingLabelFixed:!0,underlineShow:!1,menuItemStyle:{fontSize:"12px"},labelStyle:{fontSize:"12px"},style:{width:"260px"},value:this.props.basemap,onChange:this.changeBasemap.bind(this),children:this.props.basemaps.map((function(e){return i.a.createElement(we.a,{value:e.name,key:e.name,primaryText:e.alias,style:{fontSize:"12px"},title:e.description})}))}),i.a.createElement("div",{style:{paddingBottom:"10px"}},i.a.createElement("div",{className:"userSetting"},"Area units"),i.a.createElement(Qe.RadioButtonGroup,{name:"reportUnitType",defaultSelected:this.props.userData.REPORTUNITS,onChange:this.setReportUnit.bind(this)},i.a.createElement(Qe.RadioButton,{value:"m2",label:"m2",className:"radioButton",style:{width:"60px",display:"inline-block"},inputStyle:{width:"40px"},labelStyle:{width:"40px"},iconStyle:{marginRight:"3px"}}),i.a.createElement(Qe.RadioButton,{value:"Ha",label:"Ha",className:"radioButton",style:{width:"60px",display:"inline-block"},inputStyle:{width:"40px"},labelStyle:{width:"40px"},iconStyle:{marginRight:"3px"}}),i.a.createElement(Qe.RadioButton,{value:"Km2",label:"Km2",className:"radioButton",style:{width:"60px",display:"inline-block"},inputStyle:{width:"40px"},labelStyle:{width:"40px"},iconStyle:{marginRight:"3px"}}))))}))}}]),a}(i.a.Component),Ye=Xe,qe=a(266),Je=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={updated:!1,validEmail:!0},n}return Object(h.a)(a,[{key:"handleKeyPress",value:function(e){"Enter"===e.nativeEvent.key&&this.updateUser()}},{key:"updateState",value:function(e,t){var a;this.setState((a={},Object(qe.a)(a,e,t),Object(qe.a)(a,"updated",!0),a))}},{key:"validateEmail",value:function(){var e=this.state.EMAIL?this.state.EMAIL:this.props.userData.EMAIL,t=/^(([^<>()\]\\.,;:\s@"]+(\.[^<>()\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase());if(this.setState({validEmail:t}),!t)throw new Error("Invalid email address")}},{key:"updateUser",value:function(){try{this.validateEmail()}catch(e){return}this.props.updateUser(this.state),this.closeProfileDialog()}},{key:"closeProfileDialog",value:function(){this.props.onOk(),this.setState({updated:!1,validEmail:!0})}},{key:"render",value:function(){var e=this;return i.a.createElement(de,Object.assign({},this.props,{contentWidth:330,offsetY:80,onCancel:this.closeProfileDialog.bind(this),showCancelButton:!0,onOk:this.updateUser.bind(this),helpLink:"user.html#profile",title:"Profile",children:i.a.createElement("div",{key:"k15"},i.a.createElement(be,{floatingLabelText:"Full name",floatingLabelFixed:!0,onChange:function(t,a){return e.updateState("NAME",a)},defaultValue:this.props.userData&&this.props.userData.NAME,onKeyPress:this.handleKeyPress.bind(this),floatingLabelShrinkStyle:{fontSize:"16px"},floatingLabelFocusStyle:{fontSize:"16px"}}),i.a.createElement(be,{floatingLabelText:"Email address",floatingLabelFixed:!0,errorText:this.state.validEmail?"":"Invalid email address",onChange:function(t,a){return e.updateState("EMAIL",a)},defaultValue:this.props.userData&&this.props.userData.EMAIL,onKeyPress:this.handleKeyPress.bind(this),floatingLabelShrinkStyle:{fontSize:"16px"},floatingLabelFocusStyle:{fontSize:"16px"}}))}))}}]),a}(i.a.Component),Ze=Je,$e=a(42),et=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"filterData",value:function(){var e=this,t=[];return t=""===this.props.searchText?this.props.data:this.props.data.filter((function(t){return e.props.searchText.startsWith("!")?!Object.keys(t).some((function(a){return e.props.searchColumns.includes(a)&&t[a]&&t[a].includes(e.props.searchText.substring(1))})):Object.keys(t).some((function(a){return e.props.searchColumns.includes(a)&&t[a]&&t[a].includes(e.props.searchText)}))})),this.props.hasOwnProperty("dataFiltered")&&this.props.dataFiltered(t),t}},{key:"render",value:function(){var e=this.filterData();return i.a.createElement($e.a,Object.assign({},this.props,{pageSize:e.length,className:"projectsReactTable noselect",showPagination:!1,minRows:0,data:e,columns:this.props.columns}))}}]),a}(i.a.Component),tt=et,at=["User","ReadOnly","Admin"],nt=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={searchText:"",selectedUser:void 0},n}return Object(h.a)(a,[{key:"changeRole",value:function(e,t,a,n,i){this.props.changeRole(e,i)}},{key:"_delete",value:function(){this.props.deleteUser(this.state.selectedUser.user),this.setState({selectedUser:!1})}},{key:"changeUser",value:function(e,t){this.setState({selectedUser:t})}},{key:"sortDate",value:function(e,t,a){return new Date(e.slice(6,8),e.slice(3,5)-1,e.slice(0,2),e.slice(9,11),e.slice(12,14),e.slice(15,17))>new Date(t.slice(6,8),t.slice(3,5)-1,t.slice(0,2),t.slice(9,11),t.slice(12,14),t.slice(15,17))?1:-1}},{key:"closeDialog",value:function(){this.setState({selectedUser:void 0}),this.props.onOk()}},{key:"searchTextChanged",value:function(e){this.setState({searchText:e})}},{key:"render",value:function(){var e=this;return this.props.users?i.a.createElement(de,Object.assign({},this.props,{onOk:this.closeDialog.bind(this),onRequestClose:this.closeDialog.bind(this),showCancelButton:!1,helpLink:"user.html#the-users-window-admin-users-only",autoDetectWindowHeight:!1,bodyStyle:{padding:"0px 24px 0px 24px"},title:"Users",showSearchBox:!0,searchTextChanged:this.searchTextChanged.bind(this),children:i.a.createElement(i.a.Fragment,{key:"k2"},i.a.createElement("div",{id:"usersTable"},this.props.users&&this.props.users.length>0?i.a.createElement(tt,{data:this.props.users,selectedUser:this.state.selectedUser,searchColumns:["user","NAME","EMAIL","ROLE"],searchText:this.state.searchText,changeUser:this.changeUser.bind(this),columns:[{Header:"User",accessor:"user",width:90,headerStyle:{textAlign:"left"}},{Header:"Name",accessor:"NAME",width:173,headerStyle:{textAlign:"left"}},{Header:"email",accessor:"EMAIL",width:135,headerStyle:{textAlign:"left"}},{Header:"Role",accessor:"ROLE",width:180,headerStyle:{textAlign:"left"},Cell:function(t){return"guest"===t.original.user?i.a.createElement("div",null,"ReadOnly"):i.a.createElement(Se.a,{style:{width:130,height:15,lineHeight:15,position:"relative",fontSize:"12px"},menuStyle:{position:"absolute",top:-22},underlineStyle:{position:"relative",top:20},iconStyle:{lineHeight:"24px",height:"24px"},value:t.original.ROLE,onChange:e.changeRole.bind(e,t.original.user,t.value)},at.map((function(e){return i.a.createElement(we.a,{style:{fontSize:"12px"},value:e,primaryText:e,key:e})})))}},{Header:"Date",accessor:"CREATEDATE",width:115,headerStyle:{textAlign:"left"},sortMethod:this.sortDate.bind(this)}],getTrProps:function(e,t,a){return{style:{background:t.original.user===(e.selectedUser&&e.selectedUser.user)?"aliceblue":""},onClick:function(a){-1===at.indexOf(a.target.textContent)&&e.changeUser(a,t.original)}}}}):null),i.a.createElement("div",{id:"projectsToolbar"},i.a.createElement(ce,{icon:i.a.createElement(Z.a,{icon:ee.h,color:"rgb(255, 64, 129)"}),title:"Delete user",disabled:!this.state.selectedUser||this.props.loading||this.props.user===this.state.selectedUser.user||"guest"===this.state.selectedUser.user,onClick:this._delete.bind(this),label:"Delete"}),i.a.createElement(Ne.a,{label:"Enable guest user",style:{fontSize:"12px",paddingLeft:"10px",width:"200px",display:"inline-block",verticalAlign:"bottom"},onClick:this.props.toggleEnableGuestUser,checked:this.props.guestUserEnabled})))})):null}}]),a}(i.a.Component),it=nt,st=a(434),rt=a.n(st),ot=a(435),lt=a.n(ot),ct=a(436),pt=a.n(ct),ut=a(437),ht=a.n(ut),dt=a(438),mt=a.n(dt),gt=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return i.a.createElement(de,Object.assign({},this.props,{contentWidth:500,offsetY:80,title:"About",helpLink:"user.html#about-window",children:i.a.createElement("div",{key:"k5"},i.a.createElement("div",{className:"aboutTitle"},"Software development"),i.a.createElement("div",{className:"aboutText"},"Marxan Web ",this.props.marxanClientReleaseVersion," Feedback:"," ",i.a.createElement("a",{href:"mailto:andrew.cottam@ec.europa.eu",className:"email"},"Andrew Cottam")),i.a.createElement("div",{className:"aboutText"},"Marxan 2.4.3 - Ian Ball, Matthew Watts & Hugh Possingham"),i.a.createElement("div",{className:"aboutTitle"},"Data providers"),i.a.createElement("div",{className:"aboutText",style:{marginTop:"10px"},dangerouslySetInnerHTML:{__html:this.props.wdpaAttribution}}),i.a.createElement("div",{className:"aboutTitle"},"Funding and in-kind contributions"),i.a.createElement("div",{className:"aboutText",style:{marginTop:"10px"}},"Marxan Web funded by the BIOPAMA project of the European Commission. With in-kind contributions from Mapbox."),i.a.createElement("div",{className:"aboutText",style:{marginTop:"10px"}},"Marxan funded by a range of donors - see ",i.a.createElement("a",{href:"http://marxan.org/credits.html",target:"_blank",rel:"noopener noreferrer"},"here"),"."),i.a.createElement("div",{className:"logos"},i.a.createElement("a",{href:"https://www.iucn.org/"},i.a.createElement("img",{src:rt.a,alt:"IUCN logo",title:"IUCN logo",className:"aboutLogo"})),i.a.createElement("a",{href:"https://www.unep-wcmc.org/"},i.a.createElement("img",{src:lt.a,alt:"UN Environment WCMC logo",title:"UN Environment WCMC logo",className:"aboutLogo"})),i.a.createElement("a",{href:"https://www.biopama.org"},i.a.createElement("img",{src:ht.a,alt:"BIOPAMA logo",title:"BIOPAMA logo",className:"aboutLogo"})),i.a.createElement("a",{href:"https://ec.europa.eu/jrc/en"},i.a.createElement("img",{src:mt.a,alt:"Joint Research Centre of the European Commission logo",title:"Joint Research Centre of the European Commission logo",className:"aboutLogo"})),i.a.createElement("a",{href:"https://www.mapbox.com"},i.a.createElement("img",{src:pt.a,alt:"Mapbox logo",title:"Mapbox logo",className:"aboutLogo"}))))}))}}]),a}(i.a.Component),ft=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return i.a.createElement(we.a,Object.assign({className:"smallMenuItem"},this.props,{innerDivStyle:{paddingLeft:"40px"}}))}}]),a}(i.a.Component),yt=(a(207),a(49)),vt=a.n(yt),bt=a(48),kt=a(88),St=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={editing:!1,localTargetValue:void 0},n}return Object(h.a)(a,[{key:"onClick",value:function(e){this.startEditing()}},{key:"isNumber",value:function(e){return/^\d+$/.test(e)}},{key:"onChange",value:function(e){var t=e.nativeEvent.target.value;t>100||(this.isNumber(t)||""===t)&&(t=""===t?0:Number(t),this.setState({localTargetValue:t}))}},{key:"onKeyPress",value:function(e){"Enter"===e.nativeEvent.key&&this.setState({editing:!1})}},{key:"startEditing",value:function(){this.setState({editing:!0,localTargetValue:this.props.target_value}),document.getElementById("input_"+this.props.interestFeature.id).focus(),document.getElementById("input_"+this.props.interestFeature.id).select()}},{key:"stopEditing",value:function(){this.setState({editing:!1}),this.props.updateTargetValue(this,this.state.localTargetValue)}},{key:"render",value:function(){var e="Does not occur in planning area"===this.props.targetStatus?"lightgray":"Unknown"===this.props.targetStatus||"Target achieved"===this.props.targetStatus?"white":"rgb(255, 64, 129)",t="Does not occur in planning area"===this.props.targetStatus?"white":"Unknown"===this.props.targetStatus||"Target achieved"===this.props.targetStatus?ze.blue300:"white";return n.createElement("div",{onClick:"ReadOnly"===this.props.userRole?null:this.onClick.bind(this),style:{position:"absolute",left:"0px",top:"8px",display:this.props.visible?"block":"none"}},n.createElement("div",{title:this.props.targetStatus,style:{display:this.state.editing?"none":"inline-flex",backgroundColor:e,size:"0",color:t,userSelect:"none",alignItems:"center",justifyContent:"center",fontSize:"10px",borderRadius:"50%",height:"27px",width:"27px",left:"0px",border:"1px lightgray solid"}},this.props.target_value,"%"),n.createElement("div",{style:{display:this.state.editing?"inline-flex":"none",size:"30",backgroundColor:"#2F6AE4",userSelect:"none",alignItems:"center",justifyContent:"center",borderRadius:"50%",height:"27px",width:"27px",left:"0px"}},n.createElement("input",{id:"input_"+this.props.interestFeature.id,onBlur:this.stopEditing.bind(this),onKeyPress:this.onKeyPress.bind(this),onChange:this.onChange.bind(this),style:{backgroundColor:"transparent",border:"0px",height:"27px",width:"27px",fontSize:"13px",display:"inline-flex",textAlign:"center",color:ze.blue300},value:this.state.localTargetValue})))}}]),a}(n.PureComponent),Et=a(117),wt=a.n(Et),xt=a(178),Pt=a.n(xt),Ct=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={alwaysShowPercent:!1,showUnprotectedPercent:!1,targetAsLine:!1},n}return Object(h.a)(a,[{key:"render",value:function(){var e,t,a=this.props.scaledWidth/100,i=this.props.target_value*a;e=Math.round(-1===this.props.protected_percent?0:this.props.protected_percent*a);var s=this.props.protected_percent,r=s<Number(this.props.target_value)&&Math.round(s)===Number(this.props.target_value)?String(s).slice(0,String(s).indexOf(".")+2):Math.round(s);t=e<26&&!this.state.alwaysShowPercent;var o=this.props.protected_percent>=this.props.target_value?0:i-e,l=100*a-e-(o=o<0?0:o);return n.createElement("div",{className:this.props.visible?"linearGauge":"linearGaugeNoBorder",style:{opacity:-1===this.props.protected_percent?"0.3":1}},n.createElement("div",{title:r+"% protected",className:"percentBar",style:{height:this.props.smallLinearGauge?"2px":"18px",width:e+"px",backgroundColor:this.props.useFeatureColors?this.props.color:"rgb(0, 188, 212)"}},t?n.createElement("span",null,"\xa0"):r+"%"),n.createElement("div",{title:"Target of "+this.props.target_value+"%",className:"percentBar targetShortfall",style:{width:this.props.visible?o+"px":"0px"}}),n.createElement("div",{className:"percentBar totalShortFall",style:{width:l+"px",color:"rgba(0,0,0,0.7)",textAlign:this.props.visible?null:"left",fontStyle:this.props.visible?null:"italic"}},this.props.visible?null:"Does not occur"))}}]),a}(n.Component),Ot=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"iconClick",value:function(e,t){this.props.openFeatureMenu(t,e)}},{key:"updateTargetValue",value:function(e,t){this.props.updateFeature(e.props.interestFeature,{target_value:t})}},{key:"itemClick",value:function(e,t){t.ctrlKey?(e.feature_puid_layer_loaded=!e.feature_puid_layer_loaded,this.props.toggleFeaturePUIDLayer(e)):(e.feature_layer_loaded=!e.feature_layer_loaded,this.props.toggleFeatureLayer(e))}},{key:"render",value:function(){var e=this;return n.createElement(n.Fragment,null,n.createElement(kt.List,{style:{padding:"0px !important",maxHeight:this.props.maxheight,overflow:"auto"}},this.props.features.map((function(t){var a=t.pu_area,i=-1===t.protected_area?-1:a>=0&&t.protected_area>0?t.protected_area/a*100:0,s=0===a?"Does not occur in planning area":-1===i?"Unknown":t.protected_area>=t.target_area?"Target achieved":"Target missed";return n.createElement(kt.ListItem,{leftAvatar:e.props.simple?n.createElement("span",null):n.createElement(St,{style:{left:8},target_value:t.target_value,updateTargetValue:e.updateTargetValue.bind(e),interestFeature:t,targetStatus:s,visible:0!==t.pu_area,userRole:e.props.userRole}),primaryText:t.alias,secondaryText:e.props.simple?n.createElement("span",null):n.createElement(Ct,{scaledWidth:220,target_value:t.target_value,protected_percent:i,visible:0!==t.pu_area,color:t.color,useFeatureColors:e.props.useFeatureColors,style:{height:e.props.smallLinearGauge?"3px":"unset"},smallLinearGauge:e.props.smallLinearGauge}),key:t.id,value:t.alias,onClick:e.props.simple?null:e.itemClick.bind(e,t),rightIconButton:e.props.simple?n.createElement("div",null):n.createElement(wt.a,{touch:!0,tooltipPosition:"bottom-left",onClick:e.iconClick.bind(e,t),style:{width:"18",height:"18",padding:"10",top:"10px"},iconStyle:{width:"18",height:"18"}},n.createElement(Pt.a,{color:ze.grey400})),innerDivStyle:{padding:e.props.simple?"5px 5px 5px 5px":"6px 5px 2px 40px"},style:{borderRadius:"3px",fontSize:"13px",color:"rgba(0,0,0,0.8)"}})}))))}}]),a}(n.Component),Dt=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"openFeaturesDialog",value:function(e){this.props.openFeaturesDialog(!0)}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"newPUDialogPane"},i.a.createElement(Ot,Object.assign({},this.props,{features:this.props.features,openFeatureMenu:this.props.openFeatureMenu,simple:this.props.simple,updateFeature:this.props.updateFeature,userRole:this.props.userRole,toggleFeatureLayer:this.props.toggleFeatureLayer,toggleFeaturePUIDLayer:this.props.toggleFeaturePUIDLayer,useFeatureColors:this.props.useFeatureColors,smallLinearGauge:this.props.smallLinearGauge})),i.a.createElement(ce,{onClick:this.props.openTargetDialog,show:"ReadOnly"!==this.props.userRole&&this.props.showTargetButton,icon:i.a.createElement(Z.a,{icon:$.j}),style:{marginLeft:this.props.leftmargin,width:"30px",marginTop:"5px"},title:"Set a target for all features"}),i.a.createElement(ce,{labelStyle:{paddingLeft:"6px",paddingRight:"6px"},label:"+/-",onClick:this.openFeaturesDialog.bind(this),show:!(this.props.metadata&&this.props.metadata.OLDVERSION||"ReadOnly"===this.props.userRole),style:{marginLeft:this.props.leftmargin,width:"30px",marginTop:"5px"},title:"Add/remove features from the project"})))}}]),a}(i.a.Component),jt=a(179),Ft=a.n(jt),At=a(456),Rt=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={editingProjectName:!1,editingDescription:!1},n}return Object(h.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){!1===t.editingProjectName&&this.state.editingProjectName&&(document.getElementById("projectName").value=this.props.project,document.getElementById("projectName").focus()),!1===t.editingDescription&&this.state.editingDescription&&(document.getElementById("descriptionEdit").value=this.props.metadata.DESCRIPTION,document.getElementById("descriptionEdit").focus())}},{key:"onKeyPress",value:function(e){13!==e.nativeEvent.keyCode&&27!==e.nativeEvent.keyCode||document.getElementById(e.nativeEvent.target.id).blur()}},{key:"onBlur",value:function(e){var t=this;"projectName"===e.nativeEvent.target.id?this.props.renameProject(e.target.value).then((function(){t.setState({editingProjectName:!1})})):this.props.renameDescription(e.target.value).then((function(){t.setState({editingDescription:!1})}))}},{key:"startEditingProjectName",value:function(){this.props.project&&this.setState({editingProjectName:!0})}},{key:"startEditingDescription",value:function(){this.props.project&&this.setState({editingDescription:!0})}},{key:"startStopPuEditSession",value:function(e){this.props.puEditing?this.stopPuEditSession():this.startPuEditSession()}},{key:"startPuEditSession",value:function(){this.setState({puEditing:!0}),this.props.startPuEditSession()}},{key:"stopPuEditSession",value:function(){this.setState({puEditing:!1}),this.props.stopPuEditSession()}},{key:"changeIucnCategory",value:function(e,t,a){this.props.changeIucnCategory(this.props.iucn_categories[t])}},{key:"changeCostname",value:function(e,t,a){var n=this,i=this.costnames[t];"Custom.."===i?this.props.openCostsDialog():this.props.changeCostname(i).then((function(e){n.props.loadCostsLayer(!0)}))}},{key:"toggleProjectPrivacy",value:function(e,t){var a=t?"True":"False";this.props.toggleProjectPrivacy(a)}},{key:"stopProcess",value:function(){this.props.stopProcess(this.props.pid)}},{key:"render",value:function(){return this.costnames=[],this.props.costnames&&(this.costnames=this.props.costnames.slice(),this.costnames.push("Custom..")),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"infoPanel",style:{display:this.props.open?"block":"none"}},i.a.createElement(vt.a,{zDepth:2,className:"InfoPanelPaper"},i.a.createElement(vt.a,{zDepth:2,className:"titleBar"},"ReadOnly"===this.props.userRole?i.a.createElement("span",{className:"projectNameEditBox",title:this.props.project+" (Read-only)"},i.a.createElement(Z.a,{style:{color:"white",height:"16px",marginTop:"4px",marginBottom:"2px",marginRight:"5px"},icon:$.q}),this.props.project):i.a.createElement("span",{onClick:this.startEditingProjectName.bind(this),className:"projectNameEditBox",title:"Click to rename the project"},this.props.project),"ReadOnly"===this.props.userRole?null:i.a.createElement("input",{id:"projectName",style:{position:"absolute",display:this.state.editingProjectName?"block":"none",left:"39px",top:"32px",width:"365px",border:"1px lightgray solid"},className:"projectNameEditBox",onKeyPress:this.onKeyPress.bind(this),onBlur:this.onBlur.bind(this)})),i.a.createElement(bt.Tabs,{contentContainerStyle:{margin:"20px"},className:"tabs",value:this.props.activeTab},i.a.createElement(bt.Tab,{label:"Project",onActive:this.props.project_tab_active,value:"project",disabled:!!this.props.puEditing},i.a.createElement("div",null,i.a.createElement("div",{className:"tabTitle"},"Description"),"ReadOnly"===this.props.userRole?null:i.a.createElement(At.a,{minRows:5,id:"descriptionEdit",style:{display:this.state.editingDescription?"block":"none"},className:"descriptionEditBox",onKeyPress:this.onKeyPress.bind(this),onBlur:this.onBlur.bind(this)}),"ReadOnly"===this.props.userRole?i.a.createElement("div",{className:"description",title:this.props.metadata.DESCRIPTION,dangerouslySetInnerHTML:{__html:this.props.metadata.DESCRIPTION}}):i.a.createElement("div",{className:"description",onClick:this.startEditingDescription.bind(this),style:{display:this.state.editingDescription?"none":"block"},title:"Click to edit",dangerouslySetInnerHTML:{__html:this.props.metadata.DESCRIPTION}}),i.a.createElement("div",{className:"tabTitle tabTitleTopMargin"},"Created"),i.a.createElement("div",{className:"createDate"},this.props.metadata.CREATEDATE),i.a.createElement("div",{className:"tabTitle tabTitleTopMargin"},this.props.metadata.OLDVERSION?"Imported project":""),i.a.createElement("div",{style:{position:"absolute",top:"413px",display:"ReadOnly"===this.props.userRole?"none":"block"}},i.a.createElement(Ne.a,{label:"Private",style:{fontSize:"12px"},checked:this.props.metadata.PRIVATE,onCheck:this.toggleProjectPrivacy.bind(this)})))),i.a.createElement(bt.Tab,{label:"Features",onActive:this.props.features_tab_active,value:"features",disabled:!!this.props.puEditing},i.a.createElement(Dt,{features:this.props.features,openFeatureMenu:this.props.openFeatureMenu,openFeaturesDialog:this.props.openFeaturesDialog,metadata:this.props.metadata,updateFeature:this.props.updateFeature,leftmargin:"10px",maxheight:"409px",simple:!1,showTargetButton:!0,openTargetDialog:this.props.openTargetDialog,userRole:this.props.userRole,toggleFeatureLayer:this.props.toggleFeatureLayer,toggleFeaturePUIDLayer:this.props.toggleFeaturePUIDLayer,useFeatureColors:this.props.useFeatureColors,smallLinearGauge:this.props.smallLinearGauge})),i.a.createElement(bt.Tab,{label:"Planning units",onActive:this.props.pu_tab_active,value:"planning_units"},i.a.createElement("div",null,i.a.createElement("div",{className:"tabTitle"},"Planning grid"),i.a.createElement("div",{className:"description"},this.props.metadata.pu_alias),i.a.createElement("div",{className:"tabTitle tabTitleTopMargin"},"Protected areas"),i.a.createElement(Se.a,{floatingLabelText:"Lock in",floatingLabelFixed:!0,underlineShow:!1,disabled:this.props.preprocessing||"ReadOnly"===this.props.userRole,menuItemStyle:{fontSize:"12px"},labelStyle:{fontSize:"12px"},style:{marginTop:"-15px",width:"140px"},value:this.props.metadata.IUCN_CATEGORY,onChange:this.changeIucnCategory.bind(this),children:this.props.iucn_categories.map((function(e){return i.a.createElement(we.a,{value:e,key:e,primaryText:e,style:{fontSize:"12px"}})}))}),i.a.createElement("div",{className:"tabTitle"},"Costs"),i.a.createElement(Se.a,{floatingLabelText:"Use cost surface",floatingLabelFixed:!0,underlineShow:!1,disabled:this.props.preprocessing||"ReadOnly"===this.props.userRole,menuItemStyle:{fontSize:"12px"},labelStyle:{fontSize:"12px"},style:{marginTop:"-15px",width:"230px"},value:this.props.costname,onChange:this.changeCostname.bind(this),children:this.costnames.map((function(e){return i.a.createElement(we.a,{value:e,key:e,primaryText:e,style:{fontSize:"12px"}})}))}),i.a.createElement("div",{style:{display:"ReadOnly"===this.props.userRole?"none":"block"}},i.a.createElement("div",{className:"tabTitle"},"Statuses"),i.a.createElement(Z.a,{icon:this.props.puEditing?$.E:$.q,onClick:this.startStopPuEditSession.bind(this),title:this.props.puEditing?"Save":"Click to edit",style:{cursor:"pointer",marginRight:"10px",color:"rgba(255, 64, 129, 0.7)"}}),i.a.createElement("div",{className:"description",style:{display:"inline-block",fontSize:"12px"}},this.props.puEditing?"Click on the map to change the status":"Click to edit"),i.a.createElement("div",{style:{display:this.props.puEditing?"block":"none"}},i.a.createElement("div",{className:"statusRow"},i.a.createElement("div",{className:"statusSwatch",style:{border:"1px rgba(63, 63, 191, 1) solid"}}),i.a.createElement("div",{className:"puStatus"},"Locked in the reserve system")),i.a.createElement("div",{className:"statusRow"},i.a.createElement("div",{className:"statusSwatch",style:{border:"1px rgba(191, 63, 63, 1) solid"}}),i.a.createElement("div",{className:"puStatus"},"Locked out of the reserve system")),i.a.createElement(ce,{icon:i.a.createElement(Z.a,{icon:$.m}),title:"Clear all manual edits",onClick:this.props.clearManualEdits.bind(this)})))))),i.a.createElement(vt.a,{className:"lowerToolbar"},i.a.createElement(ce,{icon:i.a.createElement(Z.a,{icon:$.y}),title:"Get a shareable link to this project",onClick:this.props.getShareableLink,show:"remote"===this.props.marxanServer.type}),i.a.createElement(ce,{icon:i.a.createElement(Ft.a,{style:{height:"20px",width:"20px"}}),title:"Run Settings",onClick:this.props.showRunSettingsDialog}),i.a.createElement("div",{className:"toolbarSpacer"}),i.a.createElement(ce,{label:"Stop",title:"Click to stop the current run",show:"ReadOnly"!==this.props.userRole,style:{marginLeft:"194px"},onClick:this.stopProcess.bind(this),disabled:0===this.props.pid,secondary:!0}),i.a.createElement(ce,{label:"Run",title:"Click to run this project",show:"ReadOnly"!==this.props.userRole,onClick:this.props.runMarxan,disabled:this.props.preprocessing||0===this.props.features.length||this.props.puEditing,secondary:!0})))))}}]),a}(i.a.Component),Tt=a(439),It=a.n(Tt),Nt=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={showSlider:!1},n.old_opacity=.5,n}return Object(h.a)(a,[{key:"onChange",value:function(e,t){this.props.layer&&(this.old_opacity=this.props.opacity,this.props.changeOpacity(this.props.layer.id,t))}},{key:"toggleLayer",value:function(){this.props.layer&&(this.props.opacity>0?this.onChange(void 0,0):this.onChange(void 0,this.old_opacity))}},{key:"mouseEnter",value:function(e){this.setState({showSlider:!0})}},{key:"mouseLeave",value:function(e){this.setState({showSlider:!1})}},{key:"render",value:function(){return i.a.createElement("div",{style:this.props.style},i.a.createElement("div",{onMouseEnter:this.mouseEnter.bind(this),onMouseLeave:this.mouseLeave.bind(this),style:{position:"absolute",width:"132px",height:"23px"},title:"Change transparency - click to toggle layer"},i.a.createElement(Z.a,{icon:0===this.props.opacity?ee.f:ee.e,style:{color:"gainsboro"},onClick:this.toggleLayer.bind(this)}),i.a.createElement(It.a,{value:this.props.opacity,onChange:this.onChange.bind(this),style:{display:this.state.showSlider?"inline-block":"none",width:"100px",position:"absolute",top:"2px",left:"26px"},sliderStyle:{margin:"0px"}})))}}]),a}(i.a.Component),Lt=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"getPlanningUnitsLegend",value:function(e){var t,a=this;if(1!==this.props.brew.breaks[this.props.brew.breaks.length-1]){var i=this.props.brew.getNumClasses(),s=P(this.props.brew,e),r=this.props.brew.colorSchemes[e],o=i<=s?Array.apply(null,{length:i}).map(Number.call,Number):Array.apply(null,{length:s}).map(Number.call,Number),l=o.length;t=o.map((function(e){var t=a.props.brew.breaks[e+1]-a.props.brew.breaks[e]>1,i=1===a.props.brew.breaks[e+1]?" solution":" solutions",s=t?a.props.brew.breaks[e]+1+" - "+a.props.brew.breaks[e+1]+i:a.props.brew.breaks[e+1]+i;return n.createElement("div",{key:e},n.createElement("div",{key:"swatch"+e,style:{backgroundColor:r[l][e],width:"12px",height:"16px",border:"1px lightgray solid",margin:"3px",display:"inline-flex",verticalAlign:"top"}}),n.createElement("div",{style:{display:"inline-flex",verticalAlign:"top",marginLeft:"7px",fontSize:"12px"},key:"label"+e},s))}))}else t=n.createElement("div",null,n.createElement("div",{style:{backgroundColor:"rgba(255, 0, 136,1)",width:"12px",height:"16px",border:"1px lightgray solid",margin:"3px",display:"inline-flex",verticalAlign:"top"}}),n.createElement("div",{style:{display:"inline-flex",verticalAlign:"top",marginLeft:"3px",fontSize:"12px"}},"Proposed network"));return t=n.createElement("div",null,n.createElement("div",{className:"tabTitle"},"Planning units"),n.createElement("div",null,t),n.createElement(Nt,{layer:this.props.resultsLayer,changeOpacity:this.props.changeOpacity,opacity:this.props.results_layer_opacity}))}},{key:"getProtectedAreasLegend",value:function(){return this.props.pa_layer_visible?n.createElement("div",null,n.createElement("div",{className:"tabTitle"},"Protected areas"),n.createElement("div",{key:"marine",style:{backgroundColor:"rgba(63,127,191)",width:"12px",height:"16px",border:"1px lightgray solid",margin:"3px",display:"inline-flex",verticalAlign:"top"}}),n.createElement("div",{style:{display:"inline-flex",verticalAlign:"top",marginLeft:"7px",fontSize:"12px"},key:"label_marine"},"Marine"),n.createElement("div",null,n.createElement("div",{key:"terrestrial",style:{backgroundColor:"rgba(99,148,69)",width:"12px",height:"16px",border:"1px lightgray solid",margin:"3px",display:"inline-flex",verticalAlign:"top"}}),n.createElement("div",{style:{display:"inline-flex",verticalAlign:"top",marginLeft:"7px",fontSize:"12px"},key:"label_terrestrial"},"Terrestrial")),n.createElement(Nt,{layer:this.props.wdpaLayer,changeOpacity:this.props.changeOpacity,opacity:this.props.wdpa_layer_opacity})):null}},{key:"toggleCosts",value:function(e,t){this.props.toggleCosts(t)}},{key:"render",value:function(){var e=this.props.brew&&this.props.brew.breaks&&this.props.brew.colorCode?this.getPlanningUnitsLegend(this.props.brew.colorCode):n.createElement("div",null),t=this.getProtectedAreasLegend();return n.createElement("div",null,n.createElement("div",null,e),n.createElement("div",{style:{marginTop:"32px"}},t))}}]),a}(n.Component),_t=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return n.createElement("div",{className:this.props.className},n.createElement(ue.a,{className:"spin",style:{display:"Preprocessing"===this.props.message.status?"inline":"none",height:"16px",width:"16px",verticalAlign:"sub",color:"rgb(255, 64, 129)",marginRight:"6px"},title:this.props.message.info}),n.createElement(Z.a,{icon:$.f,style:{display:"Finished"!==this.props.message.status||this.props.message.hasOwnProperty("error")?"none":"inline",color:"green",marginRight:"6px"},title:"Preprocessing completed"}),n.createElement(Z.a,{icon:$.b,style:{display:"UploadComplete"===this.props.message.status?"inline":"none",color:"green",marginRight:"6px"},title:"Upload complete"}),n.createElement(Z.a,{icon:$.n,style:{color:"red",display:this.props.message.hasOwnProperty("error")?"inline":"none",marginRight:"6px"},title:this.props.message.info}),n.createElement("div",{style:{display:"inline"},dangerouslySetInnerHTML:{__html:this.props.message.info}}))}}]),a}(n.Component),Ut=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this,t=this.props.messages.map((function(t,a){var i="";switch(t.status){case"RunningMarxan":i="logItem logMessage",Object.assign(t,{info:t.info.replace(/(\n\n {2}Init)/gm,"\n  Init").replace(/(\n\n {2}ThermalAnnealing)/gm,"\n  ThermalAnnealing").replace(/(\n\n {2}Iterative)/gm,"\n  Iterative").replace(/(\n\n {2}Best)/gm,"\n  Best")});break;case"Started":case"Uploading":i="logItem logStart";break;case"Preprocessing":case"FeatureCreated":i="logItem logMessageBlock";break;case"Finished":case"UploadComplete":i="logItem logFinish";break;default:i="logItem logNone"}return t.hasOwnProperty("error")&&Object.assign(t,{info:t.error}),n.createElement(_t,{message:t,key:a,preprocessing:e.props.preprocessing,className:i})}));return n.createElement("div",{id:"log",onMouseEnter:this.props.mouseEnter,onMouseLeave:this.props.mouseLeave},t)}}]),a}(n.Component),Mt=a(440),Bt=a.n(Mt),Gt=0,zt=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={showClipboard:!1,selectedSolution:void 0,runtimeStr:"00:00s"},n}return Object(h.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=document.getElementById("log");a&&(a.scrollTop=a.scrollHeight),this.props.solutions!==e.solutions&&this.resetSolution(),this.props&&this.props.preprocessing&&e&&!e.preprocessing&&this.startTimer(),e&&e.preprocessing&&this.props&&!this.props.preprocessing&&this.stopTimer()}},{key:"str_pad_left",value:function(e,t,a){return(new Array(a+1).join(t)+e).slice(-a)}},{key:"startTimer",value:function(){var e=this;Gt=0,this.timer=setInterval((function(){var t=Math.floor(Gt/60),a=Gt-60*t,n=e.str_pad_left(t,"0",2)+":"+e.str_pad_left(a,"0",2);e.setState({runtimeStr:n}),Gt+=1}),1e3)}},{key:"stopTimer",value:function(){clearInterval(this.timer),this.timer=null}},{key:"loadSolution",value:function(e){this.props.loadSolution(e,this.props.owner)}},{key:"mouseEnter",value:function(e){this.setState({showClipboard:!0})}},{key:"mouseLeave",value:function(e){"buttonsDiv"!==e.relatedTarget.id&&this.setState({showClipboard:!1})}},{key:"selectText",value:function(e){if(e=document.getElementById(e),document.body.createTextRange){var t=document.body.createTextRange();t.moveToElementText(e),t.select()}else if(window.getSelection){var a=window.getSelection(),n=document.createRange();n.selectNodeContents(e),a.removeAllRanges(),a.addRange(n)}else console.warn("Could not select text in node: Unsupported browser.")}},{key:"copyLog",value:function(e){this.selectText("log"),e.target.focus(),document.execCommand("copy")}},{key:"resetSolution",value:function(){this.state.selectedSolution&&this.changeSolution(void 0,void 0)}},{key:"changeSolution",value:function(e,t){this.setState({selectedSolution:t}),t&&this.loadSolution(t.Run_Number)}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{width:"300px",height:"400px",position:"absolute",right:"140px",display:this.props.open?"block":"none"}},i.a.createElement(vt.a,{zDepth:2,className:"ResultsPanelPaper"},i.a.createElement("div",{className:"resultsTitle"},"Results"),i.a.createElement(bt.Tabs,{contentContainerStyle:{margin:"20px"},className:"resultsTabs",value:this.props.activeResultsTab,id:"resultsTabs"},i.a.createElement(bt.Tab,{label:"Legend",value:"legend",onActive:this.props.legend_tab_active},i.a.createElement("div",null,i.a.createElement(Lt,Object.assign({},this.props,{brew:this.props.brew,resultsLayer:this.props.resultsLayer,wdpaLayer:this.props.wdpaLayer,pa_layer_visible:this.props.pa_layer_visible,changeOpacity:this.props.changeOpacity,results_layer_opacity:this.props.results_layer_opacity,wdpa_layer_opacity:this.props.wdpa_layer_opacity})),i.a.createElement(ce,{icon:i.a.createElement(Ft.a,{style:{height:"20px",width:"20px"}}),title:"Legend Settings",onClick:this.props.openClassificationDialog,style:{top:"447px",position:"absolute",marginLeft:"-7px"},show:void 0!==this.props.resultsLayer}))),i.a.createElement(bt.Tab,{label:"Solutions",value:"solutions",onActive:this.props.solutions_tab_active},i.a.createElement("div",{id:"solutionsPanel",style:{display:this.props.processing?"none":"block"}},this.props.solutions&&this.props.solutions.length>0?i.a.createElement($e.a,{thisRef:this,getTrProps:function(e,t,a,n){return{onClick:function(a){e.thisRef.changeSolution(a,t.original)},style:{background:t.original.Run_Number===(e.thisRef.state.selectedSolution&&e.thisRef.state.selectedSolution.Run_Number)?"aliceblue":""},title:"Click to show on the map"}},className:"solutions_infoTable -highlight",showPagination:!1,minRows:0,pageSize:this.props.solutions.length,noDataText:"",data:this.props.solutions,columns:[{Header:"Run",accessor:"Run_Number",width:40,headerStyle:{textAlign:"left"}},{Header:"Score",accessor:"Score",width:80,headerStyle:{textAlign:"left"}},{Header:"Cost",accessor:"Cost",width:80,headerStyle:{textAlign:"left"}},{Header:"Planning Units",accessor:"Planning_Units",width:50,headerStyle:{textAlign:"left"}},{Header:"Missing Values",accessor:"Missing_Values",width:105,headerStyle:{textAlign:"left"}}]}):null)),i.a.createElement(bt.Tab,{label:"Log",value:"log",onActive:this.props.log_tab_active,style:{display:"ReadOnly"===this.props.userRole?"none":"block"}},i.a.createElement(Ut,{messages:this.props.messages,id:"log",mouseEnter:this.mouseEnter.bind(this),mouseLeave:this.mouseLeave.bind(this),preprocessing:this.props.preprocessing}),i.a.createElement("div",{className:"runtime",style:{display:this.props.preprocessing?"block":"none"}},"Runtime: ",this.state.runtimeStr,"s"),i.a.createElement("div",{id:"buttonsDiv",style:{position:"absolute",top:"430px",right:"16px",padding:"10px"}},i.a.createElement(ce,{icon:i.a.createElement(Bt.a,{style:{height:"20px",width:"20px"}}),title:"Copy to clipboard",onClick:this.copyLog.bind(this),show:this.state.showClipboard}),i.a.createElement(ce,{icon:i.a.createElement(Z.a,{icon:$.m}),title:"Clear log",onClick:this.props.clearLog.bind(this),show:this.state.showClipboard})))),i.a.createElement("div",{className:"processingDiv",style:{display:this.props.preprocessing?"block":"none"},title:"Processing.."},i.a.createElement(vt.a,{zDepth:2},i.a.createElement("div",{className:"processingText"}),i.a.createElement(ue.a,{className:"spin processingSpin",style:{color:"rgb(255, 64, 129)"}}))))))}}]),a}(i.a.Component),Vt=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"onKeyPress",value:function(e,t){13!==t.nativeEvent.keyCode&&27!==t.nativeEvent.keyCode||(this.updateFeatureValue(e,t),this.props.onOk())}},{key:"getHTML",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return i.a.createElement("div",{title:""!==t?t:e},e)}},{key:"getAreaHTML",value:function(e){var t=this.props.feature.protected_area<this.props.feature.target_area&&"Area protected"===e.row.key?"red":"rgba(0, 0, 0, 0.6)";return i.a.createElement("div",{title:C(e.row.value,this.props.reportUnits,!1,6),style:{color:t}},C(e.row.value,this.props.reportUnits,!0))}},{key:"renderKeyCell",value:function(e){return this.getHTML(e.row.key,e.original.hint)}},{key:"updateFeatureValue",value:function(e,t){var a=t.currentTarget.innerHTML;if("target_value"===e&&x(a)||"spf"===e&&w(a)){var n={};n[e]=a,this.props.updateFeature(this.props.feature,n)}else alert("Invalid value")}},{key:"renderValueCell",value:function(e){var t;switch(e.row.key){case"ID":case"Alias":case"Feature class name":t=this.getHTML(e.row.value,e.original.hint);break;case"Description":case"Creation date":t=this.getHTML(e.row.value);break;case"Mapbox ID":t=""===e.row.value||null===e.row.value?this.getHTML("Not available","The feature was not uploaded to Mapbox"):this.getHTML(e.row.value,"The feature was uploaded to Mapbox with this identifier");break;case"Total area":t=-1===e.row.value?this.getHTML("Not calculated","Total areas are not available for imported projects"):this.getAreaHTML(e,e.original.hint);break;case"Target percent":t="ReadOnly"===this.props.userRole?i.a.createElement("div",null,e.row.value):i.a.createElement("div",{contentEditable:!0,suppressContentEditableWarning:!0,title:"Click to edit",onBlur:this.updateFeatureValue.bind(this,"target_value"),onKeyPress:this.onKeyPress.bind(this,"target_value")},e.row.value);break;case"Species Penalty Factor":t="ReadOnly"===this.props.userRole?i.a.createElement("div",null,e.row.value):i.a.createElement("div",{contentEditable:!0,suppressContentEditableWarning:!0,title:"Click to edit",onBlur:this.updateFeatureValue.bind(this,"spf"),onKeyPress:this.onKeyPress.bind(this,"spf")},e.row.value);break;case"Preprocessed":t=e.row.value?this.getHTML("Yes","The feature has been intersected with the planning units"):this.getHTML("No","The feature has not yet been intersected with the planning units");break;case"Planning grid area":t=-1===e.row.value?this.getHTML("Not calculated","Calculated during pre-processing"):this.getAreaHTML(e);break;case"Planning unit count":t=-1===e.row.value?this.getHTML("Not calculated","Calculated during pre-processing"):this.getHTML(e.row.value);break;case"Target area":case"Area protected":t=-1===e.row.value?this.getHTML("Not calculated","Calculated during a Marxan run"):this.getAreaHTML(e)}return t}},{key:"render",value:function(){var e=this;if(this.props.feature){var t=[];return this.props.FEATURE_PROPERTIES.forEach((function(a){(!e.props.feature.old_version&&a.showForNew||e.props.feature.old_version&&a.showForOld)&&t.push({key:a.key,value:e.props.feature[a.name],hint:a.hint})}),this),i.a.createElement(de,Object.assign({title:"Properties"},this.props,{contentWidth:380,helpLink:"user.html#feature-properties-window",offsetX:135,offsetY:250,children:i.a.createElement($e.a,{showPagination:!1,className:this.props.feature.old_version?"infoTableOldVersion":"infoTable",minRows:0,pageSize:t.length,data:t,noDataText:"",columns:[{Header:"Key",accessor:"key",width:150,headerStyle:{textAlign:"left"},Cell:function(t){return e.renderKeyCell(t)}},{Header:"Value",accessor:"value",width:185,headerStyle:{textAlign:"left"},Cell:function(t){return e.renderValueCell(t)}}],key:"k9"})}))}return null}}]),a}(i.a.Component),Wt=a(87),Ht=a.n(Wt),Kt=a(180),Qt=a.n(Kt),Xt=a(441),Yt=a.n(Xt),qt=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={searchText:"",selectedProject:void 0},n}return Object(h.a)(a,[{key:"_delete",value:function(){this.props.deleteProject(this.state.selectedProject.user,this.state.selectedProject.name),this.setState({selectedProject:!1})}},{key:"load",value:function(){!0===this.props.oldVersion&&!1===this.state.selectedProject.oldVersion?this.props.getAllFeatures().then(function(){this.loadAndClose()}.bind(this)):this.loadAndClose()}},{key:"loadAndClose",value:function(){this.props.loadProject(this.state.selectedProject.name,this.state.selectedProject.user),this.closeDialog()}},{key:"showImportProjectPopover",value:function(e){this.setState({importProjectAnchor:e.currentTarget}),this.props.showImportProjectPopover()}},{key:"_new",value:function(){this.props.getAllFeatures().then(function(){this.props.openNewProjectDialog(),this.closeDialog()}.bind(this))}},{key:"cloneProject",value:function(){this.props.cloneProject(this.state.selectedProject.user,this.state.selectedProject.name)}},{key:"exportProject",value:function(){this.props.exportProject(this.state.selectedProject.user,this.state.selectedProject.name).then((function(e){window.location=e})),this.closeDialog()}},{key:"openImportProjectDialog",value:function(){this.props.openImportProjectDialog(),this.closeDialog()}},{key:"openImportMXWDialog",value:function(){this.props.openImportMXWDialog(),this.closeDialog()}},{key:"changeProject",value:function(e,t){this.setState({selectedProject:t})}},{key:"closeDialog",value:function(){this.setState({selectedProject:void 0}),this.props.onOk()}},{key:"sortDate",value:function(e,t,a){return new Date(e.slice(6,8),e.slice(3,5)-1,e.slice(0,2),e.slice(9,11),e.slice(12,14),e.slice(15,17))>new Date(t.slice(6,8),t.slice(3,5)-1,t.slice(0,2),t.slice(9,11),t.slice(12,14),t.slice(15,17))?1:-1}},{key:"renderTitle",value:function(e){return i.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#dadada",borderRadius:"2px"},title:e.original.description},e.original.description)}},{key:"renderName",value:function(e){return i.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#dadada",borderRadius:"2px"},title:e.original.name},e.original.name)}},{key:"searchTextChanged",value:function(e){this.setState({searchText:e})}},{key:"render",value:function(){var e=[];return e=["Admin","ReadOnly"].includes(this.props.userRole)?[{Header:"User",accessor:"user",width:90,headerStyle:{textAlign:"left"}},{Header:"Name",accessor:"name",width:200,headerStyle:{textAlign:"left"},Cell:this.renderName.bind(this)},{Header:"Description",accessor:"description",width:315,headerStyle:{textAlign:"left"},Cell:this.renderTitle.bind(this)},{Header:"Date",accessor:"createdate",width:115,headerStyle:{textAlign:"left"},sortMethod:this.sortDate.bind(this)}]:[{Header:"Name",accessor:"name",width:170,headerStyle:{textAlign:"left"},Cell:this.renderName.bind(this)},{Header:"Description",accessor:"description",width:330,headerStyle:{textAlign:"left"},Cell:this.renderTitle.bind(this)},{Header:"Date",accessor:"createdate",width:220,headerStyle:{textAlign:"left"},sortMethod:this.sortDate.bind(this)}],this.props.projects?i.a.createElement(de,Object.assign({},this.props,{okLabel:"ReadOnly"===this.props.userRole?"Open (Read-only)":"Open",onOk:this.load.bind(this),onCancel:this.closeDialog.bind(this),okDisabled:!this.state.selectedProject,showCancelButton:!0,helpLink:"user.html#the-projects-window",autoDetectWindowHeight:!1,bodyStyle:{padding:"0px 24px 0px 24px"},title:"Projects",showSearchBox:!0,searchTextChanged:this.searchTextChanged.bind(this),children:i.a.createElement(i.a.Fragment,{key:"k2"},i.a.createElement("div",{id:"projectsTable"},i.a.createElement(tt,{data:this.props.projects,columns:e,searchColumns:["user","name","description"],searchText:this.state.searchText,selectedProject:this.state.selectedProject,changeProject:this.changeProject.bind(this),getTrProps:function(e,t,a){return{style:{background:t.original.user===(e.selectedProject&&e.selectedProject.user)&&t.original.name===(e.selectedProject&&e.selectedProject.name)?"aliceblue":""},onClick:function(a){e.changeProject(a,t.original)}}}})),i.a.createElement("div",{id:"projectsToolbar",style:{display:"ReadOnly"===this.props.userRole?"none":"block"}},i.a.createElement(ce,{show:!this.props.unauthorisedMethods.includes("createProject"),icon:i.a.createElement(Z.a,{icon:$.s}),title:"New project",onClick:this._new.bind(this),label:"New"}),i.a.createElement(ce,{show:!("ReadOnly"===this.props.userRole),icon:i.a.createElement(Ht.a,{style:{height:"20px",width:"20px"}}),title:"Import a project from Marxan Web or Marxan DOS",onClick:this.showImportProjectPopover.bind(this),disabled:this.props.loading,label:"Import"}),i.a.createElement(N.a,{open:this.props.importProjectPopoverOpen,anchorEl:this.state.importProjectAnchor,anchorOrigin:{horizontal:"left",vertical:"bottom"},targetOrigin:{horizontal:"left",vertical:"top"},onRequestClose:this.props.hideImportProjectPopover},i.a.createElement(_.a,{desktop:!0},i.a.createElement(we.a,{style:{display:this.props.unauthorisedMethods.includes("importProject")?"none":"inline-block"},primaryText:"From Marxan Web",title:"Import a project from a Marxan Web *.mxw file",onClick:this.openImportMXWDialog.bind(this)}),i.a.createElement(we.a,{style:{display:this.props.unauthorisedMethods.includes("createImportProject")?"none":"inline-block"},primaryText:"From Marxan DOS",title:"Import a project from a Marxan DOS",onClick:this.openImportProjectDialog.bind(this)}))),i.a.createElement(ce,{show:!this.props.unauthorisedMethods.includes("exportProject"),icon:i.a.createElement(Qt.a,{style:{height:"20px",width:"20px"}}),title:"Export project",onClick:this.exportProject.bind(this),disabled:!this.state.selectedProject||this.props.loading||this.state.selectedProject.oldVersion,label:"Export"}),i.a.createElement(ce,{show:!this.props.unauthorisedMethods.includes("cloneProject"),icon:i.a.createElement(Yt.a,{style:{height:"20px",width:"20px"}}),title:"Clone project",onClick:this.cloneProject.bind(this),disabled:!this.state.selectedProject||this.props.loading,label:"Clone"}),i.a.createElement(ce,{show:!this.props.unauthorisedMethods.includes("deleteProject"),icon:i.a.createElement(Z.a,{icon:ee.h,color:"rgb(255, 64, 129)"}),title:"Delete project",disabled:!this.state.selectedProject||this.props.loading,onClick:this._delete.bind(this),label:"Delete"})))})):null}}]),a}(i.a.Component),Jt=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={validName:void 0},n}return Object(h.a)(a,[{key:"changeName",value:function(e,t){this.props.setName(t)}},{key:"changeDescription",value:function(e,t){this.props.setDescription(t)}},{key:"render",value:function(){return n.createElement(n.Fragment,null,n.createElement("div",{style:{marginTop:"-13px"}},n.createElement(be,{style:{width:"310px"},errorText:!1===this.state.validName?"Required field":"",value:this.props.name,onChange:this.changeName.bind(this),floatingLabelText:"Enter a name for the project"}),n.createElement(be,{style:{width:"310px"},value:this.props.description,onChange:this.changeDescription.bind(this),multiLine:!0,rows:3,floatingLabelText:"Enter a description for the project"})))}}]),a}(n.Component),Zt=function(e){Object(m.a)(i,e);var t=Object(d.a)(i);function i(){return Object(u.a)(this,i),t.apply(this,arguments)}return Object(h.a)(i,[{key:"changeItem",value:function(e,t){var a=this.props.items[t];if(null!==a.envelope){var n=this.getLatLngLikeFromWKT(a.envelope);this.props.map.fitBounds(n,{easing:function(e){return 1}})}this.addLayerToMap(a.feature_class_name),this.props.changeItem(a.feature_class_name)}},{key:"getLatLngLikeFromWKT",value:function(e){var t,n,i=a(661);if(i(e).coordinates.length>1){var s=i(e).coordinates[0],r=i(e).coordinates[1];n=[[r[0][1][0],r[0][1][1]],[s[0][1][0]+360,s[0][1][1]]]}else n=[[(t=i(e).coordinates[0])[0][0],t[0][1]],[t[2][0],t[2][1]]];return n}},{key:"addLayerToMap",value:function(e){this.mapboxlayername=e,a(662)("https://api.mapbox.com/v4/"+this.props.mapboxUser+"."+e+".json?access_token="+this.props.registry.MBAT_PUBLIC+"&secure",this.parseUrlExists.bind(this))}},{key:"parseUrlExists",value:function(e,t){!t||200!==t.statusCode?console.log("The MapBox layer does not exist"):("pu_"===this.props.map.getStyle().layers[this.props.map.getStyle().layers.length-1].id.substr(0,3)&&this.props.map.removeLayer(this.props.map.getStyle().layers[this.props.map.getStyle().layers.length-1].id),this.props.map.getSource(this.props.mapboxUser)&&this.props.map.removeSource(this.props.mapboxUser),this.props.map.addSource("blishten",{type:"vector",url:"mapbox://"+this.props.mapboxUser+"."+this.mapboxlayername}),this.props.map.addLayer({id:this.mapboxlayername,type:"fill",source:this.props.mapboxUser,"source-layer":this.mapboxlayername,paint:{"fill-color":"#f08","fill-opacity":.4}}))}},{key:"render",value:function(){return n.createElement(n.Fragment,null,n.createElement(Se.a,{onChange:this.changeItem.bind(this),value:this.props.selectedValue,menuItemStyle:{fontSize:"12px"},labelStyle:{fontSize:"12px"},floatingLabelText:"Select the planning units",floatingLabelFixed:!0,style:{width:this.props.width,verticalAlign:"middle"}},this.props.items.map((function(e){return n.createElement(we.a,{value:e.feature_class_name,primaryText:e.alias,key:e.feature_class_name,style:{fontSize:"12px"},menuItemStyle:{fontSize:"12px"},labelStyle:{fontSize:"12px"}})}))))}}]),i}(n.Component),$t=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={planning_unit_grids_received:!1},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=new E.a.Map({container:this.mapContainer,style:"mapbox://styles/blishten/cjg6jk8vg3tir2spd2eatu5fd",center:[0,0],zoom:2});this.setState({map:e})}},{key:"render",value:function(){var e=this;return n.createElement(n.Fragment,null,n.createElement("div",{className:"newPUDialogPane"},n.createElement("div",null,n.createElement("div",{ref:function(t){return e.mapContainer=t},className:"absolute top right left bottom",style:{width:"352px",height:"300px",marginTop:"50px",marginLeft:"24px"}}),n.createElement("div",{style:{position:"absolute",top:"380px",verticalAlign:"middle"}},n.createElement(Zt,Object.assign({},this.props,{menuItemStyle:{fontSize:"12px"},labelStyle:{fontSize:"12px"},selectedValue:this.props.pu,map:this.state.map,mapboxUser:"blishten",items:this.props.planning_unit_grids,changeItem:this.props.changeItem,disabled:!this.state.planning_unit_grids_received,width:"352px"}))))))}}]),a}(n.Component),ea=a(442),ta=a.n(ea),aa=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={selectedFeature:void 0},n}return Object(h.a)(a,[{key:"componentWillMount",value:function(){kt.ListItem.defaultProps.disableTouchRipple=!0,kt.ListItem.defaultProps.disableFocusRipple=!0}},{key:"changeFeature",value:function(e,t){this.setState({selectedFeature:t})}},{key:"clickListItem",value:function(e){}},{key:"render",value:function(){var e=i.a.createElement(wt.a,{touch:!0,tooltipPosition:"bottom-left"},i.a.createElement(Pt.a,{color:ze.grey400})),t=i.a.createElement(ta.a,{iconButtonElement:e},i.a.createElement(we.a,null,"Info"),i.a.createElement(we.a,{title:"Not implemented"},"View"),i.a.createElement(we.a,{title:"Not implemented"},"Prioritise"));return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"newPUDialogPane"},i.a.createElement("div",null,"Select the costs"),i.a.createElement(kt.List,null,this.props.selectedCosts.map((function(e){return i.a.createElement(kt.ListItem,{disableFocusRipple:!0,primaryText:e.alias,secondaryText:e.description,key:e.id,value:e.alias,rightIconButton:t})}))),i.a.createElement(ce,{label:"Select",onClick:this.props.openCostsDialog})))}}]),a}(i.a.Component),na=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={selectedFeature:void 0,previousRow:void 0,searchText:""},n.filteredRows=[],n}return Object(h.a)(a,[{key:"_delete",value:function(){this.props.deleteFeature(this.state.selectedFeature),this.setState({selectedFeature:void 0})}},{key:"showNewFeaturePopover",value:function(e){this.setState({newFeatureAnchor:e.currentTarget}),this.props.showNewFeaturePopover()}},{key:"showImportFeaturePopover",value:function(e){this.setState({importFeatureAnchor:e.currentTarget}),this.props.showImportFeaturePopover()}},{key:"_openImportFeaturesDialog",value:function(){this.props.onCancel(),this.props.openImportFeaturesDialog("import")}},{key:"_openImportFromWebDialog",value:function(){this.props.onCancel(),this.props.openImportFromWebDialog()}},{key:"_newByDigitising",value:function(){this.onOk(),this.props.initialiseDigitising()}},{key:"openImportGBIFDialog",value:function(){this.props.openImportGBIFDialog(),this.props.onCancel()}},{key:"clickFeature",value:function(e,t){if(this.props.addingRemovingFeatures){if(e.shiftKey){var a=this.getFeaturesBetweenRows(this.state.previousRow,t);this.props.selectFeatures(a)}else this.props.clickFeature(t.original,e.shiftKey,this.state.previousRow);this.setState({previousRow:t})}else this.setState({selectedFeature:t.original})}},{key:"toggleSelectionState",value:function(e,t,a,n){return t.slice(a,n).forEach((function(t){e.includes(t.id)?e.splice(e.indexOf(t.id),1):e.push(t.id)})),e}},{key:"getFeaturesBetweenRows",value:function(e,t){var a=e.index<t.index?e.index+1:t.index,n=e.index<t.index?t.index+1:e.index;return this.filteredRows.length<this.props.allFeatures.length?this.toggleSelectionState(this.props.selectedFeatureIds,this.filteredRows,a,n):this.toggleSelectionState(this.props.selectedFeatureIds,this.props.allFeatures,a,n)}},{key:"selectAllFeatures",value:function(){var e=[];this.filteredRows.length<this.props.allFeatures.length?(this.filteredRows.forEach((function(t){e.push(t.id)})),this.props.selectFeatures(e)):this.props.selectAllFeatures()}},{key:"onOk",value:function(e){this.props.addingRemovingFeatures?this.props.onOk():this.unselectFeature()}},{key:"unselectFeature",value:function(e){this.setState({selectedFeature:void 0}),this.props.onCancel()}},{key:"sortDate",value:function(e,t,a){return new Date(e.slice(6,8),e.slice(3,5)-1,e.slice(0,2),e.slice(9,11),e.slice(12,14),e.slice(15,17))>new Date(t.slice(6,8),t.slice(3,5)-1,t.slice(0,2),t.slice(9,11),t.slice(12,14),t.slice(15,17))?1:-1}},{key:"preview",value:function(e){this.props.previewFeature(e)}},{key:"renderTitle",value:function(e){return i.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#dadada",borderRadius:"2px"},title:e.original.description},e.original.description)}},{key:"renderSource",value:function(e){return i.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#dadada",borderRadius:"2px"},title:e.original.source},e.original.source)}},{key:"renderPreview",value:function(e){return i.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#dadada",borderRadius:"2px"},title:"Click to preview"},"..")}},{key:"searchTextChanged",value:function(e){this.setState({searchText:e})}},{key:"dataFiltered",value:function(e){this.filteredRows=e}},{key:"render",value:function(){return this.props.allFeatures?i.a.createElement(de,Object.assign({},this.props,{autoDetectWindowHeight:!1,bodyStyle:{padding:"0px 24px 0px 24px"},title:"Features",onOk:this.onOk.bind(this),showCancelButton:this.props.addingRemovingFeatures,helpLink:"user.html#the-features-window",showSearchBox:!0,searchTextChanged:this.searchTextChanged.bind(this),children:i.a.createElement(i.a.Fragment,{key:"k10"},i.a.createElement("div",{id:"projectsTable"},i.a.createElement(tt,{data:this.props.allFeatures,searchColumns:["alias","description","source"],searchText:this.state.searchText,dataFiltered:this.dataFiltered.bind(this),addingRemovingFeatures:this.props.addingRemovingFeatures,selectedFeatureIds:this.props.selectedFeatureIds,selectedFeature:this.state.selectedFeature,clickFeature:this.clickFeature.bind(this),preview:this.preview.bind(this),columns:[{Header:"Name",accessor:"alias",width:193,headerStyle:{textAlign:"left"}},{Header:"Description",accessor:"description",width:246,headerStyle:{textAlign:"left"},Cell:this.renderTitle.bind(this)},{Header:"Source",accessor:"source",width:120,headerStyle:{textAlign:"left"},Cell:this.renderSource.bind(this)},{Header:"Date",accessor:"creation_date",width:115,headerStyle:{textAlign:"left"},sortMethod:this.sortDate.bind(this)},{Header:"",width:8,headerStyle:{textAlign:"center"},Cell:this.renderPreview.bind(this)}],getTrProps:function(e,t,a){return{style:{background:e.addingRemovingFeatures&&e.selectedFeatureIds.includes(t.original.id)||!e.addingRemovingFeatures&&e.selectedFeature&&e.selectedFeature.id===t.original.id?"aliceblue":""},onClick:function(a){e.clickFeature(a,t)}}},getTdProps:function(e,t,a){return{onClick:function(n){""===a.Header&&e.preview(t.original)}}}})),i.a.createElement("div",{id:"projectsToolbar"},i.a.createElement("div",{style:{display:this.props.metadata.OLDVERSION?"block":"none"},className:"tabTitle"},"This is an imported project. Only features from this project are shown."),i.a.createElement(ce,{show:"ReadOnly"!==this.props.userRole&&!this.props.metadata.OLDVERSION&&!this.props.addingRemovingFeatures,icon:i.a.createElement(Z.a,{icon:$.s}),title:"New feature",disabled:this.props.loading,onClick:this.showNewFeaturePopover.bind(this),label:"New"}),i.a.createElement(N.a,{open:this.props.newFeaturePopoverOpen,anchorEl:this.state.newFeatureAnchor,anchorOrigin:{horizontal:"left",vertical:"bottom"},targetOrigin:{horizontal:"left",vertical:"top"},onRequestClose:this.props.hideNewFeaturePopover},i.a.createElement(_.a,{desktop:!0},i.a.createElement(we.a,{primaryText:"Draw on screen",title:"Create a new feature by digitising it on the screen",onClick:this._newByDigitising.bind(this)}))),i.a.createElement(ce,{show:!this.props.metadata.OLDVERSION&&!this.props.addingRemovingFeatures&&"ReadOnly"!==this.props.userRole,icon:i.a.createElement(Ht.a,{style:{height:"20px",width:"20px"}}),title:"Create new features from existing data",disabled:this.props.loading,onClick:this.showImportFeaturePopover.bind(this),label:"Import"}),i.a.createElement(N.a,{open:this.props.importFeaturePopoverOpen,anchorEl:this.state.importFeatureAnchor,anchorOrigin:{horizontal:"left",vertical:"bottom"},targetOrigin:{horizontal:"left",vertical:"top"},onRequestClose:this.props.hideImportFeaturePopover},i.a.createElement(_.a,{desktop:!0},i.a.createElement(we.a,{primaryText:"From a shapefile",title:"Import one or more features from a shapefile",onClick:this._openImportFeaturesDialog.bind(this)}),i.a.createElement(we.a,{primaryText:"From the web",title:"Import one or more features from a web resource",onClick:this._openImportFromWebDialog.bind(this)}),i.a.createElement(we.a,{primaryText:"From the Global Biodiversity Information Facility",title:"The worlds largest provider of species observations",onClick:this.openImportGBIFDialog.bind(this)}),i.a.createElement(we.a,{primaryText:"From the IUCN Red List of Threatened Species",disabled:!0}))),i.a.createElement(ce,{show:"Admin"===this.props.userRole&&!this.props.metadata.OLDVERSION&&!this.props.addingRemovingFeatures,icon:i.a.createElement(Z.a,{icon:ee.h,color:"rgb(255, 64, 129)"}),title:"Delete feature",disabled:void 0===this.state.selectedFeature||this.props.loading||this.state.selectedFeature&&"global admin"===this.state.selectedFeature.created_by,onClick:this._delete.bind(this),label:"Delete"}),i.a.createElement(ce,{show:this.props.addingRemovingFeatures,icon:i.a.createElement(Z.a,{icon:ee.d}),title:"Clear all features",onClick:this.props.clearAllFeatures,label:"Clear all"}),i.a.createElement(ce,{show:this.props.addingRemovingFeatures,icon:i.a.createElement(Z.a,{icon:ee.c}),title:"Select all features",onClick:this.selectAllFeatures.bind(this),label:"Select all"})))})):null}}]),a}(i.a.Component),ia=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleNext=function(){var e=n.state.stepIndex;n.setState({stepIndex:e+1})},n.handlePrev=function(){var e=n.state.stepIndex;e>0&&n.setState({stepIndex:e-1})},n.state={steps:["Info","Planning units","Features"],loadingFeatures:!1,finished:!1,stepIndex:0,name:"",description:"",pu:"",featuresDialogOpen:!1,allFeatures:[],selectedFeatureIds:[]},n}return Object(h.a)(a,[{key:"componentDidUpdate",value:function(e,t){e.features!==this.props.features&&this.setState({allFeatures:JSON.parse(JSON.stringify(this.props.features))})}},{key:"openFeaturesDialog",value:function(){this.setState({featuresDialogOpen:!0})}},{key:"setName",value:function(e){this.setState({name:e})}},{key:"setDescription",value:function(e){this.setState({description:e})}},{key:"changePU",value:function(e){this.setState({pu:e})}},{key:"onOk",value:function(e){this.gotoStart(),this.props.onOk()}},{key:"gotoStart",value:function(){this.setState({stepIndex:0})}},{key:"closeFeaturesDialog",value:function(){this.setState({featuresDialogOpen:!1})}},{key:"updateSelectedFeatures",value:function(){var e=this,t=this.state.allFeatures;t.forEach((function(t){e.state.selectedFeatureIds.includes(t.id)?Object.assign(t,{selected:!0}):Object.assign(t,{selected:!1})}),this),this.setState({allFeatures:t}),this.closeFeaturesDialog()}},{key:"clickFeature",value:function(e){this.state.selectedFeatureIds.includes(e.id)?this.removeFeature(e):this.addFeature(e)}},{key:"selectAllFeatures",value:function(){var e=[];this.state.allFeatures.forEach((function(t){e.push(t.id)})),this.selectFeatures(e)}},{key:"clearAllFeatures",value:function(){this.setState({selectedFeatureIds:[]})}},{key:"selectFeatures",value:function(e){this.setState({selectedFeatureIds:e})}},{key:"removeFeature",value:function(e){var t=this.state.selectedFeatureIds;return t=t.filter((function(t,a,n){return t!==e.id})),new Promise(function(e,a){this.setState({selectedFeatureIds:t},(function(){e()}))}.bind(this))}},{key:"addFeature",value:function(e){var t=this.state.selectedFeatureIds;t.push(e.id),this.setState({selectedFeatureIds:t})}},{key:"createNewProject",value:function(){this.props.createNewProject({name:this.state.name,description:this.state.description,planning_grid_name:this.state.pu,features:this.state.allFeatures.filter((function(e){return e.selected}))}),this.onOk()}},{key:"render",value:function(){var e=this.state.stepIndex,t=[i.a.createElement("div",{style:{width:"100%",maxWidth:"500px",margin:"auto",textAlign:"center"}},i.a.createElement("div",{style:{margin:"0 16px"}},i.a.createElement("div",{style:{marginTop:12}},i.a.createElement(ce,{label:"Back",disabled:0===e,onClick:this.handlePrev}),i.a.createElement(ce,{label:e===this.state.steps.length-1?"Finish":"Next",onClick:e===this.state.steps.length-1?this.createNewProject.bind(this):this.handleNext,primary:!0,disabled:0===e&&(""===this.state.name||""===this.state.description)||1===e&&""===this.state.pu||2===e&&0===this.state.selectedFeatureIds.length}))))],a=i.a.createElement("div",{key:"k3"},0===e?i.a.createElement(Jt,{name:this.state.name,description:this.state.description,setName:this.setName.bind(this),setDescription:this.setDescription.bind(this)}):null,1===e?i.a.createElement($t,Object.assign({},this.props,{getPlanningUnitGrids:this.props.getPlanningUnitGrids,planning_unit_grids:this.props.planning_unit_grids,changeItem:this.changePU.bind(this),pu:this.state.pu,openImportPlanningGridDialog:this.props.openImportPlanningGridDialog})):null,2===e?i.a.createElement("div",{style:{height:"390px"}},i.a.createElement("div",{className:"tabTitle"},"Select the features"),i.a.createElement(Dt,{features:this.state.allFeatures.filter((function(e){return e.selected})),openFeaturesDialog:this.openFeaturesDialog.bind(this),simple:!0,showTargetButton:!1,leftmargin:"0px",maxheight:"356px"})):null,3===e?i.a.createElement(aa,{openCostsDialog:this.props.openCostsDialog,selectedCosts:this.props.selectedCosts}):null);return i.a.createElement(i.a.Fragment,null,i.a.createElement(de,Object.assign({},this.props,{title:"New project",contentWidth:400,children:a,actions:t,okLabel:"Cancel",onOk:this.onOk.bind(this),onCancel:this.onOk.bind(this),onRequestClose:this.onOk.bind(this),helpLink:"user.html#creating-new-projects"})),i.a.createElement(na,{open:this.state.featuresDialogOpen,onOk:this.updateSelectedFeatures.bind(this),onCancel:this.closeFeaturesDialog.bind(this),loadingFeatures:this.state.loadingFeatures,allFeatures:this.state.allFeatures,selectAllFeatures:this.selectAllFeatures.bind(this),clearAllFeatures:this.clearAllFeatures.bind(this),selectFeatures:this.selectFeatures.bind(this),clickFeature:this.clickFeature.bind(this),addingRemovingFeatures:!0,selectedFeatureIds:this.state.selectedFeatureIds,metadata:{OLDVERSION:!1},userRole:"User",previewFeature:this.props.previewFeature}))}}]),a}(i.a.Component),sa=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleNext=function(){n.setState({stepIndex:n.state.stepIndex+1})},n.handlePrev=function(){n.setState({stepIndex:n.state.stepIndex-1})},n.state={domainEnabled:!0,steps:["Country","Planning units","Habitats","Species","Existing PAs"],stepIndex:0,stepComplete:!1,iso3:"",country:"",domain:"",shape:"Hexagon",areakm2:50,worldEcosystems:!1,allSpecies:!1,endemicSpecies:!1,endangeredSpecies:!1,includeExistingPAs:!1,iucn_category:"None"},n}return Object(h.a)(a,[{key:"getComplete",value:function(){var e=!1;switch(this.state.stepIndex){case 0:e=""!==this.state.country&&""!==this.state.domain;break;case 1:e=""!==this.state.shape&&0!==this.state.areakm2}this.setState({stepComplete:e})}},{key:"changeCountry",value:function(e,t){var a=this;this.props.countries[t].has_marine?this.setState({domainEnabled:!0}):(this.changeDomain(null,1),this.setState({domainEnabled:!1})),this.setState({iso3:this.props.countries[t].iso3,country:this.props.countries[t].name_iso31},(function(){return a.getComplete()}))}},{key:"changeDomain",value:function(e,t){var a=this;this.setState({domain:this.props.domains[t]},(function(){return a.getComplete()}))}},{key:"changeShape",value:function(e,t){var a=this;this.setState({shape:this.props.shapes[t]},(function(){return a.getComplete()}))}},{key:"changeAreaKm2",value:function(e,t){var a=this;this.setState({areakm2:this.props.areakm2s[t]},(function(){return a.getComplete()}))}},{key:"toggleWorldEcosystems",value:function(e,t){this.setState({worldEcosystems:t})}},{key:"toggleAllSpecies",value:function(e,t){this.setState({allSpecies:t})}},{key:"toggleEndemicSpecies",value:function(e,t){this.setState({endemicSpecies:t})}},{key:"toggleEndangeredSpecies",value:function(e,t){this.setState({endangeredSpecies:t})}},{key:"toggleIncludeExistingPAs",value:function(e,t){this.setState({includeExistingPAs:t})}},{key:"changeIucnCategory",value:function(e,t){this.setState({iucn_category:this.props.iucn_categories[t]})}},{key:"createNewNationalProject",value:function(){this.props.createNewNationalProject(this.state)}},{key:"render",value:function(){var e={width:"240px"},t=[n.createElement("div",{style:{width:"100%",maxWidth:"500px",margin:"auto",textAlign:"center"}},n.createElement("div",{style:{margin:"0 16px"}},n.createElement("div",{style:{marginTop:12}},n.createElement(ce,{label:"Back",disabled:0===this.state.stepIndex,onClick:this.handlePrev}),n.createElement(ce,{label:this.state.stepIndex===this.state.steps.length-1?"Finish":"Next",onClick:this.state.stepIndex===this.state.steps.length-1?this.createNewNationalProject.bind(this):this.handleNext,primary:!0,disabled:!this.state.stepComplete}))))],a=n.createElement("div",{className:"newNationalProjectContent"},0===this.state.stepIndex?n.createElement(n.Fragment,{key:"_wiz01"},n.createElement("div",null,"Choose a country and domain"),n.createElement(Se.a,{menuItemStyle:{fontSize:"12px"},labelStyle:{fontSize:"12px"},onChange:this.changeCountry.bind(this),value:this.state.iso3,floatingLabelText:"Country",floatingLabelFixed:!0},this.props.countries.map((function(e){return n.createElement(we.a,{style:{fontSize:"12px"},value:e.iso3,primaryText:e.name_iso31,key:e.iso3})}))),n.createElement("br",null),n.createElement(Se.a,{menuItemStyle:{fontSize:"12px"},labelStyle:{fontSize:"12px"},onChange:this.changeDomain.bind(this),value:this.state.domain,style:e,floatingLabelText:"Domain",floatingLabelFixed:!0,disabled:!this.state.domainEnabled},this.props.domains.map((function(e){return n.createElement(we.a,{style:{fontSize:"12px"},value:e,primaryText:e,key:e})})))):null,1===this.state.stepIndex?n.createElement(n.Fragment,{key:"_wiz02"},n.createElement("div",null,"Choose the shape and size of the planning units"),n.createElement(Se.a,{menuItemStyle:{fontSize:"12px"},labelStyle:{fontSize:"12px"},onChange:this.changeShape.bind(this),value:this.state.shape,style:e,floatingLabelText:"Planning unit shape",floatingLabelFixed:!0},this.props.shapes.map((function(e){return n.createElement(we.a,{style:{fontSize:"12px"},value:e,primaryText:e,key:e})}))),n.createElement("br",null),n.createElement(Se.a,{menuItemStyle:{fontSize:"12px"},labelStyle:{fontSize:"12px"},onChange:this.changeAreaKm2.bind(this),value:this.state.areakm2,style:e,floatingLabelText:"Area of each planning unit",floatingLabelFixed:!0},this.props.areakm2s.map((function(e){return n.createElement(we.a,{style:{fontSize:"12px"},value:e,primaryText:e+" Km2",key:e})})))):null,2===this.state.stepIndex?n.createElement(n.Fragment,{key:"_wiz03"},n.createElement("div",null,"What habitats do you want to include in your project?"),n.createElement("div",{className:"habitatsList"},n.createElement(Ne.a,{label:"World Ecosystems",style:{fontSize:"12px"},onCheck:this.toggleWorldEcosystems.bind(this)}))):null,3===this.state.stepIndex?n.createElement(n.Fragment,{key:"_wiz04"},n.createElement("div",null,"What species do you want to include in your project?"),n.createElement("div",{className:"speciesList"},n.createElement(Ne.a,{label:"All species that occur in "+this.state.country,style:{fontSize:"12px"},onCheck:this.toggleAllSpecies.bind(this)}),n.createElement(Ne.a,{label:"All species that are endemic to "+this.state.country,style:{fontSize:"12px"},onCheck:this.toggleEndemicSpecies.bind(this)}),n.createElement(Ne.a,{label:"All endangered species that occur in "+this.state.country,style:{fontSize:"12px"},onCheck:this.toggleEndangeredSpecies.bind(this)}))):null,4===this.state.stepIndex?n.createElement(n.Fragment,{key:"_wiz05"},n.createElement("div",null,"Do you want to include existing protected areas?"),n.createElement("div",{className:"speciesList"},n.createElement(Ne.a,{label:"Include existing protected areas",style:{fontSize:"12px"},onCheck:this.toggleIncludeExistingPAs.bind(this)}),n.createElement(Se.a,{menuItemStyle:{fontSize:"12px"},labelStyle:{fontSize:"12px"},onChange:this.changeIucnCategory.bind(this),value:this.state.iucn_category,style:e,floatingLabelText:"IUCN Category",floatingLabelFixed:!0,disabled:!this.state.includeExistingPAs},this.props.iucn_categories.map((function(e){return n.createElement(we.a,{value:e,key:e,primaryText:e,style:{fontSize:"12px"}})}))))):null);return n.createElement(de,Object.assign({},this.props,{title:"New national project",contentWidth:600,showCancelButton:!0,onCancel:this.props.closeNewProjectWizardDialog,onRequestClose:this.props.closeNewProjectWizardDialog,helpLink:"user.html#creating-new-projects",actions:t,children:a}))}}]),a}(n.Component),ra=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"renderName",value:function(e){return i.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#dadada",borderRadius:"2px"},title:e.original.name},e.original.name)}},{key:"render",value:function(){var e=[];return e=["Admin"].includes(this.props.userRole)?[{Header:"User",accessor:"user",width:90,headerStyle:{textAlign:"left"}},{Header:"Name",accessor:"name",width:200,headerStyle:{textAlign:"left"},Cell:this.renderName.bind(this)}]:[{Header:"Name",accessor:"name",width:200,headerStyle:{textAlign:"left"},Cell:this.renderName.bind(this)}],this.props.projects?i.a.createElement(de,Object.assign({},this.props,{showCancelButton:!1,autoDetectWindowHeight:!1,bodyStyle:{padding:"0px 24px 0px 24px"},title:this.props.title,contentWidth:500,helpLink:"user.html#deleting-features",children:i.a.createElement(i.a.Fragment,{key:"k24"},i.a.createElement("div",{style:{marginBottom:"5px"}},this.props.heading),i.a.createElement("div",{id:"failedProjectsTable"},i.a.createElement($e.a,{pageSize:this.props.projects.length,className:"projectsReactTable",showPagination:!1,minRows:0,noDataText:"",data:this.props.projects,thisRef:this,columns:e})))})):null}}]),a}(i.a.Component),oa=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.map=new E.a.Map({container:this.mapContainer,style:"mapbox://styles/blishten/cjg6jk8vg3tir2spd2eatu5fd",center:[0,0],zoom:2,attributionControl:!1}),this.map.on("load",(function(t){var a=e.props.color?e.props.color:"rgba(255, 0, 0, 0.4)",n=e.props.outlineColor?e.props.outlineColor:"rgba(255, 0, 0, 0.5)";t.target.addLayer({id:"planning_grid",type:"fill",source:{type:"vector",url:"mapbox://"+e.props.planning_grid_metadata.tilesetid},"source-layer":e.props.planning_grid_metadata.feature_class_name,paint:{"fill-color":a,"fill-opacity":.9,"fill-outline-color":n}})})),this.props.getTilesetMetadata(this.props.planning_grid_metadata.tilesetid).then((function(t){null!=t.bounds&&O(e.map,t.bounds)})).catch((function(t){e.props.setSnackBar(t)}))}},{key:"componentWillUnmount",value:function(){this.map&&this.map.remove()}},{key:"render",value:function(){var e=this;return n.createElement(n.Fragment,null,n.createElement("div",{className:"floatLeft mapContainer2"},n.createElement("div",null,n.createElement("div",{ref:function(t){return e.mapContainer=t},className:"absolute top right left bottom",style:{width:"352px",height:"300px",marginTop:"50px",marginLeft:"24px"}}))))}}]),a}(n.Component),la=a(67),ca=a.n(la),pa=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={expanded:!1},n}return Object(h.a)(a,[{key:"expand",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"getProjectList",value:function(){this.props.getProjectList(this.props.planning_grid_metadata,"planning_grid")}},{key:"render",value:function(){var e=this.props.planning_grid_metadata._area?i.a.createElement("td",{className:"metadataItemValue"},this.props.planning_grid_metadata._area,"Km",i.a.createElement("span",{className:"superscript"},"2")):i.a.createElement("td",null);return i.a.createElement(de,Object.assign({},this.props,{onRequestClose:this.props.onCancel,showCancelButton:!1,title:this.props.planning_grid_metadata.alias,helpLink:"user.html#the-planning-grid-details-window",contentWidth:768,children:i.a.createElement(i.a.Fragment,{key:"k27"},i.a.createElement(oa,{planning_grid_metadata:this.props.planning_grid_metadata,getTilesetMetadata:this.props.getTilesetMetadata,setSnackBar:this.props.setSnackBar}),i.a.createElement("div",{className:"metadataPanel"},i.a.createElement("table",null,i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",{colSpan:"2",className:"metadataItemTitle"},"Description:")),i.a.createElement("tr",null,i.a.createElement("td",{colSpan:"2",className:"metadataItemValue2"},this.props.planning_grid_metadata.description)),i.a.createElement("tr",null,i.a.createElement("td",{className:"metadataItemTitle"},"Country:"),i.a.createElement("td",{className:"metadataItemValue"},this.props.planning_grid_metadata.country)),i.a.createElement("tr",null,i.a.createElement("td",{className:"metadataItemTitle"},"Domain:"),i.a.createElement("td",{className:"metadataItemValue"},this.props.planning_grid_metadata.domain)),i.a.createElement("tr",null,i.a.createElement("td",{className:"metadataItemTitle"},"Area:"),e),i.a.createElement("tr",null,i.a.createElement("td",{className:"metadataItemTitle"},"Unit count:"),i.a.createElement("td",{className:"metadataItemValue"},this.props.planning_grid_metadata.planning_unit_count)),i.a.createElement("tr",null,i.a.createElement("td",{className:"metadataItemTitle"},"Author:"),i.a.createElement("td",{className:"metadataItemValue"},this.props.planning_grid_metadata.created_by)),i.a.createElement("tr",null,i.a.createElement("td",{className:"metadataItemTitle"},"Created:"),i.a.createElement("td",{className:"metadataItemValue"},this.props.planning_grid_metadata.creation_date)),i.a.createElement("tr",null,i.a.createElement("td",{className:"metadataItemTitle"},"Source:"),i.a.createElement("td",{className:"metadataItemValue"},this.props.planning_grid_metadata.source)),i.a.createElement("tr",{style:{display:this.state.expanded?"table-row":"none"}},i.a.createElement("td",{className:"metadataItemTitle"},"aoi_id:"),i.a.createElement("td",{className:"metadataItemValue"},this.props.planning_grid_metadata.aoi_id)),i.a.createElement("tr",{style:{display:this.state.expanded?"table-row":"none"}},i.a.createElement("td",{className:"metadataItemTitle"},"tilesetid:"),i.a.createElement("td",{className:"metadataItemValue"},this.props.planning_grid_metadata.tilesetid)),i.a.createElement("tr",{style:{display:this.state.expanded?"table-row":"none"}},i.a.createElement("td",{className:"metadataItemTitle"},"Projects:"),i.a.createElement("td",{className:"metadataItemValue"},i.a.createElement(ca.a,{name:"external-link-alt",onClick:this.getProjectList.bind(this),title:"View a list of projects that this planning grid is used in",style:{cursor:"pointer",paddingTop:"6px"}}))))),i.a.createElement("div",{onClick:this.expand.bind(this),title:this.state.expanded?"Show less details":"Show more details",className:"textHyperlink"},this.state.expanded?"less":"more.."),i.a.createElement("div",null,"You may need to zoom in to see the planning grid units")))}))}}]),a}(i.a.Component),ua=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={searchText:"",selectedPlanningGrid:void 0},n}return Object(h.a)(a,[{key:"_delete",value:function(){this.props.deletePlanningGrid(this.state.selectedPlanningGrid.feature_class_name),this.setState({selectedPlanningGrid:!1})}},{key:"_new",value:function(){this.props.openNewPlanningGridDialog(),this.closeDialog()}},{key:"openImportDialog",value:function(){this.props.openImportPlanningGridDialog(),this.closeDialog()}},{key:"exportPlanningGrid",value:function(){this.props.exportPlanningGrid(this.state.selectedPlanningGrid.feature_class_name).then((function(e){window.location=e})),this.closeDialog()}},{key:"changePlanningGrid",value:function(e,t){this.setState({selectedPlanningGrid:t})}},{key:"closeDialog",value:function(){this.setState({selectedPlanningGrid:void 0}),this.props.onOk()}},{key:"preview",value:function(e){this.props.previewPlanningGrid(e)}},{key:"renderName",value:function(e){return i.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#dadada",borderRadius:"2px"},title:e.original.alias+" ("+e.original.feature_class_name+")"},e.original.alias)}},{key:"renderTitle",value:function(e){return i.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#dadada",borderRadius:"2px"},title:e.original.description},e.original.description)}},{key:"renderCountry",value:function(e){return i.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#dadada",borderRadius:"2px"},title:e.original.country},e.original.country)}},{key:"renderArea",value:function(e){return i.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#dadada",borderRadius:"2px"}},isNaN(e.original._area)?"":e.original._area)}},{key:"renderPreview",value:function(e){return i.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#dadada",borderRadius:"2px"},title:"Click to preview"},"..")}},{key:"searchTextChanged",value:function(e){this.setState({searchText:e})}},{key:"render",value:function(){var e,t=this;return e=[{Header:"Name",accessor:"alias",width:215,headerStyle:{textAlign:"left"},Cell:this.renderName.bind(this)},{Header:"Description",accessor:"description",width:258,headerStyle:{textAlign:"left"},Cell:this.renderTitle.bind(this)},{Header:"Country",accessor:"country",width:70,headerStyle:{textAlign:"left"},Cell:this.renderCountry.bind(this)},{Header:"Domain",accessor:"domain",width:70,headerStyle:{textAlign:"left"}},{Header:"Area (Km2)",accessor:"_area",width:73,headerStyle:{textAlign:"left"},Cell:this.renderArea.bind(this)},{Header:"",width:8,headerStyle:{textAlign:"center"},Cell:this.renderPreview.bind(this)}],i.a.createElement(de,Object.assign({},this.props,{onOk:this.closeDialog.bind(this),showCancelButton:!1,helpLink:"user.html#the-planning-grids-window",autoDetectWindowHeight:!1,bodyStyle:{padding:"0px 24px 0px 24px"},title:"Planning grids",showSearchBox:!0,searchTextChanged:this.searchTextChanged.bind(this),children:i.a.createElement(i.a.Fragment,{key:"k2"},i.a.createElement("div",{id:"projectsTable"},i.a.createElement(tt,{data:this.props.planningGrids,columns:e,searchColumns:["country","domain","alias","description"],searchText:this.state.searchText,selectedPlanningGrid:this.state.selectedPlanningGrid,changePlanningGrid:this.changePlanningGrid.bind(this),getTrProps:function(e,t){return{style:{background:t.original.alias===(e.selectedPlanningGrid&&e.selectedPlanningGrid.alias)?"aliceblue":""},onClick:function(a){e.changePlanningGrid(a,t.original)}}},getTdProps:function(e,a,n){return{onClick:function(e){""===n.Header&&t.preview(a.original)}}}})),i.a.createElement("div",{id:"projectsToolbar",style:{display:"ReadOnly"===this.props.userRole?"none":"block"}},i.a.createElement(ce,{show:!this.props.unauthorisedMethods.includes("createPlanningUnitGrid"),icon:i.a.createElement(Z.a,{icon:$.s}),title:"New planning grid",onClick:this._new.bind(this),label:"New"}),i.a.createElement(ce,{show:!this.props.unauthorisedMethods.includes("importPlanningUnitGrid"),icon:i.a.createElement(Ht.a,{style:{height:"20px",width:"20px"}}),title:"Import an existing planning grid from the local machine",onClick:this.openImportDialog.bind(this),label:"Import"}),i.a.createElement(ce,{show:!this.props.unauthorisedMethods.includes("exportPlanningUnitGrid"),icon:i.a.createElement(Qt.a,{style:{height:"20px",width:"20px"}}),title:"Export planning grid",onClick:this.exportPlanningGrid.bind(this),disabled:!this.state.selectedPlanningGrid||this.props.loading,label:"Export"}),i.a.createElement(ce,{show:!this.props.unauthorisedMethods.includes("deletePlanningUnitGrid"),icon:i.a.createElement(Z.a,{icon:ee.h,color:"rgb(255, 64, 129)"}),title:"Delete planning grid",disabled:!this.state.selectedPlanningGrid||this.props.loading||this.state.selectedPlanningGrid&&"global admin"===this.state.selectedPlanningGrid.created_by,onClick:this._delete.bind(this),label:"Delete"})))}))}}]),a}(i.a.Component),ha=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={iso3:"",domain:"",shape:"",areakm2:void 0,domainEnabled:!0},n}return Object(h.a)(a,[{key:"changeIso3",value:function(e,t){var a=this.props.countries[t].iso3;["FJI","KIR","NZL","RUS","TUV","USA","WLF"].includes(a),this.setState({iso3:this.props.countries[t].iso3}),this.props.countries[t].has_marine?this.setState({domainEnabled:!0}):(this.changeDomain(null,1),this.setState({domainEnabled:!1}))}},{key:"changeDomain",value:function(e,t){this.setState({domain:this.props.domains[t]})}},{key:"changeShape",value:function(e,t){this.setState({shape:this.props.shapes[t]})}},{key:"changeAreaKm2",value:function(e,t){this.setState({areakm2:this.props.areakm2s[t]})}},{key:"onOk",value:function(){this.props.createNewPlanningUnitGrid(this.state.iso3,this.state.domain,this.state.areakm2,this.state.shape).then(function(e){this.props.onCancel()}.bind(this))}},{key:"render",value:function(){var e={width:"240px"};return n.createElement(de,Object.assign({},this.props,{onOk:this.onOk.bind(this),onRequestClose:this.props.onCancel,okDisabled:!this.state.iso3||!this.state.domain||!this.state.areakm2||this.props.loading,cancelLabel:"Cancel",showCancelButton:!0,helpLink:"user.html#creating-new-planning-grids-using-marxan-web",title:"New planning grid",contentWidth:358,children:n.createElement(n.Fragment,{key:"k13"},n.createElement("div",null,n.createElement(Se.a,{menuItemStyle:{fontSize:"12px"},labelStyle:{fontSize:"12px"},onChange:this.changeIso3.bind(this),value:this.state.iso3,floatingLabelText:"Area of interest",floatingLabelFixed:!0},this.props.countries.map((function(e){return n.createElement(we.a,{style:{fontSize:"12px"},value:e.iso3,primaryText:e.name_iso31,key:e.iso3})})))),n.createElement("div",null,n.createElement(Se.a,{menuItemStyle:{fontSize:"12px"},labelStyle:{fontSize:"12px"},onChange:this.changeDomain.bind(this),value:this.state.domain,style:e,floatingLabelText:"Domain",floatingLabelFixed:!0,disabled:!this.state.domainEnabled},this.props.domains.map((function(e){return n.createElement(we.a,{style:{fontSize:"12px"},value:e,primaryText:e,key:e})})))),n.createElement("div",null,n.createElement(Se.a,{menuItemStyle:{fontSize:"12px"},labelStyle:{fontSize:"12px"},onChange:this.changeShape.bind(this),value:this.state.shape,style:e,floatingLabelText:"Planning unit shape",floatingLabelFixed:!0},this.props.shapes.map((function(e){return n.createElement(we.a,{style:{fontSize:"12px"},value:e,primaryText:e,key:e})})))),n.createElement("div",null,n.createElement(Se.a,{menuItemStyle:{fontSize:"12px"},labelStyle:{fontSize:"12px"},onChange:this.changeAreaKm2.bind(this),value:this.state.areakm2,style:e,floatingLabelText:"Area of each planning unit",floatingLabelFixed:!0},this.props.areakm2s.map((function(e){return n.createElement(we.a,{style:{fontSize:"12px"},value:e,primaryText:e+" Km2",key:e})})))))}))}}]),a}(n.Component),da=a(118),ma=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={loading:!1,active:!1},n.onChange=n.onChange.bind(Object(da.a)(n)),n.destFolder=e.hasOwnProperty("destFolder")?e.destFolder:"",n}return Object(h.a)(a,[{key:"onClick",value:function(e){this.setState({active:!0})}},{key:"onChange",value:function(e){var t=this;e.target.files.length&&(this.setState({loading:!0}),this.filename=e.target.files[0].name,this.props.fileUpload(e.target.files[0],this.filename,this.destFolder).then((function(e){t.setState({loading:!1,active:!1}),t.props.setFilename(t.filename)})),document.getElementById(this.id).value="")}},{key:"render",value:function(){return this.id="upload"+this.props.parameter,i.a.createElement("form",{style:this.props.style},i.a.createElement("div",{className:"uploadLabel",style:{color:this.state.active?"rgb(0, 188, 212)":"rgba(0, 0, 0, 0.3)"}},this.props.label),i.a.createElement("div",{className:"uploadFileField"},i.a.createElement("div",{className:"uploadFileFieldIcon"},i.a.createElement("label",{htmlFor:this.id},i.a.createElement(ca.a,{name:"file",title:"Click to upload a file",style:{cursor:"pointer"}})),i.a.createElement("input",{type:"file",onChange:this.onChange,onClick:this.onClick.bind(this),accept:this.props.fileMatch,style:{display:"none",width:"10px"},id:this.id})),i.a.createElement("div",{className:"uploadFileFieldLabel",style:{width:"168px"}},this.props.filename)),i.a.createElement(ue.a,{className:"spin",style:{display:this.state.loading?"inline-block":"none",marginLeft:"6px",color:"rgb(255, 64, 129)",height:"22px",width:"22px",verticalAlign:"middle"},key:"spinner"}))}}]),a}(i.a.Component),ga=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={planning_grid_name:"",zipFilename:"",description:""},n}return Object(h.a)(a,[{key:"changeName",value:function(e,t){this.setState({planning_grid_name:t})}},{key:"changeDescription",value:function(e,t){this.setState({description:t})}},{key:"setzipFilename",value:function(e){this.setState({zipFilename:e})}},{key:"onOk",value:function(){var e=""===this.state.description?"Imported using the import planning grid dialog":this.state.description;this.props.onOk(this.state.zipFilename,this.state.planning_grid_name,e).then((function(e){this.setState({planning_grid_name:"",zipFilename:"",description:""})})).catch((function(e){}))}},{key:"render",value:function(){return n.createElement(de,Object.assign({},this.props,{title:"Import planning grid",contentWidth:390,children:n.createElement(n.Fragment,{key:"22"},n.createElement(ma,Object.assign({},this.props,{fileMatch:".zip",destFolder:"imports",mandatory:!0,filename:this.state.zipFilename,setFilename:this.setzipFilename.bind(this),label:"Shapefile"})),n.createElement(be,{style:{width:"310px"},value:this.state.planning_grid_name,onChange:this.changeName.bind(this),floatingLabelText:"Name"}),n.createElement(be,{style:{width:"310px"},value:this.state.description,onChange:this.changeDescription.bind(this),multiLine:!0,rows:2,floatingLabelText:"Enter a description"})),showCancelButton:!0,onOk:this.onOk.bind(this),okDisabled:this.props.loading||""===this.state.planning_grid_name||""===this.state.zipFilename||""===this.state.description,onRequestClose:this.props.onCancel.bind(this),helpLink:"user.html#importing-existing-planning-grids"}))}}]),a}(n.Component),fa=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={expanded:!1},n}return Object(h.a)(a,[{key:"expand",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"getProjectList",value:function(){this.props.getProjectList(this.props.feature_metadata,"feature")}},{key:"render",value:function(){return i.a.createElement(de,Object.assign({},this.props,{onRequestClose:this.props.onCancel,showCancelButton:!1,title:this.props.feature_metadata.alias,helpLink:"user.html#the-feature-details-window",contentWidth:768,children:i.a.createElement(i.a.Fragment,{key:"k26"},i.a.createElement(oa,{planning_grid_metadata:this.props.feature_metadata,getTilesetMetadata:this.props.getTilesetMetadata,setSnackBar:this.props.setSnackBar,color:this.props.feature_metadata.color,outlineColor:"rgba(0, 0, 0, 0.2)"}),i.a.createElement("div",{className:"metadataPanel"},i.a.createElement("table",null,i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",{colSpan:"2",className:"metadataItemTitle"},"Description:")),i.a.createElement("tr",null,i.a.createElement("td",{colSpan:"2",className:"metadataItemValue2"},this.props.feature_metadata.description)),i.a.createElement("tr",null,i.a.createElement("td",{className:"metadataItemTitle"},"Area:"),i.a.createElement("td",{className:"metadataItemValue"},C(this.props.feature_metadata.area,this.props.reportUnits,!0))),i.a.createElement("tr",null,i.a.createElement("td",{className:"metadataItemTitle"},"Author:"),i.a.createElement("td",{className:"metadataItemValue"},this.props.feature_metadata.created_by)),i.a.createElement("tr",null,i.a.createElement("td",{className:"metadataItemTitle"},"Created:"),i.a.createElement("td",{className:"metadataItemValue"},this.props.feature_metadata.creation_date)),i.a.createElement("tr",null,i.a.createElement("td",{className:"metadataItemTitle"},"Source:"),i.a.createElement("td",{className:"metadataItemValue"},this.props.feature_metadata.source)),i.a.createElement("tr",{style:{display:this.state.expanded?"table-row":"none"}},i.a.createElement("td",{className:"metadataItemTitle"},"id:"),i.a.createElement("td",{className:"metadataItemValue"},this.props.feature_metadata.id)),i.a.createElement("tr",{style:{display:this.state.expanded?"table-row":"none"}},i.a.createElement("td",{className:"metadataItemTitle"},"guid:"),i.a.createElement("td",{className:"metadataItemValue"},this.props.feature_metadata.feature_class_name)),i.a.createElement("tr",{style:{display:this.state.expanded?"table-row":"none"}},i.a.createElement("td",{className:"metadataItemTitle"},"tileset:"),i.a.createElement("td",{className:"metadataItemValue"},this.props.feature_metadata.tilesetid)),i.a.createElement("tr",{style:{display:this.state.expanded?"table-row":"none"}},i.a.createElement("td",{className:"metadataItemTitle"},"Projects:"),i.a.createElement("td",{className:"metadataItemValue"},i.a.createElement(ca.a,{name:"external-link-alt",onClick:this.getProjectList.bind(this),title:"View a list of projects that this feature is used in",style:{cursor:"pointer",paddingTop:"6px"}}))))),i.a.createElement("div",{onClick:this.expand.bind(this),title:this.state.expanded?"Show less details":"Show more details",className:"textHyperlink"},this.state.expanded?"less":"more..")))}))}}]),a}(i.a.Component),ya=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={name:"",description:""},n}return Object(h.a)(a,[{key:"changeName",value:function(e,t){this.setState({name:t})}},{key:"changeDescription",value:function(e,t){this.setState({description:t})}},{key:"createNewFeature",value:function(){this.props.createNewFeature(this.state.name,this.state.description)}},{key:"render",value:function(){var e=n.createElement(n.Fragment,{key:"k12"},n.createElement("div",null,n.createElement(be,{value:this.state.name,onChange:this.changeName.bind(this),floatingLabelText:"Enter a name"}),n.createElement(be,{value:this.state.description,onChange:this.changeDescription.bind(this),multiLine:!0,rows:2,floatingLabelText:"Enter a description"}),n.createElement(Ne.a,{label:"Add to project",style:{fontSize:"12px",width:"200px",display:"inline-block",marginTop:"10px"},onCheck:this.props.setAddToProject,checked:this.props.addToProject})));return n.createElement(de,Object.assign({},this.props,{onOk:this.createNewFeature.bind(this),okDisabled:!(""!==this.state.name&&""!==this.state.description&&!1===this.props.loading),showCancelButton:!0,contentWidth:390,title:"Create new feature",children:e,onRequestClose:this.props.onOk,helpLink:"user.html#drawing-features-on-screen"}))}}]),a}(n.Component),va={steps:["shapefile","single_or_multiple","metadata"],stepIndex:0,fieldnames:[],splitField:"",name:"",description:""},ba=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state=va,n}return Object(h.a)(a,[{key:"handleNext",value:function(){var e=this,t=this.state.stepIndex;switch(t){case 0:this.props.unzipShapefile(this.props.filename).then((function(a){e.shapefile=a.rootfilename+".shp",e.setState({stepIndex:t+1})}));break;case this.state.steps.length-1:this.importFeatures();break;default:this.setState({stepIndex:t+1})}}},{key:"handlePrev",value:function(){var e=this.state.stepIndex;this.setState({stepIndex:e-1})}},{key:"changeName",value:function(e,t){this.setState({name:t})}},{key:"changeDescription",value:function(e,t){this.setState({description:t})}},{key:"changeSplitField",value:function(e,t){this.setState({splitField:this.state.fieldnames[t]})}},{key:"getShapefileFieldnames",value:function(){var e=this;this.props.getShapefileFieldnames(this.shapefile).then((function(t){e.setState({fieldnames:t.fieldnames})}))}},{key:"resetFieldnames",value:function(){this.setState({fieldnames:[]})}},{key:"importFeatures",value:function(){var e=this;this.props.importFeatures(this.props.filename,this.state.name,this.state.description,this.shapefile,this.state.splitField).then((function(t){e.closeDialog()}))}},{key:"closeDialog",value:function(){this.props.deleteShapefile(this.props.filename,this.shapefile),this.setState(va),this.shapefile="",this.props.setFilename(""),this.props.onCancel()}},{key:"render",value:function(){var e=!1,t=this.state.stepIndex;switch(t){case 0:e=""===this.props.filename;break;case 1:e=this.props.loading}var a=[n.createElement("div",{style:{width:"100%",maxWidth:"500px",margin:"auto",textAlign:"center"}},n.createElement("div",{style:{margin:"0 16px"}},n.createElement("div",{style:{marginTop:12}},n.createElement(ce,{label:"Back",disabled:0===t||this.props.loading,onClick:this.handlePrev.bind(this)}),n.createElement(ce,{label:t===this.state.steps.length-1?"Finish":"Next",onClick:this.handleNext.bind(this),disabled:e||this.props.loading||2===t&&0===this.state.fieldnames.length&&(""===this.state.name||""===this.state.description)||2===t&&0!==this.state.fieldnames.length&&""===this.state.splitField,primary:!0}))))],i=n.createElement("div",{key:"k12"},0===t?n.createElement("div",null,n.createElement(ma,Object.assign({},this.props,{fileMatch:".zip",mandatory:!0,filename:this.props.filename,setFilename:this.props.setFilename,destFolder:"imports",label:"Shapefile",style:{paddingTop:"10px"}}))):null,1===t?n.createElement("div",null,n.createElement(Qe.RadioButtonGroup,{name:"createFeatureType",defaultSelected:"single"},n.createElement(Qe.RadioButton,{className:"radioButton",value:"single",label:"Create single feature",style:{padding:"10px"},onClick:this.resetFieldnames.bind(this)}),n.createElement(Qe.RadioButton,{className:"radioButton",value:"multiple",label:"Split into multiple features",style:{padding:"10px"},onClick:this.getShapefileFieldnames.bind(this)}))):null,2===t?0===this.state.fieldnames.length?n.createElement("div",null,n.createElement(be,{value:this.state.name,onChange:this.changeName.bind(this),floatingLabelText:"Enter a name"}),n.createElement(be,{value:this.state.description,onChange:this.changeDescription.bind(this),multiLine:!0,rows:2,floatingLabelText:"Enter a description"}),n.createElement(Ne.a,{label:"Add to project",style:{fontSize:"12px",width:"200px",display:"inline-block",marginTop:"10px"},onCheck:this.props.setAddToProject,checked:this.props.addToProject})):n.createElement("div",null,n.createElement(Se.a,{menuItemStyle:{fontSize:"12px"},labelStyle:{fontSize:"12px"},onChange:this.changeSplitField.bind(this),value:this.state.splitField,floatingLabelText:"Split features by",floatingLabelFixed:!0},this.state.fieldnames.map((function(e){return n.createElement(we.a,{style:{fontSize:"12px"},value:e,primaryText:e,key:e})}))),n.createElement(Ne.a,{label:"Add to project",style:{fontSize:"12px",width:"200px",display:"inline-block",marginTop:"10px"},onCheck:this.props.setAddToProject,checked:this.props.addToProject})):null);return n.createElement(de,Object.assign({},this.props,{onOk:this.closeDialog.bind(this),okLabel:"Cancel",contentWidth:390,title:"Import features",children:i,actions:a,onRequestClose:this.closeDialog.bind(this),helpLink:"user.html#importing-existing-features"}))}}]),a}(n.Component),ka=a(443),Sa={steps:["type","endpoint","layer","metadata"],stepIndex:0,name:"",description:"",sourceType:"",endpoint:"",srs:"",featureTypes:[],featureType:"",validendpoint:!0,loading:!1},Ea=["Web Feature Service"],wa=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state=Sa,n}return Object(h.a)(a,[{key:"handleNext",value:function(){var e=this.state.stepIndex;switch(e){case this.state.steps.length-1:this.importFeatures();break;default:this.setState({stepIndex:e+1})}}},{key:"handlePrev",value:function(){var e=this.state.stepIndex;this.setState({stepIndex:e-1})}},{key:"changeSourceType",value:function(e,t){this.setState({sourceType:Ea[t]})}},{key:"getCapabilities",value:function(e){return new Promise((function(t,a){"http"===e.substr(0,4)?fetch(e).then((function(e){e.text().then((function(e){t(e)}))})).catch((function(e){a(e)})):a("Invalid endpoint")}))}},{key:"changeEndpoint",value:function(e,t){var a=this;this.setState({endpoint:t,loading:!0,validendpoint:!0}),this.getCapabilities(t).then((function(e){a.setState({loading:!1,validendpoint:!0});var t=(new DOMParser).parseFromString(e,"text/xml");a.getWFSInfo(t)})).catch((function(e){a.setState({loading:!1,validendpoint:!1}),console.log(e)}))}},{key:"getWFSInfo",value:function(e){var t,a=e.getElementsByTagName("wfs:FeatureType"),n=[],i=Object(ka.a)(a);try{for(i.s();!(t=i.n()).done;){var s=t.value;n.push(s.getElementsByTagName("wfs:Name")[0].textContent)}}catch(o){i.e(o)}finally{i.f()}var r="EPSG:"+e.getElementsByTagName("wfs:DefaultCRS")[0].textContent.substr(-4);this.setState({featureTypes:n,srs:r})}},{key:"changeFeatureType",value:function(e,t){this.setState({featureType:this.state.featureTypes[t]})}},{key:"changeName",value:function(e,t){this.setState({name:t})}},{key:"changeDescription",value:function(e,t){this.setState({description:t})}},{key:"importFeatures",value:function(){var e=this,t=this.state.endpoint.substr(0,this.state.endpoint.indexOf("request")-1);this.props.importFeatures(this.state.name,this.state.description,t,this.state.srs,this.state.featureType).then((function(t){e.closeDialog()})).catch((function(t){e.closeDialog()}))}},{key:"closeDialog",value:function(){this.setState(Sa),this.props.onCancel()}},{key:"render",value:function(){var e=!1,t=this.state.stepIndex;switch(t){case 0:e=""===this.state.sourceType;break;case 1:e=!this.state.validendpoint||""===this.state.endpoint||this.state.loading;break;case 2:e=""===this.state.featureType;break;case 3:e=""===this.state.name||""===this.state.description}var a=[n.createElement("div",{style:{width:"100%",maxWidth:"500px",margin:"auto",textAlign:"center"}},n.createElement("div",{style:{margin:"0 16px"}},n.createElement("div",{style:{marginTop:12}},n.createElement(ce,{label:"Back",disabled:0===t||this.props.loading,onClick:this.handlePrev.bind(this)}),n.createElement(ce,{label:t===this.state.steps.length-1?"Finish":"Next",onClick:this.handleNext.bind(this),disabled:e||this.props.loading,primary:!0}))))],i=n.createElement("div",{key:"k28"},0===t?n.createElement("div",null,n.createElement(Se.a,{menuItemStyle:{fontSize:"12px"},labelStyle:{fontSize:"12px"},onChange:this.changeSourceType.bind(this),value:this.state.sourceType,floatingLabelText:"Select source type",floatingLabelFixed:!0},Ea.map((function(e){return n.createElement(we.a,{style:{fontSize:"12px"},value:e,primaryText:e,key:e})})))):null,1===t?n.createElement("div",null,n.createElement(be,{style:{width:"330px"},value:this.state.endpoint,errorText:this.state.validendpoint?"":"Invalid WFS endpoint",onChange:this.changeEndpoint.bind(this),floatingLabelText:"Enter the WFS endpoint"})):null,2===t?n.createElement("div",null,n.createElement(Se.a,{menuItemStyle:{fontSize:"12px"},autoWidth:!0,labelStyle:{fontSize:"12px"},onChange:this.changeFeatureType.bind(this),value:this.state.featureType,floatingLabelText:"Select feature type",floatingLabelFixed:!0},this.state.featureTypes.map((function(e){return n.createElement(we.a,{style:{fontSize:"12px"},value:e,primaryText:e,key:e})})))):null,3===t?n.createElement("div",null,n.createElement(be,{value:this.state.name,onChange:this.changeName.bind(this),floatingLabelText:"Enter a name"}),n.createElement(be,{value:this.state.description,onChange:this.changeDescription.bind(this),multiLine:!0,rows:2,floatingLabelText:"Enter a description"}),n.createElement(Ne.a,{label:"Add to project",style:{fontSize:"12px",width:"200px",display:"inline-block",marginTop:"10px"},onCheck:this.props.setAddToProject,checked:this.props.addToProject})):null);return n.createElement(de,Object.assign({},this.props,{onOk:this.closeDialog.bind(this),okLabel:"Cancel",loading:this.props.loading||this.state.loading,contentWidth:390,title:"Import from web",children:i,actions:a,onRequestClose:this.closeDialog.bind(this),helpLink:"user.html#importing-from-web"}))}}]),a}(n.Component),xa=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={selectedCost:void 0},n}return Object(h.a)(a,[{key:"changeCost",value:function(e,t){this.setState({selectedCost:t})}},{key:"_delete",value:function(){this.props.deleteCost(this.state.selectedCost.name),this.setState({selectedCost:void 0})}},{key:"render",value:function(){var e=this.props.data.map((function(e){return{name:e}}));return i.a.createElement(de,Object.assign({},this.props,{contentWidth:390,autoDetectWindowHeight:!1,bodyStyle:{padding:"0px 24px 0px 24px"},offsetY:80,title:"Costs",onRequestClose:this.props.closeCostsDialog,helpLink:"user.html#costs-window",children:i.a.createElement(i.a.Fragment,{key:"k8"},i.a.createElement($e.a,Object.assign({},this.props,{pageSize:e.length,columns:[{Header:"Name",accessor:"name",headerStyle:{textAlign:"left"}}],className:"projectsReactTable noselect",showPagination:!1,minRows:0,data:e,selectedCost:this.state.selectedCost,changeCost:this.changeCost.bind(this),getTrProps:function(e,t){return{style:{background:t.original.name===(e.selectedCost&&e.selectedCost.name)?"aliceblue":""},onClick:function(a){e.changeCost(a,t.original)}}}})),i.a.createElement("div",{id:"costsToolbar"},i.a.createElement(ce,{show:"ReadOnly"!==this.props.userRole,icon:i.a.createElement(Ht.a,{style:{height:"20px",width:"20px"}}),title:"Upload a new costs file",disabled:this.props.loading,onClick:this.props.openImportCostsDialog.bind(this),label:"Import"}),i.a.createElement(ce,{show:!this.props.unauthorisedMethods.includes("deletePlanningUnitGrid"),icon:i.a.createElement(Z.a,{icon:ee.h,color:"rgb(255, 64, 129)"}),title:"Delete cost profile",disabled:!this.state.selectedCost||this.state.selectedCost&&this.state.selectedCost.name===this.props.costname||this.state.selectedCost&&this.state.selectedCost.name===this.props.uniformCostname,onClick:this._delete.bind(this),label:"Delete"})))}))}}]),a}(i.a.Component),Pa={costs_filename:"",costname:""},Ca=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state=Pa,n}return Object(h.a)(a,[{key:"resetState",value:function(){this.setState(Pa)}},{key:"onOk",value:function(){this.props.addCost(this.state.costname),this.resetState(),this.props.closeImportCostsDialog()}},{key:"setCostsFilename",value:function(e){this.setState({costs_filename:e,costname:e.substring(0,e.length-5)})}},{key:"deleteCostFileThenClose",value:function(){var e=this;this.props.deleteCostFileThenClose(this.state.costname).then((function(t){e.resetState(),e.props.closeImportCostsDialog()}))}},{key:"render",value:function(){return i.a.createElement(de,Object.assign({},this.props,{contentWidth:390,offsetY:80,okDisabled:this.props.loading,title:"Import Cost surface",showCancelButton:!0,onOk:this.onOk.bind(this),onCancel:this.deleteCostFileThenClose.bind(this),onRequestClose:this.deleteCostFileThenClose.bind(this),helpLink:"user.html#import-costs-window",children:i.a.createElement(i.a.Fragment,{key:"k8"},i.a.createElement(ma,Object.assign({},this.props,{fileMatch:".cost",mandatory:!0,filename:this.state.costs_filename,setFilename:this.setCostsFilename.bind(this),label:"Costs surface filename",style:{paddingTop:"15px"}})))}))}}]),a}(i.a.Component),Oa=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={data:[],updateEnabled:!1},n.renderEditable=n.renderEditable.bind(Object(da.a)(n)),n}return Object(h.a)(a,[{key:"componentDidUpdate",value:function(e){e.runParams!==this.props.runParams&&this.setState({data:this.props.runParams})}},{key:"openParametersDialog",value:function(){this.props.openParametersDialog()}},{key:"updateRunParams",value:function(){this.setState({updateEnabled:!1}),"ReadOnly"!==this.props.userRole&&this.props.updateRunParams(this.state.data),this.props.onOk()}},{key:"setUpdateEnabled",value:function(){this.setState({updateEnabled:!0})}},{key:"renderEditable",value:function(e){var t=this;return"ReadOnly"===this.props.userRole?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,this.state.data[e.index].value)):i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{backgroundColor:"#fafafa",float:"BLM"===Object(o.a)(this.state.data)[e.index].key?"left":"none"},contentEditable:!0,suppressContentEditableWarning:!0,onFocus:this.setUpdateEnabled.bind(this),onBlur:function(a){var n=Object(o.a)(t.state.data);n[e.index][e.column.id]=a.target.innerHTML,t.setState({data:n})}},this.state.data[e.index].value),i.a.createElement(ca.a,{name:"external-link-alt",onClick:this.props.showClumpingDialog,title:"Click to open the BLM comparison dialog",style:{display:"BLM"===Object(o.a)(this.state.data)[e.index].key?"block":"none",cursor:"pointer",paddingTop:"6px",paddingLeft:"35px"}}))}},{key:"render",value:function(){return i.a.createElement(de,Object.assign({},this.props,{contentWidth:400,offsetX:80,offsetY:260,onOk:this.updateRunParams.bind(this),helpLink:"user.html#run-settings",title:"Run settings",children:i.a.createElement("div",{style:{height:"275px"},key:"k16"},i.a.createElement($e.a,{showPagination:!1,className:"summary_infoTable",minRows:0,pageSize:this.state.data.length,data:this.state.data,noDataText:"",columns:[{Header:"Parameter",accessor:"key",width:165,headerStyle:{textAlign:"left"}},{Header:"Value",accessor:"value",width:193,headerStyle:{textAlign:"left"},Cell:this.renderEditable}]}))}))}}]),a}(i.a.Component),Da=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"handleChange",value:function(e,t,a){this.props.changeValue(a)}},{key:"render",value:function(){var e,t=this.props.values.map((function(t){return e="string"===typeof t?t.substr(0,1).toUpperCase().concat(t.replace("_"," ").substr(1)):t.toString(),i.a.createElement(we.a,{value:t,key:t,primaryText:e})}));return i.a.createElement(Se.a,{selectionRenderer:this.props.selectionRenderer,menuItemStyle:{fontSize:"12px"},labelStyle:{fontSize:"12px"},listStyle:{fontSize:"12px"},style:{width:"150px",margin:"0px 10px"},autoWidth:!0,floatingLabelText:this.props.floatingLabelText,floatingLabelFixed:!0,children:t,onChange:this.handleChange.bind(this),value:this.props.property})}}]),a}(i.a.Component),ja=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"handleChange",value:function(e,t,a){this.props.changeValue(a)}},{key:"selectionRenderer",value:function(){return this.getSwatch(this.props.property,!0)}},{key:"getSwatch",value:function(e,t){var a=this.props.brew.getNumClasses(),n=P(this.props.brew,e),s=this.props.brew.colorSchemes[e],r=a<=n?Array.apply(null,{length:a}).map(Number.call,Number):Array.apply(null,{length:n}).map(Number.call,Number),o=r.length,l=112/o,c=r.map((function(e){return i.a.createElement("div",{key:e,style:{backgroundColor:s[o][e],width:l,height:"16px",display:"inline-block"}})})),p=e!==this.props.property||t?"lightgray":"rgb(255, 64, 129)";return c=i.a.createElement("div",{style:{display:"inline-flex",marginTop:"12px",border:"1px solid "+p}},c)}},{key:"render",value:function(){var e,t=this.props.values.map((function(t){e="opacity"!==t?"":"Opacity";var a="opacity"!==t?this.getSwatch(t,!1):null;return i.a.createElement(we.a,{value:t,primaryText:e,key:t,children:a,title:t})}),this);return i.a.createElement(Se.a,{selectionRenderer:this.selectionRenderer.bind(this),menuItemStyle:{fontSize:"12px"},labelStyle:{fontSize:"12px"},listStyle:{fontSize:"12px"},style:{width:"150px",margin:"0px 10px"},autoWidth:!0,floatingLabelText:this.props.floatingLabelText,floatingLabelFixed:!0,children:t,onChange:this.handleChange.bind(this),value:this.props.property})}}]),a}(i.a.Component),Fa=a(30),Aa=["equal_interval","jenks","std_deviation","quantile"],Ra=["opacity","OrRd","PuBu","BuPu","Oranges","BuGn","YlOrBr","YlGn","Reds","RdPu","Greens","YlGnBu","Purples","GnBu","Greys","YlOrRd","PuRd","Blues","PuBuGn","Spectral","RdYlGn","RdBu","PiYG","PRGn","RdYlBu","BrBG","RdGy","PuOr","Set2","Accent","Set1","Set3","Dark2","Paired","Pastel2","Pastel1"],Ta=["3","4","5","6","7","8","9"],Ia=["1","2","3","4","5","6","7","8","9"],Na=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props.dataBreaks.map((function(e,t){return i.a.createElement(Fa.i,{x:e,key:t,stroke:"#00BCD4"})}));return i.a.createElement(de,Object.assign({},this.props,{contentWidth:390,rightX:0,offsetY:80,showCancelButton:!1,helpLink:"user.html#changing-how-the-results-are-displayed",title:"Classification",children:i.a.createElement("div",{style:{height:"275px"},key:"k6"},i.a.createElement(Fa.b,{width:250,height:150,data:this.props.summaryStats},i.a.createElement(Fa.c,{strokeDasharray:"1",stroke:"#f4f4f4"}),i.a.createElement(Fa.k,{dataKey:"number",tick:{fontSize:11},type:"number"},i.a.createElement(Fa.f,{value:"Sum solutions",offset:0,position:"insideBottom",style:{fontSize:"11px",color:"#222222"}})),i.a.createElement(Fa.l,{tick:{fontSize:11}},i.a.createElement(Fa.f,{value:"Count",angle:-90,position:"insideLeft",style:{fontSize:"11px",color:"#222222"}})),i.a.createElement(Fa.j,null),i.a.createElement(Fa.a,{dataKey:"count",fill:"#E14081"}),e),i.a.createElement("div",{className:"renderers"},i.a.createElement(ja,{values:Ra,changeValue:this.props.changeColorCode,property:this.props.renderer.COLORCODE,floatingLabelText:"Colour scheme",brew:this.props.brew}),i.a.createElement(Da,{values:Aa,changeValue:this.props.changeRenderer,property:this.props.renderer.CLASSIFICATION,floatingLabelText:"Classification"}),i.a.createElement(Da,{values:Ta,changeValue:this.props.changeNumClasses,property:this.props.renderer.NUMCLASSES,floatingLabelText:"Number of classes"}),i.a.createElement(Da,{values:Ia,changeValue:this.props.changeShowTopClasses,property:this.props.renderer.TOPCLASSES,floatingLabelText:"Show top n classes"})))}))}}]),a}(i.a.Component),La=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).resultsRendered=!1,n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.map=new E.a.Map({container:this.mapContainer,style:"mapbox://styles/mapbox/light-v9",center:this.props.mapCentre,zoom:this.props.mapZoom,attributionControl:!1,interactive:!1}),this.map.on("load",(function(t){t.target.addLayer({id:e.props.RESULTS_LAYER_NAME,type:"fill",source:{type:"vector",url:"mapbox://"+e.props.tileset.id},"source-layer":e.props.tileset.name,layout:{visibility:"none"}}),e.map.setCenter(e.props.mapCentre),e.setMapZoom(),e.resultsRendered||e.renderResults()}))}},{key:"componentDidUpdate",value:function(e,t){this.props.paintProperty!==e.paintProperty&&(0===this.props.paintProperty.length?this.map.setLayoutProperty(this.props.RESULTS_LAYER_NAME,"visibility","none"):this.map.getLayer(this.props.RESULTS_LAYER_NAME)?this.renderResults():this.resultsRendered=!1),this.props.mapCentre!==e.mapCentre&&this.map.setCenter(this.props.mapCentre),this.props.mapZoom!==e.mapZoom&&this.setMapZoom()}},{key:"renderResults",value:function(){0!==this.props.paintProperty.length&&(this.map.setLayoutProperty(this.props.RESULTS_LAYER_NAME,"visibility","visible"),this.map.setPaintProperty(this.props.RESULTS_LAYER_NAME,"fill-color",this.props.paintProperty.fillColor),this.map.setPaintProperty(this.props.RESULTS_LAYER_NAME,"fill-outline-color",this.props.paintProperty.oulineColor),this.map.setPaintProperty(this.props.RESULTS_LAYER_NAME,"fill-opacity",.5),this.resultsRendered=!0)}},{key:"componentWillUnmount",value:function(){this.map&&this.map.remove()}},{key:"setMapZoom",value:function(){this.map.setZoom(this.props.mapZoom)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{style:{display:"inline-block",margin:"5px"},onClick:this.props.disabled?null:this.props.selectBlm.bind(this,this.props.blmValue)},i.a.createElement("div",{style:{fontSize:"14px"}},"BLM: ",this.props.blmValue),i.a.createElement("div",{ref:function(t){return e.mapContainer=t},style:{width:"200px",height:"200px",cursor:this.props.disabled?"default":"pointer"},className:"hoverMapContainer",title:this.props.disabled?"":"Click to select this BLM value"}))}}]),a}(i.a.Component),_a=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={blmValues:[.001,.01,.1,1,10],blmMin:.001,blmMax:10,blmChanged:!1},n}return Object(h.a)(a,[{key:"componentDidUpdate",value:function(e,t){this.props.open!==e.open&&this.props.open&&this.props.createProjectGroupAndRun(this.state.blmValues)}},{key:"changeBlmMin",value:function(e,t){this.getBlmValues(t,this.state.blmMax),this.setState({blmMin:t})}},{key:"changeBlmMax",value:function(e,t){this.getBlmValues(this.state.blmMin,t),this.setState({blmMax:t})}},{key:"getBlmValues",value:function(e,t){for(var a=[],n=(t-e)/4,i=0;i<5;i++)a[i]=i*n+Number(e);this.setState({blmValues:a}),this.setState({blmChanged:!0})}},{key:"parseBlmValue",value:function(e){return!isNaN(parseFloat(e))&&isFinite(e)?e:""}},{key:"selectBlm",value:function(e){this.props.setBlmValue(e),this.props.onOk()}},{key:"rerunProjects",value:function(){this.props.rerunProjects(this.state.blmChanged,this.state.blmValues),this.setState({blmChanged:!1})}},{key:"onRequestClose",value:function(){this.props.clumpingRunning||this.props.onOk()}},{key:"render",value:function(){return i.a.createElement(de,Object.assign({},this.props,{showSpinner:this.props.clumpingRunning,contentWidth:680,offsetX:80,offsetY:80,onOk:this.onRequestClose.bind(this),okDisabled:this.props.clumpingRunning,showCancelButton:!0,helpLink:"user.html#clumping-window",actions:[i.a.createElement(ce,{label:"Refresh",primary:!0,onClick:this.rerunProjects.bind(this),disabled:this.props.clumpingRunning||!this.state.blmChanged})],title:"Clumping",children:i.a.createElement("div",{key:"k7"},i.a.createElement(La,{key:0,disabled:this.props.clumpingRunning,selectBlm:this.selectBlm.bind(this),tileset:this.props.tileset,RESULTS_LAYER_NAME:this.props.RESULTS_LAYER_NAME,paintProperty:this.props.map0_paintProperty,blmValue:this.parseBlmValue(this.state.blmValues[0]),mapCentre:this.props.mapCentre,mapZoom:this.props.mapZoom}),i.a.createElement(La,{key:1,disabled:this.props.clumpingRunning,selectBlm:this.selectBlm.bind(this),tileset:this.props.tileset,RESULTS_LAYER_NAME:this.props.RESULTS_LAYER_NAME,paintProperty:this.props.map1_paintProperty,blmValue:this.parseBlmValue(this.state.blmValues[1]),mapCentre:this.props.mapCentre,mapZoom:this.props.mapZoom}),i.a.createElement(La,{key:2,disabled:this.props.clumpingRunning,selectBlm:this.selectBlm.bind(this),tileset:this.props.tileset,RESULTS_LAYER_NAME:this.props.RESULTS_LAYER_NAME,paintProperty:this.props.map2_paintProperty,blmValue:this.parseBlmValue(this.state.blmValues[2]),mapCentre:this.props.mapCentre,mapZoom:this.props.mapZoom}),i.a.createElement(La,{key:3,disabled:this.props.clumpingRunning,selectBlm:this.selectBlm.bind(this),tileset:this.props.tileset,RESULTS_LAYER_NAME:this.props.RESULTS_LAYER_NAME,paintProperty:this.props.map3_paintProperty,blmValue:this.parseBlmValue(this.state.blmValues[3]),mapCentre:this.props.mapCentre,mapZoom:this.props.mapZoom}),i.a.createElement(La,{key:4,disabled:this.props.clumpingRunning,selectBlm:this.selectBlm.bind(this),tileset:this.props.tileset,RESULTS_LAYER_NAME:this.props.RESULTS_LAYER_NAME,paintProperty:this.props.map4_paintProperty,blmValue:this.parseBlmValue(this.state.blmValues[4]),mapCentre:this.props.mapCentre,mapZoom:this.props.mapZoom}),i.a.createElement("div",{style:{display:"inline-block",margin:"5px",verticalAlign:"top",paddingTop:"60px",textAlign:"center",fontSize:"14px",width:"200px",height:"224px"}},i.a.createElement("div",null,"Move and zoom the main map to preview the clumping"),i.a.createElement("div",{style:{paddingTop:"30px"}},i.a.createElement("span",null,"BLM from "),i.a.createElement(be,{value:this.state.blmMin,onChange:this.changeBlmMin.bind(this),style:{width:"36px"},inputStyle:{textAlign:"center",fontSize:"14px"},id:"blmmin",disabled:this.props.clumpingRunning}),i.a.createElement("span",null," to "),i.a.createElement(be,{value:this.state.blmMax,onChange:this.changeBlmMax.bind(this),style:{width:"36px"},inputStyle:{textAlign:"center",fontSize:"14px"},id:"blmmax",disabled:this.props.clumpingRunning}))))}))}}]),a}(i.a.Component),Ua=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={folderUploadText:"",active:!1},n}return Object(h.a)(a,[{key:"onClick",value:function(e){this.setState({active:!0})}},{key:"onChange",value:function(e){this.props.filesListed(e.target.files),this.setState({folderUploadText:e.target.files.length+" files"}),this.setState({active:!1})}},{key:"_addDirectory",value:function(e){e&&(e.directory=!0,e.webkitdirectory=!0)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("div",{className:"uploadLabel",style:{color:this.state.active?"rgb(0, 188, 212)":"rgba(0, 0, 0, 0.3)"}},this.props.label),i.a.createElement("div",{className:"uploadFileField"},i.a.createElement("div",{className:"uploadFileFieldIcon"},i.a.createElement("div",{style:{display:"inline-flex"}},i.a.createElement("label",{htmlFor:"folderSelector"},i.a.createElement(ca.a,{name:"folder",title:"Click to select a Marxan project folder",style:{cursor:"pointer",display:"inline-flex"}}))),i.a.createElement("input",{id:"folderSelector",ref:function(t){return e._addDirectory(t)},type:"file",onChange:this.onChange.bind(this),onClick:this.onClick.bind(this),style:{display:"none",width:"10px"}})),i.a.createElement("div",{className:"uploadFileFieldLabel"},this.state.folderUploadText)))}}]),a}(i.a.Component),Ma=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={planning_grid_name:"",zipFilename:""},n}return Object(h.a)(a,[{key:"setzipFilename",value:function(e){this.setState({zipFilename:e}),this.props.setZipFilename(e)}},{key:"render",value:function(){return n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement(Ua,{label:"Marxan project folder",filesListed:this.props.filesListed}),n.createElement(ma,Object.assign({},this.props,{fileMatch:".zip",destFolder:"imports",mandatory:!0,filename:this.state.zipFilename,setFilename:this.setzipFilename.bind(this),label:"Planning grid zipped shapefile",style:{paddingTop:"15px"}})),n.createElement(be,{style:{width:"310px"},value:this.props.planning_grid_name,onChange:this.props.setPlanningGridName,floatingLabelText:"Planning grid name"})))}}]),a}(n.Component),Ba=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleNext=function(){var e=n.state.stepIndex;if(1===e)return n.setState({loading:!0}),void n.props.importProject(n.state.name,n.state.description,n.state.zipFilename,n.state.files,n.state.planning_grid_name).then((function(e){n.onOk()})).catch((function(e){n.setState({loading:!1}),n.props.log(e+"Import stopped"),n.props.setSnackBar(e)}));n.setState({stepIndex:e+1})},n.handlePrev=function(){var e=n.state.stepIndex;e>0&&n.setState({stepIndex:e-1})},n.state={steps:["Files and planning grid","Info"],loading:!1,stepIndex:0,name:"",description:"",zipFilename:"",files:[],planning_grid_name:""},n}return Object(h.a)(a,[{key:"filesListed",value:function(e){this.setState({files:e})}},{key:"setZipFilename",value:function(e){this.setState({zipFilename:e})}},{key:"setPlanningGridName",value:function(e,t){this.setState({planning_grid_name:t})}},{key:"setName",value:function(e){this.setState({name:e})}},{key:"setDescription",value:function(e){this.setState({description:e})}},{key:"onOk",value:function(){this.setState({loading:!1,stepIndex:0}),this.props.onOk()}},{key:"render",value:function(){var e=this.state.stepIndex,t=[i.a.createElement("div",{style:{width:"100%",maxWidth:700,margin:"auto",textAlign:"center"}},i.a.createElement("div",{style:{margin:"0 16px"}},i.a.createElement("div",{style:{marginTop:12}},i.a.createElement(ce,{label:"Back",disabled:0===e,onClick:this.handlePrev}),i.a.createElement(ce,{label:e===this.state.steps.length-1?"Finish":"Next",onClick:this.handleNext.bind(this),primary:!0,disabled:this.state.loading||0===e&&(0===this.state.files.length||""===this.state.zipFilename||""===this.state.planning_grid_name)||1===e&&(""===this.state.name||""===this.state.description)}))))],a=i.a.createElement(i.a.Fragment,{key:"k4"},i.a.createElement("div",null,0===e?i.a.createElement(Ma,Object.assign({},this.props,{filesListed:this.filesListed.bind(this),setZipFilename:this.setZipFilename.bind(this),setPlanningGridName:this.setPlanningGridName.bind(this),planning_grid_name:this.state.planning_grid_name})):null,1===e?i.a.createElement(Jt,{name:this.state.name,description:this.state.description,setName:this.setName.bind(this),setDescription:this.setDescription.bind(this)}):null));return i.a.createElement(de,Object.assign({},this.props,{title:"Import existing Marxan project",contentWidth:390,children:a,okLabel:"Cancel",actions:t,onOk:this.onOk.bind(this),onRequestClose:this.onOk.bind(this),helpLink:"user.html#importing-existing-marxan-projects"}))}}]),a}(i.a.Component),Ga=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleNext=function(){var e=n.state.stepIndex;if(1===e)return n.setState({loading:!0}),void n.props.importMXWProject(n.state.name,n.state.description,n.state.zipFilename).then((function(e){n.onOk()})).catch((function(e){n.setState({loading:!1}),n.props.log(e+"Import stopped"),n.props.setSnackBar(e)}));n.setState({stepIndex:e+1})},n.handlePrev=function(){var e=n.state.stepIndex;e>0&&n.setState({stepIndex:e-1})},n.state={steps:["mxw file","Info"],loading:!1,stepIndex:0,name:"",description:"",zipFilename:""},n}return Object(h.a)(a,[{key:"setZipFilename",value:function(e){this.setState({zipFilename:e})}},{key:"setName",value:function(e){this.setState({name:e})}},{key:"setDescription",value:function(e){this.setState({description:e})}},{key:"onOk",value:function(){this.setState({loading:!1,stepIndex:0,zipFilename:""}),this.props.onOk()}},{key:"render",value:function(){var e=this.state.stepIndex,t=[i.a.createElement("div",{style:{width:"100%",maxWidth:700,margin:"auto",textAlign:"center"}},i.a.createElement("div",{style:{margin:"0 16px"}},i.a.createElement("div",{style:{marginTop:12}},i.a.createElement(ce,{label:"Back",disabled:0===e,onClick:this.handlePrev}),i.a.createElement(ce,{label:e===this.state.steps.length-1?"Finish":"Next",onClick:this.handleNext.bind(this),primary:!0,disabled:this.state.loading||""===this.state.zipFilename||1===e&&(""===this.state.name||""===this.state.description)}))))],a=i.a.createElement(i.a.Fragment,{key:"k4"},i.a.createElement("div",null,0===e?i.a.createElement("div",null,i.a.createElement(ma,Object.assign({},this.props,{fileMatch:".mxw",destFolder:"imports",mandatory:!0,filename:this.state.zipFilename,setFilename:this.setZipFilename.bind(this),label:"Select *.mxw file",style:{paddingTop:"20px"}}))):null,1===e?i.a.createElement(Jt,{name:this.state.name,description:this.state.description,setName:this.setName.bind(this),setDescription:this.setDescription.bind(this)}):null));return i.a.createElement(de,Object.assign({},this.props,{title:"Import Marxan Web project",contentWidth:390,children:a,okLabel:"Cancel",actions:t,onOk:this.onOk.bind(this),onRequestClose:this.onOk.bind(this),helpLink:"user.html#importing-marxan-web-projects"}))}}]),a}(i.a.Component),za=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={searchText:"",selectedRun:void 0,runningJobs:!1},n}return Object(h.a)(a,[{key:"componentDidUpdate",value:function(e,t){if(this.props.runLogs!==e.runLogs){var a=this.props.runLogs.filter((function(e){return"Running"===e.status}));this.setState({runningJobs:a.length>0})}}},{key:"closeDialog",value:function(){this.setState({selectedRun:void 0}),this.props.onOk()}},{key:"stopRun",value:function(e){this.props.stopMarxan("m"+this.state.selectedRun.pid),this.refreshRunLogs()}},{key:"clearRunLogs",value:function(e){this.props.clearRunLogs()}},{key:"refreshRunLogs",value:function(e){this.props.getRunLogs(),this.setState({selectedRun:void 0})}},{key:"changeSelectedRun",value:function(e,t){this.setState({selectedRun:t})}},{key:"renderUser",value:function(e){return i.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#dadada",borderRadius:"2px"},title:e.original.user},e.original.user)}},{key:"renderProject",value:function(e){return i.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#dadada",borderRadius:"2px"},title:e.original.project},e.original.project)}},{key:"renderStatus",value:function(e){var t;switch(e.original.status){case"Completed":t=i.a.createElement(Z.a,{icon:$.f,style:{color:"green"},title:"Run completed"});break;case"Stopped":t=i.a.createElement(Z.a,{icon:$.C,style:{color:"darkgray"},title:"Run stopped by the user"});break;case"Killed":t=i.a.createElement(Z.a,{icon:$.n,style:{color:"red"},title:"Run stopped by the operating system"});break;case"Running":t=i.a.createElement(ue.a,{className:"spin",style:{height:"16px",width:"16px",verticalAlign:"sub",color:"rgb(255, 64, 129)"}})}return i.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#dadada",borderRadius:"2px"},title:e.original.status},t,"  "+e.original.status)}},{key:"renderEnded",value:function(e){return i.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#dadada",borderRadius:"2px"}},e.original.endtime?e.original.endtime:"")}},{key:"renderRuntime",value:function(e){if(e.original.runtime){var t=Number(e.original.runtime.substr(0,e.original.runtime.length-1)),a=Math.floor(t/60),n=t%60+"s",s=0!==a?a+"m "+n:n;return i.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"#dadada",borderRadius:"2px"}},s)}return""}},{key:"searchTextChanged",value:function(e){this.setState({searchText:e})}},{key:"render",value:function(){var e;return e=[{Header:"pid",accessor:"pid",width:60,headerStyle:{textAlign:"left"}},{Header:"User",accessor:"user",width:60,headerStyle:{textAlign:"left"},Cell:this.renderUser.bind(this)},{Header:"Project",accessor:"project",width:150,headerStyle:{textAlign:"left"},Cell:this.renderProject.bind(this)},{Header:"Started",accessor:"starttime",width:112,headerStyle:{textAlign:"left"}},{Header:"Ended",accessor:"endtime",width:112,headerStyle:{textAlign:"left"},Cell:this.renderEnded.bind(this)},{Header:"Runtime",accessor:"runtime",width:60,headerStyle:{textAlign:"right"},className:"table_column_right_align",Cell:this.renderRuntime.bind(this)},{Header:"Runs",accessor:"runs",width:60,headerStyle:{textAlign:"right"},className:"table_column_right_align"},{Header:"Status",accessor:"status",width:80,headerStyle:{textAlign:"left"},Cell:this.renderStatus.bind(this)}],i.a.createElement(de,Object.assign({},this.props,{onOk:this.closeDialog.bind(this),onCancel:this.closeDialog.bind(this),showCancelButton:!1,helpLink:"user.html#the-run-log",autoDetectWindowHeight:!1,bodyStyle:{padding:"0px 24px 0px 24px"},title:"Runs",showSearchBox:!0,searchTextChanged:this.searchTextChanged.bind(this),children:i.a.createElement(i.a.Fragment,{key:"k2"},i.a.createElement("div",{id:"projectsTable"},i.a.createElement(tt,{data:this.props.runLogs,columns:e,searchColumns:["user","project","status","runs","runtime"],searchText:this.state.searchText,selectedRun:this.state.selectedRun,changeSelectedRun:this.changeSelectedRun.bind(this),getTrProps:function(e,t,a){return{style:{background:t.original.pid===(e.selectedRun&&e.selectedRun.pid)?"aliceblue":""},onClick:function(a){e.changeSelectedRun(a,t.original)}}}})),i.a.createElement("div",{id:"projectsToolbar",style:{display:"Admin"!==this.props.userRole?"none":"block"}},i.a.createElement(ce,{show:!this.props.unauthorisedMethods.includes("stopMarxan"),title:"Stop run",disabled:void 0===this.state.selectedRun||(!this.props.preprocessing&&!this.state.runningJobs||"Running"!==this.state.selectedRun.status),onClick:this.stopRun.bind(this),label:"Stop",secondary:!0}),i.a.createElement(ce,{show:!this.props.unauthorisedMethods.includes("getRunLogs"),title:"Refresh run logs",icon:i.a.createElement(Z.a,{icon:$.u}),onClick:this.refreshRunLogs.bind(this)}),i.a.createElement(ce,{show:!this.props.unauthorisedMethods.includes("clearRunLogs"),title:"Clear run logs",icon:i.a.createElement(Z.a,{icon:$.m}),onClick:this.clearRunLogs.bind(this)})))}))}}]),a}(i.a.Component),Va=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"renderWithIcon",value:function(e){var t="Marxan Server version"===e.row.key&&this.props.marxanServer.server_version!==this.props.registry.SERVER_VERSION;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{float:"left"}},e.row.value),i.a.createElement(Z.a,{icon:$.n,style:{color:"red",display:"Disk space"===e.row.key&&"0"===e.row.value.substr(0,1)?"inline":"none",right:"5px",position:"absolute",marginTop:"5px"},title:"Disk space running low"}),i.a.createElement(Z.a,{icon:$.n,style:{color:"red",display:t?"inline":"none",right:"5px",position:"absolute",marginTop:"5px"},title:"A new version of Marxan Server is available ("+this.props.registry.SERVER_VERSION+")"}),i.a.createElement(Z.a,{icon:$.n,style:{color:"red",display:"WDPA version"===e.row.key&&this.props.newWDPAVersion?"inline":"none",position:"absolute",right:"5px",marginTop:"5px"},title:"A new version of the WDPA is available - click for details",onClick:this.props.showUpdateWDPADialog}))}},{key:"render",value:function(){var e=this.props.marxanServer?[{key:"Name",value:this.props.marxanServer.name},{key:"Description",value:this.props.marxanServer.description},{key:"Host",value:this.props.marxanServer.host},{key:"System",value:this.props.marxanServer.system},{key:"Processors",value:this.props.marxanServer.processor_count},{key:"Disk space",value:this.props.marxanServer.disk_space},{key:"RAM",value:this.props.marxanServer.ram},{key:"Marxan Server version",value:this.props.marxanServer.server_version},{key:"WDPA version",value:this.props.marxanServer.wdpa_version},{key:"Planning grid units limit",value:this.props.marxanServer.planning_grid_units_limit},{key:"Shutdown",value:this.props.marxanServer.shutdowntime?new Date(this.props.marxanServer.shutdowntime).toLocaleString():"Never"}]:[];return i.a.createElement(de,Object.assign({},this.props,{contentWidth:445,offsetY:80,title:"Server Details",helpLink:"user.html#server-details",children:[i.a.createElement($e.a,{showPagination:!1,className:"server_details_infoTable",minRows:0,pageSize:e.length,data:e,noDataText:"",key:"k27",columns:[{Header:"Parameter",accessor:"key",width:144,headerStyle:{textAlign:"left"}},{Header:"Value",accessor:"value",width:252,headerStyle:{textAlign:"left"},Cell:this.renderWithIcon.bind(this)}]})]}))}}]),a}(i.a.Component),Wa=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return i.a.createElement(de,Object.assign({},this.props,{contentWidth:500,offsetY:80,title:"Alert",children:i.a.createElement("div",{key:"k23"},i.a.createElement("div",{className:"description"},"A new version of the WDPA is available. ",i.a.createElement("br",null),"Click on Help | Server Details for more information."))}))}}]),a}(i.a.Component),Ha=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={currentPassword:"",newPassword1:"",newPassword2:""},n}return Object(h.a)(a,[{key:"setCurrentPassword",value:function(e,t){this.setState({currentPassword:t})}},{key:"setNewPassword1",value:function(e,t){this.setState({newPassword1:t})}},{key:"setNewPassword2",value:function(e,t){this.setState({newPassword2:t})}},{key:"onOk",value:function(e){var t=this;this.state.newPassword2===this.state.newPassword1?this.props.checkPassword(this.props.user,this.state.currentPassword).then((function(e){t.props.updateUser({PASSWORD:t.state.newPassword1}).then((function(e){t.props.setSnackBar("Password updated"),t.props.onOk()})).catch((function(e){t.props.setSnackBar("Password not updated")}))})).catch((function(e){t.props.setSnackBar("Invalid password")})):this.passwordsDontMatch()}},{key:"passwordsDontMatch",value:function(){this.props.setSnackBar("Passwords don't match")}},{key:"render",value:function(){return i.a.createElement(de,Object.assign({},this.props,{onOk:this.onOk.bind(this),showCancelButton:!0,onCancel:this.props.onOk,helpLink:"user.html#change-password",contentWidth:358,offsetY:80,title:"Change Password",children:i.a.createElement("div",{key:"k5"},i.a.createElement(be,{floatingLabelText:"Current password",onChange:this.setCurrentPassword.bind(this),floatingLabelShrinkStyle:{fontSize:"16px"},floatingLabelFocusStyle:{fontSize:"16px"},type:"password"}),i.a.createElement(be,{floatingLabelText:"New password",onChange:this.setNewPassword1.bind(this),floatingLabelShrinkStyle:{fontSize:"16px"},floatingLabelFocusStyle:{fontSize:"16px"},type:"password"}),i.a.createElement(be,{floatingLabelText:"Repeat password",onChange:this.setNewPassword2.bind(this),floatingLabelShrinkStyle:{fontSize:"16px"},floatingLabelFocusStyle:{fontSize:"16px"},type:"password"}))}))}}]),a}(i.a.Component),Ka=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={selectedValue:"pu"},n}return Object(h.a)(a,[{key:"componentDidUpdate",value:function(e,t){this.props.visible&&!e.visible&&this.startTimer(),this.props.xy.x!==e.xy.x&&this.restartTimer()}},{key:"renderAmount",value:function(e){return i.a.createElement("div",{title:e.original.amount},C(e.original.amount,this.props.reportUnits,!0))}},{key:"renderName",value:function(e){return i.a.createElement("div",{title:e.original.alias},e.original.alias)}},{key:"renderFeatureName",value:function(e){return i.a.createElement("div",{title:e.original.alias},e.original.alias)}},{key:"renderFeatureDescription",value:function(e){return i.a.createElement("div",{title:e.original.description},e.original.description)}},{key:"renderPAName",value:function(e){return i.a.createElement("div",{title:e.original.properties.name},e.original.properties.name)}},{key:"renderPADesignation",value:function(e){return i.a.createElement("div",{title:e.original.properties.desig},e.original.properties.desig)}},{key:"renderPAIUCNCategory",value:function(e){return i.a.createElement("div",{title:e.original.properties.iucn_cat},e.original.properties.iucn_cat)}},{key:"renderPALink",value:function(e){return i.a.createElement("span",{className:"ppLink underline"},i.a.createElement("a",{href:"https://www.protectedplanet.net/"+e.original.properties.wdpaid,target:"_blank",rel:"noopener noreferrer",title:"Click to open in the Protected Planet website"},e.original.properties.wdpaid))}},{key:"changeTab",value:function(e){this.setState({selectedValue:e})}},{key:"mouseLeave",value:function(e){this.clearTimeout(),this.props.hideIdentifyPopup(),this.setState({selectedValue:"pu"})}},{key:"mouseEnter",value:function(e){this.cancelTimer()}},{key:"mouseLeavePopup",value:function(e,t){var a=this;void 0===this.timer&&(this.timer=setTimeout((function(){a.timerCancelled||a.mouseLeave()}),e))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){clearTimeout(this.timer),this.timer=void 0}))},{key:"cancelTimer",value:function(e){this.timerCancelled=!0}},{key:"restartTimer",value:function(e){this.clearTimeout(),this.startTimer()}},{key:"startTimer",value:function(e){this.timerCancelled=!1,this.mouseLeavePopup(4e3)}},{key:"render",value:function(){var e=this.props.xy.x+25+"px",t=this.props.xy.y-25+"px",a="";switch(this.props.identifyPlanningUnits&&this.props.identifyPlanningUnits.puData&&this.props.identifyPlanningUnits.puData.status){case 0:a="Normal planning unit";break;case 1:a="Included in the initial reserve system but may or may not be in the final solution";break;case 2:a="This planning unit is fixed in the reserve system ('locked in'). It starts in the initial reserve system and cannot be removed.";break;case 3:a="This planning unit is fixed outside the reserve system ('locked out'). It is not included in the initial reserve system and cannot be added."}var n=this.props.identifyPlanningUnits.features&&1===this.props.identifyPlanningUnits.features.length?"One feature:":(this.props.identifyPlanningUnits.features&&this.props.identifyPlanningUnits.features.length)+" features:",s=this.props.identifyPlanningUnits&&this.props.identifyPlanningUnits.puData?i.a.createElement(bt.Tab,{label:"Planning units",value:"pu",key:"pu"},i.a.createElement(ue.a,{className:"spin",style:{display:this.props.loading?"inline-block":"none",color:"rgb(255, 64, 129)",position:"absolute",top:"-56px",left:"-7px"},key:"spinner"}),i.a.createElement("div",{className:"identifyPlanningUnitsHeader"},i.a.createElement("div",null,a),i.a.createElement("span",null,"Planning Unit ID: ",this.props.identifyPlanningUnits&&this.props.identifyPlanningUnits.puData&&this.props.identifyPlanningUnits.puData.id),i.a.createElement("span",{style:{paddingLeft:"10px"}}),i.a.createElement("span",null,"Cost: ",this.props.identifyPlanningUnits&&this.props.identifyPlanningUnits.puData&&this.props.identifyPlanningUnits.puData.cost)),i.a.createElement("div",{style:{display:this.props.identifyPlanningUnits&&this.props.identifyPlanningUnits.features&&this.props.identifyPlanningUnits.features.length?"block":"none"}},i.a.createElement("div",null,n),i.a.createElement($e.a,{showPagination:!1,className:"identifyPUFeaturesInfoTable",pageSize:this.props.loading?0:this.props.identifyPlanningUnits&&this.props.identifyPlanningUnits.features&&this.props.identifyPlanningUnits.features.length,minRows:0,noDataText:"",data:this.props.identifyPlanningUnits.features,columns:[{Header:"Name",accessor:"alias",width:275,headerStyle:{textAlign:"left"},Cell:this.renderName.bind(this)},{Header:"Amount",accessor:"amount",width:123,headerStyle:{textAlign:"left"},Cell:this.renderAmount.bind(this)}]})),i.a.createElement("div",{style:{display:this.props.identifyPlanningUnits&&this.props.identifyPlanningUnits.features&&0===this.props.identifyPlanningUnits.features.length?"block":"none"}},i.a.createElement("div",null,"No features occur in this planning grid"))):null,r=this.props.identifyFeatures&&this.props.identifyFeatures.length?i.a.createElement(bt.Tab,{label:"Features",value:"features",key:"features"},i.a.createElement($e.a,{showPagination:!1,className:"identifyFeaturesInfoTable",pageSize:this.props.identifyFeatures&&this.props.identifyFeatures.length,minRows:0,noDataText:"",data:this.props.identifyFeatures,columns:[{Header:"Name",accessor:"alias",width:275,headerStyle:{textAlign:"left"},Cell:this.renderFeatureName.bind(this)},{Header:"Description",accessor:"description",width:123,headerStyle:{textAlign:"left"},Cell:this.renderFeatureDescription.bind(this)}]})):null,o=this.props.identifyProtectedAreas&&this.props.identifyProtectedAreas.length?i.a.createElement(bt.Tab,{label:"Protected areas",value:"pas",key:"pas"},i.a.createElement($e.a,{showPagination:!1,className:"identifyProtectedAreasInfoTable",pageSize:this.props.identifyProtectedAreas&&this.props.identifyProtectedAreas.length,minRows:0,noDataText:"",data:this.props.identifyProtectedAreas,columns:[{Header:"Name",accessor:"properties.name",width:145,headerStyle:{textAlign:"left"},Cell:this.renderPAName.bind(this)},{Header:"Designation",accessor:"properties.desig",width:145,headerStyle:{textAlign:"left"},Cell:this.renderPADesignation.bind(this)},{Header:"IUCN Category",accessor:"properties.iucn_cat",width:95,headerStyle:{textAlign:"left"},Cell:this.renderPAIUCNCategory.bind(this)},{Header:"Link",width:61,Cell:this.renderPALink.bind(this)}]})):null,l=[s,r,o];s||r||o||(l=[]);var c=!s&&!r&&o;return i.a.createElement("div",{style:{display:this.props.visible&&l.length?"block":"none",left:e,top:t},id:"popup",onMouseLeave:this.mouseLeave.bind(this),onMouseEnter:this.mouseEnter.bind(this)},i.a.createElement(bt.Tabs,{contentContainerStyle:{margin:"20px"},className:"identifyPopup",value:c?"pas":this.state.selectedValue,onChange:this.changeTab.bind(this)},l))}}]),a}(i.a.Component),Qa=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={target_value:17,validTarget:!0},n}return Object(h.a)(a,[{key:"handleKeyPress",value:function(e){"Enter"===e.nativeEvent.key&&this.validateTarget()}},{key:"validateTarget",value:function(){var e=x(this.state.target_value);this.setState({validTarget:e}),e&&(this.props.updateTargetValueForFeatures(this.state.target_value),this.props.onOk())}},{key:"onOk",value:function(){this.validateTarget()}},{key:"render",value:function(){var e=this;return n.createElement(de,Object.assign({},this.props,{contentWidth:240,offsetX:80,offsetY:260,title:"Target for all features",onOk:this.onOk.bind(this),children:n.createElement(n.Fragment,null,n.createElement(be,{style:{fontSize:"13px",width:"70px"},id:"commonTarget",onChange:function(t,a){return e.setState({target_value:a})},defaultValue:this.state.target_value,onKeyPress:this.handleKeyPress.bind(this),floatingLabelShrinkStyle:{fontSize:"16px"},floatingLabelFocusStyle:{fontSize:"16px"},errorText:this.state.validTarget?"":"Invalid target"}))}))}}]),a}(n.PureComponent),Xa=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"copyToClipboard",value:function(e){window.navigator.clipboard.writeText(this.props.shareableLinkUrl).then((function(){}),(function(){alert("Browser not supported")}))}},{key:"render",value:function(){var e=this;return n.createElement(de,Object.assign({},this.props,{contentWidth:600,height:100,offsetX:80,offsetY:360,title:"Shareable link",children:n.createElement(n.Fragment,null,n.createElement(be,{style:{fontSize:"13px",width:"550px"},multiLine:!0,rows:2,onChange:function(t,a){return e.setState({target_value:a})},defaultValue:this.props.shareableLinkUrl,floatingLabelShrinkStyle:{fontSize:"16px"},floatingLabelFocusStyle:{fontSize:"16px"}}),n.createElement(ce,{icon:n.createElement(Z.a,{icon:$.g}),title:"Copy",onClick:this.copyToClipboard.bind(this)}))}))}}]),a}(n.PureComponent),Ya=a(454),qa=a.n(Ya),Ja=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this,t=Number(this.props.current_protected_percent.toFixed(1)),a=C(this.props.country_area,this.props.reportUnits,!1),i=C(this.props.current_protected_area,this.props.reportUnits,!1),s="Total area: "+C(this.props.total_area,this.props.reportUnits,!1)+"\nCountry area: "+a+"\nProtected area: "+i,r=this.props.showCountryArea?[{name:"Protected area",value:this.props.current_protected_area},{name:"Country area",value:this.props.country_area-this.props.current_protected_area},{name:"Total area",value:this.props.total_area-this.props.country_area}]:[{name:"Protected area",value:this.props.current_protected_area},{name:"Total area",value:this.props.country_area-this.props.current_protected_area}],o=["#D9D9D9",this.props.color];return n.createElement(n.Fragment,null,n.createElement("div",{className:"MetChart"},n.createElement("div",{className:"MetChartTitle"},this.props.title),n.createElement(qa.a,null),n.createElement("div",{className:"MetChartInner"},n.createElement(Fa.h,{width:120,height:120},n.createElement(Fa.g,{data:r,cx:"50%",cy:"50%",isAnimationActive:!1,startAngle:90,endAngle:450,innerRadius:30,outerRadius:50},r.map((function(t,a){var i;switch(a){case 0:i=e.props.color;break;case 1:i=e.props.showCountryArea?"#bbbbbb":"#dddddd";break;default:i="#dddddd"}return n.createElement(Fa.d,{key:a,fill:i,strokeWidth:2})})))),n.createElement("div",{style:{color:o[1]},className:"MetChartPercentLabel"},t,"%"),n.createElement("div",{className:"MetChartDiv",style:!1!==this.props.clickable?{cursor:"pointer"}:null,title:s}))))}}]),a}(n.Component),Za=a(455),$a=a.n(Za),en=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return this.props&&this.props.active&&this.props&&this.props.payload?n.createElement("div",{className:"custom-tooltip"},n.createElement("div",{className:"tooltip"},this.props.payload[0].payload._alias),n.createElement("div",{className:"tooltip"},"Total area: ",C(this.props.payload[0].payload.total_area,this.props.reportUnits,!0)),n.createElement("div",{className:"tooltip"},"Country area: ",C(this.props.payload[0].payload.country_area,this.props.reportUnits,!0)),n.createElement("div",{className:"tooltip"},"Protected area: ",C(this.props.payload[0].payload.current_protected_area,this.props.reportUnits,!0))):null}}]),a}(n.PureComponent),tn=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={showChart:!1},n}return Object(h.a)(a,[{key:"getRepresentationScore",value:function(e){var t,a,n=0;e.length&&(e[0].hasOwnProperty("current_protected_area")?(t="current_protected_area",a="country_area"):(t="protected_area",a="pu_area")),e.forEach((function(e){var i=e[t]/e[a]/(e.target_value/100);isNaN(i)||(n+=i>1?1:i)}));var i=n/e.length;return Number(100*i).toFixed(1)}},{key:"toggleView",value:function(e,t){this.setState({showChart:t})}},{key:"renderTooltip",value:function(e,t,a){return"wibble"}},{key:"render",value:function(){var e=this,t=this.props.gapAnalysis.map((function(t){var a=e.props.projectFeatures.filter((function(e){return e.feature_class_name===t._feature_class_name}))[0];return a?Object.assign(t,{target_value:a.target_value,color:a.color}):t}));t.sort((function(e,t){return e.current_protected_percent<t.current_protected_percent?-1:1})),t=t.filter((function(e){return e.country_area>0}));var a=0,i=t.map((function(t,i){return t.country_area>0?(t.current_protected_percent>=t.target_value&&(a+=1),n.createElement(Ja,Object.assign({},t,{title:t._alias,color:t.color,key:t._feature_class_name,reportUnits:e.props.reportUnits,showCountryArea:!1,dataKey:t._feature_class_name}))):null})),s=this.props.gapAnalysis.length?this.getRepresentationScore(t):"Calcuating..";return n.createElement(de,Object.assign({showSpinner:this.props.preprocessing,autoDetectWindowHeight:!1},this.props,{contentWidth:680,title:"Gap Analysis",helpLink:"user.html#gap-analysis-window",onRequestClose:this.props.closeGapAnalysisDialog,showCancelButton:!1,children:n.createElement(n.Fragment,{key:"gapAnalysiskey"},n.createElement("div",{className:"analysisReport"},n.createElement("div",null,"Gap Analysis for ",this.props.metadata.pu_country," using the ",this.props.marxanServer.wdpa_version," version of the WDPA"),n.createElement("div",{className:"analysisReportInner",style:{display:this.props.gapAnalysis.length?"block":" none"}},n.createElement("div",{className:"analysisChartsDiv",style:{display:this.state.showChart?"none":"block"}},i),n.createElement(Fa.e,{width:550,height:350,data:t,margin:{bottom:20,top:20},style:{display:this.state.showChart?"block":"none",margin:"auto"}},n.createElement(Fa.c,{strokeDasharray:"1",stroke:"#f4f4f4"}),n.createElement(Fa.k,{dataKey:"_alias",height:100,angle:-90,textAnchor:"end",dx:-5}),n.createElement(Fa.l,{tick:{fontSize:11}},n.createElement(Fa.f,{value:"Percent Protected",angle:-90,position:"insideBottomLeft",style:{fontSize:"11px",color:"#222222"},offset:30})),n.createElement(Fa.j,{content:n.createElement(en,{reportUnits:this.props.reportUnits})}),n.createElement(Fa.a,{dataKey:"current_protected_percent",fill:"#8884d8"},t.map((function(e,t){return n.createElement(Fa.d,{fill:e.color,key:e.color})}))),n.createElement(Fa.i,{y:t.length?t[0].target_value:0,stroke:"#7C7C7C",strokeDasharray:"3 3",style:{display:t.length?"inline":"none"}})),n.createElement("div",{className:"gapAnalysisBtmPanel"},n.createElement("div",{className:"gapAnalysisStatsPanel"},n.createElement("table",null,n.createElement("tbody",null,n.createElement("tr",null,n.createElement("td",null,"Features meeting targets:"),n.createElement("td",{className:"score"},a,"/",i.length)),n.createElement("tr",null,n.createElement("td",null,"Representation score:"),n.createElement("td",{className:"score"},s))))),n.createElement($a.a,{label:"Show as a chart",onToggle:this.toggleView.bind(this),style:{width:"unset",float:"right",paddingTop:"2px"},labelStyle:{fontSize:"14px",width:"100px",color:"rgba(0, 0, 0, 0.6)"},toggled:this.state.showChart})))))}))}}]),a}(n.PureComponent),an=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return n.createElement(de,Object.assign({},this.props,{contentWidth:240,title:"Reset database",okLabel:"Yes",cancelLabel:"No",showCancelButton:!0,children:n.createElement("div",null,"Are you sure you want to reset?")}))}}]),a}(n.PureComponent),nn=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props.registry&&this.props.registry.WDPA.latest_version+" is available. Details <a href='"+(this.props.registry&&this.props.registry.WDPA.metadataUrl)+"' target='_blank'>here</a>. Click below to update. ";return n.createElement(de,Object.assign({},this.props,{contentWidth:380,offsetY:260,title:"Update WDPA",children:n.createElement(n.Fragment,null,n.createElement("div",{style:{display:this.props.newWDPAVersion?"block":"none"}},n.createElement("br",null),n.createElement("div",{dangerouslySetInnerHTML:{__html:e}}),n.createElement("br",null),n.createElement(ce,{title:"Update WDPA",onClick:this.props.updateWDPA,label:"Update",disabled:this.props.loading})))}))}}]),a}(n.PureComponent),sn=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={searchText:"",gbifID:0,suggestions:[],clicked:!1},n}return Object(h.a)(a,[{key:"onOk",value:function(){var e=this;this.props.importGBIFData(this.state.selectedItem).then((function(t){e.props.onCancel()})).catch((function(t){e.props.onCancel()}))}},{key:"changeSearchText",value:function(e,t){var a=this;this.state.searchText.length>2&&!this.state.clicked&&this.props.gbifSpeciesSuggest(this.state.searchText).then((function(e){a.setState({suggestions:e})})),this.setState({searchText:t,clicked:!1,selectedItem:void 0})}},{key:"onClick",value:function(e,t){var a=this;this.setState({clicked:!0},(function(){a.setState({searchText:e.scientificName,selectedItem:e})}))}},{key:"render",value:function(){var e=this,t=this.state.suggestions.map((function(t){return i.a.createElement("div",{key:t.key,className:"suggestion",onClick:e.onClick.bind(e,t)},t.scientificName)}));return i.a.createElement(de,Object.assign({},this.props,{contentWidth:390,offsetY:80,title:"Import GBIF data",helpLink:"user.html#import-gbif-data",onOk:this.onOk.bind(this),okDisabled:void 0===this.state.selectedItem,showCancelButton:!0,autoDetectWindowHeight:!1,children:i.a.createElement(i.a.Fragment,{key:"importGBIFKey"},i.a.createElement("div",{className:"importGBIFContent"},i.a.createElement(be,{value:this.state.searchText,onChange:this.changeSearchText.bind(this),floatingLabelText:"Search",style:{width:"330px"}}),i.a.createElement("div",{className:"suggestions",style:{display:this.state.searchText.length>2&&!this.state.clicked?"block":"none"}},t),i.a.createElement(Ne.a,{label:"Add to project",style:{fontSize:"12px",width:"200px",display:"inline-block",marginTop:"10px"},onCheck:this.props.setAddToProject,checked:this.props.addToProject})))}))}}]),a}(i.a.Component),rn=g.version,on="https://docs.marxanweb.org/errors.html",ln=[1,2,3],cn=["None","IUCN I-II","IUCN I-IV","IUCN I-V","IUCN I-VI","All"],pn=["Marine","Terrestrial"],un=["Hexagon","Square"],hn=[10,20,30,40,50,100],dn="marxan_pu_results_layer",mn="marxan_wdpa_polygon_layer",gn=["rgba(255,255,204,0.8)","rgba(255,237,160,0.8)","rgba(254,217,118,0.8)","rgba(254,178,76,0.8)","rgba(253,141,60,0.8)","rgba(252,78,42,0.8)","rgba(227,26,28,0.8)","rgba(189,0,38,0.8)","rgba(128,0,38,0.8)"],fn=[{name:"id",key:"ID",hint:"The unique identifier for the feature",showForOld:!1,showForNew:!1},{name:"alias",key:"Alias",hint:"A human readable name for the feature",showForOld:!1,showForNew:!1},{name:"feature_class_name",key:"Feature class name",hint:"The internal name for the feature in the PostGIS database",showForOld:!1,showForNew:!1},{name:"description",key:"Description",hint:"Full description of the feature",showForOld:!1,showForNew:!1},{name:"creation_date",key:"Creation date",hint:"The date the feature was created or imported",showForOld:!1,showForNew:!1},{name:"tilesetid",key:"Mapbox ID",hint:"The unique identifier of the feature tileset in Mapbox",showForOld:!1,showForNew:!1},{name:"area",key:"Total area",hint:"The total area for the feature in Km2 (i.e. globally)",showForOld:!1,showForNew:!1},{name:"target_value",key:"Target percent",hint:"The target percentage for the feature within the planning grid",showForOld:!0,showForNew:!0},{name:"spf",key:"Species Penalty Factor",hint:"The species penalty factor is used to weight the likelihood of getting a species in the results",showForOld:!0,showForNew:!0},{name:"preprocessed",key:"Preprocessed",hint:"Whether or not the feature has been intersected with the planning units",showForOld:!1,showForNew:!0},{name:"pu_count",key:"Planning unit count",hint:"The number of planning units that intersect the feature (calculated during pre-processing)",showForOld:!0,showForNew:!0},{name:"pu_area",key:"Planning grid area",hint:"The area of the feature within the planning grid in Km2 (calculated during pre-processing)",showForOld:!0,showForNew:!0},{name:"target_area",key:"Target area",hint:"The total area that needs to be protected to achieve the target percentage in Km2 (calculated during a Marxan Run)",showForOld:!0,showForNew:!0},{name:"protected_area",key:"Area protected",hint:"The total area protected in the current solution in Km2 (calculated during a Marxan Run)",showForOld:!0,showForNew:!0}],yn=[],vn=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={registry:void 0,marxanServers:[],marxanServer:{},usersDialogOpen:!1,alertDialogOpen:!1,featureMenuOpen:!1,profileDialogOpen:!1,aboutDialogOpen:!1,helpDialogOpen:!1,importProjectDialogOpen:!1,UserSettingsDialogOpen:!1,welcomeDialogOpen:!1,registerDialogOpen:!1,clumpingDialogOpen:!1,settingsDialogOpen:!1,projectsDialogOpen:!1,openInfoDialogOpen:!1,importGBIFDialogOpen:!1,newProjectDialogOpen:!1,newProjectWizardDialogOpen:!1,shareableLinkDialogOpen:!1,classificationDialogOpen:!1,resendPasswordDialogOpen:!1,NewPlanningGridDialogOpen:!1,importPlanningGridDialogOpen:!1,ProjectsListDialogOpen:!1,changePasswordDialogOpen:!1,importFeaturesDialogOpen:!1,importFromWebDialogOpen:!1,serverDetailsDialogOpen:!1,planningGridsDialogOpen:!1,planningGridDialogOpen:!1,updateWDPADialogOpen:!1,NewFeatureDialogOpen:!1,importMXWDialogOpen:!1,featuresDialogOpen:!1,gapAnalysisDialogOpen:!1,featureDialogOpen:!1,runLogDialogOpen:!1,resetDialogOpen:!1,costsDialogOpen:!1,importCostsDialogOpen:!1,infoPanelOpen:!1,resultsPanelOpen:!1,targetDialogOpen:!1,notificationsOpen:!1,guestUserEnabled:!0,toolsMenuOpen:!1,userMenuOpen:!1,helpMenuOpen:!1,addToProject:!0,smallLinearGauge:!0,users:[],user:"",password:"",project:"",projectList:[],owner:"",loggedIn:!1,shareableLink:!1,userData:{SHOWWELCOMESCREEN:!0,REPORTUNITS:"Ha"},unauthorisedMethods:[],metadata:{},renderer:{},runParams:[],files:{},popup_point:{x:0,y:0},snackbarOpen:!1,snackbarMessage:"",tilesets:[],identifyPlanningUnits:{},identifyProtectedAreas:[],identifyFeatures:[],loading:!1,preprocessing:!1,uploading:!1,identifyVisible:!1,pa_layer_visible:!1,currentFeature:{},featureDatasetFilename:"",dataBreaks:[],allFeatures:[],projectFeatures:[],selectedFeatureIds:[],addingRemovingFeatures:!1,results_layer_opacity:.9,wdpa_layer_opacity:.2,costnames:[],selectedCosts:[],countries:[],planning_units:[],planning_unit_grids:[],planning_grid_metadata:{},feature_metadata:{},activeTab:"project",activeResultsTab:"legend",logMessages:[],map0_paintProperty:[],map1_paintProperty:[],map2_paintProperty:[],map3_paintProperty:[],map4_paintProperty:[],clumpingRunning:!1,projectListDialogTitle:"",projectListDialogHeading:"",pid:0,basemaps:[],basemap:"North Star",mapCentre:{lng:0,lat:0},mapZoom:12,runLogs:[],puEditing:!1,wdpaAttribution:"",shareableLinkUrl:"",notifications:[],gapAnalysis:[],showCosts:!1,costsLoading:!1,protected_area_intersections:[]},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URLSearchParams(window.location.search);t.has("project")&&this.setState({loggedIn:!0,shareableLink:!0}),this.getGlobalVariables().then((function(){t.has("project")&&e.openShareableLink(t),t.has("server")&&e._selectServer(t.get("server"))})),this.setState({brew:new T.a})}},{key:"getGlobalVariables",value:function(){var e=this;return new Promise((function(t,a){fetch("https://marxanweb.github.io/general/registry/marxan.json").then((function(a){a.json().then((function(a){e.setState({registry:a}),E.a.accessToken=a.MBAT_PUBLIC,e.setState({basemaps:a.MAPBOX_BASEMAPS}),e.initialiseServers(a.MARXAN_SERVERS).then((function(e){t(e)}))}))}))}))}},{key:"openShareableLink",value:function(e){var t=this;try{if(!(e.has("server")&&e.has("user")&&e.has("project")))throw new Error("Invalid query parameters on shareable link");var a=this.state.marxanServers.find((function(t){return t.name===e.get("server")}));if(void 0===a)throw new Error("Invalid server parameter on shareable link");if(a&&a.offline)throw new Error("Server is offline");if(a&&!a.guestUserEnabled)throw new Error("Guest user is not enabled on the server");this.selectServer(a),this.switchToGuestUser().then((function(){t.validateUser().then((function(a){t.loadProject(e.get("project"),e.get("user")).then((function(){t.setState({shareableLink:!1})}))}))}))}catch(n){alert(n)}}},{key:"_get",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Promise((function(n,i){t.setState({loading:!0}),A()(t.state.marxanServer.endpoint+e,{timeout:a}).promise.then((function(e){t.setState({loading:!1}),t.checkForErrors(e)?i(e.error):n(e)}),(function(e){t.setState({loading:!1}),t.setSnackBar("Request timeout - See <a href='"+on+"#request-timeout' target='blank'>here</a>"),i(e)}))}))}},{key:"_post",value:function(e,t){var a=this,n=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],!(arguments.length>3&&void 0!==arguments[3])||arguments[3]);return new Promise((function(i,s){a.setState({loading:!0}),Object(f.post)(a.state.marxanServer.endpoint+e,t,{withCredentials:n}).then((function(e){a.checkForErrors(e.data)?(a.setState({loading:!1}),s(e.data.error)):(a.setState({loading:!1}),i(e.data))}),(function(e){a.setState({loading:!1}),"Network Error"!==e.message&&a.setSnackBar(e.message),s(e)}))}))}},{key:"_ws",value:function(e,t){var a=this;return new Promise((function(n,i){var s=new WebSocket(a.state.marxanServer.websocketEndpoint+e);s.onmessage=function(e){var s=JSON.parse(e.data);a.checkForErrors(s)?(t(s),a.setState({preprocessing:!1}),i(s.error)):"Finished"===s.status?(t(s),a.setState({preprocessing:!1}),n(s)):t(s)},s.onopen=function(e){},s.onerror=function(e){a.setState({preprocessing:!1}),i(e)},s.onclose=function(e){a.setState({preprocessing:!1}),e.wasClean?i(e):t({status:"SocketClosedUnexpectedly"})}}))}},{key:"checkForErrors",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this.responseIsTimeoutOrEmpty(e,t),n=this.isServerError(e,t),i=a||n;if(i){var s=e.hasOwnProperty("trace")?e.trace:e.hasOwnProperty("error")?e.error:"No error message returned";console.error("Error message from server: "+s)}return i}},{key:"responseIsTimeoutOrEmpty",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e)return!1;var a="No response received from server";return t&&this.setSnackBar(a),!0}},{key:"isServerError",value:function(e,t){if(e&&e.error||e&&e.hasOwnProperty("metadata")&&e.metadata.hasOwnProperty("error")&&null!=e.metadata.error){var a=e.error?e.error:e.metadata.error;return t&&this.setSnackBar(a),!0}return e.warning&&t&&this.setSnackBar(e.warning),!1}},{key:"wsMessageCallback",value:function(e){if(!this.state.clumpingRunning)switch(this.logMessage(e),e.status){case"Started":this.setState({preprocessing:!0});break;case"pid":this.setState({pid:e.pid});break;case"FeatureCreated":this.removeMessageFromLog("Preprocessing"),this.newFeatureCreated(e.id);break;case"Finished":this.setState({pid:0}),this.removeMessageFromLog("Preprocessing")}}},{key:"logMessage",value:function(e){if("SocketClosedUnexpectedly"===e.status)this.log({method:e.method,status:"Finished",error:"The WebSocket connection closed unexpectedly"}),this.removeMessageFromLog("Preprocessing");else if(e.hasOwnProperty("pid")&&"RunningMarxan"!==e.status){var t=this.state.logMessages.filter((function(t){return!!t.hasOwnProperty("pid")&&t.pid===e.pid}));t.length>0?e.status!==t[t.length-1].status&&("Finished"===e.status&&this.removeMessageFromLog("RunningQuery",e.pid),this.log(e)):this.log(e)}else"RunningMarxan"!==e.status&&this.removeMessageFromLog(e.status),this.log(e)}},{key:"removeMessageFromLog",value:function(e,t){var a=this.state.logMessages;a=a.filter((function(a){return void 0!==t?!a.hasOwnProperty("pid")||!(a.pid===t&&a.status===e):!(a.status===e)})),this.setState({logMessages:a})}},{key:"setSnackBar",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t||this.setState({snackbarOpen:!0,snackbarMessage:e})}},{key:"initialiseServers",value:function(e){var t=this;return new Promise((function(a,n){var i=e.map((function(e){return e.host})),s="localhost"===window.location.hostname?"localhost":window.location.hostname;e.push({name:s,protocol:window.location.protocol,host:window.location.hostname,port:80,description:"Local machine",type:"local"}),t.getAllServerCapabilities(e).then((function(n){(e=e.filter((function(e){return"remote"===e.type||"local"===e.type&&!e.offline&&-1===i.indexOf(e.host)||"localhost"===e.host}))).sort((function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()||"local"===e.type?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0})),t.setState({marxanServers:e},(function(){a("ServerData retrieved")}))}))}))}},{key:"getAllServerCapabilities",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a,n=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.map(function(){var e=Object(p.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getServerCapabilities(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return a=e.sent,e.next=5,Promise.all(a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getServerCapabilities",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a,n,i,s,r,o,l,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.protocol+"//"+t.host+":"+t.port+"/marxan-server/",n="http:"===t.protocol?"ws://"+t.host+":"+t.port+"/marxan-server/":"wss://"+t.host+":"+t.port+"/marxan-server/",t=Object.assign(t,{endpoint:a,websocketEndpoint:n,offline:!0,guestUserEnabled:!1,corsEnabled:!1}),e.prev=3,i=new AbortController,s=i.signal,r=setTimeout((function(){return i.abort()}),2e3),e.next=9,fetch(a+"getServerData",{credentials:"include",signal:s});case 9:if(o=e.sent,clearTimeout(r),o.ok){e.next=13;break}throw Error("fetch returned a 404 or 500 error: "+o.statusText);case 13:return e.next=15,o.json();case 15:(l=e.sent).hasOwnProperty("info")&&(p=l.serverData.PERMITTED_DOMAINS.indexOf(window.location.hostname)>-1||t.host===window.location.hostname,t=Object.assign(t,{guestUserEnabled:l.serverData.ENABLE_GUEST_USER,corsEnabled:p,offline:!1,machine:l.serverData.MACHINE,client_version:l.serverData.MARXAN_CLIENT_VERSION,server_version:l.serverData.MARXAN_SERVER_VERSION,node:l.serverData.NODE,processor:l.serverData.PROCESSOR,processor_count:l.serverData.PROCESSOR_COUNT,ram:l.serverData.RAM,release:l.serverData.RELEASE,system:l.serverData.SYSTEM,version:l.serverData.VERSION,wdpa_version:l.serverData.WDPA_VERSION,planning_grid_units_limit:Number(l.serverData.PLANNING_GRID_UNITS_LIMIT),disk_space:l.serverData.DISK_FREE_SPACE,shutdowntime:l.serverData.SHUTDOWNTIME,enable_reset:l.serverData.ENABLE_RESET}),""!==l.serverData.SERVER_NAME&&(t=Object.assign(t,{name:l.serverData.SERVER_NAME})),""!==l.serverData.SERVER_DESCRIPTION&&(t=Object.assign(t,{description:l.serverData.SERVER_DESCRIPTION}))),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(3),console.log("fetch failed with: "+e.t0);case 22:case"end":return e.stop()}}),e,null,[[3,19]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_selectServer",value:function(e){window.history.replaceState({},document.title,"/");var t=this.state.marxanServers.filter((function(t){return t.name===e}));t.length&&this.selectServer(t[0])}},{key:"setWDPAVectorTilesLayerName",value:function(e){var t=e.toLowerCase().substr(0,3)+"_"+e.substr(-4);this.wdpa_vector_tile_layer="wdpa_"+t+"_polygons"}},{key:"selectServer",value:function(e){this.setState({marxanServer:e}),e.wdpa_version!==this.state.registry.WDPA.latest_version?this.setState({newWDPAVersion:!0}):this.setState({newWDPAVersion:!1}),this.setWDPAVectorTilesLayerName(e.wdpa_version),e.offline||e.corsEnabled||!e.guestUserEnabled||this.switchToGuestUser()}},{key:"closeSnackbar",value:function(){this.setState({snackbarOpen:!1})}},{key:"startLogging",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.log_tab_active(),e&&this.clearLog()}},{key:"clearLog",value:function(){this.setState({logMessages:[]})}},{key:"log",value:function(e){var t=this.state.logMessages;t.push(e),this.setState({logMessages:t})}},{key:"getPuidsFromNormalisedData",value:function(e){var t=[];return e.forEach((function(e){t=t.concat(e[1])})),t}},{key:"changeUserName",value:function(e){this.setState({user:e})}},{key:"changePassword",value:function(e){this.setState({password:e})}},{key:"checkPassword",value:function(e,t){var a=this;return new Promise((function(n,i){a._get("validateUser?user="+e+"&password="+t,1e4).then((function(e){n()})).catch((function(e){i(e)}))}))}},{key:"validateUser",value:function(){var e=this;return new Promise((function(t,a){e.checkPassword(e.state.user,e.state.password).then((function(){e.login().then((function(e){t("User validated")}))})).catch((function(e){}))}))}},{key:"login",value:function(){var e=this;return new Promise((function(t,a){e._get("getUser?user="+e.state.user).then((function(a){e.setState({userData:a.userData,unauthorisedMethods:a.unauthorisedMethods,project:a.userData.LASTPROJECT,dismissedNotifications:a.dismissedNotifications?a.dismissedNotifications:[]},(function(){}));var n=e.state.basemaps.filter((function(e){return e.name===a.userData.BASEMAP}))[0];e.setBasemap(n).then((function(){e.getAllFeatures().then((function(){e.loadProject(a.userData.LASTPROJECT,e.state.user).then((function(e){t("Logged in")}))})),e.getPlanningUnitGrids()}))})).catch((function(e){}))}))}},{key:"logout",value:function(){this.hideUserMenu(),this.setState({loggedIn:!1,user:"",password:"",project:"",owner:"",runParams:[],files:{},metadata:{},renderer:{},planning_units:[],projectFeatures:[],infoPanelOpen:!1,resultsPanelOpen:!1,brew:new T.a,notifications:[]}),this.resetResults(),this._get("logout").then((function(e){}))}},{key:"switchToGuestUser",value:function(){var e=this;return new Promise((function(t,a){e.setState({user:"guest",password:"password"},(function(){t("Switched to guest user")}))}))}},{key:"changeEmail",value:function(e){this.setState({resendEmail:e})}},{key:"resendPassword",value:function(){var e=this;this._get("resendPassword?user="+this.state.user).then((function(t){e.setSnackBar(t.info),e.closeResendPasswordDialog()})).catch((function(e){}))}},{key:"getUsers",value:function(){var e=this;this._get("getUsers").then((function(t){e.setState({users:t.users})})).catch((function(t){e.setState({users:[]})}))}},{key:"deleteUser",value:function(e){var t=this;this._get("deleteUser?user="+e).then((function(a){t.setSnackBar("User deleted");var n=t.state.users;n=n.filter((function(t){return t.user!==e})),t.setState({users:n}),t.state.owner===e&&(t.setSnackBar("Current project no longer exists. Loading next available."),t.state.projects.some((function(a){return a.user!==e&&t.loadProject(a.name,a.user),a.name!==t.state.project})),t.deleteProjectsForUser(e))}))}},{key:"deleteProjectsForUser",value:function(e){var t=this.state.projects.map((function(t){return t.user!==e}));this.setState({projects:t})}},{key:"changeRole",value:function(e,t){this.updateUser({ROLE:t},e);var a=this.state.users;a=a.map((function(a){return a.user===e?Object.assign(a,{ROLE:t}):a})),this.setState({users:a})}},{key:"toggleEnableGuestUser",value:function(){var e=this;this._get("toggleEnableGuestUser").then((function(t){var a=e.state.marxanServer;a=Object.assign(a,{guestUserEnabled:t.enabled}),e.setState({marxanServer:a})}))}},{key:"toggleProjectPrivacy",value:function(e){var t=this;this.updateProjectParameter("PRIVATE",e).then((function(a){t.setState({metadata:Object.assign(t.state.metadata,{PRIVATE:"True"===e})})}))}},{key:"parseNotifications",value:function(){this.state.registry.NOTIFICATIONS.length>0&&this.addNotifications(this.state.registry.NOTIFICATIONS),this.state.newWDPAVersion&&this.addNotifications([{id:"wdpa_update_"+this.state.registry.WDPA.latest_version,html:"A new version of the WDPA is available. Go to Help | Server Details for more information.",type:"Data Update",showForRoles:["Admin"]}]),rn!==this.state.registry.CLIENT_VERSION&&this.addNotifications([{id:"marxan_client_update_"+this.state.registry.CLIENT_VERSION,html:"A new version of marxan-client is available ("+this.state.registry.CLIENT_VERSION+"). Go to Help | About for more information.",type:"Software Update",showForRoles:["Admin"]}]),this.state.marxanServer.server_version!==this.state.registry.SERVER_VERSION&&this.addNotifications([{id:"marxan_server_update_"+this.state.registry.SERVER_VERSION,html:"A new version of marxan-server is available ("+this.state.registry.SERVER_VERSION+"). Go to Help | Server Details for more information.",type:"Software Update",showForRoles:["Admin"]}]),this.state.marxanServer.disk_space<1e3?this.addNotifications([{id:"hardware_1000",html:"Disk space < 1Gb",type:"Hardware Issue",showForRoles:["Admin"]}]):this.state.marxanServer.disk_space<2e3?this.addNotifications([{id:"hardware_2000",html:"Disk space < 2Gb",type:"Hardware Issue",showForRoles:["Admin"]}]):this.state.marxanServer.disk_space<3e3&&this.addNotifications([{id:"hardware_3000",html:"Disk space < 3Gb",type:"Hardware Issue",showForRoles:["Admin"]}])}},{key:"hideNotifications",value:function(){this.setState({notificationsOpen:!1})}},{key:"addNotifications",value:function(e){var t=this,a=this.state.notifications;e=e.map((function(e){var a=e.showForRoles.indexOf(t.state.userData.ROLE)>-1,n=-1===t.state.dismissedNotifications.indexOf(String(e.id)),i=!0;if(e.hasOwnProperty("expires")&&e.hasOwnProperty("expires")&&""!==e.expires)try{var s=Date.parse(e.expires);new Date>s&&(i=!1)}catch(o){}var r=a&&n&&i;return Object.assign(e,{visible:r})})),a.push.apply(a,e),this.setState({notifications:a})}},{key:"removeNotification",value:function(e){var t=this.state.notifications.filter((function(t){return t.id!==e.id}));this.dismissNotification(e),this.setState({notifications:t})}},{key:"dismissNotification",value:function(e){this._get("dismissNotification?user="+this.state.user+"&notificationid="+e.id)}},{key:"resetNotifications",value:function(){var e=this;this._get("resetNotifications?user="+this.state.user).then((function(){e.setState({notifications:[],dismissedNotifications:[]}),e.parseNotifications()}))}},{key:"appendToFormData",value:function(e,t){for(var a in t)t.hasOwnProperty(a)&&e.append(a,t[a]);return e}},{key:"removeKeys",value:function(e,t){return t.map((function(t){return delete e[t],null})),e}},{key:"updateUser",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.user;return new Promise((function(n,i){e=t.removeKeys(e,["updated","validEmail"]);var s=new FormData;s.append("user",a),t.appendToFormData(s,e),t._post("updateUserParameters",s).then((function(e){t.state.user===a&&t.setState({userData:t.newUserData}),n()})).catch((function(e){i(e)})),t.state.user===a&&(t.newUserData=Object.assign(t.state.userData,e))}))}},{key:"saveOptions",value:function(e){this.updateUser(e)}},{key:"upgradeProject",value:function(e){return this._get("upgradeProject?user="+this.state.user+"&project="+e)}},{key:"updateProjectParams",value:function(e,t){var a=new FormData;return a.append("user",this.state.owner),a.append("project",e),this.appendToFormData(a,t),this._post("updateProjectParameters",a)}},{key:"updateProjectParameter",value:function(e,t){var a={};return a[e]=t,this.updateProjectParams(this.state.project,a)}},{key:"updateRunParams",value:function(e){var t=this,a={};e.map((function(e){return a[e.key]=e.value,null})),this.updateProjectParams(this.state.project,a).then((function(e){t.setState({runParams:t.runParams})})),this.runParams=e}},{key:"getPlanningUnitGrids",value:function(){var e=this;this._get("getPlanningUnitGrids").then((function(t){e.setState({planning_unit_grids:t.planning_unit_grids})}))}},{key:"loadProject",value:function(e,t){var a=this;return new Promise((function(n,i){a.resetResults(),a._get("getProject?user="+t+"&project="+e).then((function(e){a.setState({loggedIn:!0,project:e.project,owner:t,runParams:e.runParameters,files:Object.assign(e.files),metadata:e.metadata,renderer:e.renderer,planning_units:e.planning_units,costnames:e.costnames,infoPanelOpen:!0,resultsPanelOpen:!0}),e.metadata.PLANNING_UNIT_NAME&&a.changePlanningGrid("blishten."+e.metadata.PLANNING_UNIT_NAME).then((function(){a.getResults(t,e.project).then((function(e){n("Project loaded")}))})),a.feature_preprocessing=e.feature_preprocessing,a.setState({protected_area_intersections:e.protected_area_intersections}),a.previousIucnCategory=e.metadata.IUCN_CATEGORY,a.initialiseInterestFeatures(e.metadata.OLDVERSION,e.features),a.project_tab_active()})).catch((function(e){e.indexOf("Logged on as read-only guest user")>-1&&(a.setState({loggedIn:!0}),n("No project loaded - logged on as read-only guest user'")),e.indexOf("does not exist")>-1&&(a.setSnackBar("Loading first available project"),a.loadProject("",a.state.user))}))}))}},{key:"getArrayItem",value:function(e,t){var a=e.filter((function(e){return e[0]===t}));return a.length>0?a[0]:void 0}},{key:"initialiseInterestFeatures",value:function(e,t){var a=this,n=e?JSON.parse(JSON.stringify(t)):this.state.allFeatures,i=t.map((function(e){return e.id})),s=n.map((function(n){var s=i.indexOf(n.id)>-1?t[i.indexOf(n.id)]:null,r=a.getArrayItem(a.feature_preprocessing,n.id);return a.addFeatureAttributes(n,e),s&&(n.selected=!0,n.preprocessed=!!r,n.pu_area=r?r[1]:-1,n.pu_count=r?r[2]:-1,n.spf=s.spf,n.target_value=s.target_value,n.occurs_in_planning_grid=n.pu_count>0),n}));this.getSelectedFeatureIds(),this.setState({allFeatures:s,projectFeatures:s.filter((function(e){return e.selected}))})}},{key:"addFeatureAttributes",value:function(e,t){e.selected=!1,e.preprocessed=!1,e.pu_area=-1,e.pu_count=-1,e.spf=40,e.target_value=17,e.target_area=-1,e.protected_area=-1,e.feature_layer_loaded=!1,e.feature_puid_layer_loaded=!1,e.old_version=t,e.occurs_in_planning_grid=!1,e.color=window.colors[e.id%window.colors.length],e.in_filter=!0}},{key:"resetResults",value:function(){this.resetRun(),this.cost_data=void 0,this.setState({showCosts:!1}),this.hideFeatureLayer(),this.hideLayer("marxan_pu_puvspr_layer")}},{key:"resetRun",value:function(){this.runMarxanResponse={},this.setState({solutions:[]})}},{key:"createNewUser",value:function(e,t,a,n){var i=this,s=new FormData;s.append("user",e),s.append("password",t),s.append("fullname",a),s.append("email",n),this._post("createUser",s).then((function(t){i.setSnackBar(t.info),i.closeRegisterDialog(),i.setState({user:e,password:""})}))}},{key:"createNewProject",value:function(e){var t=this,a=new FormData;a.append("user",this.state.user),a.append("project",e.name),a.append("description",e.description),a.append("planning_grid_name",e.planning_grid_name);var n=[],i=[],s=[];e.features.forEach((function(e){n.push(e.id),i.push(17),s.push(40)})),a.append("interest_features",n.join(",")),a.append("target_values",i.join(",")),a.append("spf_values",s.join(",")),this._post("createProject",a).then((function(e){t.setSnackBar(e.info),t.setState({projectsDialogOpen:!1}),t.loadProject(e.name,e.user)}))}},{key:"createNewNationalProject",value:function(e){var t=this;return new Promise((function(a,n){t.createNewPlanningUnitGrid(e.iso3,e.domain,e.areakm2,e.shape).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}))}},{key:"createImportProject",value:function(e){var t=new FormData;return t.append("user",this.state.user),t.append("project",e),this._post("createImportProject",t)}},{key:"deleteProject",value:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._get("deleteProject?user="+e+"&project="+t).then((function(e){a.getProjects(),a.setSnackBar(e.info,n),e.project===a.state.project&&(a.setSnackBar("Current project deleted - loading first available"),a.state.projects.some((function(e){return e.name!==a.state.project&&a.loadProject(e.name,a.state.user),e.name!==a.state.project})))}))}},{key:"exportProject",value:function(e,t){var a=this;return new Promise((function(n,i){a.log_tab_active(),a._ws("exportProject?user="+e+"&project="+t,a.wsMessageCallback.bind(a)).then((function(e){n(a.state.marxanServer.endpoint+"exports/"+e.filename)})).catch((function(e){i(e)}))}))}},{key:"cloneProject",value:function(e,t){var a=this;this._get("cloneProject?user="+e+"&project="+t).then((function(e){a.getProjects(),a.setSnackBar(e.info)})).catch((function(e){}))}},{key:"renameProject",value:function(e){var t=this;return new Promise((function(a,n){""!==e&&e!==t.state.project&&t._get("renameProject?user="+t.state.owner+"&project="+t.state.project+"&newName="+e).then((function(n){t.setState({project:e}),t.setSnackBar(n.info),a("Project renamed")})).catch((function(e){}))}))}},{key:"renameDescription",value:function(e){var t=this;return new Promise((function(a,n){t.updateProjectParameter("DESCRIPTION",e).then((function(n){t.setState({metadata:Object.assign(t.state.metadata,{DESCRIPTION:e})}),a("Description renamed")}))}))}},{key:"getProjects",value:function(){var e=this;this._get("getProjects?user="+this.state.user).then((function(t){var a=[];t.projects.forEach((function(t){t.private&&t.user!==e.state.user&&"Admin"!==e.state.userData.ROLE||a.push(t)})),e.setState({projects:a})}))}},{key:"runMarxan",value:function(e){var t=this;this.startLogging(),this.resetProtectedAreas(),this.resetRun(),this.updateSpecFile().then((function(e){t.updatePuFile(),t.updatePuvsprFile().then((function(e){t.startMarxanJob(t.state.owner,t.state.project).then((function(e){t.getRunLogs(),t.checkForErrors(e)?t.runFinished([]):t.getResults(e.user,e.project)})).catch((function(e){t.marxanStopped(e)}))})).catch((function(e){console.error(e)}))})).catch((function(e){console.error(e)}))}},{key:"stopProcess",value:function(e){var t=this;this._get("stopProcess?pid="+e,1e4).catch((function(e){t.getRunLogs()}))}},{key:"marxanStopped",value:function(e){this.getRunLogs()}},{key:"resetProtectedAreas",value:function(){this.state.allFeatures.forEach((function(e){e.protected_area=-1,e.target_area=-1}))}},{key:"updateSpecFile",value:function(){var e=new FormData;e.append("user",this.state.owner),e.append("project",this.state.project);var t=[],a=[],n=[];return this.state.projectFeatures.forEach((function(e){t.push(e.id),a.push(e.target_value),n.push(e.spf)})),e.append("interest_features",t.join(",")),e.append("target_values",a.join(",")),e.append("spf_values",n.join(",")),this._post("updateSpecFile",e)}},{key:"updatePuFile",value:function(){}},{key:"updatePuvsprFile",value:function(){return this.preprocessAllFeatures()}},{key:"preprocessSingleFeature",value:function(){var e=Object(p.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.closeFeatureMenu(),this.startLogging(),this.preprocessFeature(t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"preprocessAllFeatures",value:function(){var e=Object(p.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=0;case 1:if(!(a<this.state.projectFeatures.length)){e.next=11;break}if((t=this.state.projectFeatures[a]).preprocessed){e.next=8;break}return e.next=6,this.preprocessFeature(t);case 6:e.next=8;break;case 8:++a,e.next=1;break;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"preprocessFeature",value:function(e){var t=this;return new Promise((function(a,n){t.log_tab_active(),t._ws("preprocessFeature?user="+t.state.owner+"&project="+t.state.project+"&planning_grid_name="+t.state.metadata.PLANNING_UNIT_NAME+"&feature_class_name="+e.feature_class_name+"&alias="+e.alias+"&id="+e.id,t.wsMessageCallback.bind(t)).then((function(n){t.updateFeature(e,{preprocessed:!0,pu_count:Number(n.pu_count),pu_area:Number(n.pu_area),occurs_in_planning_grid:Number(n.pu_count)>0}),a(n)})).catch((function(e){n(e)}))}))}},{key:"startMarxanJob",value:function(e,t){var a=this;return new Promise((function(n,i){a._ws("runMarxan?user="+e+"&project="+t,a.wsMessageCallback.bind(a)).then((function(e){n(e)})).catch((function(e){i(e)}))}))}},{key:"getResults",value:function(e,t){var a=this;return new Promise((function(n,i){a._get("getResults?user="+e+"&project="+t).then((function(e){a.runCompleted(e),n("Results retrieved")})).catch((function(e){i("Unable to get results")}))}))}},{key:"runCompleted",value:function(e){var t;this.runMarxanResponse=e,this.runMarxanResponse.ssoln&&this.runMarxanResponse.ssoln.length>0?(this.setSnackBar(e.info),this.renderSolution(this.runMarxanResponse.ssoln,!0),(t=(t=e.summary).map((function(e){return{Run_Number:e[0],Score:Number(e[1]).toFixed(1),Cost:Number(e[2]).toFixed(1),Planning_Units:e[3],Missing_Values:e[12]}}))).splice(0,0,{Run_Number:"Sum",Score:"",Cost:"",Planning_Units:"",Missing_Values:""}),this.updateProtectedAmount(this.runMarxanResponse.mvbest)):t=[],this.runFinished(t)}},{key:"runFinished",value:function(e){this.setState({solutions:e})}},{key:"updateProtectedAmount",value:function(e){var t=this.state.allFeatures;t.forEach((function(t){var a=e.findIndex((function(e){return e[0]===t.id}));if(a>-1){var n=e[a];Object.assign(t,{target_area:n[2],protected_area:n[3]})}})),this.setFeaturesState(t)}},{key:"importProject",value:function(e,t,a,n,i){var s=this;return new Promise((function(r,o){var l,c="";s.startLogging(),s.log({method:"importProject",status:"Importing",info:"Starting import.."}),s.createImportProject(e).then((function(p){s.log({method:"importProject",status:"Importing",info:"Project '"+e+"' created"}),s.importZippedShapefileAsPu(a,i,"Imported with the project '"+e+"'").then((function(a){c=a.feature_class_name,l=a.uploadId,s.log({method:"importProject",status:"Importing",info:"Planning grid imported"}),s.uploadFiles(n,e).then((function(a){s.log({method:"importProject",status:"Importing",info:"All files uploaded"}),s.upgradeProject(e).then((function(a){s.log({method:"importProject",status:"Importing",info:"Project updated to new version"});var n=new Date,i=("00"+n.getDate()).slice(-2)+"/"+("00"+(n.getMonth()+1)).slice(-2)+"/"+n.getFullYear().toString().slice(-2)+" "+("00"+n.getHours()).slice(-2)+":"+("00"+n.getMinutes()).slice(-2)+":"+("00"+n.getSeconds()).slice(-2);s.updateProjectParams(e,{DESCRIPTION:t+" (imported from an existing Marxan project)",CREATEDATE:i,OLDVERSION:"True",PLANNING_UNIT_NAME:c,OUTPUTDIR:"output"}).then((function(t){s.pollMapbox(l).then((function(t){s.getPlanningUnitGrids(),s.log({method:"importProject",status:"Finished",info:"Import complete"}),s.loadProject(e,s.state.user),r("Import complete")}))})).catch((function(e){o(e)}))})).catch((function(e){o(e)}))})).catch((function(e){o(e)}))})).catch((function(t){s.deleteProject(s.state.user,e,!0),o(t)}))})).catch((function(e){o(e)}))}))}},{key:"uploadFiles",value:function(){var e=Object(p.a)(c.a.mark((function e(t,a){var n,i,s,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=0;case 1:if(!(s<t.length)){e.next=15;break}if(".dat"!==(n=t.item(s)).name.slice(-4)){e.next=12;break}return(r=new FormData).append("user",this.state.owner),r.append("project",a),i=n.webkitRelativePath.split("/").slice(1).join("/"),r.append("filename",i),r.append("value",n),this.log({method:"uploadFiles",status:"Uploading",info:"Uploading: "+n.webkitRelativePath}),e.abrupt("return",this._post("uploadFile",r));case 12:s++,e.next=1;break;case 15:return e.abrupt("return","All files uploaded");case 16:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"uploadFileToProject",value:function(e,t,a){var n=this;return new Promise((function(a,i){var s=new FormData;s.append("user",n.state.owner),s.append("project",n.state.project),s.append("filename","input/"+t),s.append("value",e),n._post("uploadFile",s).then((function(e){a(e)}))}))}},{key:"uploadFileToFolder",value:function(e,t,a){var n=this;return new Promise((function(i,s){n.setState({loading:!0});var r=new FormData;r.append("value",e),r.append("filename",t),r.append("destFolder",a),n._post("uploadFileToFolder",r).then((function(e){i(e)}))}))}},{key:"pad",value:function(e,t){for(var a=e+"";a.length<t;)a="0"+a;return a}},{key:"importMXWProject",value:function(e,t,a){var n=this;return new Promise((function(i,s){n.startLogging(),n._ws("importProject?user="+n.state.user+"&project="+e+"&filename="+a+"&description="+t,n.wsMessageCallback.bind(n)).then((function(t){i(t),n.refreshFeatures(),n.loadProject(e,n.state.user)})).catch((function(e){s(e)}))}))}},{key:"loadSolution",value:function(e){var t=this;"Sum"===e?(this.updateProtectedAmount(this.runMarxanResponse.mvbest),this.renderSolution(this.runMarxanResponse.ssoln,!0)):this.getSolution(this.state.owner,this.state.project,e).then((function(e){t.updateProtectedAmount(e.mv),t.renderSolution(e.solution,!1)}))}},{key:"loadOtherSolution",value:function(e,t,a){var n=this;this.getSolution(e,t,a).then((function(e){var a=n.getPaintProperties(e.solution,!1,!1);if(n.projects)switch(n.projects.filter((function(e){return e.projectName===t}))[0].clump){case 0:n.setState({map0_paintProperty:a});break;case 1:n.setState({map1_paintProperty:a});break;case 2:n.setState({map2_paintProperty:a});break;case 3:n.setState({map3_paintProperty:a});break;case 4:n.setState({map4_paintProperty:a})}}))}},{key:"getSolution",value:function(e,t,a){return this._get("getSolution?user="+e+"&project="+t+"&solution="+a)}},{key:"getssolncount",value:function(e){var t=0,a=[];return e.map((function(e){return a.push({number:e[0],count:e[1].length}),t+=e[1].length,null})),this.setState({summaryStats:a}),t}},{key:"getssolnSample",value:function(e,t){var a=[],n=0,i=this.getssolncount(e);return e.map((function(e){return n=Math.ceil(e[1].length/i*t),a.push(Array(n).fill(e[0])),null})),[].concat.apply([],a)}},{key:"getSsolnData",value:function(e){var t=e.map((function(e){return e[1]}));return[].concat.apply([],t)}},{key:"classifyData",value:function(e,t,a,n){var i=this,s=this.getssolnSample(e,1e3);if(this.state.brew.setSeries(s),"opacity"===a&&(void 0===this.state.brew.colorSchemes.opacity||this.state.brew.colorSchemes.opacity&&!this.state.brew.colorSchemes.opacity[this.state.renderer.NUMCLASSES])){var r=this.state.brew,o=Array(Number(this.state.renderer.NUMCLASSES)).fill("rgba(255,0,136,").map((function(e,t){return e+1/i*(t+1)+")"}),this.state.renderer.NUMCLASSES);void 0===r.colorSchemes.opacity&&(r.colorSchemes.opacity=[]),r.colorSchemes.opacity[this.state.renderer.NUMCLASSES]=o,this.setState({brew:r})}this.state.brew.setColorCode(a);var l=P(this.state.brew,a);t>l&&(t=l,this.setState({renderer:Object.assign(this.state.renderer,{NUMCLASSES:t})})),this.state.brew.setNumClasses(t),this.state.brew.classify(n),this.setState({dataBreaks:this.state.brew.getBreaks()})}},{key:"rendererStateUpdated",value:function(e,t){this.renderSolution(this.runMarxanResponse.ssoln,!0),"ReadOnly"!==this.state.userData.ROLE&&this.updateProjectParameter(e,t)}},{key:"changeRenderer",value:function(e){var t=this;this.setState({renderer:Object.assign(this.state.renderer,{CLASSIFICATION:e})},(function(){t.rendererStateUpdated("CLASSIFICATION",e)}))}},{key:"changeNumClasses",value:function(e){var t=this;this.setState({renderer:Object.assign(this.state.renderer,{NUMCLASSES:e})},(function(){t.rendererStateUpdated("NUMCLASSES",e)}))}},{key:"changeColorCode",value:function(e){var t=this;this.state.renderer.NUMCLASSES>this.state.brew.getNumClasses()&&this.setState({renderer:Object.assign(this.state.renderer,{NUMCLASSES:this.state.brew.getNumClasses()})}),this.setState({renderer:Object.assign(this.state.renderer,{COLORCODE:e})},(function(){t.rendererStateUpdated("COLORCODE",e)}))}},{key:"changeShowTopClasses",value:function(e){var t=this;this.setState({renderer:Object.assign(this.state.renderer,{TOPCLASSES:e})},(function(){t.rendererStateUpdated("TOPCLASSES",e)}))}},{key:"renderSolution",value:function(e,t){if(e){var a=this.getPaintProperties(e,t,!0);this.map.setPaintProperty(dn,"fill-color",a.fillColor),this.map.setPaintProperty(dn,"fill-outline-color",a.oulineColor),this.map.setPaintProperty(dn,"fill-opacity",this.state.results_layer_opacity)}}},{key:"getPaintProperties",value:function(e,t,a){var n=this,i=this.initialiseFillColorExpression("puid"),s=this.initialiseFillColorExpression("puid");if(e.length>0){var r,o,l;if(a&&this.classifyData(e,Number(this.state.renderer.NUMCLASSES),this.state.renderer.COLORCODE,this.state.renderer.CLASSIFICATION),this.state.renderer.TOPCLASSES<this.state.renderer.NUMCLASSES){var c=this.state.brew.getBreaks();o=c[this.state.renderer.NUMCLASSES-this.state.renderer.TOPCLASSES+1]}else o=0;e.forEach((function(e,a){t?(l=e[0],r=n.state.brew.getColorInRange(l),l>=o?(i.push(e[1],r),s.push(e[1],"rgba(150, 150, 150, 0.6)")):(i.push(e[1],"rgba(0, 0, 0, 0)"),s.push(e[1],"rgba(0, 0, 0, 0)"))):(i.push(e[1],"rgba(255, 0, 136,1)"),s.push(e[1],"rgba(150, 150, 150, 0.6)"))})),i.push("rgba(0,0,0,0)"),s.push("rgba(0,0,0,0)")}else i="rgba(0, 0, 0, 0)",s="rgba(0, 0, 0, 0)";return{fillColor:i,oulineColor:s}}},{key:"initialiseFillColorExpression",value:function(e){return["match",["get",e]]}},{key:"renderPuEditLayer",value:function(){var e;this.state.planning_units.length>0?(e=["match",["get","puid"]],this.state.planning_units.forEach((function(t,a){var n;switch(t[0]){case 2:n="rgba(63, 63, 191, 1)";break;case 3:n="rgba(191, 63, 63, 1)"}e.push(t[1],n)})),e.push("rgba(150, 150, 150, 0)")):e="rgba(150, 150, 150, 0)",this.map.setPaintProperty("marxan_pu_status_layer","line-color",e),this.map.setPaintProperty("marxan_pu_status_layer","line-width",1.5)}},{key:"renderPuCostLayer",value:function(e){var t=this;return new Promise((function(a,n){var i;e.length>0?(i=["match",["get","puid"]],e.forEach((function(e,t){i.push(e[1],gn[t])})),i.push("rgba(150, 150, 150, 0)")):i="rgba(150, 150, 150, 0.7)",t.map.setPaintProperty("marxan_pu_costs_layer","fill-color",i),t.showLayer("marxan_pu_costs_layer"),a("Costs rendered")}))}},{key:"getRenderedFeatures",value:function(e,t){var a=[];return this.map.getLayer(t[0])&&(a=this.map.queryRenderedFeatures(e,{layers:t})),a}},{key:"createMap",value:function(e){this.map=new E.a.Map({container:this.mapContainer,style:e,center:[0,0],zoom:2}),this.map.on("load",this.mapLoaded.bind(this)),this.map.on("error",this.mapError.bind(this)),this.map.on("click",this.mapClick.bind(this))}},{key:"mapLoaded",value:function(e){var t=this;this.map.addControl(new E.a.ScaleControl),this.map.addControl(new E.a.NavigationControl,"bottom-right"),this.map.addControl(new j),this.mapboxDrawControls=new k.a({displayControlsDefault:!1,controls:{polygon:!0,trash:!0},defaultMode:"draw_polygon"}),this.map.on("moveend",(function(e){t.state.clumpingDialogOpen&&t.updateMapCentreAndZoom()})),this.map.on("draw.create",this.polygonDrawn.bind(this))}},{key:"updateMapCentreAndZoom",value:function(){this.setState({mapCentre:this.map.getCenter(),mapZoom:this.map.getZoom()})}},{key:"mapError",value:function(e){var t="";switch(e.error.message){case"Not Found":t="The tileset '"+e.source.url+"' was not found";break;case"Bad Request":t="The tileset from source '"+e.sourceId+"' was not found. See <a href='"+on+"#the-tileset-from-source-source-was-not-found' target='blank'>here</a>";break;default:t=e.error.message}"http status 200 returned without content."!==t&&(this.setSnackBar("MapError: "+t),console.error(t))}},{key:"mapClick",value:function(e){var t=this;if(!this.state.puEditing&&!this.map.getSource("mapbox-gl-draw-cold")){var a=this.map.getStyle().layers.filter((function(e){return"marxan_"===e.id.substr(0,7)})).map((function(e){return e.id})),n=this.getRenderedFeatures(e.point,a);this.setState({popup_point:e.point});var i=this.getFeaturesByLayerStartsWith(n,"marxan_pu_");i.length&&i[0].properties.puid&&this.getPUData(i[0].properties.puid);var s=this.getFeaturesByLayerStartsWith(n,"marxan_feature_layer_"),r=s.map((function(e){return e.sourceLayer}));s=Array.from(new Set(r)).map((function(e){return t.state.projectFeatures.filter((function(t){return t.feature_class_name===e}))[0]}));var o=this.getFeaturesByLayerStartsWith(n,"marxan_wdpa_");this.setState({identifyVisible:!0,identifyFeatures:s,identifyProtectedAreas:o})}}},{key:"getFeaturesByLayerStartsWith",value:function(e,t){return e.filter((function(e){return e.layer.id.substr(0,t.length)===t}))}},{key:"getPUData",value:function(e){var t=this;this._get("getPUData?user="+this.state.owner+"&project="+this.state.project+"&puid="+e).then((function(e){e.data.features.length&&t.joinArrays(e.data.features,t.state.projectFeatures,"species","id"),t.setState({identifyPlanningUnits:{puData:e.data.pu_data,features:e.data.features}})}))}},{key:"joinArrays",value:function(e,t,a,n){var i=[];return e.forEach((function(e){var s=t.filter((function(t){return t[n]===e[a]}));s.length&&i.push(Object.assign(e,s[0]))})),i}},{key:"hideIdentifyPopup",value:function(e){this.setState({identifyVisible:!1,identifyPlanningUnits:{}})}},{key:"getESRIStyle",value:function(e){return new Promise((function(t,a){fetch(e).then((function(e){return e.json().then((function(e){var a=e.sources.esri.url;fetch(a).then((function(n){return n.json().then((function(n){var i="/"===n.tiles[0].substr(0,1)?a+n.tiles[0]:a+"/"+n.tiles[0];e.sources.esri={type:"vector",scheme:"xyz",tilejson:n.tilejson||"2.0.0",format:n.tileInfo&&n.tileInfo.format||"pbf",maxzoom:15,tiles:[i],description:n.description,name:n.name},t(e)}))}))}))}))}))}},{key:"setBasemap",value:function(e){var t=this;return new Promise((function(a,n){t.setState({basemap:e.name}),t.getValidStyle(e).then((function(e){t.loadMapStyle(e).then((function(e){t.addWDPASource(),t.addWDPALayer(),t.state.tileset?(t.addPlanningGridLayers(t.state.tileset),t.state.owner&&t.getResults(t.state.owner,t.state.project),t.filterWdpaByIucnCategory(t.state.metadata.IUCN_CATEGORY),"planning_units"===t.state.activeTab&&t.pu_tab_active(),a()):a()}))}))}))}},{key:"getValidStyle",value:function(e){var t=this;return new Promise((function(a,n){switch(e.provider){case"esri":t.getESRIStyle(e.id).then((function(e){a(e)}));break;case"local":a({version:8,name:"blank",sources:{openmaptiles:{type:"vector",url:""}},layers:[{id:"background",type:"background",paint:{"background-color":"#ffffff"}}]});break;default:a("mapbox://styles/"+e.id)}}))}},{key:"loadMapStyle",value:function(e){var t=this;return new Promise((function(a,n){t.map?t.map.setStyle(e,{diff:!1}):t.createMap(e),t.map.on("style.load",(function(e){a("Map style loaded")}))}))}},{key:"changePlanningGrid",value:function(e){var t=this;return new Promise((function(a,n){t.getMetadata(e).then((function(e){t.removePlanningGridLayers(),t.addPlanningGridLayers(e),null!=e.bounds&&O(t.map,e.bounds),t.setState({tileset:e}),t.filterWdpaByIucnCategory(t.state.metadata.IUCN_CATEGORY),a()})).catch((function(e){t.setSnackBar(e),n(e)}))}))}},{key:"getMetadata",value:function(e){var t=this;return new Promise((function(a,n){fetch("https://api.mapbox.com/v4/"+e+".json?secure&access_token="+t.state.registry.MBAT_PUBLIC).then((function(e){return e.json()})).then((function(t){null!=t.message&&t.message.indexOf("does not exist")>0?n("The tileset '"+e+"' was not found. See <a href='"+on+"#the-tileset-from-source-source-was-not-found' target='blank'>here</a>"):a(t)}))}))}},{key:"addPlanningGridLayers",value:function(e){var t=(this.state.basemap,"");this.map.addSource("marxan_planning_units_source",{type:"vector",url:"mapbox://"+e.id}),this.map.addLayer({id:dn,type:"fill",source:"marxan_planning_units_source","source-layer":e.name,paint:{"fill-color":"rgba(0, 0, 0, 0)","fill-outline-color":"rgba(0, 0, 0, 0)"}},t),this.map.addLayer({id:"marxan_pu_costs_layer",type:"fill",source:"marxan_planning_units_source",layout:{visibility:"none"},"source-layer":e.name,paint:{"fill-color":"rgba(255, 0, 0, 0)","fill-outline-color":"rgba(150, 150, 150, 0)"}},t),this.setState({resultsLayer:this.map.getLayer(dn)}),this.map.addLayer({id:"marxan_pu_layer",type:"fill",source:"marxan_planning_units_source",layout:{visibility:"none"},"source-layer":e.name,paint:{"fill-color":"rgba(0, 0, 0, 0)","fill-outline-color":"rgba(150, 150, 150, 0.4)"}},t),this.map.addLayer({id:"marxan_pu_status_layer",type:"line",source:"marxan_planning_units_source",layout:{visibility:"none"},"source-layer":e.name,paint:{"line-color":"rgba(150, 150, 150, 0)","line-width":1.5}},t),this.map.addLayer({id:"marxan_pu_puvspr_layer",type:"line",source:"marxan_planning_units_source",layout:{visibility:"none"},"source-layer":e.name,paint:{"line-color":"rgba(255, 255, 255, 1)","line-width":1.5}},t)}},{key:"removePlanningGridLayers",value:function(){var e=this;this.map.getStyle().layers.filter((function(e){return"marxan_planning_units_source"===e.source})).forEach((function(t){e.map.removeLayer(t.id)})),void 0!==this.map.getSource("marxan_planning_units_source")&&this.map.removeSource("marxan_planning_units_source")}},{key:"addWDPASource",value:function(){var e="IUCN and UNEP-WCMC ("+this.state.marxanServer.wdpa_version.substr(-4)+"), The World Database on Protected Areas (WDPA) "+this.state.marxanServer.wdpa_version+", Cambridge, UK: UNEP-WCMC. Available at: <a href='http://www.protectedplanet.net'>www.protectedplanet.net</a>",t=[this.state.registry.WDPA.tilesUrl+"layer=marxan:"+this.wdpa_vector_tile_layer+"&tilematrixset=EPSG:900913&Service=WMTS&Request=GetTile&Version=1.0.0&Format=application/x-protobuf;type=mapbox-vector&TileMatrix=EPSG:900913:{z}&TileCol={x}&TileRow={y}"];this.setState({wdpaAttribution:e}),this.map.addSource("marxan_wdpa_source",{attribution:e,type:"vector",tiles:t})}},{key:"addWDPALayer",value:function(){this.map.addLayer({id:mn,type:"fill",source:"marxan_wdpa_source","source-layer":this.wdpa_vector_tile_layer,layout:{visibility:"visible"},filter:["==","wdpaid",-1],paint:{"fill-color":{type:"categorical",property:"marine",stops:[["0","rgb(99,148,69)"],["1","rgb(63,127,191)"],["2","rgb(63,127,191)"]]},"fill-outline-color":{type:"categorical",property:"marine",stops:[["0","rgb(99,148,69)"],["1","rgb(63,127,191)"],["2","rgb(63,127,191)"]]},"fill-opacity":this.state.wdpa_layer_opacity}}),this.setState({wdpaLayer:this.map.getLayer(mn)})}},{key:"showLayer",value:function(e){this.map&&this.map.getLayer(e)&&this.map.setLayoutProperty(e,"visibility","visible")}},{key:"hideLayer",value:function(e){this.map&&this.map.getLayer(e)&&this.map.setLayoutProperty(e,"visibility","none")}},{key:"isLayerVisible",value:function(e){return this.map&&this.map.getLayer(e)&&"visible"===this.map.getLayoutProperty(e,"visibility")}},{key:"changeOpacity",value:function(e,t){this.map&&this.map.getLayer(e)&&(this.map.setPaintProperty(e,"fill-opacity",t),e===dn&&this.setState({results_layer_opacity:t}),e===mn&&this.setState({wdpa_layer_opacity:t}))}},{key:"project_tab_active",value:function(){this.setState({activeTab:"project"}),this.pu_tab_inactive()}},{key:"features_tab_active",value:function(){"features"!==this.state.activeTab&&(this.setState({activeTab:"features"}),this.pu_tab_inactive())}},{key:"pu_tab_active",value:function(){this.setState({activeTab:"planning_units"}),this.reinstatePuvsprLayer=this.isLayerVisible("marxan_pu_puvspr_layer"),this.hideLayer("marxan_pu_puvspr_layer"),this.showLayer("marxan_pu_layer"),this.changeOpacity(dn,0),this.previousResultsOpacity=this.state.results_layer_opacity,this.showLayer("marxan_pu_status_layer"),this.renderPuEditLayer("marxan_pu_status_layer")}},{key:"pu_tab_inactive",value:function(){this.reinstatePuvsprLayer&&this.showLayer("marxan_pu_puvspr_layer"),this.changeOpacity(dn,this.previousResultsOpacity?this.previousResultsOpacity:.9),this.hideLayer("marxan_pu_layer"),this.hideLayer("marxan_pu_status_layer")}},{key:"legend_tab_active",value:function(){this.setState({activeResultsTab:"legend"})}},{key:"solutions_tab_active",value:function(){this.setState({activeResultsTab:"solutions"})}},{key:"log_tab_active",value:function(){this.setState({activeResultsTab:"log"})}},{key:"startPuEditSession",value:function(){this.setState({puEditing:!0}),this.map.getCanvas().style.cursor="crosshair",this.onClickRef=this.moveStatusUp.bind(this),this.map.on("click","marxan_pu_layer",this.onClickRef),this.onContextMenu=this.resetStatus.bind(this),this.map.on("contextmenu","marxan_pu_layer",this.onContextMenu)}},{key:"stopPuEditSession",value:function(){this.setState({puEditing:!1}),this.map.getCanvas().style.cursor="pointer",this.map.off("click","marxan_pu_layer",this.onClickRef),this.map.off("contextmenu","marxan_pu_layer",this.onContextMenu),this.updatePuDatFile()}},{key:"clearManualEdits",value:function(){var e=this;this.setState({planning_units:[]},(function(){var t=e.getPuidsFromIucnCategory(e.state.metadata.IUCN_CATEGORY);e.updatePlanningUnits([],t)}))}},{key:"updatePuDatFile",value:function(){var e=new FormData;e.append("user",this.state.owner),e.append("project",this.state.project),this.state.planning_units.length>0&&this.state.planning_units.forEach((function(t){var a="status"+t[0];e.append(a,t[1])})),this._post("updatePUFile",e).then((function(e){}))}},{key:"moveStatusUp",value:function(e){this.changeStatus(e,"up")}},{key:"resetStatus",value:function(e){this.changeStatus(e,"reset")}},{key:"changeStatus",value:function(e,t){var a=this.getRenderedFeatures(e.point,["marxan_pu_layer"]);if(a.length>0){var n=a[0].properties.puid,i=this.getStatusLevel(n),s=this.getNextStatusLevel(i,t),r=this.state.planning_units;0!==i&&this.removePuidFromArray(r,i,n),0!==s&&this.addPuidToArray(r,s,n),this.setState({planning_units:r}),this.renderPuEditLayer()}}},{key:"getStatusLevel",value:function(e){var t=this,a=0;return ln.forEach((function(n){t.getPlanningUnitsByStatus(n).indexOf(e)>-1&&(a=n)})),a}},{key:"getStatusPosition",value:function(e){var t=-1;return this.state.planning_units.forEach((function(a,n){a[0]===e&&(t=n)})),t}},{key:"getPlanningUnitsByStatus",value:function(e){var t=this.getStatusPosition(e);return t>-1?this.state.planning_units[t][1]:[]}},{key:"getNextStatusLevel",value:function(e,t){var a;switch(e){case 0:a="up"===t?3:0;break;case 1:case 2:a=0;break;case 3:a="up"===t?2:0}return a}},{key:"removePuidFromArray",value:function(e,t,a){return this.removePuidsFromArray(e,t,[a])}},{key:"addPuidToArray",value:function(e,t,a){return this.appPuidsToPlanningUnits(e,t,[a])}},{key:"appPuidsToPlanningUnits",value:function(e,t,a){var n=this.getStatusPosition(t);return-1===n&&(e.push([t,[]]),n=e.length-1),e[n][1]=Array.from(new Set(e[n][1].concat(a))),e}},{key:"removePuidsFromArray",value:function(e,t,a){var n=this.getStatusPosition(t);if(n>-1){var i=e[n][1].filter((function(e){return a.indexOf(e)<0}));e[n][1]=i,0===i.length&&e.splice(n,1)}return e}},{key:"previewPlanningGrid",value:function(e){this.setState({planning_grid_metadata:e}),this.openPlanningGridDialog()}},{key:"createNewPlanningUnitGrid",value:function(e,t,a,n){var i=this;return new Promise((function(s,r){i.startLogging(),i._ws("createPlanningUnitGrid?iso3="+e+"&domain="+t+"&areakm2="+a+"&shape="+n,i.wsMessageCallback.bind(i)).then((function(e){i.newPlanningGridCreated(e).then((function(){i.closeNewPlanningGridDialog(),s(e)}))})).catch((function(e){r(e)}))}))}},{key:"importPlanningUnitGrid",value:function(e,t,a){var n=this;return new Promise((function(i,s){n.startLogging(),n.log({method:"importPlanningUnitGrid",status:"Started",info:"Importing planning grid.."}),n.importZippedShapefileAsPu(e,t,a).then((function(e){n.log({method:"importPlanningUnitGrid",status:"Finished",info:e.info}),n.newPlanningGridCreated(e).then((function(){n.closeImportPlanningGridDialog()}))})).catch((function(e){n.deletePlanningUnitGrid(t,!0),n.log({method:"importPlanningUnitGrid",status:"Finished",error:e}),s(e)}))}))}},{key:"newPlanningGridCreated",value:function(e){var t=this;return new Promise((function(a,n){t.pollMapbox(e.uploadId).then((function(e){t.getPlanningUnitGrids(),a("Planning grid created")}))}))}},{key:"deletePlanningUnitGrid",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a?this.deletePlanningGrid(e,!0):this.getProjectsForPlanningGrid(e).then((function(a){0===a.length?t.deletePlanningGrid(e,!1):t.showProjectListDialog(a,"Failed to delete planning grid","The planning grid is used in the following projects")}))}},{key:"deletePlanningGrid",value:function(e,t){var a=this;this._get("deletePlanningUnitGrid?planning_grid_name="+e).then((function(e){a.getPlanningUnitGrids(),a.setSnackBar(e.info,t)})).catch((function(e){}))}},{key:"exportPlanningGrid",value:function(e){var t=this;return new Promise((function(a,n){t._get("exportPlanningUnitGrid?name="+e).then((function(e){a(t.state.marxanServer.endpoint+"exports/"+e.filename)})).catch((function(e){n()}))}))}},{key:"getProjectsForPlanningGrid",value:function(e){var t=this;return new Promise((function(a,n){t._get("listProjectsForPlanningGrid?feature_class_name="+e).then((function(e){a(e.projects)}))}))}},{key:"getCountries",value:function(){var e=this;this._get("getCountries").then((function(t){e.setState({countries:t.records})}))}},{key:"uploadToMapBox",value:function(e,t){var a=this;return new Promise((function(n,i){a._get("uploadTilesetToMapBox?feature_class_name="+e+"&mapbox_layer_name="+t,3e5).then((function(e){a.setState({loading:!0}),a.pollMapbox(e.uploadid).then((function(e){n(e)}))})).catch((function(e){i(e)}))}))}},{key:"pollMapbox",value:function(e){var t=this;return this.setState({uploading:!0}),this.log({info:"Uploading to Mapbox..",status:"Uploading"}),new Promise((function(a,n){if("0"===e)t.log({info:"Tileset already exists on Mapbox",status:"UploadComplete"}),t.setState({uploading:!1}),a("Uploaded to Mapbox");else{var i=setInterval((function(){fetch("https://api.mapbox.com/uploads/v1/blishten/"+e+"?access_token="+t.state.registry.MBAT).then((function(e){return e.json()})).then((function(n){if(n.complete){a("Uploaded to Mapbox"),t.log({info:"Uploaded",status:"UploadComplete"});var i=yn.find((function(t){return t.uploadid===e}));clearInterval(i.timer),0===(yn=yn.filter((function(t){return t.uploadid!==e}))).length&&t.setState({uploading:!1})}})).catch((function(e){t.setState({uploading:!1}),n(e)}))}),3e3);yn.push({uploadid:e,timer:i})}}))}},{key:"closeWelcomeDialog",value:function(){this.setState({welcomeDialogOpen:!1})}},{key:"openWelcomeDialog",value:function(){this.parseNotifications(),this.setState({welcomeDialogOpen:!0})}},{key:"openFeaturesDialog",value:function(e){"Windows"!==this.state.marxanServer.system&&this.refreshFeatures(),this.setState({featuresDialogOpen:!0,addingRemovingFeatures:e}),e&&this.getSelectedFeatureIds()}},{key:"closeFeaturesDialog",value:function(){this.setState({featuresDialogOpen:!1,newFeaturePopoverOpen:!1,importFeaturePopoverOpen:!1})}},{key:"openNewFeatureDialog",value:function(){this.setState({NewFeatureDialogOpen:!0})}},{key:"closeNewFeatureDialog",value:function(){this.setState({NewFeatureDialogOpen:!1}),this.finaliseDigitising()}},{key:"openImportFromWebDialog",value:function(){this.setState({importFromWebDialogOpen:!0})}},{key:"closeImportFromWebDialog",value:function(){this.setState({importFromWebDialogOpen:!1})}},{key:"openImportFeaturesDialog",value:function(){this.setState({importFeaturesDialogOpen:!0})}},{key:"closeImportFeaturesDialog",value:function(){this.setState({importFeaturesDialogOpen:!1})}},{key:"openImportGBIFDialog",value:function(){this.setState({importGBIFDialogOpen:!0})}},{key:"closeImportGBIFDialog",value:function(){this.setState({importGBIFDialogOpen:!1})}},{key:"openPlanningGridsDialog",value:function(){"Windows"!==this.state.marxanServer.system&&this.getPlanningUnitGrids(),this.setState({planningGridsDialogOpen:!0})}},{key:"closePlanningGridsDialog",value:function(){this.setState({planningGridsDialogOpen:!1})}},{key:"openPlanningGridDialog",value:function(){this.setState({planningGridDialogOpen:!0})}},{key:"closePlanningGridDialog",value:function(){this.setState({planningGridDialogOpen:!1})}},{key:"openFeatureDialog",value:function(){this.setState({featureDialogOpen:!0})}},{key:"closeFeatureDialog",value:function(){this.setState({featureDialogOpen:!1})}},{key:"showNewFeaturePopover",value:function(){this.setState({newFeaturePopoverOpen:!0})}},{key:"hideNewFeaturePopover",value:function(){this.setState({newFeaturePopoverOpen:!1})}},{key:"showImportFeaturePopover",value:function(){this.setState({importFeaturePopoverOpen:!0})}},{key:"hideImportFeaturePopover",value:function(){this.setState({importFeaturePopoverOpen:!1})}},{key:"showImportProjectPopover",value:function(){this.setState({importProjectPopoverOpen:!0})}},{key:"hideImportProjectPopover",value:function(){this.setState({importProjectPopoverOpen:!1})}},{key:"openCostsDialog",value:function(){this.setState({costsDialogOpen:!0})}},{key:"closeCostsDialog",value:function(){this.setState({costsDialogOpen:!1})}},{key:"openImportCostsDialog",value:function(){this.setState({importCostsDialogOpen:!0})}},{key:"closeImportCostsDialog",value:function(){this.setState({importCostsDialogOpen:!1})}},{key:"openWDPAUpdateDialog",value:function(){this.setState({updateWDPADialogOpen:!0})}},{key:"closeWDPAUpdateDialog",value:function(){this.setState({updateWDPADialogOpen:!1})}},{key:"setNewFeatureDatasetFilename",value:function(e){this.setState({featureDatasetFilename:e})}},{key:"importZippedShapefileAsPu",value:function(e,t,a){return this._get("importPlanningUnitGrid?filename="+e+"&name="+t+"&description="+a)}},{key:"updateFeature",value:function(e,t){var a=this.state.allFeatures,n=a.findIndex((function(t){return t.id===e.id}));-1!==n&&(Object.assign(a[n],t),this.setFeaturesState(a))}},{key:"getSelectedFeatureIds",value:function(){var e=[];this.state.allFeatures.forEach((function(t){t.selected&&e.push(t.id)})),this.setState({selectedFeatureIds:e})}},{key:"clickFeature",value:function(e){this.state.selectedFeatureIds.includes(e.id)?this.removeFeature(e):this.addFeature(e)}},{key:"removeFeature",value:function(e){var t=this,a=this.state.selectedFeatureIds;return a=a.filter((function(t,a,n){return t!==e.id})),new Promise((function(e,n){t.setState({selectedFeatureIds:a},(function(){e("Feature removed")}))}))}},{key:"addFeature",value:function(e,t){var a=this.state.selectedFeatureIds;a.push(e.id),this.setState({selectedFeatureIds:a},t)}},{key:"initialiseDigitising",value:function(){this.map.getSource("mapbox-gl-draw-cold")||this.map.addControl(this.mapboxDrawControls)}},{key:"finaliseDigitising",value:function(){this.map.removeControl(this.mapboxDrawControls)}},{key:"polygonDrawn",value:function(e){this.openNewFeatureDialog(),this.digitisedFeatures=e.features}},{key:"selectAllFeatures",value:function(){var e=[];this.state.allFeatures.forEach((function(t){e.push(t.id)})),this.selectFeatures(e)}},{key:"clearAllFeatures",value:function(){this.setState({selectedFeatureIds:[]})}},{key:"selectFeatures",value:function(e){this.setState({selectedFeatureIds:e})}},{key:"updateSelectedFeatures",value:function(){var e=this;this.deleteGapAnalysis();var t=this.state.allFeatures;t.forEach((function(t){e.state.selectedFeatureIds.includes(t.id)?Object.assign(t,{selected:!0}):(e.state.metadata.OLDVERSION?Object.assign(t,{selected:!1}):Object.assign(t,{selected:!1,preprocessed:!1,protected_area:-1,pu_area:-1,pu_count:-1,target_area:-1,occurs_in_planning_grid:!1}),t.feature_layer_loaded&&e.toggleFeatureLayer(t),t.feature_puid_layer_loaded&&e.toggleFeaturePUIDLayer(t))})),this.setFeaturesState(t,(function(){"ReadOnly"!==e.state.userData.ROLE&&e.updateSpecFile(),e.closeFeaturesDialog()}))}},{key:"updateTargetValueForFeatures",value:function(e){var t=this,a=this.state.allFeatures;a.forEach((function(t){Object.assign(t,{target_value:e})})),this.setFeaturesState(a,(function(){"ReadOnly"!==t.state.userData.ROLE&&t.updateSpecFile()}))}},{key:"setFeaturesState",value:function(e,t){this.setState({allFeatures:e,projectFeatures:e.filter((function(e){return e.selected}))},t)}},{key:"unselectItem",value:function(e){var t=this;this.removeFeature(e).then((function(){t.updateSelectedFeatures()}))}},{key:"previewFeature",value:function(e){this.setState({feature_metadata:e}),this.openFeatureDialog()}},{key:"unzipShapefile",value:function(e){var t=this;return new Promise((function(a,n){t._get("unzipShapefile?filename="+e).then((function(e){a(e)})).catch((function(e){n(e)}))}))}},{key:"deleteShapefile",value:function(e,t){var a=this;return new Promise((function(n,i){a._get("deleteShapefile?zipfile="+e+"&shapefile="+t).then((function(e){n(e)})).catch((function(e){i(e)}))}))}},{key:"getShapefileFieldnames",value:function(e){var t=this;return new Promise((function(a,n){t._get("getShapefileFieldnames?filename="+e).then((function(e){a(e)})).catch((function(e){n(e)}))}))}},{key:"importFeatures",value:function(e,t,a,n,i){var s=this;return this.startLogging(),new Promise((function(r,o){var l=""!==t?"importFeatures?zipfile="+e+"&shapefile="+n+"&name="+t+"&description="+a:"importFeatures?zipfile="+e+"&shapefile="+n+"&splitfield="+i;s._ws(l,s.wsMessageCallback.bind(s)).then((function(e){for(var t=e.uploadIds,a=[],n=0;n<t.length;++n)a.push(s.pollMapbox(t[n]));Promise.all(a).then((function(e){r("All features uploaded")}))})).catch((function(e){o(e)}))}))}},{key:"importFeaturesFromWeb",value:function(e,t,a,n,i){var s=this;return this.startLogging(),new Promise((function(r,o){s._ws("createFeaturesFromWFS?name="+e+"&description="+t+"&endpoint="+a+"&srs="+n+"&featuretype="+i,s.wsMessageCallback.bind(s)).then((function(e){var t=e.uploadId;s.pollMapbox(t).then((function(e){r(e)}))})).catch((function(e){o(e)}))}))}},{key:"importGBIFData",value:function(e){var t=this;return this.startLogging(),new Promise((function(a,n){t._ws("importGBIFData?taxonKey="+e.key+"&scientificName="+e.scientificName,t.wsMessageCallback.bind(t)).then((function(e){var n=e.uploadId;t.pollMapbox(n).then((function(e){a(e)}))})).catch((function(e){n(e)}))}))}},{key:"gbifSpeciesSuggest",value:function(e){var t=this;return new Promise((function(a,n){t.setState({loading:!0}),A()("https://api.gbif.org/v1/species/suggest?q="+e+"&rank=SPECIES").promise.then((function(e){a(e),t.setState({loading:!1})}),(function(e){n(e),t.setState({loading:!1})}))}))}},{key:"createNewFeature",value:function(e,t){var a=this;this.startLogging(),this.log({method:"createNewFeature",status:"Started",info:"Creating feature.."});var n=new FormData;n.append("name",e),n.append("description",t);var i=this.digitisedFeatures[0].geometry.coordinates[0].map((function(e){return e[0]+" "+e[1]})).join(",");n.append("linestring","Linestring("+i+")"),this._post("createFeatureFromLinestring",n).then((function(e){a.log({method:"createNewFeature",status:"Finished",info:e.info}),a.pollMapbox(e.uploadId).then((function(){a.newFeatureCreated(e.id),a.closeNewFeatureDialog()}))})).catch((function(e){a.log({status:"Finished",error:e})}))}},{key:"newFeatureCreated",value:function(e){var t=this;this._get("getFeature?oid="+e+"&format=json").then((function(e){var a=e.data[0];t.initialiseNewFeature(a),t.state.addToProject&&t.addFeature(a,(function(){t.updateSelectedFeatures()}))}))}},{key:"initialiseNewFeature",value:function(e){this.addFeatureAttributes(e),this.addNewFeature(e)}},{key:"addNewFeature",value:function(e){var t=this.state.allFeatures;t.push(e),t.sort((function(e,t){return e.alias.toLowerCase()<t.alias.toLowerCase()?-1:e.alias.toLowerCase()>t.alias.toLowerCase()?1:0})),this.setState({allFeatures:t})}},{key:"deleteFeature",value:function(e){var t=this;this.getProjectsForFeature(e).then((function(a){0===a.length?t._deleteFeature(e):t.showProjectListDialog(a,"Failed to delete planning feature","The feature is used in the following projects")}))}},{key:"_deleteFeature",value:function(e){var t=this;this._get("deleteFeature?feature_name="+e.feature_class_name).then((function(a){t.setSnackBar("Feature deleted"),t.removeFeature(e),t.removeFeatureFromAllFeatures(e)}))}},{key:"removeFeatureFromAllFeatures",value:function(e){var t=this.state.allFeatures;t=t.filter((function(t){return t.id!==e.id})),this.setState({allFeatures:t})}},{key:"getFeatures",value:function(){var e=this;return new Promise((function(t,a){e._get("getAllSpeciesData").then((function(e){t(e)})).catch((function(e){}))}))}},{key:"getAllFeatures",value:function(){var e=this;return new Promise((function(t,a){e.getFeatures().then((function(a){e.setState({allFeatures:a.data},(function(){t("Features returned")}))})).catch((function(e){}))}))}},{key:"getFeatureIds",value:function(e){return new Set(e.map((function(e){return e.id})))}},{key:"refreshFeatures",value:function(){var e=this;this.getFeatures().then((function(t){var a=e.getFeatureIds(e.state.allFeatures),n=e.getFeatureIds(t.data);new Set(Object(o.a)(a).filter((function(e){return!n.has(e)}))).forEach((function(t){e.removeFeatureFromAllFeatures({id:t})}));var i=new Set(Object(o.a)(n).filter((function(e){return!a.has(e)})));t.data.filter((function(e){return i.has(e.id)})).forEach((function(t){e.initialiseNewFeature(t)}))}))}},{key:"openFeatureMenu",value:function(e,t){this.setState({featureMenuOpen:!0,currentFeature:t,menuAnchor:e.currentTarget})}},{key:"closeFeatureMenu",value:function(e){this.setState({featureMenuOpen:!1})}},{key:"hideFeatureLayer",value:function(){var e=this;this.state.projectFeatures.forEach((function(t){t.feature_layer_loaded&&e.toggleFeatureLayer(t)}))}},{key:"toggleFeatureLayer",value:function(e){if(""!==e.tilesetid){var t=e.tilesetid.split(".")[1],a="marxan_feature_layer_"+t;this.map.getLayer(a)?(this.map.removeLayer(a),this.map.removeSource(a),this.updateFeature(e,{feature_layer_loaded:!1})):(this.map.addLayer({id:a,type:"fill",source:{type:"vector",url:"mapbox://"+e.tilesetid},"source-layer":t,paint:{"fill-color":e.color,"fill-opacity":.9,"fill-outline-color":"rgba(0, 0, 0, 0.2)"}},"marxan_pu_puvspr_layer"),this.updateFeature(e,{feature_layer_loaded:!0}))}else this.setSnackBar("This feature does not have an associated tileset on Mapbox. See <a href='"+on+"#the-tileset-from-source-source-was-not-found' target='blank'>here</a>")}},{key:"toggleFeaturePUIDLayer",value:function(e){var t=this,a="puid_"+e.id;this.map.getLayer(a)?(this.map.removeLayer(a),this.updateFeature(e,{feature_puid_layer_loaded:!1})):(this._get("getFeaturePlanningUnits?user="+this.state.owner+"&project="+this.state.project+"&oid="+e.id).then((function(n){t.map.addLayer({id:a,type:"line",source:"marxan_planning_units_source","source-layer":t.state.tileset.name,layout:{visibility:"none"}});var i=t.initialiseFillColorExpression("puid");n.data.forEach((function(t){i.push(t,e.color)})),i.push("rgba(0,0,0,0)"),t.map.setPaintProperty(a,"line-color",i),t.showLayer(a)})),this.updateFeature(e,{feature_puid_layer_loaded:!0}))}},{key:"removeFromProject",value:function(e){this.closeFeatureMenu(),this.unselectItem(e)}},{key:"zoomToFeature",value:function(e){this.closeFeatureMenu();var t=e.extent.substr(4,e.extent.length-5).replace(/ /g,",").split(",").map((function(e){return Number(e)}));this.map.fitBounds([[t[0],t[1]],[t[2],t[3]]],{padding:100})}},{key:"getProjectsForFeature",value:function(e){var t=this;return new Promise((function(a,n){t._get("listProjectsForFeature?feature_class_id="+e.id).then((function(e){a(e.projects)}))}))}},{key:"getProjectList",value:function(e,t){var a=this;"feature"===t?this.getProjectsForFeature(e).then((function(e){a.showProjectListDialog(e,"Projects list","The feature is used in the following projects:")})):this.getProjectsForPlanningGrid(e.feature_class_name).then((function(e){a.showProjectListDialog(e,"Projects list","The feature is used in the following projects:")}))}},{key:"showUserMenu",value:function(e){e.preventDefault(),this.setState({userMenuOpen:!0,menuAnchor:e.currentTarget})}},{key:"hideUserMenu",value:function(e){this.setState({userMenuOpen:!1})}},{key:"showHelpMenu",value:function(e){e.preventDefault(),this.setState({helpMenuOpen:!0,menuAnchor:e.currentTarget})}},{key:"hideHelpMenu",value:function(e){this.setState({helpMenuOpen:!1})}},{key:"showToolsMenu",value:function(e){e.preventDefault(),this.setState({toolsMenuOpen:!0,menuAnchor:e.currentTarget})}},{key:"hideToolsMenu",value:function(e){this.setState({toolsMenuOpen:!1})}},{key:"openRegisterDialog",value:function(){this.setState({registerDialogOpen:!0})}},{key:"closeRegisterDialog",value:function(){this.setState({registerDialogOpen:!1})}},{key:"openResendPasswordDialog",value:function(){this.setState({resendPasswordDialogOpen:!0})}},{key:"closeResendPasswordDialog",value:function(){this.setState({resendPasswordDialogOpen:!1})}},{key:"openProjectsDialog",value:function(){this.setState({projectsDialogOpen:!0}),this.getProjects()}},{key:"closeProjectsDialog",value:function(){this.setState({projectsDialogOpen:!1,importProjectPopoverOpen:!1})}},{key:"openNewProjectDialog",value:function(){this.setState({newProjectDialogOpen:!0})}},{key:"closeNewProjectDialog",value:function(){this.setState({newProjectDialogOpen:!1})}},{key:"openNewProjectWizardDialog",value:function(){this.getCountries(),this.setState({newProjectWizardDialogOpen:!0})}},{key:"closeNewProjectWizardDialog",value:function(){this.setState({newProjectWizardDialogOpen:!1})}},{key:"openNewPlanningGridDialog",value:function(){this.getCountries(),this.setState({NewPlanningGridDialogOpen:!0})}},{key:"closeNewPlanningGridDialog",value:function(){this.setState({NewPlanningGridDialogOpen:!1})}},{key:"openImportPlanningGridDialog",value:function(){this.setState({importPlanningGridDialogOpen:!0})}},{key:"closeImportPlanningGridDialog",value:function(){this.setState({importPlanningGridDialogOpen:!1})}},{key:"openInfoDialog",value:function(){this.setState({openInfoDialogOpen:!0,featureMenuOpen:!1})}},{key:"closeInfoDialog",value:function(){this.setState({openInfoDialogOpen:!1})}},{key:"openUserSettingsDialog",value:function(){this.setState({UserSettingsDialogOpen:!0}),this.hideUserMenu()}},{key:"closeUserSettingsDialog",value:function(){this.setState({UserSettingsDialogOpen:!1})}},{key:"openProfileDialog",value:function(){this.setState({profileDialogOpen:!0}),this.hideUserMenu()}},{key:"closeProfileDialog",value:function(){this.setState({profileDialogOpen:!1})}},{key:"openAboutDialog",value:function(){this.setState({aboutDialogOpen:!0}),this.hideHelpMenu()}},{key:"closeAboutDialog",value:function(){this.setState({aboutDialogOpen:!1})}},{key:"showRunSettingsDialog",value:function(){this.setState({settingsDialogOpen:!0})}},{key:"closeRunSettingsDialog",value:function(){this.setState({settingsDialogOpen:!1})}},{key:"openClassificationDialog",value:function(){this.setState({classificationDialogOpen:!0})}},{key:"closeClassificationDialog",value:function(){this.setState({classificationDialogOpen:!1})}},{key:"openImportProjectDialog",value:function(){this.setState({importProjectDialogOpen:!0})}},{key:"closeImportDialog",value:function(){this.setState({importProjectDialogOpen:!1})}},{key:"openImportMXWDialog",value:function(){this.setState({importMXWDialogOpen:!0})}},{key:"closeImportMXWDialog",value:function(){this.setState({importMXWDialogOpen:!1})}},{key:"openUsersDialog",value:function(){this.getUsers(),this.setState({usersDialogOpen:!0})}},{key:"closeUsersDialog",value:function(){this.setState({usersDialogOpen:!1})}},{key:"closeAlertDialog",value:function(){this.setState({alertDialogOpen:!1})}},{key:"hideResults",value:function(){this.setState({resultsPanelOpen:!1})}},{key:"showResults",value:function(){this.setState({resultsPanelOpen:!0})}},{key:"toggleInfoPanel",value:function(){this.setState({infoPanelOpen:!this.state.infoPanelOpen})}},{key:"toggleResultsPanel",value:function(){this.setState({resultsPanelOpen:!this.state.resultsPanelOpen})}},{key:"openRunLogDialog",value:function(){this.getRunLogs(),this.startPollingRunLogs(),this.setState({runLogDialogOpen:!0})}},{key:"closeRunLogDialog",value:function(){this.stopPollingRunLogs(),this.setState({runLogDialogOpen:!1})}},{key:"openResetDialog",value:function(){this.setState({resetDialogOpen:!0})}},{key:"closeResetDialog",value:function(){this.setState({resetDialogOpen:!1})}},{key:"openGapAnalysisDialog",value:function(){this.setState({gapAnalysisDialogOpen:!0,gapAnalysis:[]}),this.runGapAnalysis()}},{key:"closeGapAnalysisDialog",value:function(){this.setState({gapAnalysisDialogOpen:!1,gapAnalysis:[]})}},{key:"openServerDetailsDialog",value:function(){this.setState({serverDetailsDialogOpen:!0}),this.hideHelpMenu()}},{key:"closeServerDetailsDialog",value:function(){this.setState({serverDetailsDialogOpen:!1})}},{key:"openChangePasswordDialog",value:function(){this.hideUserMenu(),this.setState({changePasswordDialogOpen:!0})}},{key:"closeChangePasswordDialog",value:function(){this.setState({changePasswordDialogOpen:!1})}},{key:"showProjectListDialog",value:function(e,t,a){var n=this;this.setState({projectList:e,projectListDialogTitle:t,projectListDialogHeading:a},(function(){n.openProjectsListDialog()}))}},{key:"openProjectsListDialog",value:function(){this.setState({ProjectsListDialogOpen:!0})}},{key:"closeProjectsListDialog",value:function(){this.setState({ProjectsListDialogOpen:!1})}},{key:"openTargetDialog",value:function(){this.setState({targetDialogOpen:!0})}},{key:"closeTargetDialog",value:function(){this.setState({targetDialogOpen:!1})}},{key:"openShareableLinkDialog",value:function(){this.setState({shareableLinkDialogOpen:!0})}},{key:"closeShareableLinkDialog",value:function(){this.setState({shareableLinkDialogOpen:!1})}},{key:"changeIucnCategory",value:function(e){var t=this.state.metadata;t.IUCN_CATEGORY=e,this.setState({metadata:t}),this.updateProjectParameter("IUCN_CATEGORY",e),this.filterWdpaByIucnCategory(e),this.renderPAGridIntersections(e)}},{key:"filterWdpaByIucnCategory",value:function(e){var t=this.getIndividualIucnCategories(e),a=["all",["in","iucn_cat"].concat(t)];this.map.setFilter(mn,a),"None"===e?this.hidePALegend():this.showPALegend()}},{key:"getIndividualIucnCategories",value:function(e){var t=[];switch(e){case"None":t=[""];break;case"IUCN I-II":t=["Ia","Ib","II"];break;case"IUCN I-IV":t=["Ia","Ib","II","III","IV"];break;case"IUCN I-V":t=["Ia","Ib","II","III","IV","V"];break;case"IUCN I-VI":t=["Ia","Ib","II","III","IV","V","VI"];break;case"All":t=["Ia","Ib","II","III","IV","V","VI","Not Reported"]}return t}},{key:"getPuidsFromIucnCategory",value:function(e){var t=this.getIntersections(e);return this.getPuidsFromNormalisedData(t)}},{key:"renderPAGridIntersections",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preprocessProtectedAreas(t).then((function(e){var n=a.getPuidsFromIucnCategory(t),i=a.getPlanningUnitsByStatus(1).concat(a.getPlanningUnitsByStatus(3)).filter((function(e){return-1!==n.indexOf(e)}));i.length>0&&(n=n.filter((function(e){return!i.includes(e)})),a.setSnackBar("Not all planning units have been added. See <a href='"+on+"#not-all-planning-units-have-been-added' target='blank'>here</a>"));var s=void 0!==a.previousPuids?a.previousPuids:a.getPuidsFromIucnCategory(a.previousIucnCategory);a.previousPuids=n,a.previousIucnCategory=t,a.updatePlanningUnits(s,n)})).catch((function(e){a.setSnackBar(e)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updatePlanningUnits",value:function(e,t){var a=this.state.planning_units,n=this.getNewPuids(e,t);if(0===n.length){var i=this.getNewPuids(t,e);this.removePuidsFromArray(a,2,i)}else this.appPuidsToPlanningUnits(a,2,n);this.setState({planning_units:a}),this.renderPuEditLayer(),this.updatePuDatFile()}},{key:"getNewPuids",value:function(e,t){return t.filter((function(t){return-1===e.indexOf(t)}))}},{key:"showPALegend",value:function(){this.setState({pa_layer_visible:!0})}},{key:"hidePALegend",value:function(){this.setState({pa_layer_visible:!1})}},{key:"preprocessProtectedAreas",value:function(e){var t=this;return this.state.protected_area_intersections.length>0?Promise.resolve(this.state.protected_area_intersections):new Promise((function(e,a){t.startLogging(),t._ws("preprocessProtectedAreas?user="+t.state.owner+"&project="+t.state.project+"&planning_grid_name="+t.state.metadata.PLANNING_UNIT_NAME,t.wsMessageCallback.bind(t)).then((function(a){t.setState({protected_area_intersections:a.intersections}),e(a)})).catch((function(e){a(e)}))}))}},{key:"getIntersections",value:function(e){var t=this.getIndividualIucnCategories(e);return this.state.protected_area_intersections.filter((function(e){return t.indexOf(e[0])>-1}))}},{key:"updateWDPA",value:function(){var e=this;return this.startLogging(),new Promise((function(t,a){e._ws("updateWDPA?downloadUrl="+e.state.registry.WDPA.downloadUrl+"&wdpaVersion="+e.state.registry.WDPA.latest_version,e.wsMessageCallback.bind(e)).then((function(a){var n=Object.assign(e.state.marxanServer,{wdpa_version:e.state.registry.WDPA.latest_version});e.setState({newWDPAVersion:!1,marxanServer:n},(function(){e.setWDPAVectorTilesLayerName(e.state.registry.WDPA.latest_version),e.map.removeLayer(mn),e.map&&void 0!==e.map.getSource("marxan_wdpa_source")&&e.map.removeSource("marxan_wdpa_source"),e.addWDPASource(),e.addWDPALayer(),e.setState({protected_area_intersections:[]}),e.changeIucnCategory(e.state.metadata.IUCN_CATEGORY),e.closeWDPAUpdateDialog()})),t(a)})).catch((function(e){a(e)}))}))}},{key:"preprocessBoundaryLengths",value:function(){var e=Object(p.a)(c.a.mark((function e(t){var a=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.files.BOUNDNAME){e.next=4;break}return e.abrupt("return",Promise.resolve());case 4:return e.abrupt("return",new Promise((function(e,t){a.startLogging(),a._ws("preprocessPlanningUnits?user="+a.state.owner+"&project="+a.state.project,a.wsMessageCallback.bind(a)).then((function(t){var n=a.state.files;n.BOUNDNAME="bounds.dat",a.setState({files:n}),e(t)})).catch((function(e){t(e)}))})));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"showClumpingDialog",value:function(){var e=this;this.updateMapCentreAndZoom(),this.preprocessBoundaryLengths().then((function(t){e.updateSpecFile().then((function(t){e.updatePuFile(),e.updatePuvsprFile().then((function(t){e.setState({clumpingDialogOpen:!0,clumpingRunning:!0})}))})).catch((function(e){}))})).catch((function(e){console.log(e)}))}},{key:"hideClumpingDialog",value:function(){this.deleteProjects(),this.resetPaintProperties(),this.setState({clumpingDialogOpen:!1})}},{key:"createProjectGroupAndRun",value:function(e){var t=this;return this.projects&&this.deleteProjects(),new Promise((function(a,n){t._get("createProjectGroup?user="+t.state.owner+"&project="+t.state.project+"&copies=5&blmValues="+e.join(",")).then((function(e){t.projects=e.data,t.runProjects(e.data),a("Project group created")})).catch((function(e){n(e)}))}))}},{key:"deleteProjects",value:function(){var e=this;if(this.projects){var t=this.projects.map((function(e){return e.projectName}));return this.projects=void 0,new Promise((function(a,n){e._get("deleteProjects?projectNames="+t.join(",")).then((function(e){a("Projects deleted")})).catch((function(e){n(e)}))}))}}},{key:"runProjects",value:function(e){var t=this;this.projectsRun=0,this.setState({clumpingRunning:!0}),e.forEach((function(e){t.startMarxanJob("_clumping",e.projectName,!1).then((function(e){t.checkForErrors(e,!1)||t.loadOtherSolution(e.user,e.project,1),t.projectsRun=t.projectsRun+1,5===t.projectsRun&&t.setState({clumpingRunning:!1})}))}))}},{key:"rerunProjects",value:function(e,t){this.resetPaintProperties(),e?this.createProjectGroupAndRun(t):this.runProjects(this.projects)}},{key:"setBlmValue",value:function(e){var t,a=[];this.state.runParams.forEach((function(n){t="BLM"===n.key?String(e):n.value,a.push({key:n.key,value:t})})),this.updateRunParams(a)}},{key:"resetPaintProperties",value:function(){this.setState({map0_paintProperty:[],map1_paintProperty:[],map2_paintProperty:[],map3_paintProperty:[],map4_paintProperty:[]})}},{key:"startPollingRunLogs",value:function(){var e=this;this.runlogTimer=setInterval((function(){e.getRunLogs()}),5e3)}},{key:"stopPollingRunLogs",value:function(){clearInterval(this.runlogTimer)}},{key:"getRunLogs",value:function(){var e=this;this.state.unauthorisedMethods.includes("getRunLogs")||this._get("getRunLogs").then((function(t){e.setState({runLogs:t.data})}))}},{key:"clearRunLogs",value:function(){var e=this;this._get("clearRunLogs").then((function(t){e.getRunLogs()}))}},{key:"getShareableLink",value:function(){this.openShareableLinkDialog()}},{key:"runGapAnalysis",value:function(){var e=this;return new Promise((function(t,a){e.log_tab_active(),e._ws("runGapAnalysis?user="+e.state.owner+"&project="+e.state.project,e.wsMessageCallback.bind(e)).then((function(a){e.setState({gapAnalysis:a.data}),t(a)})).catch((function(e){a(e)}))}))}},{key:"deleteGapAnalysis",value:function(){this._get("deleteGapAnalysis?user="+this.state.owner+"&project="+this.state.project).then((function(e){console.log(e)}))}},{key:"setAddToProject",value:function(e,t){this.setState({addToProject:t})}},{key:"changeCostname",value:function(e){var t=this;return new Promise((function(a,n){t._get("updateCosts?user="+t.state.owner+"&project="+t.state.project+"&costname="+e).then((function(n){t.setState({metadata:Object.assign(t.state.metadata,{COSTS:e})}),a()})).catch((function(e){n(e)}))}))}},{key:"toggleCosts",value:function(e){var t=this;this.setState({showCosts:e},(function(){e?t.loadCostsLayer():t.hideLayer("marxan_pu_costs_layer")}))}},{key:"loadCostsLayer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state.showCosts&&(this.setState({costsLoading:!0}),this.getPlanningUnitsCostData(t).then((function(t){e.renderPuCostLayer(t).then((function(){e.setState({costsLoading:!1})}))})))}},{key:"getPlanningUnitsCostData",value:function(e){var t=this;return new Promise((function(a,n){t.cost_data&&!e?a(t.cost_data):t._get("getPlanningUnitsCostData?user="+t.state.owner+"&project="+t.state.project).then((function(e){t.cost_data=e.data,a(e.data)})).catch((function(e){}))}))}},{key:"deleteCostFileThenClose",value:function(e){var t=this;return new Promise((function(a,n){e?t.deleteCost(e).then((function(e){t.closeImportCostsDialog(),a()})):a()}))}},{key:"addCost",value:function(e){var t=this.state.costnames;t.push(e),this.setState({costnames:t})}},{key:"deleteCost",value:function(e){var t=this;return new Promise((function(a,n){t._get("deleteCost?user="+t.state.owner+"&project="+t.state.project+"&costname="+e).then((function(n){var i=t.state.costnames;i=i.filter((function(t){return t!==e})),t.setState({costnames:i}),a()})).catch((function(e){n(e)}))}))}},{key:"resetServer",value:function(){var e=this;return new Promise((function(t,a){e.log_tab_active(),e._ws("resetDatabase",e.wsMessageCallback.bind(e)).then((function(a){t(a),e.closeResetDialog()})).catch((function(t){a(t),e.closeResetDialog()}))}))}},{key:"render",value:function(){var e=this,t=i.a.createElement("span",{id:"snackbar-message-id",dangerouslySetInnerHTML:{__html:this.state.snackbarMessage}});return i.a.createElement(v.a,null,i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{ref:function(t){return e.mapContainer=t},className:"absolute top right left bottom"}),i.a.createElement(ge,{open:this.state.shareableLink}),i.a.createElement(Pe,{open:!this.state.loggedIn,onOk:this.validateUser.bind(this),onCancel:this.openRegisterDialog.bind(this),loading:this.state.loading,user:this.state.user,password:this.state.password,changeUserName:this.changeUserName.bind(this),changePassword:this.changePassword.bind(this),openResendPasswordDialog:this.openResendPasswordDialog.bind(this),marxanServers:this.state.marxanServers,selectServer:this.selectServer.bind(this),marxanServer:this.state.marxanServer,marxanClientReleaseVersion:rn}),i.a.createElement(Oe,{open:this.state.registerDialogOpen,onOk:this.createNewUser.bind(this),onCancel:this.closeRegisterDialog.bind(this),loading:this.state.loading}),i.a.createElement(je,{open:this.state.resendPasswordDialogOpen,onOk:this.resendPassword.bind(this),onCancel:this.closeResendPasswordDialog.bind(this),loading:this.state.loading,changeEmail:this.changeEmail.bind(this),email:this.state.resendEmail}),i.a.createElement(_e,{open:this.state.userData.SHOWWELCOMESCREEN&&this.state.welcomeDialogOpen,onOk:this.closeWelcomeDialog.bind(this),onCancel:this.closeWelcomeDialog.bind(this),userData:this.state.userData,saveOptions:this.saveOptions.bind(this),notifications:this.state.notifications,resetNotifications:this.resetNotifications.bind(this),removeNotification:this.removeNotification.bind(this),openNewProjectDialog:this.openNewProjectWizardDialog.bind(this)}),i.a.createElement(Me,{open:this.state.toolsMenuOpen,menuAnchor:this.state.menuAnchor,hideToolsMenu:this.hideToolsMenu.bind(this),openUsersDialog:this.openUsersDialog.bind(this),openRunLogDialog:this.openRunLogDialog.bind(this),openGapAnalysisDialog:this.openGapAnalysisDialog.bind(this),openResetDialog:this.openResetDialog.bind(this),userRole:this.state.userData.ROLE,marxanServer:this.state.marxanServer,metadata:this.state.metadata}),i.a.createElement(We,{open:this.state.userMenuOpen,menuAnchor:this.state.menuAnchor,user:this.state.user,userRole:this.state.userData.ROLE,hideUserMenu:this.hideUserMenu.bind(this),openUserSettingsDialog:this.openUserSettingsDialog.bind(this),openProfileDialog:this.openProfileDialog.bind(this),logout:this.logout.bind(this),marxanServer:this.state.marxanServer,openChangePasswordDialog:this.openChangePasswordDialog.bind(this)}),i.a.createElement(Ke,{open:this.state.helpMenuOpen,menuAnchor:this.state.menuAnchor,hideHelpMenu:this.hideHelpMenu.bind(this),openAboutDialog:this.openAboutDialog.bind(this),openServerDetailsDialog:this.openServerDetailsDialog.bind(this),DOCS_ROOT:"https://docs.marxanweb.org/"}),i.a.createElement(Ye,{open:this.state.UserSettingsDialogOpen,onOk:this.closeUserSettingsDialog.bind(this),onCancel:this.closeUserSettingsDialog.bind(this),loading:this.state.loading,userData:this.state.userData,saveOptions:this.saveOptions.bind(this),changeBasemap:this.setBasemap.bind(this),basemaps:this.state.basemaps,basemap:this.state.basemap}),i.a.createElement(it,{open:this.state.usersDialogOpen,onOk:this.closeUsersDialog.bind(this),onCancel:this.closeUsersDialog.bind(this),loading:this.state.loading,user:this.state.user,users:this.state.users,deleteUser:this.deleteUser.bind(this),changeRole:this.changeRole.bind(this),guestUserEnabled:this.state.marxanServer.guestUserEnabled,toggleEnableGuestUser:this.toggleEnableGuestUser.bind(this)}),i.a.createElement(Ze,{open:this.state.profileDialogOpen,onOk:this.closeProfileDialog.bind(this),onCancel:this.closeProfileDialog.bind(this),loading:this.state.loading,userData:this.state.userData,updateUser:this.updateUser.bind(this)}),i.a.createElement(gt,{open:this.state.aboutDialogOpen,onOk:this.closeAboutDialog.bind(this),marxanClientReleaseVersion:rn,wdpaAttribution:this.state.wdpaAttribution}),i.a.createElement(Rt,{open:this.state.infoPanelOpen,activeTab:this.state.activeTab,project:this.state.project,metadata:this.state.metadata,runMarxan:this.runMarxan.bind(this),stopProcess:this.stopProcess.bind(this),pid:this.state.pid,renameProject:this.renameProject.bind(this),renameDescription:this.renameDescription.bind(this),features:this.state.projectFeatures,project_tab_active:this.project_tab_active.bind(this),features_tab_active:this.features_tab_active.bind(this),pu_tab_active:this.pu_tab_active.bind(this),startPuEditSession:this.startPuEditSession.bind(this),stopPuEditSession:this.stopPuEditSession.bind(this),puEditing:this.state.puEditing,clearManualEdits:this.clearManualEdits.bind(this),showRunSettingsDialog:this.showRunSettingsDialog.bind(this),openFeatureMenu:this.openFeatureMenu.bind(this),preprocessing:this.state.preprocessing,openFeaturesDialog:this.openFeaturesDialog.bind(this),changeIucnCategory:this.changeIucnCategory.bind(this),updateFeature:this.updateFeature.bind(this),userRole:this.state.userData.ROLE,toggleProjectPrivacy:this.toggleProjectPrivacy.bind(this),openTargetDialog:this.openTargetDialog.bind(this),getShareableLink:this.getShareableLink.bind(this),marxanServer:this.state.marxanServer,toggleFeatureLayer:this.toggleFeatureLayer.bind(this),toggleFeaturePUIDLayer:this.toggleFeaturePUIDLayer.bind(this),useFeatureColors:this.state.userData.USEFEATURECOLORS,smallLinearGauge:this.state.smallLinearGauge,iucn_categories:cn,costname:this.state.metadata.COSTS,costnames:this.state.costnames,changeCostname:this.changeCostname.bind(this),loadCostsLayer:this.loadCostsLayer.bind(this),loading:this.state.loading,openCostsDialog:this.openCostsDialog.bind(this),protected_area_intersections:this.state.protected_area_intersections}),i.a.createElement(zt,{open:this.state.resultsPanelOpen,preprocessing:this.state.preprocessing,solutions:this.state.solutions,loadSolution:this.loadSolution.bind(this),openClassificationDialog:this.openClassificationDialog.bind(this),hideResults:this.hideResults.bind(this),brew:this.state.brew,messages:this.state.logMessages,activeResultsTab:this.state.activeResultsTab,legend_tab_active:this.legend_tab_active.bind(this),solutions_tab_active:this.solutions_tab_active.bind(this),log_tab_active:this.log_tab_active.bind(this),clearLog:this.clearLog.bind(this),owner:this.state.owner,resultsLayer:this.state.resultsLayer,wdpaLayer:this.state.wdpaLayer,pa_layer_visible:this.state.pa_layer_visible,changeOpacity:this.changeOpacity.bind(this),results_layer_opacity:this.state.results_layer_opacity,wdpa_layer_opacity:this.state.wdpa_layer_opacity,userRole:this.state.userData.ROLE,showCosts:this.state.showCosts,costsLoading:this.state.costsLoading,toggleCosts:this.toggleCosts.bind(this)}),i.a.createElement(Vt,{open:this.state.openInfoDialogOpen,onOk:this.closeInfoDialog.bind(this),onCancel:this.closeInfoDialog.bind(this),loading:this.state.loading,feature:this.state.currentFeature,updateFeature:this.updateFeature.bind(this),FEATURE_PROPERTIES:fn,userRole:this.state.userData.ROLE,reportUnits:this.state.userData.REPORTUNITS}),i.a.createElement(Ka,{visible:this.state.identifyVisible,xy:this.state.popup_point,identifyPlanningUnits:this.state.identifyPlanningUnits,identifyProtectedAreas:this.state.identifyProtectedAreas,identifyFeatures:this.state.identifyFeatures,loading:this.state.loading,hideIdentifyPopup:this.hideIdentifyPopup.bind(this),reportUnits:this.state.userData.REPORTUNITS}),i.a.createElement(qt,{open:this.state.projectsDialogOpen,onOk:this.closeProjectsDialog.bind(this),onCancel:this.closeProjectsDialog.bind(this),loading:this.state.loading,projects:this.state.projects,oldVersion:this.state.metadata.OLDVERSION,deleteProject:this.deleteProject.bind(this),loadProject:this.loadProject.bind(this),exportProject:this.exportProject.bind(this),cloneProject:this.cloneProject.bind(this),openNewProjectDialog:this.openNewProjectDialog.bind(this),openImportProjectDialog:this.openImportProjectDialog.bind(this),unauthorisedMethods:this.state.unauthorisedMethods,userRole:this.state.userData.ROLE,getAllFeatures:this.getAllFeatures.bind(this),importProjectPopoverOpen:this.state.importProjectPopoverOpen,showImportProjectPopover:this.showImportProjectPopover.bind(this),hideImportProjectPopover:this.hideImportProjectPopover.bind(this),openImportMXWDialog:this.openImportMXWDialog.bind(this),closeImportMXWDialog:this.closeImportMXWDialog.bind(this),importMXWDialogOpen:this.state.importMXWDialogOpen}),i.a.createElement(ia,{open:this.state.newProjectDialogOpen,registry:this.state.registry,onOk:this.closeNewProjectDialog.bind(this),loading:this.state.loading,getPlanningUnitGrids:this.getPlanningUnitGrids.bind(this),planning_unit_grids:this.state.planning_unit_grids,openFeaturesDialog:this.openFeaturesDialog.bind(this),features:this.state.allFeatures,openCostsDialog:this.openCostsDialog.bind(this),selectedCosts:this.state.selectedCosts,createNewProject:this.createNewProject.bind(this),previewFeature:this.previewFeature.bind(this)}),i.a.createElement(sa,{open:this.state.newProjectWizardDialogOpen,onOk:this.closeNewProjectWizardDialog.bind(this),okDisabled:!0,countries:this.state.countries,domains:pn,shapes:un,areakm2s:hn,iucn_categories:cn,closeNewProjectWizardDialog:this.closeNewProjectWizardDialog.bind(this),createNewNationalProject:this.createNewNationalProject.bind(this)}),i.a.createElement(ha,{open:this.state.NewPlanningGridDialogOpen,onCancel:this.closeNewPlanningGridDialog.bind(this),loading:this.state.loading||this.state.preprocessing||this.state.uploading,createNewPlanningUnitGrid:this.createNewPlanningUnitGrid.bind(this),countries:this.state.countries,setSnackBar:this.setSnackBar.bind(this),domains:pn,shapes:un,areakm2s:hn,ERRORS_PAGE:on}),i.a.createElement(ga,{open:this.state.importPlanningGridDialogOpen,onOk:this.importPlanningUnitGrid.bind(this),onCancel:this.closeImportPlanningGridDialog.bind(this),loading:this.state.loading||this.state.uploading,fileUpload:this.uploadFileToFolder.bind(this)}),i.a.createElement(na,{open:this.state.featuresDialogOpen,onOk:this.updateSelectedFeatures.bind(this),onCancel:this.closeFeaturesDialog.bind(this),loading:this.state.loading||this.state.uploading,metadata:this.state.metadata,allFeatures:this.state.allFeatures,deleteFeature:this.deleteFeature.bind(this),openImportFeaturesDialog:this.openImportFeaturesDialog.bind(this),openImportFromWebDialog:this.openImportFromWebDialog.bind(this),selectAllFeatures:this.selectAllFeatures.bind(this),clearAllFeatures:this.clearAllFeatures.bind(this),selectFeatures:this.selectFeatures.bind(this),userRole:this.state.userData.ROLE,clickFeature:this.clickFeature.bind(this),addingRemovingFeatures:this.state.addingRemovingFeatures,selectedFeatureIds:this.state.selectedFeatureIds,initialiseDigitising:this.initialiseDigitising.bind(this),newFeaturePopoverOpen:this.state.newFeaturePopoverOpen,hideNewFeaturePopover:this.hideNewFeaturePopover.bind(this),showNewFeaturePopover:this.showNewFeaturePopover.bind(this),importFeaturePopoverOpen:this.state.importFeaturePopoverOpen,hideImportFeaturePopover:this.hideImportFeaturePopover.bind(this),showImportFeaturePopover:this.showImportFeaturePopover.bind(this),previewFeature:this.previewFeature.bind(this),openImportGBIFDialog:this.openImportGBIFDialog.bind(this),marxanServer:this.state.marxanServer,refreshFeatures:this.refreshFeatures.bind(this)}),i.a.createElement(fa,{open:this.state.featureDialogOpen,onOk:this.closeFeatureDialog.bind(this),onCancel:this.closeFeatureDialog.bind(this),loading:this.state.loading,feature_metadata:this.state.feature_metadata,getTilesetMetadata:this.getMetadata.bind(this),setSnackBar:this.setSnackBar.bind(this),reportUnits:this.state.userData.REPORTUNITS,getProjectList:this.getProjectList.bind(this)}),i.a.createElement(ya,{open:this.state.NewFeatureDialogOpen,onOk:this.closeNewFeatureDialog.bind(this),onCancel:this.closeNewFeatureDialog.bind(this),loading:this.state.loading||this.state.uploading,createNewFeature:this.createNewFeature.bind(this),addToProject:this.state.addToProject,setAddToProject:this.setAddToProject.bind(this)}),i.a.createElement(ba,{open:this.state.importFeaturesDialogOpen,importFeatures:this.importFeatures.bind(this),onCancel:this.closeImportFeaturesDialog.bind(this),loading:this.state.loading||this.state.preprocessing||this.state.uploading,setFilename:this.setNewFeatureDatasetFilename.bind(this),filename:this.state.featureDatasetFilename,fileUpload:this.uploadFileToFolder.bind(this),unzipShapefile:this.unzipShapefile.bind(this),getShapefileFieldnames:this.getShapefileFieldnames.bind(this),deleteShapefile:this.deleteShapefile.bind(this),addToProject:this.state.addToProject,setAddToProject:this.setAddToProject.bind(this)}),i.a.createElement(wa,{open:this.state.importFromWebDialogOpen,onCancel:this.closeImportFromWebDialog.bind(this),loading:this.state.loading||this.state.preprocessing||this.state.uploading,importFeatures:this.importFeaturesFromWeb.bind(this),addToProject:this.state.addToProject,setAddToProject:this.setAddToProject.bind(this)}),i.a.createElement(sn,{open:this.state.importGBIFDialogOpen,onCancel:this.closeImportGBIFDialog.bind(this),loading:this.state.loading||this.state.preprocessing,importGBIFData:this.importGBIFData.bind(this),gbifSpeciesSuggest:this.gbifSpeciesSuggest.bind(this),addToProject:this.state.addToProject,setAddToProject:this.setAddToProject.bind(this)}),i.a.createElement(ua,{open:this.state.planningGridsDialogOpen,onOk:this.closePlanningGridsDialog.bind(this),onCancel:this.closePlanningGridsDialog.bind(this),loading:this.state.loading,getPlanningUnitGrids:this.getPlanningUnitGrids.bind(this),unauthorisedMethods:this.state.unauthorisedMethods,planningGrids:this.state.planning_unit_grids,openNewPlanningGridDialog:this.openNewPlanningGridDialog.bind(this),openImportPlanningGridDialog:this.openImportPlanningGridDialog.bind(this),exportPlanningGrid:this.exportPlanningGrid.bind(this),deletePlanningGrid:this.deletePlanningUnitGrid.bind(this),previewPlanningGrid:this.previewPlanningGrid.bind(this),marxanServer:this.state.marxanServer}),i.a.createElement(pa,{open:this.state.planningGridDialogOpen,onOk:this.closePlanningGridDialog.bind(this),onCancel:this.closePlanningGridDialog.bind(this),loading:this.state.loading,planning_grid_metadata:this.state.planning_grid_metadata,getTilesetMetadata:this.getMetadata.bind(this),setSnackBar:this.setSnackBar.bind(this),getProjectList:this.getProjectList.bind(this)}),i.a.createElement(ra,{open:this.state.ProjectsListDialogOpen,projects:this.state.projectList,userRole:this.state.userData.ROLE,onOk:this.closeProjectsListDialog.bind(this),title:this.state.projectListDialogTitle,heading:this.state.projectListDialogHeading}),i.a.createElement(xa,{open:this.state.costsDialogOpen,onOk:this.closeCostsDialog.bind(this),onCancel:this.closeCostsDialog.bind(this),unauthorisedMethods:this.state.unauthorisedMethods,costname:this.state.metadata.COSTS,openImportCostsDialog:this.openImportCostsDialog.bind(this),deleteCost:this.deleteCost.bind(this),data:this.state.costnames,uniformCostname:"Equal area"}),i.a.createElement(Ca,{open:this.state.importCostsDialogOpen,addCost:this.addCost.bind(this),closeImportCostsDialog:this.closeImportCostsDialog.bind(this),deleteCostFileThenClose:this.deleteCostFileThenClose.bind(this),loading:this.state.loading,fileUpload:this.uploadFileToProject.bind(this)}),i.a.createElement(Oa,{open:this.state.settingsDialogOpen,onOk:this.closeRunSettingsDialog.bind(this),onCancel:this.closeRunSettingsDialog.bind(this),loading:this.state.loading||this.state.preprocessing,updateRunParams:this.updateRunParams.bind(this),runParams:this.state.runParams,showClumpingDialog:this.showClumpingDialog.bind(this),userRole:this.state.userData.ROLE}),i.a.createElement(Na,{open:this.state.classificationDialogOpen,onOk:this.closeClassificationDialog.bind(this),onCancel:this.closeClassificationDialog.bind(this),loading:this.state.loading,renderer:this.state.renderer,changeColorCode:this.changeColorCode.bind(this),changeRenderer:this.changeRenderer.bind(this),changeNumClasses:this.changeNumClasses.bind(this),changeShowTopClasses:this.changeShowTopClasses.bind(this),summaryStats:this.state.summaryStats,brew:this.state.brew,dataBreaks:this.state.dataBreaks}),i.a.createElement(_a,{open:this.state.clumpingDialogOpen,onOk:this.hideClumpingDialog.bind(this),onCancel:this.hideClumpingDialog.bind(this),tileset:this.state.tileset,RESULTS_LAYER_NAME:dn,map0_paintProperty:this.state.map0_paintProperty,map1_paintProperty:this.state.map1_paintProperty,map2_paintProperty:this.state.map2_paintProperty,map3_paintProperty:this.state.map3_paintProperty,map4_paintProperty:this.state.map4_paintProperty,mapCentre:this.state.mapCentre,mapZoom:this.state.mapZoom,createProjectGroupAndRun:this.createProjectGroupAndRun.bind(this),rerunProjects:this.rerunProjects.bind(this),setBlmValue:this.setBlmValue.bind(this),clumpingRunning:this.state.clumpingRunning}),i.a.createElement(Ba,{open:this.state.importProjectDialogOpen,onOk:this.closeImportDialog.bind(this),loading:this.state.loading||this.state.uploading,importProject:this.importProject.bind(this),fileUpload:this.uploadFileToFolder.bind(this),log:this.log.bind(this),setSnackBar:this.setSnackBar.bind(this)}),i.a.createElement(Ga,{open:this.state.importMXWDialogOpen,onOk:this.closeImportMXWDialog.bind(this),loading:this.state.loading||this.state.preprocessing,importMXWProject:this.importMXWProject.bind(this),fileUpload:this.uploadFileToFolder.bind(this),log:this.log.bind(this),setSnackBar:this.setSnackBar.bind(this)}),i.a.createElement(an,{open:this.state.resetDialogOpen,onOk:this.resetServer.bind(this),onCancel:this.closeResetDialog.bind(this),onRequestClose:this.closeResetDialog.bind(this),loading:this.state.loading}),i.a.createElement(za,{open:this.state.runLogDialogOpen,onOk:this.closeRunLogDialog.bind(this),onRequestClose:this.closeRunLogDialog.bind(this),loading:this.state.loading,preprocessing:this.state.preprocessing,unauthorisedMethods:this.state.unauthorisedMethods,runLogs:this.state.runLogs,getRunLogs:this.getRunLogs.bind(this),clearRunLogs:this.clearRunLogs.bind(this),stopMarxan:this.stopProcess.bind(this),userRole:this.state.userData.ROLE}),i.a.createElement(Va,{open:this.state.serverDetailsDialogOpen,onOk:this.closeServerDetailsDialog.bind(this),onCancel:this.closeServerDetailsDialog.bind(this),onRequestClose:this.closeServerDetailsDialog.bind(this),marxanServer:this.state.marxanServer,newWDPAVersion:this.state.newWDPAVersion,showUpdateWDPADialog:this.openWDPAUpdateDialog.bind(this),registry:this.state.registry}),i.a.createElement(nn,{open:this.state.updateWDPADialogOpen,onOk:this.closeWDPAUpdateDialog.bind(this),onCancel:this.closeWDPAUpdateDialog.bind(this),newWDPAVersion:this.state.newWDPAVersion,updateWDPA:this.updateWDPA.bind(this),loading:this.state.preprocessing,registry:this.state.registry}),i.a.createElement(Ha,{open:this.state.changePasswordDialogOpen,onOk:this.closeChangePasswordDialog.bind(this),user:this.state.user,onRequestClose:this.closeChangePasswordDialog.bind(this),checkPassword:this.checkPassword.bind(this),setSnackBar:this.setSnackBar.bind(this),updateUser:this.updateUser.bind(this)}),i.a.createElement(Wa,{open:this.state.alertDialogOpen,onOk:this.closeAlertDialog.bind(this)}),i.a.createElement(M.a,{open:this.state.snackbarOpen,message:t,onRequestClose:this.closeSnackbar.bind(this),style:{maxWidth:"800px !important"},contentStyle:{maxWidth:"800px !important"},bodyStyle:{maxWidth:"800px !important"}}),i.a.createElement(N.a,{open:this.state.featureMenuOpen,anchorEl:this.state.menuAnchor,onRequestClose:this.closeFeatureMenu.bind(this),style:{width:"307px"}},i.a.createElement(_.a,{style:{width:"207px"},onMouseLeave:this.closeFeatureMenu.bind(this)},i.a.createElement(ft,{leftIcon:i.a.createElement(G.a,{style:{margin:"1px"}}),onClick:this.openInfoDialog.bind(this)},"Properties"),i.a.createElement(ft,{leftIcon:i.a.createElement(V.a,{style:{margin:"1px"}}),style:{display:this.state.currentFeature.old_version||"ReadOnly"===this.state.userData.ROLE?"none":"block"},onClick:this.removeFromProject.bind(this,this.state.currentFeature)},"Remove from project"),i.a.createElement(ft,{leftIcon:this.state.currentFeature.feature_layer_loaded?i.a.createElement(Q.a,{style:{margin:"1px"}}):i.a.createElement(H.a,{style:{margin:"1px"}}),style:{display:this.state.currentFeature.tilesetid?"block":"none"},onClick:this.toggleFeatureLayer.bind(this,this.state.currentFeature)},this.state.currentFeature.feature_layer_loaded?"Remove from map":"Add to map"),i.a.createElement(ft,{leftIcon:this.state.currentFeature.feature_puid_layer_loaded?i.a.createElement(Q.a,{style:{margin:"1px"}}):i.a.createElement(H.a,{style:{margin:"1px"}}),onClick:this.toggleFeaturePUIDLayer.bind(this,this.state.currentFeature),disabled:!(this.state.currentFeature.preprocessed&&this.state.currentFeature.occurs_in_planning_grid)},this.state.currentFeature.feature_puid_layer_loaded?"Remove planning unit outlines":"Outline planning units where the feature occurs"),i.a.createElement(ft,{leftIcon:i.a.createElement(Y.a,{style:{margin:"1px"}}),style:{display:this.state.currentFeature.extent?"block":"none"},onClick:this.zoomToFeature.bind(this,this.state.currentFeature)},"Zoom to feature extent"),i.a.createElement(ft,{leftIcon:i.a.createElement(J.a,{style:{margin:"1px"}}),style:{display:this.state.currentFeature.old_version||"ReadOnly"===this.state.userData.ROLE?"none":"block"},onClick:this.preprocessSingleFeature.bind(this,this.state.currentFeature),disabled:this.state.currentFeature.preprocessed||this.state.preprocessing},"Pre-process"))),i.a.createElement(Qa,{open:this.state.targetDialogOpen,onOk:this.closeTargetDialog.bind(this),showCancelButton:!0,onCancel:this.closeTargetDialog.bind(this),updateTargetValueForFeatures:this.updateTargetValueForFeatures.bind(this)}),i.a.createElement(tn,{open:this.state.gapAnalysisDialogOpen,showCancelButton:!0,onOk:this.closeGapAnalysisDialog.bind(this),onCancel:this.closeGapAnalysisDialog.bind(this),closeGapAnalysisDialog:this.closeGapAnalysisDialog.bind(this),gapAnalysis:this.state.gapAnalysis,preprocessing:this.state.preprocessing,projectFeatures:this.state.projectFeatures,metadata:this.state.metadata,marxanServer:this.state.marxanServer,reportUnits:this.state.userData.REPORTUNITS}),i.a.createElement(Xa,{open:this.state.shareableLinkDialogOpen,onOk:this.closeShareableLinkDialog.bind(this),shareableLinkUrl:window.location+"?server="+this.state.marxanServer.name+"&user="+this.state.user+"&project="+this.state.project}),i.a.createElement(ne,{open:this.state.loggedIn,user:this.state.user,userRole:this.state.userData.ROLE,infoPanelOpen:this.state.infoPanelOpen,resultsPanelOpen:this.state.resultsPanelOpen,openProjectsDialog:this.openProjectsDialog.bind(this),openFeaturesDialog:this.openFeaturesDialog.bind(this),openPlanningGridsDialog:this.openPlanningGridsDialog.bind(this),toggleInfoPanel:this.toggleInfoPanel.bind(this),toggleResultsPanel:this.toggleResultsPanel.bind(this),showToolsMenu:this.showToolsMenu.bind(this),showUserMenu:this.showUserMenu.bind(this),showHelpMenu:this.showHelpMenu.bind(this)})))}}]),a}(i.a.Component),bn=(a(1038),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function kn(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}r.a.render(i.a.createElement(vn,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");bn?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):kn(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):kn(e)}))}}()},423:function(e){e.exports=JSON.parse('{"name":"marxan_web","version":"v0.9.7","private":true,"dependencies":{"@fortawesome/fontawesome-svg-core":"^1.2.26","@fortawesome/free-regular-svg-icons":"^5.12.0","@fortawesome/free-solid-svg-icons":"^5.12.0","@fortawesome/react-fontawesome":"^0.1.8","@mapbox/mapbox-gl-draw":"^1.1.1","axios":"^0.18.0","classybrew":"0.0.3","fetch-jsonp":"^1.1.3","gh-pages":"^2.2.0","jsonp-promise":"^0.1.2","mapbox":"^1.0.0-beta10","mapbox-gl":"^1.11.0","material-ui":"^0.20.0","rc-progress":"^2.5.2","react":"^16.12.0","react-dom":"^16.12.0","react-fontawesome":"^1.7.1","react-scripts":"^3.4.1","react-stay-scrolled":"^3.0.0","react-table":"^6.11.5","react-textarea-autosize":"^7.1.2","recharts":"^1.8.5","typeface-roboto":"0.0.54","wellknown":"^0.5.0"},"scripts":{"predeploy":"npm run build","deploy":"gh-pages -d build","start":"react-scripts start","build":"react-scripts build","test":"react-scripts test --env=jsdom","eject":"react-scripts eject"},"homepage":"https://app.marxanweb.org","devDependencies":{"esformatter-jsx":"^8.0.1"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},434:function(e,t){e.exports="data:image/png;base64,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"},435:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHAAAAAoCAYAAAAmPX7RAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAABR9SURBVHhe7VsJeFXlmX7vvia5CQkJS1hEkE2qyL4rVQRFrQtDERemFhWdOn1Gpy2tVYvbtFOdqYK7osKwiYJaBBfCFkGhCAKyr0kI2e69yU3uvvT9zjk3uUAggVCmPA8vHu9Z/vMv3/59/4kuQeAiLljotd+LuEBxkYHnGTu9MdSE49pVy3GcCY3HE5i9L4S4jg94xDnOlC4WGA28aATzD4bgiyYgj/2RBO691AqnSW270xtFQVkUVgMQ4whZZh1u62hRnjWGw7UxfFoSho2dsUt0sOlxfXuz9rRpbK6Kom8rI5aXRhAggX7CsWJcj0HfMPcYlxpk5w7TuZfbSDQKX52fdFPHE1rK2ELcOAlp0OsVWqypMmDM+hASP7HAE4iCzernGI3FSGsDhCMmoxFOh025fzoc7wPZm26hB8qo0mcMqLstA3YZuRFkLvHA62djoUcwgWK2bZdmVJ69tieIB9bXARaNgCTcDzdkoEem+vxELDocxoQCH2Ble447orURq69N156eHiNX1uCBSyz4a3EYNVGO3d+On22qQ6ZZj/s7mjGibYMgzD8cQgYJFuIwt5yBgDQFT7UPVqsZZpMJoXAYgWAYrnQnmZGAu7oGOZkZCnPHrvJheXEUHw23Y3xuAr5wFGlOB8mtQ2lFJdrkZLO3BMqq3Nr56XG8KHJRNmqKQnT55aHXJKoxuETbpK2F3fDXkNLWImpZ/4yHVY+xG8jQU4C0TmmvQ5qmyafDU1v8eH5nAOUUoh3VMTzdx4bpPa34piKKxUOd6J5mQB9q5dRv61AaUM3WRGqmDPXhoRBepbU5VxDmmIwGRdNM1CLRIDkXjbIY9Hyux883+bH8GKWTdC2opFZajPXt9BQqOZdfvXIts2wazWt1LkAlPkz7P3t/ULvRMty4xofhuUaIDr1DjXvichs6pRsxqLUJt3SywGbU4/HeNrgoEK8PcMBpbBCIMflmvNDPgTYUkld3BbS7LUUC4UgMsVgc4aj8RpVzxZzQsvVd4cObIjCa0qdzPolgSGGaQMxs8ojxSDWMp8P5Y6CoNzVrysYAbX3zJtcY5M2NFRGU1MWx+GiE5iqBQbkmmDQ/IqgOxfFZUZj+PIgtlRHl3kkazY5WHIvgO2ru3hoSuYWQefkDAdTxCASDCITCMMSCKDzih2tZDN/5aNvFwgjoTu5tTzOe0OHBGW9i4469pE4CfjK0zs8+eAgTm4PzyEBCTCxHnLyhVrtx5niLTKkiTw744xhIf/qbH9m1J4CXjBv2RQ1c9OPjVtdiSmEdrlxRA90CN17ZfbzmZzNIeqi7FZ9SCPbUkljNlPhTQXyYKz0N6fRnGWkOtHU5sKHGgmFrOFkbzY8SCPIgH0e3NaFLKysMJjPeeup+TP+fBdi88xDa5eUo/lD6ENPbHJw/BgqB5KAmLDgYxnY3V3IWeO9AGPkMZpcOd+LHeQ0BUQmZkPmhF4U00yBzbulsxtdjGQRJxMkxp/3Nj1vXM0hKQS4DpiXDnPiePnN7dfMk/nRI6rhYgyJq3GAKD+y8m3xAU2rSJfDlqDQ8yvkowTDbPvHg7Zj42F8wf1mh2o5IvtIUzg8DybieJCpoMhQm8nzUmrPTQnl9TWUMd35dh7b2Biltv8yrEEMBg5pRWQYMpj8E0xvlIBM/2hvG63sbNDGb/vHft9BksVN6He3u2SHBf+VuD8oZPaK2GlesCasRdTKwk3whpscPg2nad3jw521BRp1eHC2rQKc2WejYNgf/O3cFKio9qPR46U+bJ+Dnh4FUihtzjAzpSVCZFwldxahw5u4zCyBK62IY38mMZ3cGsWtchnYXWMXcbwDN6WSmDNO6WvDWYDv6uAxwB+NYMNiBPzM6vYcaeXMXMz4pUn1iEn9g8LOU6Uf3tJaRQqLQ1q2ylGNZbQbckqdovFOkjr56x7VOuDJdmPJtHA/3sqBNrgvZvM6k6ZXgJc1uwYbt+5V7ZlPj6daJOD8MJNzUglcZ+SmLkYMO/WGaEUUym4k/7ArhnvYmvNjXjgWHGjRp+dEw+rn0GEKtuzrbiNvzTbi6jRlZTF0mMD8ckmXENRSggS4jahlAHaP/FEhqURGIYQHN6Es7W5hSKMtQ1/IUUxtI1JtkYCiBV/o70TPTgCHUzO7MS1/q76CWsRl93a7DpUrEKkzbdaBEe6l5OG8MjGguZuYVDDq4IGVxdAIjGGwIkms9HQZk6PHo9iCyaA6/T/FZH5dGMetABNNoDu8orEXGPC+WldCEEeYPPBj8lQ/3MAedviOIVWVR+ic16syjiXuejAvzcmsLI9E4hbKswo2A14OtXpqZJGU5za50xQ/k1aKwyIu9pTF8fVUYbg/NLU1ulOnG4s83wGJmJM08cvPOw6itq1NSkubgvDEwiWmXWdHeyWFlfnRha2n+vquKwpGSp50KUy61Yt7BEOYdCOLOzg1luTw7+xN3KKmCRAY0hy/vp0ZR2yJSKbLxvlQK5Dn/kwhUIGavLzX2p+tqMbNfQzR7NpByWNvcbNhcmfVuTwEtz4zunKszC/PLLRjVnsFWditkZWaifV5rvLl4JdOIg2SgUZmPpBBOh+Ofz4Sm4nOaLPEJCmhKb6N2KPFH6sIbwb7qKA7dnIGNjDiP1cbg1fq4hgm9UnAVaH1EKfk+ea7QQbspppsr7pyuBj//vSOAKfTLz1xlR8Gxs4uKk5Cu1cSdQ0gVRaYjNymYQ1zKbbxK4XukYwPJV27YhneWroVVY57yjhaISVDUHDTJwDPhcHMHlXroHSkBzUH6pEe30W+IhpwG7RwG3MfcruDqNLywP0wzqpqZ3/WyUSB4IgQT8MfBvtJE81L5QoZOZZCTxB+ZGw7PNeN9aqtLSoctgIxcS+0Bk/e+DjJSm4pZn4AzHkQ8FEKU2jhIK28WfLMdv315IfJaqTVSmXuATnHc8Cv4NFEvDE3heP6wI0X9U/jgP6UppnlKfcbxLMrLzcPCoWlqeK9J6WbxQZr0nQo2trOSMaNX+zCEAUEJtbBMq3HOHcYAqU4Ix/6ojdfSNCqaJz9yj2O1pel8TTOVVYxQ63j72e0BlITiGJFHgWoBZOaq5unwy24UKE1wwnEdahJG1PG6S5oR0UAAP3t8Fp6Y9QGyM5wq8whOBaFQBA9MuE5JIZL3m8JJClbvi+SHhCj0NM5BdzChlLOS1knaZlFDzgSvDSLR2Y+CJpiXxMKhDgzMMOLtAyFcSl/X4zMmy8Qk+sQPRtA0i88js/61i6ppj9Lngpp6JRlefKOkHjpcv8pHE5tAa661lFr5xUgKU4uRgM1qpsBYcGtHK1Nd0k1IF01gW8iMNIeFQZMBR45W4fs9R+By2o5j0tEKD555ZIJyLjsaUtRuDk5i4H35nIRsyAlnKO03fcMoUaNxKsas5X0lKOBB5g06CwmeSiJ3lvzrDFIJHRfm4Ctlt7nQhhp1dycT0xF1l0P2G+N3ZmLddemwaoL4x742rLo+HZuvTYfOoMNWMnMno9BcuwGLhjhQQg2mArYYwgyDXhPgeBRbRjtwdStxEwnMOqgqQWU4iiEDLseVPS+h9WoY9CgT+kcmj8WIfj20Owr1m4WTGPg0E1sxh4rZIbGEtrp5bkxkeP6brQFla0Zqi5ukZCX1PWlHHzZ3ILXpLCD+TNFC6acZkDLV7y63w7bIg/yPq5VA5k36w+T7QsihuQ3CJNcjmRMm8eQWP37FaFY3pwqjqInvc96ttai0JZDN46NllSiv8qC0ygtH0IOVQ2K4rZMFnx0Koc7tRiemLTtLKnDlZfmKuRRTKdWYhyaNwd3jh2H/4aNKalHGPppbiWn0o6Yvi8O4dhU1TIIAUWVpIkIkLUU0RNBE84S7JP5zfWz4tTA+BbMZGEzZKBu6JA6l8J62JsweShPXCB5mu5kHyIRkIEGNvoE+7NNRpzdt4gO/c8fQwaHDu4fCKOR5hGP157v9MwzKVGW34VumKXFq5FAm9OPzjKgi0zsx9RggpbZzBG9NLdJoFkULZXc+GArTbKr+dtZ2L7LTHUreubq4lkGXGcN+/l/olp+LX993My7r3E5pV0Hm5WRlKudSkpOqTlM45VdpmyqjGEutqxQ/J+YoVUhFQ0koPSc0+0o77krJyZJQduRlA1cYSIbc0d6EhSNOwRBOwfCBF3G2S5rkkTlGrGpiR76UEdYHhyP4kAInn32MphkfkW1AJQOUMe3MSuq3pDiCNpznBjJ3xdEI/Jz3Te1MysZuO7HF5wgqA+3K5qwwULaT0jUGhv0+mO3q2ievrcac4Q1lwEgkAhN9nkC0r7XGQNmRz20JA5NYVxbBUhKhkFFikMGBEKof/daNbUwYR6YoBG8E2z1RLC2K0BdxkmR4T+ZeN3VoMGUnorA8gjVlUZip3ZLDXULi3tGIYDSFWUwNpFiQiid/CODJnk1/X9ISyPcwkoSLj07QMkllxmBQBSQYDMNutSgpxbJjCfTJ0COXUwxFY2wbJwOZB/KfPxCE3WalPKssyc0+Bwy8iHOPPVSGbloxoaW4yMALHOfOCVzE/wsuMvACxz+MgZctr2au5dau/nlRzEi2/Awyecm/9/li9bWHWgZ2yU8WBUfqYqhJ7p0R0nZDZaS+8C7wcLzDbCfVoFTIu0U8Up1aMbMACfDKU8ZIxT+MgbIL/v7glm3RnA/kL6nGyHXHfytzOlSS+F0pmAuZnAtuXu1D20Ue5XwPmdXxXTcKGU0LRn9Vg658NvhzHzLnuTFXtrgI2ZvsNN+D+zf6lWtBhILQcZ4HHZhOVQXUys0vNtUhf6EHw1b6kMv2079raJ9EowycvtWPtI+86LOiBjuYBAuGrfVhKjucyMEzlnrxn1pnfQtqcO+3aimryh+Hmc8KmHoUVsYwr1T9fOFmEmgqk/Whq3z40w51J33ChlqkL/Fi4Jc1OFCtjvHU9gCuZpundwTg5PgTmIcK1nMOWX+txrwDITjYf58varDPG8XwAhKG128w50zifbbJ+6QaGZ94sVgj8gymEYPZ7+Pb/Ehn+1EkiGDCerUcuLs6jgc3n0ycxpBrYwrQ1oRl5eqcV8rHWSY9/GRsUS0Jb9dhDNOr1/eFsPJIBHtudSExKQu/6G3F5M/Vum0r5qWyZzmnpOHzjpn7uAbZJ7Xrkc45fU2te2lLAJ/+OA2JiVl4Z7gDz62vU/6EIBUnMfBhMum5rQH8vqcVUpvurQ26xxfHG7tD6MwJDsow4E9sIxI3yGnAuySQYE5RGBFvDMNaGUj0CFaXqoPt8vJdLugIw+eenPg1JPyi/WE828OK3TQNXZarY5RTAFYxKT9AQtxOIi3aG8SSI2GGyjQ7zCufIqN+f6kF27iIrhSuUZlGtOWCp0pdlpBP6+9eU4txzFEn5ppwOxlVzL72cowNJWHs4hru5rPVzGtfZN/TOlhg4RrbkSmTeL+56J1pULeypPBAzclz6PBFZRSrydTWLiOJqsNcCk8e6dCV14Lnf2TH0hvUBF4sdl/SULLV1WSUYAZpe5fkydEEc2EdFsu3O2xzg9SmCfm7k4/HZyD/hOLDSQyceSiMoSTev/B4XBJiEnUbiSed9uDEn+tjx3sDaBo5eZG4h7qxDSfkpu1eejSCDtnyubjarUXKcITk+q2Z9xTd5MI1eSYUUDOfuMKGh9n/7tHpzIJj+Ir3lJ0Q0uXtgU7MVmqrOhwLxuUjNuX+skEO/KqXDT24sN5k3gz28Xh3Juh8TzTgBQqJ02XAY53N+A/Z9zPr8cZBaq30Sy1ZNMSJlwewX9L0EMcc1c4E+auE9k4dhp8BA39K2sjHwLMpsJdyXZM6mlF4LIKvea8XaSQoCiaQn/yQl5CtsGQhQzK3CtLs7o4mvLgnhBCFwO2JYdolfC7Wk6/todDlyGZBCsaTmTnW0zBQKghyYxcd53U0Ob/c4kcvEtxCQZNBk85V9rZELeSvpHqRmGIOXjwYRkFJCNO7nVw9kfcytJHEhwjDL9Em0kq4Q0Z7ySiN3wqCSllNeaSCl3WUToGsUR4L/MkT/tQyeJCPlibSPI+lVvbNMaANGSftZRJhEiqJZL/yerKL5mJwjgl+EngO1zyWRL2TzP8Lz/fTFE8icwXtuL5S+fZHgxS7t2raJn9DUsJnv+1hU4R+Bl3GqE5mdWdN5sVfKXzLWlKxme9Xn/CnaccxUMpAsg0TYSe7xruwm8cr/ezolmUE6XsCdPUMfaSzBU/Tf4GaN/kU5bLk6/lpZDgl622aRsHiw/RT7Odyaq6U0BqDQmv+7/jlHA+pWil9k0nfXJ+B/dT2Zy+34YHuViVSPBWU70FPMe6pIGXBDLqOr2iKhXl9W5sQoqU6RPcxqLVqMse1M6LYzQhXix4fozJcwYBEIMIT5/LlW55saukz3wfwJOdZpkWqYTLudgpGgFq5lvGEYA4tyVV8f+cJHyAfx0DBejrLGmqg7r0q6Oa6MUJz+BIGV2ncj0j4y4mJMgmUzVMuoAsJ6JDiNeFhe7fW3s3z1FD93f52rKb50f2fGxOp6Xdy8t34brlIiSYpitbwXIrP5SKJHC8pfJU8l/4FAe2ZzG0hzWM2Jd/2vhu6+W5cv6wGpTTzShtKfL1AU9RrtPf70uRuPBjBMPmKurkgA7LEPHJNA7Wtq2wpjfG0Nxkr+A216yoyV6JHWeeL20N49Tq1oK3MXVvMBKknUxNGsq1PBI191nLNI9nvlF5WjFjGdIx93MVo998GOTEoRxWQekgp7UQEyaFPqeNflIYTiXhcucdcJrGRhyDIBGY5n3lo55L46lg4UcSRk9jiiSY2VPB94m9VkcQ67d0kDrHth0WhxLeVahvB3upoYoWMSciocl5aF0tUcz5yXhtW57KJfW12q/2VkTvyTOacxErOZWlxKOELqfPbXRNNUJLr11JAUT/gU+capm2TtjLHM0Ex578l5Z3d7G+L9+Q+hGafHQslymnrk5C232jv+jjvLV51LkLPdRWRRJRzSmIn+1xGW7yXa2gMF2uhFzhOMqEXcWHhIgMvaAB/B9DAT9auTzQiAAAAAElFTkSuQmCC"},436:function(e,t){e.exports="data:image/png;base64,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"},437:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHcAAAASCAYAAABhAEFjAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABLbSURBVGhDjVl5dJXlnX6+7S65N2RPCAmBsAQBRXYiWkFcALeeMmodl6OOSzscW0fn2Do6aqdqW49TraVzpi7jH1jFhYKAFopWFGUJYNgRJQECZM9Ncpfc7dvmeb97Q25urjN9cr5zc9/3e7ff+vzeK315YrW9v2MDNNmFbNh8NMiwbQuq14dyeTzGlS3C9KrLnH7TikORPc7/g9h04Dm0RPfB1hVMr3wQS+oWp3uGw9QTUDR36v/+CLoP7kAsFoIsK9C8XmglVSibNsPpNwwLkgQoiux8F7BMm+9KeOnDdTjd14cZFRZ0I4nmXj9sSfSp8Hq8qBxdiyWTalFXXsRBFkwxjzQ0zyAMy4QqKdh4ajPWffs5/qnuEXzd/iCumfwYastnw7YMSJwzGzbHSdzz6r0PIZJs59wKPHIB7pz/X+yVnH1LGetZptiDTnm78cgnP8eR4HF4tDyEjQS2rVgHwzSgKiPXgUVt8LzN3d/ix9ufRqFHwwDHPDXrcdSPvZi6EjIafi7puU8X2XlqERfVKRSJ5zfSXSlInFTi0KTlgaoBUbTDiph4askuKG4XbJn9zjjTUcxzHy/GKFcBWgdMzB33M9w0/fL0TCNxZv82fPHMvQjH+zFj+mL4ZD/0RBS2IUOP9yKRMDD+uttRe+v96RFDMKkog0Z332svg+aAqcWAVzVwpMfr7MlwjEeBmdDRp7tRM2kWfrO8HnmOgVDi2bCSsCicX2x7BfPLvo8jnTdT2X7ke0rxo0vXUAJUIlfKBrdA5QKvNtyF/mgX3DT2/mQXFo+5A4um/zPlolMuFFwaBudROc+Gbzbgsd0vYLy/goZuIqTHsfvOLdApfy2HEVF3VC5w84f3ITDQQ4fjXuwkTy5h6z9uhJ1IQqI+MiH7lAJINhVD5dnxCEp9k1DkHYtib43zFPr5OWoyJKMbMgVWolWiwFeK947+iC4grDItKLEY4aLV2baBQKwcbn5mI5lMOJ+frXoEmx66GrpbRV5hGQ6f3I0jbUcQUZIw81UUVE9C2YQ69O38K/Y/drczxqSh2cKCCVkWEUVCHoUpPCcKN70vib5IJ871BtAdCiMcjtNLFFSOUhA+txNPbtzHkRbnEE9qnvNg5ApHbUwrvR8n+lfC5y6lMXvRE2vDub6DORXrQNadD8mSaAzck2Si0FWC7e1vIUpDlYVGMqCIebj0U7t/j9HeEipfgkld2lrqveFvZ0C2EKP897Y1QlVpzrQXTXPhrNGJk51nqNghAxqEbNt0aC5mKEFcOulu3DN/Fe6rfxX31r/iPPcteBX3zPsDHlu+E/l5JegfUBGQ8vHXtnOUdnqWLGiKga5oAbw5dupyudF8ageOrXsJo8ZOZqQRoUuGS/NzHzE0nd2PY00N2PX1Nuxp+hLNAy34uqMRG3+2nCmAhiQeYlA1VDdDoYTuQARL5y3D+4/8ApsffRIf8Pn1bXdgXs1EBKIxuCQP2jv3Y+vJANdjaJSzDc/CV20GgrEX6UkhCpKH4yKa4sK+Mx+k38mFtHELI6cxm2YXjayT3mfhb9/8lvsdbhTi7f3Nb+PGMRZqfCoiXCNM7YattLdmhdYhyHhpzxuoKaygUTOCGlHOJaFYLcEfm1ezP72PDMj53MQorwfCgyN6jnCQAU/RHXi3M4jtnSZ29EQczz0PCkxAtzsQjkURs6IYyLlRGztCF6HyqY2wejpg6S7EetuQN2Ag1nMWbtUPxaVSqDZURpRItB9GMo6m3VvRuv+zHEdIHWuA8bE4r+x8g0ojmFAxBj+5/gbMqR4DnQHRxZx8+HQb+1U6wvCzJqjL7mg7BhLbqCAFdSX1TFUMe4YHTX07uYdk+s3csJnWJHp6Zf4HGF+ymanpSuxvfw/9kS56Jx2IactiPhWaWd+8ChU05voCHfdWJbCyOo6fjhlw5pEZVYaBirTJLwTea1nLr8VIGP34/rgfoFvvhM+Vj01HNjr92ZD/HCjE/3wD/LYlhOZYKsR8F/IZDvyqDDeVWpDnSy2c7hvExNKPUFP8Opa4q1HnKk23DqElEEZS74VRdwN8194Ab1knCh6+BcZrb2HcCzthxoIp8iA0RG+QRaij1RZX1qBx7UupSXJAmJElEmAOzJw8DfEkha/EGSo5PyFIVyZO9dgIxbYx9Q5QST7ceOG/85wki+R8RjyME30N6Tdzw5TjGO15GZJHRxIxlJU8AZc6AZuOPuEQP5spQ2bK+svR38HHEMxESB4jIWjK6OcTNHKZbQqSIqGhtREuewAFWhCt4XY8Wv8AyZdOow2isqiW6zSm3x6CnKR7+/IMlCDBHFCRbs6NFxtXwce/iBnBdZWLUvJP94kcKGCwPxo5QyExRNH7stEWGiCbVKB3n4a+7HUkHm6EMua/oXRMQpe7DkUrHoYc7OObIiww5PJdEY4VCry7+ThDZsyZJxMiIjr52GEdI5FImhQEuQA8iCbDTpuc3rllmhS8gRM9MSj2Me4fmFY2j4qQUVd2BXTmOdU7CruaX3feH5Gr01BJBk01j1WCRKKn8/wm+clUnAk3oqXnIJm+F3EaVkPLahoNI4wicugAZMMmeezjWEZCwsyOdmne8pevC3B58TpM9b6OZ+cJ7gD8Ye4nmKatxmz/89hwPJUjkxmEmEaVOmS5twwv7n8NC9Zcg/o1S/mZeha+s8x5prxWT68l/XYnMSN/Fv5j8ZNO7B8Beo8kyI7zZVD1Q+hOktGJfCbWjXXAS13pyVOcKwo12o3Yon+BXFVODw5RQDoSgX4k2gKwz55D8nQzkpFQeqaRUJSRpEKgre0gLiz3ojwPqFFSxmGmvVxWFLLPBHrpnQnrtEMjZlevcPrmjrsFMSNCdqvRKJuZj8/xbCPPJGAZA4jqH9MIqzGl2Edj60NY34M8tQLrD//CEcX6Q7+E31/Co9tUdBTXTHoQAfssvfxh1Hq/4Cz0bnr9MJA5RxNxHO5pp4G24wwJ3tUTWdnQkC+drKEv2sSz9CGqutDc1gVXBtN2zEQk5hhjvSBc+ZIPmi0jjwditcn/FYYDFRX5Raw33SjQ6ZlqAl397VQIVZhDw6JFWL5OgpQNUepojOsS1xAr6xSyrTD2ORZL7+vrhf/xnagcV4+iqdOQ/6//AN/rK2G/8VPIT9+CJDlCNsQW3B4XTneexNHTR3Gk+TAONx3C7oO7sOqD3yMU6UBpXgKFWg+umzXXGaNmEJ2D7SF6k0wvDqJYq8GYgumO8ot8lahg9SD2qXg82Hvqz6kBOSDL+eQHL6O18w4a2RHMLP8cIStGJTMymCFsObgK53oanKokQsK2oOZGFBXMxoSCLeQZ34OukqBS3rCZ7rKw5ug5VHtY1bgKMR5xlOYXcK+MapTbtIpSRgqgWDewtjWVcgZxPgYIxhlgeCjM82NR7SIsGHsJi+NLcMnYhVhYsxBzK+agM9GEmJxEoK8FF69dBjMZ5bmzLJkLyUJhLAlsm66SBUepGQYhsZwRj2gRdbaoN+P9KpruvRinlqo47T6Jzua96D25Bz3qKZiuobEOOES0FDIk7jqyHesb1mPjng34cN9H+OLbHVSSzdznQSDSj7Hlk1FTVUsjHQpd4uLj7IAOTYogQu+dP/Fmp902UkY0d+IKRBIBeEwfjgQ+ddpyQdTBtpUPS6aAzRJMq7odZTQUt7gcUEbhYO+70PKquBfKJ2ljcd1D5KCFwrwpjphTSqVOknU+YsdJOpmP9XpkD66ek+IxIgkJXD2xGD3RJDz5buw5LgxkCCnlUgAhFsS3jL8ea298E89e8hh+c9kT559fXfo4XrziWRy6ay8FEIJOojHRX4mnG3/nDM+E5nXRCj04Ea1iuMuRAzXmYktkvOGHUCXmNsZEt1qG7vBKGEKQzIduslqLnq66PWScLP8ZRQYhxCEs2OTjyUuynMpjlNEcr1QZbi2eK8raPdDbjQVT6nHnVXdyANdSRS0uZrBxvDsORfBIhi2NNfH00VeIDta4qXWmly6Fx3bDdiWRiAbR1LnHaRe3dpkQGR3wo2rUehKyFGv/4ZxfoSvcxihmwqOU0g+i6E+Ece30h5z+JNm4ySojyz1S0MV8FrafOYTT5n3Y2fsTPs/jKpZ2AoO3WAtqSnH5hArW6BESq0oSq9Ns5Vhxg+cckh5jk+pPKBrnDMgJM3WYRTWXwiQJ06Q8HO0+5rRlItT2OXrO7qWFCiKUbszAKCogQTLheCkhlnes0PSwBCpj6fCfiJssyiU/D80J+JowBZNlhEajcampK0sBMVYmk2R8gp8HyWdJN3fyPFxUOxMXVV3Iun0+ls9ejmfufwbXsAZO6jqFmSIeojxhvERTIATJLSEe1VFXvhwetdDpH4SX5U116VzmO2F5Gna1veW0m1kXNGQHKPLcDEtiKhJ9FFdp/kTMrLqepUuMe2VtzXZxwXFxzQ+EVTpny6lYwtJEj4xXDv4RtjwKLt2PZXXXsW143Swwv8iD8rJiqOQHW5oDbKG8xBWsISeQYFiI8k/Q8+9CUmyGYAbmvmRoVgIxM3XbJGCl67NQ11HnokLc1ZrScAEIVOXTkKgIm4IVEBceGj1S10oxEH2XxGYL2/Kp3NReUtQhCS8VWETle10FTruA8H6LYd5L6zeY12649GYsmbMEy+cvx7KF1+Ky2Yswa8psvpmay6Vpzt2vgEIm3xUx0Rc3BHFFku3fq1vp9GVjYe1tiJHpemjQZwIH0D/Qw+iQdRfP48iumfSB/lRUSItyxYynEbeDjDhANDaAW2b8OtUhcr547zsgsy9Og9nbuY9RzUZEjeGeyYw82WAEmTWuHOGefkY4DQGmk5PtATqWDHmuPAtzMQv1nlkolNOXADkgBCPwZftn8Ppc9D4XQ1C105YJicV5PgZ4wNw2WVtc6JQLsuwVL7N2KoOsVUKPvYrO0CpGBLEHyQmpEp9SRp+BxCj8qSOCqG95apLzoMex1isZRWVZunPd9/dDxlGycJlSFDVvoayhwFvCqDTcIE0KuKZoJg1rjPA9KtWNQ63r071DUGWmBObWVC4cOru4Gl06/hF0x9swrnAmKgqnpHsEhr8rcF7fbN61ezcqC4udst+tuzGr8gJGsOGXKeI+XIR9JY9lGOVVQqNb29Lh9MkX6NWYTg5WH5+KfpYaaz9+C2s/eRtrtqzGO3z+tPVtvLV1Dd7c/AaeefNJ/Nh9G263l+Em83L8W/UDziSZEIvH6QUlLOYd9pcFj0vBGP8p5sJ9DJN7EIq/gFM9V6JnYB00VzVDkCBigI9KtcjU3+lQsbnXQihmYuWFP0zPIizbRpLe7ydjHO1Jkshwrdz2lBNRllktYZ2Vr4vsVcdF1X6nXWE+zoQscjznnTp6CZIMe8LgDnZsSvcOQShRoVmnHPa8ihyDWDDxVpRotbhp5i8dRQ1BbDjVwETlfIrSdDAKHmjZhyplMoLoxZ3Tb3faFDpVJpw3uadbJ1egj4zZ65Gxq0ncEzAsb5YasE1rxJf5R7El2YBNoV34MLwTXyQO4PPEfjQMNGI3n52xQwj5ZRy3zuJjsrb88mLUXTAtFYIyIMKpLUIly4DsPgGdxf3SKRejNfAouvuex0D8AGszPzTmFeeIHONTLTSxpn+vW4FBL28Pn8Br165iuBcpYegWzU1BTK2IglyM40b+5PV/4WSvjLjhgamKaxcN4wv8I7xWwEkhlOCcsSuQMOPwygWIGAGc7j7g9A/ZkygoxYFFJMhoNQRfsPHQkveZvwuGXS8Oerl4f/AHGHHLJi6Evmk5wf1FMFOdiN7+AG69MMXisyHCvUUDnFdbBiMkfihJspQrxrZvz0EuLyjC9s7d2Nt/GI3BY2iMHsZX4UPYHtyHL4JfYVuYyo804NNgA7ZGP0V/SQQPXvMA7r7yLmfyjHM4CEZ60BfqRTTYgQr/yOSvsRaQlUI8ufwYity16I6eJGsk0XFuioA8Pt+EFPytM85CP4CuZBCbV6zD/LKLnPFy+qLCMikQMsY4y5i2cA96g32Ixf+OsMz5jSQ5RuLnDHlfIhRSyTLzyaDlEV4rIH4XFjZT7K/ifiegX2/h2AQ++XaV058UuiJR6gm3ooeVRDBOEsZqYBCSmFeQPgGH/A31+RUvgtE4DTyJmPNrGfvTr360bwPXMZBs7cGiiiuZFkbWvwJC/oO3g5dMKMLZrii6yJzfPNotokwu//p/wKrZVoWljoTOgworpAr5LUWezv8smAGbZExiSO0KncWB1vfREWmCzuI+SBJ2IFRFT6rBVVXzcTlrbWHgFv/EPfMgHE8Va3DquBXnfBLztSiD2Db02gjYgvUzz8ZEfpajnDUPfpefhsV9poWUC8LwRIht7TsETVMcI6vwTnFKGcsgwdRk7p+5j3WVLHugk1BqGRcl2TAoF5XzGSSnYk/ihw0vyz1xX8xT8EwiQpGU0rh8XEtnyNXS5VkuiGtUcduW0EWA1ykHBf8LzmFC6t1ekQQAAAAASUVORK5CYII="},438:function(e,t){e.exports="data:image/png;base64,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"},475:function(e,t,a){e.exports=a(1039)},480:function(e,t,a){},676:function(e,t){},678:function(e,t){},708:function(e,t){},709:function(e,t){},774:function(e,t){}},[[475,1,2]]]);
//# sourceMappingURL=main.0a942142.chunk.js.map