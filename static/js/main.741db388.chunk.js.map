{"version":3,"sources":["Helpers.js","HomeButton.js","AppBar.js","ToolbarButton.js","MarxanDialog.js","LoadingDialog.js","MarxanTextField.js","LoginDialog.js","RegisterDialog.js","ResendPasswordDialog.js","Notification.js","Welcome.js","ToolsMenu.js","UserMenu.js","HelpMenu.js","UserSettingsDialog.js","ProfileDialog.js","MarxanTable.js","UsersDialog.js","AboutDialog.js","MenuItemWithButton.js","TargetIcon.js","LinearGauge.js","FeaturesList.js","SelectFeatures.js","InfoPanel.js","TransparencyControl.js","Swatch.js","LayerLegend.js","MapLegend.js","LogItem.js","Log.js","ResultsPanel.js","FeatureInfoDialog.js","ProjectsDialog.js","Metadata.js","SelectFieldMapboxLayer.js","PlanningUnitsDialog.js","SelectCostFeatures.js","TableRow.js","FeaturesDialog.js","NewProjectDialog.js","NewProjectWizardDialog.js","ProjectsListDialog.js","MapContainer2.js","PlanningGridDialog.js","PlanningGridsDialog.js","NewPlanningGridDialog.js","FileUpload.js","ImportPlanningGridDialog.js","FeatureDialog.js","NewFeatureDialog.js","ImportFeaturesDialog.js","ImportFromWebDialog.js","CostsDialog.js","ImportCostsDialog.js","RunSettingsDialog.js","RendererSelector.js","ColorSelector.js","ClassificationDialog.js","MapContainer.js","ClumpingDialog.js","UploadFolder.js","UploadMarxanFiles.js","ImportProjectDialog.js","ImportMXWDialog.js","RunLogDialog.js","ServerDetailsDialog.js","AlertDialog.js","ChangePasswordDialog.js","IdentifyPopup.js","TargetDialog.js","ShareableLinkDialog.js","MetChart.js","CustomTooltip.js","GapAnalysisDialog.js","ResetDialog.js","UpdateWDPADialog.js","ImportGBIFDialog.js","App.js","registerServiceWorker.js","index.js","images/iucn.png","images/wcmc.png","images/mapbox_small.png","images/biopama_small.png","images/jrc_logo_color_small.png","constants.js"],"names":["isNumber","str","test","isValidTargetValue","value","getMaxNumberOfClasses","brew","colorCode","colorScheme","colorSchemes","Object","keys","filter","key","map","property","Number","reduce","a","b","Math","max","getArea","units","asHtml","scale","sf","addcommas","_value","toPrecision","toString","replace","_units","indexOf","substr","className","zoomToBounds","bounds","minLng","maxLng","fitBounds","padding","top","bottom","left","right","easing","num","HomeButton","tileset","this","getSource","_btn","document","createElement","title","type","onclick","zoom","bind","_container","appendChild","parentNode","removeChild","undefined","React","AppBar","props","state","adminMenuOpen","evt","openFeaturesDialog","Fragment","Toolbar","style","display","open","backgroundColor","height","onClick","openServerDetailsDialog","marxanServer","showUserMenu","user","icon","faBookOpen","openProjectsDialog","fontSize","faStar","faThLarge","openPlanningGridsDialog","width","infoPanelOpen","faArrowAltCircleLeft","toggleInfoPanel","resultsPanelOpen","faArrowAltCircleRight","toggleResultsPanel","faWrench","showToolsMenu","faQuestionCircle","showHelpMenu","Component","ToolbarButton","_style1","_style2","show","marginLeft","marginRight","minWidth","label","assign","overlayStyle","lineHeight","buttonStyle","MarxanDialog","searchText","window","helpLink","setState","target","searchTextChanged","searchTextChange","offsetX","rightX","offsetY","marginTop","cancelButton","showCancelButton","cancelLabel","primary","onCancel","disabled","cancelDisabled","okButton","hideOKButton","okLabel","onOk","okDisabled","contentStyle","contentWidth","onRequestClose","showOverlay","titleClassName","titleStyle","titleBarIcon","actions","children","position","showSearchBox","onChange","border","borderRadius","fontFamily","fontWeight","color","paddingLeft","clearSearch","faSearch","loading","showSpinner","openDocumentation","LoadingDialog","modal","MarxanTextField","inputStyle","floatingLabelFixed","LoginDialog","e","nativeEvent","selectServer","marxanServers","password","offline","corsEnabled","guestUserEnabled","id","floatingLabelText","underlineShow","menuItemStyle","labelStyle","name","item","text","primaryText","innerDivStyle","leftIcon","faUnlink","faLock","host","description","event","changeUserName","onKeyPress","handleKeyPress","changePassword","marxanClientReleaseVersion","RegisterDialog","validForm","email","validEmail","validateEmail","err","message","valid","String","toLowerCase","Error","c","newValue","errorText","createNewUser","ResendPasswordDialog","resendPassword","resending","changeEmail","Notification","faExclamationTriangle","paddingRight","faCloudDownloadAlt","faChalkboardTeacher","faNewspaper","dangerouslySetInnerHTML","__html","html","removeNotification","Welcome","checked","isInputChecked","saveOptions","SHOWWELCOMESCREEN","openNewProjectDialog","notifications","visible","notificationsPanel","autoDetectWindowHeight","bodyStyle","faDraftingCompass","verticalAlign","faSync","resetNotifications","onCheck","toggleShowWelcomeScreen","ToolsMenu","openUsersDialog","hideToolsMenu","openRunLogDialog","openGapAnalysisDialog","openResetDialog","anchorEl","menuAnchor","desktop","onMouseLeave","listStyle","selectedMenuItemStyle","userRole","faUsers","faRunning","enable_reset","faHistory","faChartBar","metadata","pu_country","faBroom","cleanup","UserMenu","anchorOrigin","horizontal","vertical","targetOrigin","hideUserMenu","openUserSettingsDialog","marginBottom","faCog","openProfileDialog","faEdit","openChangePasswordDialog","faUserLock","logout","white","HelpMenu","CONSTANTS","DOCS_ROOT","hideHelpMenu","openAboutDialog","faInfoCircle","UserSettingsDialog","saveEnabled","options","payload","basemap","basemaps","changeBasemap","setOption","updateOptions","alias","paddingBottom","RadioButton","defaultSelected","userData","REPORTUNITS","setReportUnit","iconStyle","ProfileDialog","updated","updateUser","EMAIL","closeProfileDialog","updateState","defaultValue","NAME","floatingLabelShrinkStyle","floatingLabelFocusStyle","ROLE","MarxanTable","filteredData","data","startsWith","some","searchColumns","includes","substring","hasOwnProperty","dataFiltered","filterData","pageSize","length","showPagination","minRows","columns","USER_ROLES","UsersDialog","selectedUser","oldRole","newRole","changeRole","deleteUser","desc","Date","slice","users","closeDialog","changeUser","Header","accessor","headerStyle","textAlign","Cell","row","original","menuStyle","underlineStyle","sortMethod","sortDate","getTrProps","rowInfo","column","background","textContent","faTrashAlt","_delete","toggleEnableGuestUser","AboutDialog","href","wdpaAttribution","rel","src","iucn","alt","wcmc","biopama_small","jrc_logo_color_small","mapbox_small","MenuItemWithButton","TargetIcon","editing","localTargetValue","startEditing","target_value","getElementById","interestFeature","focus","select","updateTargetValue","targetStatus","fontColor","blue300","size","userSelect","alignItems","justifyContent","onBlur","stopEditing","LinearGauge","alwaysShowPercent","showUnprotectedPercent","targetAsLine","protectedWidth","protectedHidden","scaleFactor","scaledWidth","targetPxOffset","round","protected_percent","protNum","percentageProtectedText","targetShortfallWidth","unprotectedWidth","opacity","smallLinearGauge","useFeatureColors","fontStyle","FeaturesList","feature","openFeatureMenu","targetIcon","updateFeature","altKey","feature_puid_layer_loaded","toggleFeaturePUIDLayer","feature_layer_loaded","toggleFeatureLayer","List","maxHeight","maxheight","overflow","features","pu_area","protected_area","target_area","leftAvatar","simple","secondaryText","itemClick","rightIconButton","touch","tooltipPosition","iconClick","grey400","SelectFeatures","openTargetDialog","showTargetButton","faCrosshairs","leftmargin","OLDVERSION","InfoPanel","editingProjectName","editingDescription","showPlanningGrid","showProtectedAreas","showCosts","showStatuses","prevProps","prevState","snapshot","project","DESCRIPTION","keyCode","blur","renameProject","then","renameDescription","puEditing","stopPuEditSession","startPuEditSession","changeIucnCategory","IUCN_CATEGORIES","costname","costnames","openCostsDialog","changeCostname","_","loadCostsLayer","checkedString","toggleProjectPrivacy","stopProcess","pid","togglePULayer","togglePALayer","toggleCostsLayer","toggleStatuses","push","zDepth","startEditingProjectName","Tabs","contentContainerStyle","margin","activeTab","onActive","project_tab_active","startEditingDescription","CREATEDATE","owner","PRIVATE","features_tab_active","pu_tab_active","pu_alias","faSave","startStopPuEditSession","cursor","faEraser","clearManualEdits","preprocessing","IUCN_CATEGORY","faShareAlt","getShareableLink","showRunSettingsDialog","secondary","runMarxan","TransparencyControl","showSlider","old_opacity","changeOpacity","onMouseEnter","mouseEnter","mouseLeave","faEyeSlash","faEye","toggleLayer","sliderStyle","Swatch","lineWidth","fillColor","shape","fill","stroke","strokeColor","strokeWidth","LayerLegend","layer","subLayers","paint","forEach","items","index","separator","range","renderItems","setSymbologyBtn","setSymbology","topMargin","MapLegend","breaks","numClasses","getNumClasses","colorSchemeLength","numClassesArray","Array","apply","call","classesToShow","suffix","legendLabel","layers","planning_grid_shape","PLANNING_UNIT_NAME","costLayers","visibleLayers","COSTS_LAYER_NAME","nonFeatureLegendItems","LAYER_TYPE_FEATURE_LAYER","LAYER_TYPE_SUMMED_SOLUTIONS","getSummedSolution","openClassificationDialog","LAYER_TYPE_PLANNING_UNITS_COST","minColor","maxColor","min","costsLoading","LAYER_TYPE_PLANNING_UNITS_STATUS","puLayer","PU_LAYER_NAME","puStatusLayer","STATUS_LAYER_NAME","PU_STATUS_DEFAULT","PU_STATUS_LOCKED_IN","PU_STATUS_LOCKED_OUT","LAYER_TYPE_PROTECTED_AREAS","featureLayers","sort","featureLegendItems","featurePUIDLayers","LAYER_TYPE_FEATURE_PLANNING_UNIT_LAYER","featurePUIDLegendItems","lineColor","Log","status","info","faCheckCircle","timestamp","toLocaleString","messages","error","LogItem","runtime","ResultsPanel","showClipboard","selectedSolution","runtimeStr","objDiv","scrollTop","scrollHeight","solutions","resetSolution","startTimer","stopTimer","string","pad","join","timer","setInterval","minutes","floor","seconds","finalTime","str_pad_left","clearInterval","solution","loadSolution","relatedTarget","node","body","createTextRange","moveToElementText","getSelection","selection","createRange","selectNodeContents","removeAllRanges","addRange","console","warn","selectText","execCommand","changeSolution","Run_Number","activeResultsTab","setActiveTab","processing","thisRef","instance","noDataText","copyLog","clearLog","FeatureInfoDialog","updateFeatureValue","reportUnits","getHTML","hint","currentTarget","innerHTML","obj","alert","getAreaHTML","contentEditable","suppressContentEditableWarning","source","FEATURE_PROPERTIES_POLYGONS","FEATURE_PROPERTIES_POINTS","old_version","showForNew","showForOld","renderKeyCell","renderValueCell","ProjectsDialog","selectedProject","deleteProject","oldVersion","getAllFeatures","loadAndClose","loadProject","importProjectAnchor","showImportProjectPopover","cloneProject","exportProject","url","location","openImportProjectDialog","openImportMXWDialog","createdate","tableColumns","renderName","renderTitle","renderDate","projects","load","changeProject","unauthorisedMethods","faPlusCircle","_new","importProjectPopoverOpen","hideImportProjectPopover","Metadata","validName","RegExp","setSnackBar","setName","setDescription","changeName","changeDescription","multiLine","rows","SelectFieldMapboxLayer","envelope","getLatLngLikeFromWKT","addLayerToMap","feature_class_name","changeItem","wkt","returnVal","parse","require","coordinates","west","east","mapboxlayername","request","mapboxUser","registry","MBAT_PUBLIC","parseUrlExists","res","statusCode","log","getStyle","removeLayer","removeSource","addSource","addLayer","selectedValue","PlanningUnitsDialog","planning_unit_grids_received","mapboxgl","Map","container","mapContainer","center","ref","el","pu","planning_unit_grids","SelectCostFeatures","selectedFeature","ListItem","defaultProps","disableTouchRipple","disableFocusRipple","iconButtonElement","rightIconMenu","selectedCosts","TableRow","subcontent","htmlContent","FeaturesDialog","previousRow","filteredRows","deleteFeature","newFeatureAnchor","showNewFeaturePopover","importFeatureAnchor","showImportFeaturePopover","openImportFeaturesDialog","openImportFromWebDialog","initialiseDigitising","openImportGBIFDialog","addingRemovingFeatures","shiftKey","selectedIds","getFeaturesBetweenRows","selectFeatures","clickFeature","first","last","splice","thisRow","idx1","idx2","allFeatures","toggleSelectionState","selectedFeatureIds","selectAllFeatures","unselectFeature","feature_metadata","previewFeature","creation_date","created_by","preview","renderSource","renderCreatedBy","renderPreview","getTdProps","newFeaturePopoverOpen","hideNewFeaturePopover","_newByDigitising","importFeaturePopoverOpen","hideImportFeaturePopover","_openImportFeaturesDialog","_openImportFromWebDialog","faCircle","clearAllFeatures","NewProjectDialog","handleNext","stepIndex","handlePrev","steps","loadingFeatures","finished","featuresDialogOpen","JSON","stringify","gotoStart","selected","closeFeaturesDialog","removeFeature","addFeature","ids","arr","Promise","resolve","reject","createNewProject","planning_grid_name","maxWidth","getPlanningUnitGrids","changePU","openImportPlanningGridDialog","updateSelectedFeatures","NewProjectWizardDialog","domainEnabled","stepComplete","iso3","country","domain","areakm2","worldEcosystems","allSpecies","endemicSpecies","endangeredSpecies","includeExistingPAs","iucn_category","complete","countries","has_marine","changeDomain","name_iso31","getComplete","DOMAINS","SHAPES","AREAKM2S","createNewNationalProject","dropDownStyle","changeCountry","changeShape","changeAreaKm2","toggleWorldEcosystems","toggleAllSpecies","toggleEndemicSpecies","toggleEndangeredSpecies","toggleIncludeExistingPAs","closeNewProjectWizardDialog","ProjectsListDialog","heading","MapContainer2","attributionControl","on","outlineColor","planning_grid_metadata","tilesetid","getTilesetMetadata","catch","remove","PlanningGridDialog","expanded","getProjectList","areaTD","_area","colSpan","planning_unit_count","aoi_id","paddingTop","expand","PlanningGridsDialog","selectedPlanningGrid","deletePlanningGrid","openNewPlanningGridDialog","exportPlanningGrid","planningGrid","previewPlanningGrid","isNaN","planningGrids","changePlanningGrid","openImportDialog","NewPlanningGridDialog","createNewPlanningUnitGrid","response","changeIso3","FileUpload","active","destFolder","files","filename","fileUpload","setFilename","parameter","htmlFor","accept","fileMatch","ImportPlanningGridDialog","zipFilename","_description","ex","mandatory","setzipFilename","FeatureDialog","amount","area","unit","NewFeatureDialog","createNewFeature","setAddToProject","addToProject","INITIAL_STATE","fieldnames","splitField","ImportFeaturesDialog","unzipShapefile","shapefile","rootfilename","importFeatures","getShapefileFieldnames","deleteShapefile","_disabled","resetFieldnames","changeSplitField","sourceType","endpoint","srs","featureTypes","featureType","validendpoint","SOURCE_TYPES","ImportFromWebDialog","fetch","xml","getCapabilities","xmlDoc","DOMParser","parseFromString","getWFSInfo","featureTypesElements","getElementsByTagName","getFeatureEndpoint","changeSourceType","changeEndpoint","autoWidth","changeFeatureType","CostsDialog","selectedCost","cost","deleteCost","_data","closeCostsDialog","changeCost","openImportCostsDialog","UNIFORM_COST_NAME","costs_filename","ImportCostsDialog","addCost","resetState","closeImportCostsDialog","deleteCostFileThenClose","setCostsFilename","RunSettingsDialog","updateEnabled","renderEditable","runParams","openParametersDialog","updateRunParams","cellInfo","float","onFocus","setUpdateEnabled","showClumpingDialog","RendererSelector","changeValue","values","toUpperCase","concat","selectionRenderer","handleChange","ColorSelector","getSwatch","disableHighlight","divWidth","colorDivs","borderColor","_c","RENDERERS","COLORCODES","NUMCLASSES","TOPCLASSES","ClassificationDialog","dataBreaks","x","summaryStats","strokeDasharray","dataKey","tick","offset","angle","changeColorCode","renderer","COLORCODE","changeRenderer","CLASSIFICATION","changeNumClasses","changeShowTopClasses","MapContainer","resultsRendered","mapCentre","mapZoom","interactive","RESULTS_LAYER_NAME","layout","visibility","setCenter","setMapZoom","renderResults","paintProperty","setLayoutProperty","getLayer","setPaintProperty","oulineColor","setZoom","selectBlm","blmValue","ClumpingDialog","blmValues","blmMin","blmMax","blmChanged","createProjectGroupAndRun","getBlmValues","increment","i","parseFloat","isFinite","setBlmValue","rerunProjects","clumpingRunning","map0_paintProperty","parseBlmValue","map1_paintProperty","map2_paintProperty","map3_paintProperty","map4_paintProperty","changeBlmMin","changeBlmMax","UploadFolder","folderUploadText","filesListed","directory","webkitdirectory","_addDirectory","UploadMarxanFiles","setZipFilename","setPlanningGridName","ImportProjectDialog","importProject","ImportMXWDialog","importMXWProject","uniqueName","RunLogDialog","selectedRun","runningJobs","runLogs","runningLogs","stopMarxan","refreshRunLogs","clearRunLogs","getRunLogs","run","faTimesCircle","endtime","s","mins","secs","runTimeFormatted","renderUser","renderProject","renderEnded","renderRuntime","renderStatus","changeSelectedRun","stopRun","faRedoAlt","ServerDetailsDialog","newServerSoftware","server_version","SERVER_VERSION","newWDPAVersion","showUpdateWDPADialog","system","processor_count","disk_space","ram","wdpa_version","planning_grid_units_limit","shutdowntime","renderWithIcon","AlertDialog","ChangePasswordDialog","currentPassword","newPassword1","newPassword2","checkPassword","PASSWORD","passwordsDontMatch","setCurrentPassword","setNewPassword1","setNewPassword2","TAB_STYLE","textTransform","IdentifyPopup","xy","restartTimer","properties","desig","iucn_cat","wdpaid","clearTimeout","hideIdentifyPopup","cancelTimer","ms","setTimeout","timerCancelled","mouseLeavePopup","y","identifyPlanningUnits","puData","puTab","renderAmount","featuresTab","identifyFeatures","renderFeatureName","renderFeatureDescription","protectedAreasTab","identifyProtectedAreas","renderPAName","renderPADesignation","renderPAIUCNCategory","renderPALink","tabs","onlyPA","tabItemContainerStyle","changeTab","TargetDialog","validTarget","validateTarget","_validTarget","updateTargetValueForFeatures","ShareableLinkDialog","navigator","clipboard","writeText","shareableLinkUrl","faClipboard","copyToClipboard","MetChart","rounded","current_protected_percent","toFixed","country_area","current_protected_area","titleText","total_area","showCountryArea","colors","cx","cy","isAnimationActive","startAngle","endAngle","innerRadius","outerRadius","entry","_color","clickable","CustomTooltip","_alias","GapAnalysisDialog","showChart","amount_under_protection_property","total_amount_property","sum","val","mean","gapAnalysis","stats","projectFeatures","item2","_feature_class_name","targetsMetCount","charts","score","getRepresentationScore","closeGapAnalysisDialog","textAnchor","dx","content","onToggle","toggleView","toggled","ResetDialog","UpdateWDPADialog","WDPA","latest_version","metadataUrl","updateWDPA","ImportGBIFDialog","gbifID","suggestions","clicked","importGBIFData","selectedItem","gbifSpeciesSuggest","scientificName","changeSearchText","MARXAN_CLIENT_VERSION","packageJson","version","timers","App","usersDialogOpen","alertDialogOpen","featureMenuOpen","profileDialogOpen","aboutDialogOpen","helpDialogOpen","importProjectDialogOpen","UserSettingsDialogOpen","welcomeDialogOpen","registerDialogOpen","clumpingDialogOpen","settingsDialogOpen","projectsDialogOpen","openInfoDialogOpen","importGBIFDialogOpen","newProjectDialogOpen","newProjectWizardDialogOpen","shareableLinkDialogOpen","classificationDialogOpen","resendPasswordDialogOpen","NewPlanningGridDialogOpen","importPlanningGridDialogOpen","ProjectsListDialogOpen","changePasswordDialogOpen","importFeaturesDialogOpen","importFromWebDialogOpen","serverDetailsDialogOpen","planningGridsDialogOpen","planningGridDialogOpen","updateWDPADialogOpen","NewFeatureDialogOpen","importMXWDialogOpen","gapAnalysisDialogOpen","featureDialogOpen","runLogDialogOpen","resetDialogOpen","costsDialogOpen","importCostsDialogOpen","targetDialogOpen","notificationsOpen","toolsMenuOpen","userMenuOpen","helpMenuOpen","projectList","loggedIn","shareableLink","popup_point","snackbarOpen","snackbarMessage","tilesets","uploading","identifyVisible","pa_layer_visible","currentFeature","featureDatasetFilename","planning_units","logMessages","projectListDialogTitle","projectListDialogHeading","lng","lat","protected_area_intersections","searchParams","URLSearchParams","search","has","getGlobalVariables","openShareableLink","_selectServer","get","classyBrew","MARXAN_REGISTRY","json","registryData","accessToken","MAPBOX_BASEMAPS","initialiseServers","MARXAN_SERVERS","serverData","find","server","switchToGuestUser","validateUser","params","timeout","TIMEOUT","jsonp","promise","checkForErrors","ERRORS_PAGE","method","formData","withCredentials","SEND_CREDENTIALS","post","msgCallback","ws","WebSocket","websocketEndpoint","onmessage","onopen","onerror","onclose","wasClean","showSnackbar","networkError","responseIsTimeoutOrEmpty","serverError","isServerError","isError","trace","msg","warning","logMessage","removeMessageFromLog","newFeatureCreated","resetPID","_messages","_message","silent","hosts","hostname","protocol","port","getAllServerCapabilities","getServerCapabilities","promises","all","TORNADO_PATH","controller","AbortController","signal","timeoutId","abort","credentials","ok","statusText","PERMITTED_DOMAINS","ENABLE_GUEST_USER","machine","MACHINE","client_version","MARXAN_SERVER_VERSION","NODE","processor","PROCESSOR","PROCESSOR_COUNT","RAM","release","RELEASE","SYSTEM","VERSION","WDPA_VERSION","PLANNING_GRID_UNITS_LIMIT","DISK_FREE_SPACE","SHUTDOWNTIME","ENABLE_RESET","SERVER_NAME","SERVER_DESCRIPTION","servername","history","replaceState","wdpa_vector_tile_layer","setWDPAVectorTilesLayerName","normalisedData","puids","_get","login","LASTPROJECT","dismissedNotifications","BASEMAP","setBasemap","resetResults","resendEmail","closeResendPasswordDialog","usersCopy","deleteProjectsForUser","role","_marxanServer","enabled","updateProjectParameter","NOTIFICATIONS","addNotifications","showForRoles","CLIENT_VERSION","_notifications","allowedForRole","notDismissed","notExpired","expires","d","notification","_notification","dismissNotification","parseNotifications","append","parameters","removeKeys","FormData","appendToFormData","_post","newUserData","updateProjectParams","array","runParameters","MAPBOX_USER","getResults","feature_preprocessing","previousIucnCategory","initialiseInterestFeatures","getPlanningUnitsCostData","tmpArr","outFeatures","projectFeature","getArrayItem","addFeatureAttributes","getSelectedFeatureIds","resetRun","cost_data","hideFeatureLayer","runMarxanResponse","closeRegisterDialog","interest_features","target_values","spf_values","getProjects","_ws","wsMessageCallback","newName","newDesc","private","startLogging","resetProtectedAreas","updateSpecFile","updatePuFile","updatePuvsprFile","startMarxanJob","runFinished","marxanStopped","spf","preprocessAllFeatures","closeFeatureMenu","preprocessFeature","preprocessed","pu_count","occurs_in_planning_grid","runCompleted","ssoln","renderSolution","summary","Score","Cost","Planning_Units","Missing_Values","updateProtectedAmount","mvbest","mvData","mvbestItemIndex","findIndex","mvItem","setFeaturesState","uploadId","createImportProject","importZippedShapefileAsPu","uploadFiles","upgradeProject","formattedDate","getDate","getMonth","getFullYear","getHours","getMinutes","getSeconds","OUTPUTDIR","pollMapbox","file","filepath","webkitRelativePath","split","refreshFeatures","getSolution","mv","paintProperties","getPaintProperties","projectName","clump","total","number","count","sampleSize","sample","ssolnLength","getssolncount","ceil","arrays","classification","getssolnSample","setSeries","brewCopy","newBrewColorScheme","setColorCode","setNumClasses","classify","getBreaks","rendererStateUpdated","setRenderer","fill_color_expression","initialiseFillColorExpression","fill_outline_color_expression","visibleValue","classifyData","getColorInRange","attribute","expression","STATUS_LAYER_LINE_WIDTH","COST_COLORS","setLayerMetadata","showLayer","pt","queryRenderedFeatures","mapLoaded","mapError","mapClick","mapStyleChanged","addControl","ScaleControl","NavigationControl","mapboxDrawControls","MapboxDraw","displayControlsDefault","controls","polygon","trash","defaultMode","updateMapCentreAndZoom","polygonDrawn","getCenter","getZoom","sourceId","featureLayerIds","getLayers","LAYER_TYPE_PLANNING_UNITS","clickedFeatures","getRenderedFeatures","point","planningUnitFeatures","getFeaturesByLayerStartsWith","puid","getPUData","sourceLayers","sourceLayer","from","Set","updateLegend","joinArrays","pu_data","arr1","arr2","leftId","rightId","outputArr","matchingItem","arr2item","styleUrl","TileJSON","sources","esri","tilesurl","tiles","scheme","tilejson","format","tileInfo","maxzoom","getValidStyle","loadMapStyle","addWDPASource","addWDPALayer","addPlanningGridLayers","provider","getESRIStyle","styleJson","openmaptiles","MAPBOX_STYLE_PREFIX","setStyle","diff","createMap","getMetadata","removePlanningGridLayers","tilesetId","response2","PLANNING_UNIT_SOURCE_NAME","addMapLayer","RESULTS_LAYER_OPACITY","PU_COSTS_LAYER_OPACITY","resultsLayer","PU_LAYER_OPACITY","removeMapLayer","attribution","tilesUrl","WDPA_SOURCE_NAME","WDPA_LAYER_NAME","stops","WDPA_FILL_LAYER_OPACITY","wdpaLayer","mapLayer","beforeLayer","symbollayers","layerid","layername","getLayoutProperty","layerId","layerTypes","hideLayer","pu_tab_inactive","showHideLayerTypes","renderPuEditLayer","getCanvas","onClickRef","moveStatusUp","onContextMenu","resetStatus","off","updatePuDatFile","getPuidsFromIucnCategory","updatePlanningUnits","param_name","changeStatus","direction","getStatusLevel","next_status","getNextStatusLevel","statuses","removePuidFromArray","addPuidToArray","status_level","PLANNING_UNIT_STATUSES","getPlanningUnitsByStatus","getStatusPosition","nextStatus","removePuidsFromArray","appPuidsToPlanningUnits","new_array","openPlanningGridDialog","newPlanningGridCreated","closeNewPlanningGridDialog","closeImportPlanningGridDialog","deletePlanningUnitGrid","getProjectsForPlanningGrid","showProjectListDialog","records","mapbox_layer_name","uploadid","MBAT","clearMapboxTimer","_timer","showClearSelectAll","finaliseDigitising","zipname","newProps","element","callback","removeControl","openNewFeatureDialog","digitisedFeatures","deleteGapAnalysis","newFeatures","openFeatureDialog","zipfile","spiltfield","uploadIds","promiseArray","q","coords","geometry","coordinate","closeNewFeatureDialog","initialiseNewFeature","addNewFeature","featuresCopy","getProjectsForFeature","_deleteFeature","removeFeatureFromAllFeatures","getFeatures","_features","existingIds","getFeatureIds","newIds","addedIds","layerName","typeProperty","FEATURE_LAYER_OPACITY","FEATURE_PLANNING_GRID_LAYER_OPACITY","line_color_expression","unselectItem","nums","extent","_type","preventDefault","getCountries","getUsers","startPollingRunLogs","stopPollingRunLogs","runGapAnalysis","openProjectsListDialog","iucnCategory","_metadata","renderPAGridIntersections","iucnCategories","getIndividualIucnCategories","filterExpr","setFilter","hidePALegend","showPALegend","retValue","intersections_by_category","getIntersections","getPuidsFromNormalisedData","preprocessProtectedAreas","intersections","clashingPuids","previousPuids","newPuids","getNewPuids","oldPuids","_iucn_categories","downloadUrl","closeWDPAUpdateDialog","BOUNDNAME","currentFiles","preprocessBoundaryLengths","deleteProjects","resetPaintProperties","runProjects","projectNames","projectsRun","loadOtherSolution","newRunParams","runlogTimer","openShareableLinkDialog","isChecked","COSTS","forceReload","renderPuCostLayer","_costnames","closeResetDialog","openRegisterDialog","openResendPasswordDialog","closeWelcomeDialog","openNewProjectWizardDialog","closeUserSettingsDialog","closeUsersDialog","closeAboutDialog","USEFEATURECOLORS","hideResults","closeInfoDialog","closeProjectsDialog","closeImportMXWDialog","closeNewProjectDialog","importPlanningUnitGrid","uploadFileToFolder","closeFeatureDialog","closeImportFeaturesDialog","setNewFeatureDatasetFilename","closeImportFromWebDialog","importFeaturesFromWeb","closeImportGBIFDialog","closePlanningGridsDialog","closePlanningGridDialog","closeProjectsListDialog","uploadFileToProject","closeRunSettingsDialog","closeClassificationDialog","hideClumpingDialog","closeImportDialog","resetServer","closeRunLogDialog","closeServerDetailsDialog","openWDPAUpdateDialog","closeChangePasswordDialog","closeAlertDialog","closeSnackbar","openInfoDialog","removeFromProject","zoomToFeature","preprocessSingleFeature","closeTargetDialog","closeShareableLinkDialog","isLocalhost","Boolean","match","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","ReactDOM","render","URL","process","origin","addEventListener","headers","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker","module","exports","FEATURE_PROPERTIES_CORE","freeze"],"mappings":"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","file":"static/js/main.741db388.chunk.js","sourcesContent":["/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\n// returns a boolean if it is a valid number\nexport function isNumber(str) {\n  var pattern = /^\\d+$/;\n  return pattern.test(str);\n}\nexport function isValidTargetValue(value) {\n  if (isNumber(value)) {\n    if (value <= 100 && value >= 0) {\n      return true;\n    }\n  }\n  return false;\n}\nexport function getMaxNumberOfClasses(brew, colorCode) {\n  //get the color scheme\n  let colorScheme = brew.colorSchemes[colorCode];\n  //get the names of the properties for the colorScheme\n  let properties = Object.keys(colorScheme).filter(function (key) {\n    return key !== \"properties\";\n  });\n  //get them as numbers\n  let numbers = properties.map((property) => {\n    return Number(property);\n  });\n  //get the maximum number of colors in this scheme\n  let colorSchemeLength = numbers.reduce(function (a, b) {\n    return Math.max(a, b);\n  });\n  return colorSchemeLength;\n}\nexport function getArea(value, units, asHtml, sf = 3, addcommas = true) {\n  let scale;\n  switch (units) {\n    case \"m2\":\n      scale = 1;\n      break;\n    case \"Ha\":\n      scale = 0.0001;\n      break;\n    case \"Km2\":\n      scale = 0.000001;\n      break;\n    default:\n    // code\n  }\n  let _value = Number((value * scale).toPrecision(sf));\n  _value =\n    addcommas && _value > 1000\n      ? _value.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")\n      : _value.toString();\n  let _units =\n    units.indexOf(\"2\") !== -1 ? (\n      <span>\n        {units.substr(0, units.indexOf(\"2\"))}\n        <span className=\"superscript\">2</span>\n      </span>\n    ) : (\n      <span>{units}</span>\n    );\n  if (asHtml) {\n    return (\n      <span>\n        {_value} {_units}\n      </span>\n    );\n  } else {\n    return _value + \" \" + units;\n  }\n}\n//zooms the passed map to the passed bounds\nexport function zoomToBounds(map, bounds) {\n  //if the bounds span the dateline, then we can force the map to fit the bounds of a polygon from [[179,minLat],[180,maxLat]]\n  let minLng = bounds[0] === -180 ? 179 : bounds[0];\n  let maxLng = bounds[2];\n  if (bounds[0] < 0 && bounds[2] > 0) {\n    //if the bounds are from -1xx to 1xx then see if the range is bigger from -1xx to 1xx or from 1xx to -1xx\n    let lngSpanAcrossMeridian = bounds[2] - bounds[0];\n    let lngSpanAcrossDateline = bounds[0] + 180 + (180 - bounds[2]);\n    //if the lng range is smaller across the dateline, then set the minLng and maxLng\n    if (lngSpanAcrossMeridian > lngSpanAcrossDateline) {\n      minLng = bounds[2];\n      maxLng = bounds[0] + 360;\n    }\n  }\n  map.fitBounds([minLng, bounds[1], maxLng, bounds[3]], {\n    padding: { top: 10, bottom: 10, left: 10, right: 10 },\n    easing: (num) => {\n      return 1;\n    },\n  });\n}\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from \"react\";\nimport { zoomToBounds } from \"./Helpers.js\";\n\nclass HomeButton extends React.Component {\n  zoom() {\n    let tileset = this.map.getSource(\"marxan_planning_units_source\");\n    if (tileset && tileset.bounds) zoomToBounds(this.map, tileset.bounds);\n  }\n  onAdd(map) {\n    this.map = map;\n    this._btn = document.createElement(\"button\");\n    this._btn.className = \"mapboxgl-ctrl-icon homeIcon\";\n    this._btn.title = \"Zoom to the extent of the project\";\n    this._btn.type = \"button\";\n    this._btn[\"aria-label\"] = \"Toggle Pitch\";\n    this._btn.onclick = this.zoom.bind(this);\n    this._container = document.createElement(\"div\");\n    this._container.className = \"mapboxgl-ctrl mapboxgl-ctrl-group\";\n    this._container.appendChild(this._btn);\n    return this._container;\n  }\n  onRemove(map) {\n    this._container.parentNode.removeChild(this._container);\n    this.map = undefined;\n  }\n  getDefaultPosition() {\n    return \"bottom-right\";\n  }\n}\n\nexport default HomeButton;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faBookOpen } from \"@fortawesome/free-solid-svg-icons\";\nimport { faStar } from \"@fortawesome/free-solid-svg-icons\";\nimport { faWrench } from \"@fortawesome/free-solid-svg-icons\";\nimport { faThLarge } from \"@fortawesome/free-solid-svg-icons\";\nimport { faArrowAltCircleLeft } from \"@fortawesome/free-solid-svg-icons\";\nimport { faArrowAltCircleRight } from \"@fortawesome/free-solid-svg-icons\";\nimport { faArrowAltCircleLeft as a } from \"@fortawesome/free-regular-svg-icons\";\nimport { faArrowAltCircleRight as b } from \"@fortawesome/free-regular-svg-icons\";\nimport { faQuestionCircle } from \"@fortawesome/free-solid-svg-icons\";\nimport { Toolbar, ToolbarGroup } from \"material-ui/Toolbar\";\n\nclass AppBar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { adminMenuOpen: false };\n  }\n  //opens the features dialog without the ability to add/remove features (i.e. different from the dialog that is opened from a project)\n  openFeaturesDialog(evt) {\n    this.props.openFeaturesDialog(false);\n  }\n  render() {\n    return (\n      <React.Fragment>\n        <Toolbar\n          style={{\n            display: this.props.open ? \"block\" : \"none\",\n            backgroundColor: \"rgb(0, 188, 212)\",\n            height: \"62px\",\n            padding: \"2px 10px 0px 10px\",\n          }}\n          className={\"appBar\"}\n        >\n          <div>\n            <div\n              className={\"marxanServer\"}\n              title={\"Click to open the Server Details window\"}\n              onClick={this.props.openServerDetailsDialog}\n            >\n              {this.props.marxanServer}\n            </div>\n            <div\n              className={\"username\"}\n              title={\"Click to open the User menu\"}\n              onClick={this.props.showUserMenu}\n            >\n              {this.props.user}\n            </div>\n          </div>\n          <ToolbarGroup>\n            <FontAwesomeIcon\n              icon={faBookOpen}\n              onClick={this.props.openProjectsDialog}\n              title=\"Projects\"\n              className={\"appBarIcon\"}\n              style={{ fontSize: \"20px\" }}\n            />\n            <FontAwesomeIcon\n              icon={faStar}\n              onClick={this.openFeaturesDialog.bind(this)}\n              title=\"Features\"\n              className={\"appBarIcon\"}\n              style={{ fontSize: \"20px\" }}\n            />\n            <FontAwesomeIcon\n              icon={faThLarge}\n              onClick={this.props.openPlanningGridsDialog.bind(this)}\n              title=\"Planning grids\"\n              className={\"appBarIcon\"}\n              style={{ fontSize: \"20px\" }}\n            />\n            <span style={{ width: \"16px\" }} />\n            <FontAwesomeIcon\n              style={{ fontSize: \"20px\" }}\n              icon={this.props.infoPanelOpen ? faArrowAltCircleLeft : a}\n              onClick={this.props.toggleInfoPanel}\n              title={\n                this.props.infoPanelOpen\n                  ? \"Hide the project window\"\n                  : \"Show the project window\"\n              }\n              className={\"appBarIcon\"}\n            />\n            <FontAwesomeIcon\n              style={{ fontSize: \"20px\" }}\n              icon={this.props.resultsPanelOpen ? faArrowAltCircleRight : b}\n              onClick={this.props.toggleResultsPanel}\n              title={\n                this.props.resultsPanelOpen\n                  ? \"Hide the results window\"\n                  : \"Show the results window\"\n              }\n              className={\"appBarIcon\"}\n            />\n            <span style={{ width: \"16px\" }} />\n            <FontAwesomeIcon\n              icon={faWrench}\n              onClick={this.props.showToolsMenu}\n              title={\"Tools and analysis\"}\n              className={\"appBarIcon\"}\n              style={{ fontSize: \"19px\" }}\n            />\n            <FontAwesomeIcon\n              icon={faQuestionCircle}\n              onClick={this.props.showHelpMenu}\n              title={\"Help and support\"}\n              className={\"appBarIcon\"}\n              style={{ fontSize: \"19px\" }}\n            />\n          </ToolbarGroup>\n        </Toolbar>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default AppBar;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport RaisedButton from \"material-ui/RaisedButton\";\n\nclass ToolbarButton extends React.Component {\n  render() {\n    //merge any user passed style\n    let _style1 = this.props.style ? this.props.style : {};\n    let _style2 = {\n      display: this.props.show !== false ? \"inline-block\" : \"none\",\n      marginLeft: \"4px\",\n      marginRight: \"4px\",\n      padding: \"0px\",\n      minWidth: \"30px\",\n      width: this.props.label ? \"\" : \"24px\",\n      height: \"24px\",\n    };\n    Object.assign(_style1, _style2);\n    return (\n      <RaisedButton\n        {...this.props}\n        style={_style1}\n        overlayStyle={{ lineHeight: \"24px\", height: \"24px\" }}\n        buttonStyle={{ lineHeight: \"24px\", height: \"24px\" }}\n      />\n    );\n  }\n}\n\nexport default ToolbarButton;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport Dialog from \"material-ui/Dialog\";\nimport ToolbarButton from \"./ToolbarButton\";\nimport Sync from \"material-ui/svg-icons/notification/sync\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faQuestionCircle } from \"@fortawesome/free-regular-svg-icons\";\nimport { faSearch } from \"@fortawesome/free-solid-svg-icons\";\n\n//properties can be:\n//contentWidth - the width of the content area\n//offsetX - the distance from the left edge (mutually exclusive with rightX)\n//rightX - the distance from the right edge (mutually exclusive with offsetX)\n//offsetY - the distance from the top\n//onOk - fired when the OK button is clicked\n//onCancel - fired when the Cancel button is clicked or when the dialog needs to be closed\n//showCancelButton - set to true to show the cancel button\n//actions - an array of components to add to the actions array in the dialog\n//helpLink - a relative url to the bookmark in the user documentation that describes the particular dialog box\n//showSearchBox - true to show a search box\n\nlet DOCS_ROOT = \"https://docs.marxanweb.org/\";\n\nclass MarxanDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { searchText: \"\" };\n  }\n  openDocumentation() {\n    window.open(DOCS_ROOT + this.props.helpLink);\n  }\n  searchTextChange(evt) {\n    this.setState({ searchText: evt.target.value });\n    if (this.props.searchTextChanged)\n      this.props.searchTextChanged(evt.target.value);\n  }\n  clearSearch() {\n    this.searchTextChange({ target: { value: \"\" } });\n  }\n  render() {\n    //if the offsetX or rightX is set, then make this into a style\n    let offsetX = this.props.offsetX\n      ? { marginLeft: this.props.offsetX + \"px\", width: \"400px\" }\n      : this.props.rightX\n      ? { right: this.props.rightX + \"px\", width: \"400px\", left: null }\n      : {};\n    let offsetY = this.props.offsetY\n      ? { marginTop: this.props.offsetY - 60 + \"px\" }\n      : {};\n    let style = Object.assign(offsetX, offsetY);\n    let cancelButton = this.props.showCancelButton ? (\n      <ToolbarButton\n        label={this.props.cancelLabel ? this.props.cancelLabel : \"Cancel\"}\n        primary={true}\n        onClick={this.props.onCancel}\n        disabled={this.props.cancelDisabled}\n      />\n    ) : null;\n    let okButton = this.props.hideOKButton ? null : (\n      <ToolbarButton\n        label={this.props.okLabel ? this.props.okLabel : \"OK\"}\n        primary={true}\n        onClick={this.props.onOk}\n        disabled={this.props.okDisabled}\n      />\n    );\n    let contentStyle = this.props.contentStyle\n      ? this.props.contentStyle\n      : this.props.contentWidth\n      ? { width: this.props.contentWidth + \"px\" }\n      : {};\n    return (\n      <Dialog\n        {...this.props}\n        onRequestClose={this.props.onCancel}\n        overlayStyle={\n          this.props.showOverlay ? { display: \"block\" } : { display: \"none\" }\n        }\n        titleClassName={\"dialogTitleStyle\"}\n        contentStyle={contentStyle}\n        titleStyle={this.props.titleBarIcon ? { marginLeft: \"27px\" } : null}\n        className={\"dialogGeneric\"}\n        style={style}\n        actions={[this.props.actions, cancelButton, okButton]}\n        children={[\n          this.props.titleBarIcon ? (\n            <FontAwesomeIcon\n              icon={this.props.titleBarIcon}\n              style={{ position: \"absolute\", top: \"18px\", left: \"24px\" }}\n              key=\"k1\"\n            />\n          ) : null,\n          this.props.showSearchBox ? (\n            <div\n              style={{ right: \"70px\", position: \"absolute\", top: \"13px\" }}\n              title={\"search\"}\n              key=\"k27\"\n            >\n              <input\n                value={this.state.searchText}\n                onChange={this.searchTextChange.bind(this)}\n                style={{\n                  border: \"1px solid rgba(0,0,0,0.1)\",\n                  borderRadius: \"30px\",\n                  width: \"90px\",\n                  height: \"22px\",\n                  fontFamily: \"Roboto, sans-serif\",\n                  fontSize: \"12px\",\n                  fontWeight: \"400\",\n                  color: \"rgba(0,0,0,0.7)\",\n                  paddingLeft: \"10px\",\n                }}\n              />\n              <FontAwesomeIcon\n                onClick={this.clearSearch.bind(this)}\n                icon={faSearch}\n                className={\"appBarIcon docs\"}\n                style={{\n                  fontSize: \"13px\",\n                  position: \"absolute\",\n                  top: \"1px\",\n                  right: \"2px\",\n                  color:\n                    this.state.searchText === \"\"\n                      ? \"rgba(0, 0, 0, 0.6)\"\n                      : \"rgb(255, 64, 129)\",\n                }}\n                title={this.state.searchText === \"\" ? \"Search\" : \"Clear search\"}\n              />\n            </div>\n          ) : null,\n          <Sync\n            className=\"spin\"\n            style={{\n              display:\n                this.props.loading || this.props.showSpinner\n                  ? \"inline-block\"\n                  : \"none\",\n              color: \"rgb(255, 64, 129)\",\n              position: \"absolute\",\n              top: \"15px\",\n              right: \"41px\",\n              height: \"22px\",\n              width: \"22px\",\n            }}\n            key={\"spinner\"}\n          />,\n          this.props.children,\n          this.props.helpLink ? (\n            <FontAwesomeIcon\n              icon={faQuestionCircle}\n              onClick={this.openDocumentation.bind(this)}\n              title={\"Open documentation for this window\"}\n              className={\"appBarIcon docs\"}\n              style={{ fontSize: \"18px\" }}\n              key=\"helpLink\"\n            />\n          ) : null,\n        ]}\n      />\n    );\n  }\n}\n\nexport default MarxanDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\n\nclass LoadingDialog extends React.Component {\n  render() {\n    return (\n      <React.Fragment>\n        <MarxanDialog\n          {...this.props}\n          showOverlay={true}\n          showCancelButton={false}\n          hideOKButton={true}\n          contentWidth={358}\n          title=\"Loading..\"\n          modal={true}\n        />\n      </React.Fragment>\n    );\n  }\n}\n\nexport default LoadingDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport TextField from \"material-ui/TextField\";\n\nclass MarxanTextField extends React.Component {\n  render() {\n    //if a style is passed in, then override the default style\n    let style = this.props.style ? this.props.style : { display: \"block\" };\n    return (\n      <TextField\n        {...this.props}\n        inputStyle={{ fontSize: \"12px\" }}\n        style={style}\n        floatingLabelFixed={true}\n      />\n    );\n  }\n}\n\nexport default MarxanTextField;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faUnlink } from \"@fortawesome/free-solid-svg-icons\";\nimport { faLock } from \"@fortawesome/free-solid-svg-icons\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport MarxanTextField from \"./MarxanTextField\";\nimport SelectField from \"material-ui/SelectField\";\nimport MenuItem from \"material-ui/MenuItem\";\n\nclass LoginDialog extends React.Component {\n  handleKeyPress(e) {\n    if (e.nativeEvent.key === \"Enter\") this.props.onOk();\n  }\n  selectServer(evt, key, value) {\n    this.props.selectServer(this.props.marxanServers[key]);\n  }\n  render() {\n    return (\n      <React.Fragment>\n        <MarxanDialog\n          {...this.props}\n          showOverlay={true}\n          okDisabled={\n            !this.props.user ||\n            !this.props.password ||\n            !this.props.marxanServer ||\n            (this.props.marxanServer && this.props.marxanServer.offline)\n              ? true\n              : false\n          }\n          okLabel={\n            this.props.marxanServer &&\n            !this.props.marxanServer.offline &&\n            !this.props.marxanServer.corsEnabled &&\n            this.props.marxanServer.guestUserEnabled\n              ? \"Login (Read-Only)\"\n              : \"Login\"\n          }\n          showCancelButton={true}\n          cancelLabel={\"Register\"}\n          cancelDisabled={\n            this.props.marxanServer === undefined ||\n            (this.props.marxanServer && this.props.marxanServer.offline) ||\n            (this.props.marxanServer && !this.props.marxanServer.corsEnabled)\n              ? true\n              : false\n          }\n          helpLink={\"user.html#log-in-window\"}\n          contentWidth={358}\n          offsetY={200}\n          children={[\n            <div key=\"21\">\n              <SelectField\n                id=\"SelectMarxanServer\"\n                floatingLabelText={\"Marxan Server\"}\n                floatingLabelFixed={true}\n                underlineShow={false}\n                menuItemStyle={{ fontSize: \"12px\" }}\n                labelStyle={{ fontSize: \"12px\" }}\n                style={{ width: \"320px\" }}\n                value={this.props.marxanServer && this.props.marxanServer.name}\n                onChange={this.selectServer.bind(this)}\n                children={this.props.marxanServers.map((item) => {\n                  //if the server is offline - just put that otherwise: if CORS is enabled for this domain then it is read/write otherwise: if the guest user is enabled then put the domain and read only otherwise: put the domain and guest user disabled\n                  let text = item.offline\n                    ? item.name\n                    : item.corsEnabled\n                    ? item.name\n                    : item.guestUserEnabled\n                    ? item.name\n                    : item.name + \" (Guest user disabled)\";\n                  return (\n                    <MenuItem\n                      value={item.name}\n                      key={item.name}\n                      primaryText={text}\n                      style={{ fontSize: \"12px\" }}\n                      innerDivStyle={{ padding: \"0px 10px 0px 52px\" }}\n                      leftIcon={\n                        item.offline ? (\n                          <FontAwesomeIcon\n                            style={{ height: \"12px\", marginTop: \"5px\" }}\n                            icon={faUnlink}\n                          />\n                        ) : item.corsEnabled ? null : (\n                          <FontAwesomeIcon\n                            style={{ height: \"12px\", marginTop: \"5px\" }}\n                            icon={faLock}\n                          />\n                        )\n                      }\n                      title={\n                        item.offline\n                          ? item.host + \" (offline)\\n\" + item.description\n                          : item.corsEnabled\n                          ? item.host + \"\\n\" + item.description\n                          : item.guestUserEnabled\n                          ? item.host + \" (read-only)\\n\" + item.description\n                          : item.host +\n                            \" (guest user disabled)\\n\" +\n                            item.description\n                      }\n                    />\n                  );\n                })}\n              />\n              <div style={{ height: \"124px\" }} id=\"logindiv\" key=\"logindiv\">\n                <MarxanTextField\n                  id=\"TextUsername\"\n                  style={{ marginTop: \"-14px\" }}\n                  floatingLabelText=\"Username\"\n                  onChange={(event, value) => this.props.changeUserName(value)}\n                  value={this.props.user}\n                  disabled={\n                    this.props.loading ||\n                    (this.props.marxanServer &&\n                      !this.props.marxanServer.corsEnabled)\n                      ? true\n                      : false\n                  }\n                  onKeyPress={this.handleKeyPress.bind(this)}\n                />\n                <MarxanTextField\n                  id=\"TextPassword\"\n                  floatingLabelText=\"Password\"\n                  type=\"password\"\n                  onChange={(event, value) => this.props.changePassword(value)}\n                  value={this.props.password}\n                  disabled={\n                    this.props.loading ||\n                    (this.props.marxanServer &&\n                      !this.props.marxanServer.corsEnabled)\n                      ? true\n                      : false\n                  }\n                  onKeyPress={this.handleKeyPress.bind(this)}\n                />\n                {/*<span onClick={this.props.openResendPasswordDialog.bind(this)} className=\"forgotLink\" title=\"Click to resend password\">Forgot</span>*/}\n              </div>\n              <div\n                style={{\n                  position: \"absolute\",\n                  bottom: \"4px\",\n                  fontSize: \"11px\",\n                }}\n              >\n                {this.props.marxanClientReleaseVersion}\n              </div>\n            </div>,\n          ]}\n          onRequestClose={this.props.onOk}\n          title=\"Login\"\n          modal={true}\n        />\n      </React.Fragment>\n    );\n  }\n}\n\nexport default LoginDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport MarxanTextField from \"./MarxanTextField\";\n\nclass RegisterDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      validForm: false,\n      user: undefined,\n      name: undefined,\n      email: undefined,\n      validEmail: true,\n    };\n  }\n  //\n  createNewUser() {\n    //check the required FIELDS\n    try {\n      this.validateEmail();\n    } catch (err) {\n      //any errors will not create a new user\n      switch (err.message) {\n        default:\n        // code\n      }\n      return;\n    }\n    //create a new user\n    this.props.onOk(\n      this.state.user,\n      this.state.password,\n      this.state.name,\n      this.state.email\n    );\n  }\n\n  validateEmail() {\n    var re = /^(([^<>()\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    let valid = re.test(String(this.state.email).toLowerCase());\n    this.setState({ validEmail: valid });\n    if (!valid) {\n      throw new Error(\"Invalid email address\");\n    }\n  }\n\n  render() {\n    let c = [\n      <div key=\"RegisterDialogDiv\">\n        <MarxanTextField\n          floatingLabelText=\"Username\"\n          onChange={(event, newValue) => this.setState({ user: newValue })}\n        />\n        <MarxanTextField\n          floatingLabelText=\"Password\"\n          type=\"password\"\n          onChange={(event, newValue) => this.setState({ password: newValue })}\n        />\n        <MarxanTextField\n          floatingLabelText=\"Full name\"\n          onChange={(event, newValue) => this.setState({ name: newValue })}\n        />\n        <MarxanTextField\n          floatingLabelText=\"Email address\"\n          errorText={this.state.validEmail ? \"\" : \"Invalid email address\"}\n          onChange={(event, newValue) => this.setState({ email: newValue })}\n        />\n      </div>,\n    ];\n    return (\n      <MarxanDialog\n        {...this.props}\n        contentWidth={358}\n        onOk={this.createNewUser.bind(this)}\n        okDisabled={\n          !(\n            this.state.user &&\n            this.state.password &&\n            this.state.name &&\n            this.state.email\n          ) || this.props.loading\n        }\n        showCancelButton={true}\n        cancelDisabled={this.props.loading}\n        helpLink={\"user.html#new-user-registration\"}\n        title=\"Register\"\n        children={c}\n        onRequestClose={this.props.onCancel}\n      />\n    );\n  }\n}\n\nexport default RegisterDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport MarxanTextField from \"./MarxanTextField\";\n\nclass ResendPasswordDialog extends React.Component {\n  handleKeyPress(e) {\n    if (e.nativeEvent.key === \"Enter\") this.props.resendPassword();\n  }\n  render() {\n    return (\n      <React.Fragment>\n        <MarxanDialog\n          {...this.props}\n          contentWidth={358}\n          showCancelButton={true}\n          okDisabled={!this.props.email || this.props.loading}\n          cancelDisabled={this.props.resending}\n          title=\"Resend password\"\n          children={[\n            <div key=\"resendDiv\">\n              <MarxanTextField\n                floatingLabelText=\"email address\"\n                onChange={(event, value) => this.props.changeEmail(value)}\n                value={this.props.email}\n                className=\"loginUserField\"\n                disabled={this.props.loading}\n                onKeyPress={this.handleKeyPress.bind(this)}\n              />\n            </div>,\n          ]}\n          onRequestClose={this.props.onCancel}\n        />\n      </React.Fragment>\n    );\n  }\n}\n\nexport default ResendPasswordDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faExclamationTriangle } from \"@fortawesome/free-solid-svg-icons\";\nimport { faChalkboardTeacher } from \"@fortawesome/free-solid-svg-icons\";\nimport { faCloudDownloadAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport { faNewspaper } from \"@fortawesome/free-solid-svg-icons\";\n\nclass Notification extends React.Component {\n  render() {\n    var icon;\n    switch (this.props.type) {\n      case \"Hardware Issue\":\n        icon = (\n          <FontAwesomeIcon\n            icon={faExclamationTriangle}\n            style={{ color: \"red\", paddingRight: \"5px\", fontSize: \"18px\" }}\n          />\n        );\n        break;\n      case \"Data Update\":\n      case \"Software Update\":\n        icon = (\n          <FontAwesomeIcon\n            icon={faCloudDownloadAlt}\n            style={{\n              color: \"rgba(255,0,0,0.7)\",\n              paddingRight: \"5px\",\n              fontSize: \"18px\",\n            }}\n          />\n        );\n        break;\n      case \"Training\":\n        icon = (\n          <FontAwesomeIcon\n            icon={faChalkboardTeacher}\n            style={{ paddingRight: \"5px\", fontSize: \"18px\" }}\n          />\n        );\n        break;\n      case \"News\":\n        icon = (\n          <FontAwesomeIcon\n            icon={faNewspaper}\n            style={{ paddingRight: \"5px\", fontSize: \"18px\" }}\n          />\n        );\n        break;\n      default:\n        icon = null;\n      // code\n    }\n    return (\n      <div className={\"notification\"}>\n        <div className={\"notificationType\"} title={this.props.type}>\n          {icon}\n          <span\n            dangerouslySetInnerHTML={{ __html: this.props.html }}\n            className={\"notificationText\"}\n          ></span>\n          <span\n            className={\"removeNotification\"}\n            onClick={this.props.removeNotification}\n            title={\"Dismiss\"}\n          >\n            x\n          </span>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Notification;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport Notification from \"./Notification.js\";\nimport FlatButton from \"material-ui/FlatButton\";\nimport ToolbarButton from \"./ToolbarButton\";\nimport Checkbox from \"material-ui/Checkbox\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSync } from \"@fortawesome/free-solid-svg-icons\";\nimport { faDraftingCompass } from \"@fortawesome/free-solid-svg-icons\";\nclass Welcome extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { checked: true };\n  }\n  toggleShowWelcomeScreen(evt, isInputChecked) {\n    this.setState({ checked: isInputChecked });\n  }\n  onOk() {\n    this.props.saveOptions({ SHOWWELCOMESCREEN: this.state.checked });\n    this.props.onOk();\n  }\n  openNewProjectDialog() {\n    this.onOk();\n    this.props.openNewProjectDialog();\n  }\n  render() {\n    //get the visible notifications\n    let notifications =\n      this.props.notifications &&\n      this.props.notifications.filter((item) => item.visible);\n    notifications = notifications.map((item) => {\n      return (\n        <Notification\n          html={item.html}\n          type={item.type}\n          key={item.id}\n          removeNotification={this.props.removeNotification.bind(this, item)}\n        ></Notification>\n      );\n    });\n    let notificationsPanel = (\n      <div className={\"notifications\"}>\n        {notifications}\n        <div className={\"notificationPointer\"}></div>\n      </div>\n    );\n    return (\n      <MarxanDialog\n        {...this.props}\n        contentWidth={768}\n        offsetY={80}\n        title=\"Welcome\"\n        helpLink={\"user.html#welcome\"}\n        onOk={this.onOk.bind(this)}\n        showCancelButton={false}\n        autoDetectWindowHeight={false}\n        bodyStyle={{ padding: \"0px 24px 0px 24px\" }}\n        children={\n          <React.Fragment key={\"welcomeKey\"}>\n            <div className={\"welcomeContent\"}>\n              <div className={\"tabTitle\"}>What do you want to do?</div>\n              <div className={\"task\"}>\n                <div className={\"taskItem\"}>\n                  <ToolbarButton\n                    icon={<FontAwesomeIcon icon={faDraftingCompass} />}\n                    title={\"Design a protected area network\"}\n                    onClick={this.openNewProjectDialog.bind(this)}\n                    className={\"resetNotifications\"}\n                  />\n                  <span>Create a new protected area network for a country</span>\n                </div>\n                <div className={\"taskItem\"}>\n                  <ToolbarButton\n                    icon={<FontAwesomeIcon icon={faDraftingCompass} />}\n                    title={\"Extend a protected area network\"}\n                    onClick={this.openNewProjectDialog.bind(this)}\n                    className={\"resetNotifications\"}\n                  />\n                  <span>\n                    Extend an existing protected area network for a country\n                  </span>\n                </div>\n                <div className={\"taskItem\"}>\n                  <ToolbarButton\n                    icon={<FontAwesomeIcon icon={faDraftingCompass} />}\n                    title={\"Do a gap analysis\"}\n                    onClick={this.openNewProjectDialog.bind(this)}\n                    className={\"resetNotifications\"}\n                  />\n                  <span>Do a national gap analysis</span>\n                </div>\n              </div>\n              <div style={{ verticalAlign: \"middle\" }}>\n                <FlatButton\n                  icon={<FontAwesomeIcon icon={faSync} />}\n                  title={\"Reset notifications\"}\n                  onClick={this.props.resetNotifications}\n                  style={{\n                    minWidth: \"24px\",\n                    height: \"24px\",\n                    lineHeight: \"24px\",\n                    color: \"rgba(0,0,0,0.67)\",\n                    position: \"absolute\",\n                    bottom: \"10px\",\n                  }}\n                />\n              </div>\n              <div className={\"notifications\"}>{notificationsPanel}</div>\n              <div className=\"welcomeToolbar\">\n                <Checkbox\n                  label=\"Show at startup\"\n                  style={{ fontSize: \"12px\" }}\n                  checked={this.state.checked}\n                  onCheck={this.toggleShowWelcomeScreen.bind(this)}\n                  className={\"showAtStartupChk\"}\n                />\n              </div>\n            </div>\n          </React.Fragment>\n        }\n      />\n    );\n  }\n}\n\nexport default Welcome;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport Menu from \"material-ui/Menu\";\nimport MenuItem from \"material-ui/MenuItem\";\nimport Popover from \"material-ui/Popover\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faUsers } from \"@fortawesome/free-solid-svg-icons\";\nimport { faRunning } from \"@fortawesome/free-solid-svg-icons\";\nimport { faChartBar } from \"@fortawesome/free-solid-svg-icons\";\nimport { faHistory } from \"@fortawesome/free-solid-svg-icons\";\nimport { faBroom } from \"@fortawesome/free-solid-svg-icons\";\n\nclass ToolsMenu extends React.Component {\n  openUsersDialog() {\n    this.props.openUsersDialog();\n    this.props.hideToolsMenu();\n  }\n  openRunLogDialog() {\n    this.props.openRunLogDialog();\n    this.props.hideToolsMenu();\n  }\n  openGapAnalysisDialog() {\n    this.props.openGapAnalysisDialog();\n    this.props.hideToolsMenu();\n  }\n  openResetDialog() {\n    this.props.openResetDialog();\n    this.props.hideToolsMenu();\n  }\n  render() {\n    return (\n      <React.Fragment>\n        <Popover\n          open={this.props.open}\n          anchorEl={this.props.menuAnchor}\n          onRequestClose={this.props.hideToolsMenu}\n        >\n          <Menu\n            desktop={true}\n            onMouseLeave={this.props.hideToolsMenu}\n            menuItemStyle={{\n              backgroundColor: \"rgb(0, 188, 212)\",\n              color: \"white\",\n            }}\n            listStyle={{ width: \"120px\", backgroundColor: \"rgb(0, 188, 212)\" }}\n            selectedMenuItemStyle={{ color: \"rgb(24,24,24)\" }}\n          >\n            <MenuItem\n              style={{\n                display:\n                  this.props.userRole === \"Admin\" ? \"inline-block\" : \"none\",\n              }}\n              leftIcon={\n                <FontAwesomeIcon\n                  style={{ fontSize: \"20px\" }}\n                  icon={faUsers}\n                  color={\"white\"}\n                />\n              }\n              onClick={this.openUsersDialog.bind(this)}\n              title={\"Manage Users\"}\n            >\n              Users\n            </MenuItem>\n            <MenuItem\n              leftIcon={\n                <FontAwesomeIcon\n                  style={{ fontSize: \"20px\" }}\n                  icon={faRunning}\n                  color={\"white\"}\n                />\n              }\n              onClick={this.openRunLogDialog.bind(this)}\n              title={\n                this.props.userRole === \"Admin\"\n                  ? \"View Run Log and stop runs\"\n                  : \"View Run Log\"\n              }\n            >\n              Run log\n            </MenuItem>\n            <MenuItem\n              style={{\n                display:\n                  this.props.userRole === \"Admin\" &&\n                  this.props.marxanServer.enable_reset\n                    ? \"inline-block\"\n                    : \"none\",\n              }}\n              leftIcon={\n                <FontAwesomeIcon\n                  style={{ fontSize: \"20px\" }}\n                  icon={faHistory}\n                  color={\"white\"}\n                />\n              }\n              onClick={this.openResetDialog.bind(this)}\n              title={\"Reset database\"}\n            >\n              Reset\n            </MenuItem>\n            <MenuItem\n              style={{\n                display:\n                  this.props.userRole !== \"ReadOnly\" ? \"inline-block\" : \"none\",\n              }}\n              leftIcon={\n                <FontAwesomeIcon\n                  style={{ fontSize: \"20px\" }}\n                  icon={faChartBar}\n                  color={\"white\"}\n                />\n              }\n              onClick={this.openGapAnalysisDialog.bind(this)}\n              title={\"Gap Analysis\"}\n              disabled={this.props.metadata.pu_country === null}\n            >\n              {this.props.metadata.pu_country === null\n                ? \"Gap Analysis (not available)\"\n                : \"Gap Analysis\"}\n            </MenuItem>\n            <MenuItem\n              style={{\n                display:\n                  this.props.userRole === \"Admin\" ? \"inline-block\" : \"none\",\n              }}\n              leftIcon={\n                <FontAwesomeIcon\n                  style={{ fontSize: \"20px\" }}\n                  icon={faBroom}\n                  color={\"white\"}\n                />\n              }\n              onClick={this.props.cleanup}\n              title={\"Cleanup server\"}\n            >\n              Cleanup server\n            </MenuItem>\n          </Menu>\n        </Popover>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default ToolsMenu;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport Menu from \"material-ui/Menu\";\nimport MenuItem from \"material-ui/MenuItem\";\nimport Popover from \"material-ui/Popover\";\nimport LogOut from \"material-ui/svg-icons/action/exit-to-app\";\nimport { white } from \"material-ui/styles/colors\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCog } from \"@fortawesome/free-solid-svg-icons\";\nimport { faEdit } from \"@fortawesome/free-solid-svg-icons\";\nimport { faUserLock } from \"@fortawesome/free-solid-svg-icons\";\n\nclass UserMenu extends React.Component {\n  render() {\n    return (\n      <React.Fragment>\n        <Popover\n          open={this.props.open}\n          anchorEl={this.props.menuAnchor}\n          anchorOrigin={{ horizontal: \"left\", vertical: \"bottom\" }}\n          targetOrigin={{ horizontal: \"left\", vertical: \"top\" }}\n          onRequestClose={this.props.hideUserMenu}\n        >\n          <Menu\n            desktop={true}\n            onMouseLeave={this.props.hideUserMenu}\n            menuItemStyle={{\n              backgroundColor: \"rgb(0, 188, 212)\",\n              color: \"white\",\n            }}\n            listStyle={{ width: \"120px\", backgroundColor: \"rgb(0, 188, 212)\" }}\n            selectedMenuItemStyle={{ color: \"rgb(24,24,24)\" }}\n          >\n            {/*<MenuItem primaryText={this.props.user + \" (\" + this.props.userRole + \")\"} style={{marginLeft:'40px'}}/>*/}\n            <MenuItem\n              style={{\n                display: this.props.userRole !== \"ReadOnly\" ? \"block\" : \"none\",\n              }}\n              primaryText=\"Settings\"\n              onClick={this.props.openUserSettingsDialog.bind(this)}\n              leftIcon={\n                <FontAwesomeIcon\n                  style={{ fontSize: \"20px\", marginBottom: \"7px\" }}\n                  icon={faCog}\n                  color={\"white\"}\n                />\n              }\n            />\n            <MenuItem\n              style={{\n                display: this.props.userRole !== \"ReadOnly\" ? \"block\" : \"none\",\n              }}\n              primaryText=\"Profile\"\n              onClick={this.props.openProfileDialog}\n              leftIcon={\n                <FontAwesomeIcon\n                  style={{ fontSize: \"20px\", marginBottom: \"7px\" }}\n                  icon={faEdit}\n                  color={\"white\"}\n                />\n              }\n            />\n            <MenuItem\n              style={{\n                display: this.props.userRole !== \"ReadOnly\" ? \"block\" : \"none\",\n              }}\n              primaryText=\"Change password\"\n              onClick={this.props.openChangePasswordDialog}\n              leftIcon={\n                <FontAwesomeIcon\n                  style={{ fontSize: \"20px\", marginBottom: \"7px\" }}\n                  icon={faUserLock}\n                  color={\"white\"}\n                />\n              }\n            />\n            <MenuItem\n              primaryText=\"Log out\"\n              onClick={this.props.logout.bind(this)}\n              leftIcon={<LogOut color={white} />}\n            />\n          </Menu>\n        </Popover>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default UserMenu;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport CONSTANTS from \"./constants\";\nimport Menu from \"material-ui/Menu\";\nimport MenuItem from \"material-ui/MenuItem\";\nimport Popover from \"material-ui/Popover\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faQuestionCircle } from \"@fortawesome/free-solid-svg-icons\";\nimport { faInfoCircle } from \"@fortawesome/free-solid-svg-icons\";\n\nclass HelpMenu extends React.Component {\n  openDocumentation() {\n    window.open(CONSTANTS.DOCS_ROOT);\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <Popover\n          open={this.props.open}\n          anchorEl={this.props.menuAnchor}\n          anchorOrigin={{ horizontal: \"left\", vertical: \"bottom\" }}\n          targetOrigin={{ horizontal: \"left\", vertical: \"top\" }}\n          onRequestClose={this.props.hideHelpMenu}\n        >\n          <Menu\n            desktop={true}\n            onMouseLeave={this.props.hideHelpMenu}\n            menuItemStyle={{\n              backgroundColor: \"rgb(0, 188, 212)\",\n              color: \"white\",\n            }}\n            listStyle={{ width: \"120px\", backgroundColor: \"rgb(0, 188, 212)\" }}\n            selectedMenuItemStyle={{ color: \"rgb(24,24,24)\" }}\n            width={\"102px\"}\n          >\n            <MenuItem\n              primaryText=\"Documentation\"\n              onClick={this.openDocumentation.bind(this)}\n              leftIcon={\n                <FontAwesomeIcon\n                  style={{ height: \"18px\", marginTop: \"4px\", fontSize: \"18px\" }}\n                  icon={faQuestionCircle}\n                  color={\"white\"}\n                />\n              }\n            />\n            <MenuItem\n              primaryText=\"About\"\n              onClick={this.props.openAboutDialog}\n              leftIcon={\n                <FontAwesomeIcon\n                  style={{ height: \"18px\", marginTop: \"4px\", fontSize: \"18px\" }}\n                  icon={faInfoCircle}\n                  color={\"white\"}\n                />\n              }\n            />\n          </Menu>\n        </Popover>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default HelpMenu;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport SelectField from \"material-ui/SelectField\";\nimport MenuItem from \"material-ui/MenuItem\";\nimport { RadioButton, RadioButtonGroup } from \"material-ui/RadioButton\";\n\nclass UserSettingsDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { saveEnabled: false };\n    this.options = {};\n  }\n  setOption(key, value) {\n    this.setState({ saveEnabled: true });\n    this.options[key] = value;\n    this.props.saveOptions(this.options);\n  }\n  updateOptions() {\n    this.props.onOk();\n  }\n  changeBasemap(event, key, payload) {\n    var basemap = this.props.basemaps[key];\n    this.props.changeBasemap(basemap);\n    this.setOption(\"BASEMAP\", basemap.name);\n  }\n  toggleUseFeatureColors(evt, isInputChecked) {\n    this.setOption(\"USEFEATURECOLORS\", isInputChecked);\n  }\n  toggleShowWelcomeScreen(evt, isInputChecked) {\n    this.setOption(\"SHOWWELCOMESCREEN\", isInputChecked);\n  }\n  setReportUnit(event, value) {\n    this.setOption(\"REPORTUNITS\", value);\n  }\n  render() {\n    return (\n      <MarxanDialog\n        {...this.props}\n        contentWidth={370}\n        offsetY={80}\n        showCancelButton={false}\n        onOk={this.updateOptions.bind(this)}\n        helpLink={\"user.html#user-settings\"}\n        title=\"Settings\"\n        children={\n          <div key=\"k14\">\n            <SelectField\n              floatingLabelText={\"Basemap style\"}\n              floatingLabelFixed={true}\n              underlineShow={false}\n              menuItemStyle={{ fontSize: \"12px\" }}\n              labelStyle={{ fontSize: \"12px\" }}\n              style={{ width: \"260px\" }}\n              value={this.props.basemap}\n              onChange={this.changeBasemap.bind(this)}\n              children={this.props.basemaps.map((item) => {\n                return (\n                  <MenuItem\n                    value={item.name}\n                    key={item.name}\n                    primaryText={item.alias}\n                    style={{ fontSize: \"12px\" }}\n                    title={item.description}\n                  />\n                );\n              })}\n            />\n            <div style={{ paddingBottom: \"10px\" }}>\n              <div className={\"userSetting\"}>Area units</div>\n              <RadioButtonGroup\n                name=\"reportUnitType\"\n                defaultSelected={this.props.userData.REPORTUNITS}\n                onChange={this.setReportUnit.bind(this)}\n              >\n                <RadioButton\n                  value=\"m2\"\n                  label=\"m2\"\n                  className={\"radioButton\"}\n                  style={{ width: \"60px\", display: \"inline-block\" }}\n                  inputStyle={{ width: \"40px\" }}\n                  labelStyle={{ width: \"40px\" }}\n                  iconStyle={{ marginRight: \"3px\" }}\n                />\n                <RadioButton\n                  value=\"Ha\"\n                  label=\"Ha\"\n                  className={\"radioButton\"}\n                  style={{ width: \"60px\", display: \"inline-block\" }}\n                  inputStyle={{ width: \"40px\" }}\n                  labelStyle={{ width: \"40px\" }}\n                  iconStyle={{ marginRight: \"3px\" }}\n                />\n                <RadioButton\n                  value=\"Km2\"\n                  label=\"Km2\"\n                  className={\"radioButton\"}\n                  style={{ width: \"60px\", display: \"inline-block\" }}\n                  inputStyle={{ width: \"40px\" }}\n                  labelStyle={{ width: \"40px\" }}\n                  iconStyle={{ marginRight: \"3px\" }}\n                />\n              </RadioButtonGroup>\n            </div>\n            {/*\t<Checkbox label=\"Use feature colours\" style={{fontSize:'12px'}} checked={this.props.userData.USEFEATURECOLORS} onCheck={this.toggleUseFeatureColors.bind(this)} />\n\t\t\t\t\t\t<Checkbox label=\"Show welcome screen at startup\" style={{fontSize:'12px'}} checked={this.props.userData.SHOWWELCOMESCREEN} onCheck={this.toggleShowWelcomeScreen.bind(this)} />*/}\n          </div>\n        }\n      />\n    );\n  }\n}\n\nexport default UserSettingsDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport MarxanTextField from \"./MarxanTextField\";\n\nclass ProfileDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { updated: false, validEmail: true };\n  }\n  handleKeyPress(e) {\n    if (e.nativeEvent.key === \"Enter\") this.updateUser();\n  }\n  updateState(name, value) {\n    this.setState({\n      [name]: value,\n      updated: true,\n    });\n  }\n  validateEmail() {\n    var re = /^(([^<>()\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    let email = this.state.EMAIL ? this.state.EMAIL : this.props.userData.EMAIL;\n    let valid = re.test(String(email).toLowerCase());\n    this.setState({ validEmail: valid });\n    if (!valid) {\n      throw new Error(\"Invalid email address\");\n    }\n  }\n  updateUser() {\n    try {\n      this.validateEmail();\n    } catch (err) {\n      //any errors will not create a new user\n      return;\n    }\n    this.props.updateUser(this.state);\n    this.closeProfileDialog();\n  }\n  closeProfileDialog() {\n    this.props.onOk();\n    this.setState({ updated: false, validEmail: true });\n  }\n  render() {\n    return (\n      <MarxanDialog\n        {...this.props}\n        contentWidth={330}\n        offsetY={80}\n        onCancel={this.closeProfileDialog.bind(this)}\n        showCancelButton={true}\n        onOk={this.updateUser.bind(this)}\n        helpLink={\"user.html#profile\"}\n        title=\"Profile\"\n        children={\n          <div key=\"k15\">\n            <MarxanTextField\n              floatingLabelText=\"Full name\"\n              floatingLabelFixed={true}\n              onChange={(event, newValue) => this.updateState(\"NAME\", newValue)}\n              defaultValue={this.props.userData && this.props.userData.NAME}\n              onKeyPress={this.handleKeyPress.bind(this)}\n              floatingLabelShrinkStyle={{ fontSize: \"16px\" }}\n              floatingLabelFocusStyle={{ fontSize: \"16px\" }}\n            />\n            <MarxanTextField\n              floatingLabelText=\"Email address\"\n              floatingLabelFixed={true}\n              errorText={this.state.validEmail ? \"\" : \"Invalid email address\"}\n              onChange={(event, newValue) =>\n                this.updateState(\"EMAIL\", newValue)\n              }\n              defaultValue={this.props.userData && this.props.userData.EMAIL}\n              onKeyPress={this.handleKeyPress.bind(this)}\n              floatingLabelShrinkStyle={{ fontSize: \"16px\" }}\n              floatingLabelFocusStyle={{ fontSize: \"16px\" }}\n            />\n            <div className={\"description\"}>\n              Role: {this.props.userData.ROLE}\n            </div>\n          </div>\n        }\n      />\n    );\n  }\n}\n\nexport default ProfileDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport ReactTable from \"react-table\";\n\nclass MarxanTable extends React.Component {\n  //filters the data in the table from the search text\n  filterData() {\n    let filteredData = [];\n    if (this.props.searchText === \"\") {\n      filteredData = this.props.data;\n    } else {\n      filteredData = this.props.data.filter((item) => {\n        if (this.props.searchText.startsWith(\"!\")) {\n          //does not contain search\n          return !Object.keys(item).some(\n            (key) =>\n              this.props.searchColumns.includes(key) &&\n              item[key] &&\n              item[key].includes(this.props.searchText.substring(1))\n          );\n        } else {\n          //contains search - this will exit the some loop (and return true) if there are any matching items\n          return Object.keys(item).some(\n            (key) =>\n              this.props.searchColumns.includes(key) &&\n              item[key] &&\n              item[key].includes(this.props.searchText)\n          );\n        }\n      });\n    }\n    //call the dataFiltered method passing the filtered data\n    if (this.props.hasOwnProperty(\"dataFiltered\"))\n      this.props.dataFiltered(filteredData);\n    //return a value\n    return filteredData;\n  }\n  render() {\n    let filteredData = this.filterData();\n    return (\n      <ReactTable\n        {...this.props}\n        pageSize={filteredData.length}\n        className={\"projectsReactTable noselect\"}\n        showPagination={false}\n        minRows={0}\n        data={filteredData}\n        columns={this.props.columns}\n      />\n    );\n  }\n}\n\nexport default MarxanTable;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\n// import { faBookOpen } from '@fortawesome/free-solid-svg-icons';\nimport SelectField from \"material-ui/SelectField\";\nimport MenuItem from \"material-ui/MenuItem\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTrashAlt } from \"@fortawesome/free-regular-svg-icons\";\nimport ToolbarButton from \"./ToolbarButton\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport MarxanTable from \"./MarxanTable\";\nimport Checkbox from \"material-ui/Checkbox\";\n\nlet USER_ROLES = [\"User\", \"ReadOnly\", \"Admin\"];\nclass UsersDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { searchText: \"\", selectedUser: undefined };\n  }\n  changeRole(user, oldRole, evt, key, newRole) {\n    this.props.changeRole(user, newRole);\n  }\n  _delete() {\n    this.props.deleteUser(this.state.selectedUser.user);\n    this.setState({ selectedUser: false });\n  }\n  changeUser(event, user) {\n    this.setState({ selectedUser: user });\n  }\n  sortDate(a, b, desc) {\n    return new Date(\n      a.slice(6, 8),\n      a.slice(3, 5) - 1,\n      a.slice(0, 2),\n      a.slice(9, 11),\n      a.slice(12, 14),\n      a.slice(15, 17)\n    ) >\n      new Date(\n        b.slice(6, 8),\n        b.slice(3, 5) - 1,\n        b.slice(0, 2),\n        b.slice(9, 11),\n        b.slice(12, 14),\n        b.slice(15, 17)\n      )\n      ? 1\n      : -1;\n  }\n  closeDialog() {\n    this.setState({ selectedUser: undefined });\n    this.props.onOk();\n  }\n  searchTextChanged(value) {\n    this.setState({ searchText: value });\n  }\n  render() {\n    if (this.props.users) {\n      return (\n        <MarxanDialog\n          {...this.props}\n          onOk={this.closeDialog.bind(this)}\n          onRequestClose={this.closeDialog.bind(this)}\n          showCancelButton={false}\n          helpLink={\"user.html#the-users-window-admin-users-only\"}\n          autoDetectWindowHeight={false}\n          bodyStyle={{ padding: \"0px 24px 0px 24px\" }}\n          title=\"Users\"\n          showSearchBox={true}\n          searchTextChanged={this.searchTextChanged.bind(this)}\n          children={\n            <React.Fragment key=\"k2\">\n              <div id=\"usersTable\">\n                {this.props.users && this.props.users.length > 0 ? (\n                  <MarxanTable\n                    data={this.props.users}\n                    selectedUser={this.state.selectedUser}\n                    searchColumns={[\"user\", \"NAME\", \"EMAIL\", \"ROLE\"]}\n                    searchText={this.state.searchText}\n                    changeUser={this.changeUser.bind(this)}\n                    columns={[\n                      {\n                        Header: \"User\",\n                        accessor: \"user\",\n                        width: 90,\n                        headerStyle: { textAlign: \"left\" },\n                      },\n                      {\n                        Header: \"Name\",\n                        accessor: \"NAME\",\n                        width: 173,\n                        headerStyle: { textAlign: \"left\" },\n                      },\n                      {\n                        Header: \"email\",\n                        accessor: \"EMAIL\",\n                        width: 135,\n                        headerStyle: { textAlign: \"left\" },\n                      },\n                      {\n                        Header: \"Role\",\n                        accessor: \"ROLE\",\n                        width: 180,\n                        headerStyle: { textAlign: \"left\" },\n                        Cell: (row) =>\n                          row.original.user === \"guest\" ? (\n                            <div>ReadOnly</div>\n                          ) : (\n                            <SelectField\n                              style={{\n                                width: 130,\n                                height: 15,\n                                lineHeight: 15,\n                                position: \"relative\",\n                                fontSize: \"12px\",\n                              }}\n                              menuStyle={{ position: \"absolute\", top: -22 }}\n                              underlineStyle={{ position: \"relative\", top: 20 }}\n                              iconStyle={{ lineHeight: \"24px\", height: \"24px\" }}\n                              value={row.original.ROLE}\n                              onChange={this.changeRole.bind(\n                                this,\n                                row.original.user,\n                                row.value\n                              )}\n                            >\n                              {USER_ROLES.map((item) => {\n                                return (\n                                  <MenuItem\n                                    style={{ fontSize: \"12px\" }}\n                                    value={item}\n                                    primaryText={item}\n                                    key={item}\n                                  />\n                                );\n                              })}\n                            </SelectField>\n                          ),\n                      },\n                      {\n                        Header: \"Date\",\n                        accessor: \"CREATEDATE\",\n                        width: 115,\n                        headerStyle: { textAlign: \"left\" },\n                        sortMethod: this.sortDate.bind(this),\n                      },\n                    ]}\n                    getTrProps={(state, rowInfo, column) => {\n                      return {\n                        style: {\n                          background:\n                            rowInfo.original.user ===\n                            (state.selectedUser && state.selectedUser.user)\n                              ? \"aliceblue\"\n                              : \"\",\n                        },\n                        onClick: (e) => {\n                          if (USER_ROLES.indexOf(e.target.textContent) === -1)\n                            state.changeUser(e, rowInfo.original);\n                        },\n                      };\n                    }}\n                  />\n                ) : null}\n              </div>\n              <div id=\"projectsToolbar\">\n                <ToolbarButton\n                  icon={\n                    <FontAwesomeIcon\n                      icon={faTrashAlt}\n                      color=\"rgb(255, 64, 129)\"\n                    />\n                  }\n                  title=\"Delete user\"\n                  disabled={\n                    !this.state.selectedUser ||\n                    this.props.loading ||\n                    this.props.user === this.state.selectedUser.user ||\n                    this.state.selectedUser.user === \"guest\"\n                  }\n                  onClick={this._delete.bind(this)}\n                  label={\"Delete\"}\n                />\n                <Checkbox\n                  label=\"Enable guest user\"\n                  style={{\n                    fontSize: \"12px\",\n                    paddingLeft: \"10px\",\n                    width: \"200px\",\n                    display: \"inline-block\",\n                    verticalAlign: \"bottom\",\n                  }}\n                  onClick={this.props.toggleEnableGuestUser}\n                  checked={this.props.guestUserEnabled}\n                />\n              </div>\n            </React.Fragment>\n          }\n        />\n      );\n    } else {\n      return null;\n    }\n  }\n}\n\nexport default UsersDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport iucn from \"./images/iucn.png\";\nimport wcmc from \"./images/wcmc.png\";\nimport mapbox_small from \"./images/mapbox_small.png\";\nimport biopama_small from \"./images/biopama_small.png\";\nimport jrc_logo_color_small from \"./images/jrc_logo_color_small.png\";\n\nclass AboutDialog extends React.Component {\n  render() {\n    return (\n      <MarxanDialog\n        {...this.props}\n        contentWidth={500}\n        offsetY={80}\n        title=\"About\"\n        helpLink={\"user.html#about-window\"}\n        children={\n          <div key=\"k5\">\n            <div className={\"aboutTitle\"}>Software development</div>\n            <div className={\"aboutText\"}>\n              Marxan Web {this.props.marxanClientReleaseVersion} Feedback:{\" \"}\n              <a href=\"mailto:andrew.cottam@ec.europa.eu\" className=\"email\">\n                Andrew Cottam\n              </a>\n            </div>\n            <div className={\"aboutText\"}>\n              Marxan 2.4.3 - Ian Ball, Matthew Watts &amp; Hugh Possingham\n            </div>\n            <div className={\"aboutTitle\"}>Data providers</div>\n            <div\n              className={\"aboutText\"}\n              style={{ marginTop: \"10px\" }}\n              dangerouslySetInnerHTML={{ __html: this.props.wdpaAttribution }}\n            ></div>\n            <div className={\"aboutTitle\"}>\n              Funding and in-kind contributions\n            </div>\n            <div className={\"aboutText\"} style={{ marginTop: \"10px\" }}>\n              Marxan Web funded by the BIOPAMA project of the European\n              Commission. With in-kind contributions from Mapbox.\n            </div>\n            <div className={\"aboutText\"} style={{ marginTop: \"10px\" }}>\n              Marxan funded by a range of donors - see{\" \"}\n              <a\n                href=\"http://marxan.org/credits.html\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                here\n              </a>\n              .\n            </div>\n            <div className={\"logos\"}>\n              <a href=\"https://www.iucn.org/\">\n                <img\n                  src={iucn}\n                  alt=\"IUCN logo\"\n                  title={\"IUCN logo\"}\n                  className={\"aboutLogo\"}\n                />\n              </a>\n              <a href=\"https://www.unep-wcmc.org/\">\n                <img\n                  src={wcmc}\n                  alt=\"UN Environment WCMC logo\"\n                  title={\"UN Environment WCMC logo\"}\n                  className={\"aboutLogo\"}\n                />\n              </a>\n              <a href=\"https://www.biopama.org\">\n                <img\n                  src={biopama_small}\n                  alt=\"BIOPAMA logo\"\n                  title={\"BIOPAMA logo\"}\n                  className={\"aboutLogo\"}\n                />\n              </a>\n              <a href=\"https://ec.europa.eu/jrc/en\">\n                <img\n                  src={jrc_logo_color_small}\n                  alt=\"Joint Research Centre of the European Commission logo\"\n                  title={\n                    \"Joint Research Centre of the European Commission logo\"\n                  }\n                  className={\"aboutLogo\"}\n                />\n              </a>\n              <a href=\"https://www.mapbox.com\">\n                <img\n                  src={mapbox_small}\n                  alt=\"Mapbox logo\"\n                  title={\"Mapbox logo\"}\n                  className={\"aboutLogo\"}\n                />\n              </a>\n            </div>\n          </div>\n        }\n      />\n    );\n  }\n}\n\nexport default AboutDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport MenuItem from \"material-ui/MenuItem\";\n\nclass MenuItemWithButton extends React.Component {\n  render() {\n    return (\n      <MenuItem\n        className={\"smallMenuItem\"}\n        {...this.props}\n        innerDivStyle={{ paddingLeft: \"40px\" }}\n      />\n    );\n  }\n}\n\nexport default MenuItemWithButton;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from \"react\";\nimport { blue300 } from \"material-ui/styles/colors\";\n\nclass TargetIcon extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = { editing: false, localTargetValue: undefined };\n  }\n  onClick(event) {\n    this.startEditing();\n  }\n  isNumber(str) {\n    var pattern = /^\\d+$/;\n    return pattern.test(str); // returns a boolean\n  }\n  onChange(event) {\n    let newValue = event.nativeEvent.target.value;\n    if (newValue > 100) return;\n    if (this.isNumber(newValue) || newValue === \"\") {\n      newValue = newValue === \"\" ? 0 : Number(newValue);\n      this.setState({ localTargetValue: newValue });\n    }\n  }\n  onKeyPress(event) {\n    if (event.nativeEvent.key === \"Enter\") this.setState({ editing: false }); //will trigger the onBlur event of the input box\n  }\n  startEditing() {\n    this.setState({ editing: true, localTargetValue: this.props.target_value });\n    document.getElementById(\"input_\" + this.props.interestFeature.id).focus();\n    document.getElementById(\"input_\" + this.props.interestFeature.id).select();\n  }\n  stopEditing() {\n    this.setState({ editing: false });\n    this.props.updateTargetValue(this, this.state.localTargetValue);\n  }\n  render() {\n    let backgroundColor =\n      this.props.targetStatus === \"Does not occur in planning area\"\n        ? \"lightgray\"\n        : this.props.targetStatus === \"Unknown\"\n        ? \"white\"\n        : this.props.targetStatus === \"Target achieved\"\n        ? \"white\"\n        : \"rgb(255, 64, 129)\";\n    let fontColor =\n      this.props.targetStatus === \"Does not occur in planning area\"\n        ? \"white\"\n        : this.props.targetStatus === \"Unknown\"\n        ? blue300\n        : this.props.targetStatus === \"Target achieved\"\n        ? blue300\n        : \"white\";\n    return (\n      <div\n        onClick={\n          this.props.userRole === \"ReadOnly\" ? null : this.onClick.bind(this)\n        }\n        style={{\n          position: \"absolute\",\n          left: \"0px\",\n          top: \"8px\",\n          display: this.props.visible ? \"block\" : \"none\",\n        }}\n      >\n        <div\n          title={this.props.targetStatus}\n          style={{\n            display: this.state.editing ? \"none\" : \"inline-flex\",\n            backgroundColor: backgroundColor,\n            size: \"0\",\n            color: fontColor,\n            userSelect: \"none\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            fontSize: \"10px\",\n            borderRadius: \"50%\",\n            height: \"27px\",\n            width: \"27px\",\n            left: \"0px\",\n            border: \"1px lightgray solid\",\n          }}\n        >\n          {this.props.target_value}%\n        </div>\n        <div\n          style={{\n            display: this.state.editing ? \"inline-flex\" : \"none\",\n            size: \"30\",\n            backgroundColor: \"#2F6AE4\",\n            userSelect: \"none\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            borderRadius: \"50%\",\n            height: \"27px\",\n            width: \"27px\",\n            left: \"0px\",\n          }}\n        >\n          <input\n            id={\"input_\" + this.props.interestFeature.id}\n            onBlur={this.stopEditing.bind(this)}\n            onKeyPress={this.onKeyPress.bind(this)}\n            onChange={this.onChange.bind(this)}\n            style={{\n              backgroundColor: \"transparent\",\n              border: \"0px\",\n              height: \"27px\",\n              width: \"27px\",\n              fontSize: \"13px\",\n              display: \"inline-flex\",\n              textAlign: \"center\",\n              color: blue300,\n            }}\n            value={this.state.localTargetValue}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default TargetIcon;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from \"react\";\n\nclass LinearGauge extends React.Component {\n  constructor(props) {\n    super(props);\n    //alwaysShowPercent - set to false then if the percent protected is smaller than 30 pixels it will not be shown\n    //showUnprotectedPercent - set to false to not show the unprotected percent\n    //targetAsLine - shows the target as a line - otherwise it is a grey rectangle\n    this.state = {\n      alwaysShowPercent: false,\n      showUnprotectedPercent: false,\n      targetAsLine: false,\n    };\n  }\n  render() {\n    let protectedWidth = 0;\n    let protectedHidden = true;\n    //the scaledWidth is the desired width of the LinearGauge\n    let scaleFactor = this.props.scaledWidth / 100;\n    //the number of pixels from the left hand side to offset the target line\n    let targetPxOffset = this.props.target_value * scaleFactor;\n    //the number of pixels from the left hand side to the protected line\n    protectedWidth = Math.round(\n      this.props.protected_percent === -1\n        ? 0\n        : this.props.protected_percent * scaleFactor\n    );\n    //protected percent text - if protected_percent < target_value then if the rounded protected_percent is the same as the rounded target_value, show the protected_percent to 1dp\n    let protNum = this.props.protected_percent;\n    let percentageProtectedText =\n      protNum < Number(this.props.target_value)\n        ? Math.round(protNum) === Number(this.props.target_value)\n          ? String(protNum).slice(0, String(protNum).indexOf(\".\") + 2)\n          : Math.round(protNum)\n        : Math.round(protNum);\n    //get whether or not the % protected should be visible or hidden\n    protectedHidden = protectedWidth < 26 && !this.state.alwaysShowPercent;\n    //get the width of the target shortfall\n    let targetShortfallWidth =\n      this.props.protected_percent >= this.props.target_value\n        ? 0\n        : targetPxOffset - protectedWidth;\n    //if targetShortfallWidth is less than zero if causes the linear guage to go off-scale\n    targetShortfallWidth = targetShortfallWidth < 0 ? 0 : targetShortfallWidth;\n    //get the width of the rest of the bar\n    let unprotectedWidth =\n      100 * scaleFactor - protectedWidth - targetShortfallWidth;\n    return (\n      <div\n        className={this.props.visible ? \"linearGauge\" : \"linearGaugeNoBorder\"}\n        style={{ opacity: this.props.protected_percent === -1 ? \"0.3\" : 1 }}\n      >\n        <div\n          title={percentageProtectedText + \"% protected\"}\n          className={\"percentBar\"}\n          style={{\n            height: this.props.smallLinearGauge ? \"2px\" : \"18px\",\n            width: protectedWidth + \"px\",\n            backgroundColor: this.props.useFeatureColors\n              ? this.props.color\n              : \"rgb(0, 188, 212)\",\n          }}\n        >\n          {protectedHidden ? (\n            <span>&nbsp;</span>\n          ) : (\n            percentageProtectedText + \"%\"\n          )}\n        </div>\n        <div\n          title={\"Target of \" + this.props.target_value + \"%\"}\n          className={\"percentBar targetShortfall\"}\n          style={{\n            width: this.props.visible ? targetShortfallWidth + \"px\" : \"0px\",\n          }}\n        ></div>\n        <div\n          className={\"percentBar totalShortFall\"}\n          style={{\n            width: unprotectedWidth + \"px\",\n            color: \"rgba(0,0,0,0.7)\",\n            textAlign: this.props.visible ? null : \"left\",\n            fontStyle: this.props.visible ? null : \"italic\",\n          }}\n        >\n          {this.props.visible ? null : \"Does not occur\"}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default LinearGauge;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from \"react\";\nimport { List, ListItem } from \"material-ui/List\";\nimport TargetIcon from \"./TargetIcon\";\nimport { grey400 } from \"material-ui/styles/colors\";\nimport IconButton from \"material-ui/IconButton\";\nimport MoreVertIcon from \"material-ui/svg-icons/navigation/more-vert\";\nimport LinearGauge from \"./LinearGauge\";\n\nclass FeaturesList extends React.Component {\n  iconClick(feature, evt) {\n    this.props.openFeatureMenu(evt, feature);\n  }\n  updateTargetValue(targetIcon, newValue) {\n    this.props.updateFeature(targetIcon.props.interestFeature, {\n      target_value: newValue,\n    });\n  }\n  itemClick(feature, evt) {\n    if (evt.altKey) {\n      //toggle the layers puid visibility\n      feature.feature_puid_layer_loaded = !feature.feature_puid_layer_loaded;\n      //add/remove it from the map\n      this.props.toggleFeaturePUIDLayer(feature);\n    } else {\n      //toggle the layers visibility\n      feature.feature_layer_loaded = !feature.feature_layer_loaded;\n      //add/remove it from the map\n      this.props.toggleFeatureLayer(feature);\n    }\n  }\n  render() {\n    return (\n      <React.Fragment>\n        <List\n          style={{\n            padding: \"0px !important\",\n            maxHeight: this.props.maxheight,\n            overflow: \"auto\",\n          }}\n        >\n          {this.props.features.map((item) => {\n            //get the total area of the feature in the planning unit\n            let pu_area = item.pu_area;\n            //TODO: This needs to be done differently when we are using the old version of Marxan because it does not have a value for the pu_area\n\n            //get the protected percent\n            let protected_percent =\n              item.protected_area === -1\n                ? -1\n                : pu_area >= 0\n                ? item.protected_area > 0\n                  ? (item.protected_area / pu_area) * 100\n                  : 0\n                : 0;\n            //this is a hack to round the protected percent as there are some bugs in Marxan that calculate the target area required wrongly\n            //TODO - sort out\n            // protected_percent = Math.round(protected_percent);\n            let targetStatus =\n              pu_area === 0\n                ? \"Does not occur in planning area\"\n                : protected_percent === -1\n                ? \"Unknown\"\n                : item.protected_area >= item.target_area\n                ? \"Target achieved\"\n                : \"Target missed\";\n            return (\n              <ListItem\n                leftAvatar={\n                  this.props.simple ? (\n                    <span />\n                  ) : (\n                    <TargetIcon\n                      style={{ left: 8 }}\n                      target_value={item.target_value}\n                      updateTargetValue={this.updateTargetValue.bind(this)}\n                      interestFeature={item}\n                      targetStatus={targetStatus}\n                      visible={item.pu_area !== 0}\n                      userRole={this.props.userRole}\n                    />\n                  )\n                }\n                primaryText={item.alias}\n                secondaryText={\n                  this.props.simple ? (\n                    <span />\n                  ) : (\n                    <LinearGauge\n                      scaledWidth={220}\n                      target_value={item.target_value}\n                      protected_percent={protected_percent}\n                      visible={item.pu_area !== 0}\n                      color={item.color}\n                      useFeatureColors={this.props.useFeatureColors}\n                      style={{\n                        height: this.props.smallLinearGauge ? \"3px\" : \"unset\",\n                      }}\n                      smallLinearGauge={this.props.smallLinearGauge}\n                    />\n                  )\n                }\n                key={item.id}\n                value={item.alias}\n                onClick={\n                  this.props.simple ? null : this.itemClick.bind(this, item)\n                }\n                rightIconButton={\n                  this.props.simple ? (\n                    <div />\n                  ) : (\n                    <IconButton\n                      touch={true}\n                      tooltipPosition=\"bottom-left\"\n                      onClick={this.iconClick.bind(this, item)}\n                      style={{\n                        width: \"18\",\n                        height: \"18\",\n                        padding: \"10\",\n                        top: \"10px\",\n                      }}\n                      iconStyle={{ width: \"18\", height: \"18\" }}\n                    >\n                      <MoreVertIcon color={grey400} />\n                    </IconButton>\n                  )\n                }\n                innerDivStyle={{\n                  padding: this.props.simple\n                    ? \"5px 5px 5px 5px\"\n                    : \"6px 5px 2px 40px\",\n                }}\n                style={{\n                  borderRadius: \"3px\",\n                  fontSize: \"13px\",\n                  color: \"rgba(0,0,0,0.8)\",\n                }}\n              />\n            );\n          })}\n        </List>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default FeaturesList;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport ToolbarButton from \"./ToolbarButton\";\nimport FeaturesList from \"./FeaturesList\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCrosshairs } from \"@fortawesome/free-solid-svg-icons\";\n\nclass SelectFeatures extends React.Component {\n  openFeaturesDialog(evt) {\n    this.props.openFeaturesDialog(true);\n  }\n  render() {\n    return (\n      <React.Fragment>\n        <div className={\"newPUDialogPane\"}>\n          <FeaturesList\n            {...this.props}\n            features={this.props.features}\n            openFeatureMenu={this.props.openFeatureMenu}\n            simple={this.props.simple}\n            updateFeature={this.props.updateFeature}\n            userRole={this.props.userRole}\n            toggleFeatureLayer={this.props.toggleFeatureLayer}\n            toggleFeaturePUIDLayer={this.props.toggleFeaturePUIDLayer}\n            useFeatureColors={this.props.useFeatureColors}\n            smallLinearGauge={this.props.smallLinearGauge}\n          />\n          <ToolbarButton\n            onClick={this.props.openTargetDialog}\n            show={\n              this.props.userRole !== \"ReadOnly\" && this.props.showTargetButton\n            }\n            icon={<FontAwesomeIcon icon={faCrosshairs} />}\n            style={{\n              marginLeft: this.props.leftmargin,\n              width: \"30px\",\n              marginTop: \"5px\",\n            }}\n            title={\"Set a target for all features\"}\n          />\n          <ToolbarButton\n            labelStyle={{ paddingLeft: \"6px\", paddingRight: \"6px\" }}\n            label=\"+/-\"\n            onClick={this.openFeaturesDialog.bind(this)}\n            show={\n              !(\n                (this.props.metadata && this.props.metadata.OLDVERSION) ||\n                this.props.userRole === \"ReadOnly\"\n              )\n            }\n            style={{\n              marginLeft: this.props.leftmargin,\n              width: \"30px\",\n              marginTop: \"5px\",\n            }}\n            title={\"Add/remove features from the project\"}\n          />\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default SelectFeatures;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport CONSTANTS from \"./constants\";\nimport \"react-table/react-table.css\";\nimport Paper from \"material-ui/Paper\";\nimport { Tabs, Tab } from \"material-ui/Tabs\";\nimport SelectField from \"material-ui/SelectField\";\nimport SelectFeatures from \"./SelectFeatures\";\nimport MenuItem from \"material-ui/MenuItem\";\nimport Settings from \"material-ui/svg-icons/action/settings\";\nimport ToolbarButton from \"./ToolbarButton\";\nimport Checkbox from \"material-ui/Checkbox\";\nimport Textarea from \"react-textarea-autosize\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faLock } from \"@fortawesome/free-solid-svg-icons\";\nimport { faEraser } from \"@fortawesome/free-solid-svg-icons\";\nimport { faShareAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport { faSave } from \"@fortawesome/free-solid-svg-icons\";\n// import { faExclamationTriangle } from '@fortawesome/free-solid-svg-icons';\n\nclass InfoPanel extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      editingProjectName: false,\n      editingDescription: false,\n      showPlanningGrid: true,\n      showProtectedAreas: false,\n      showCosts: false,\n      showStatuses: true,\n    };\n  }\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    //if the input box for renaming the project has been made visible and it has no value, then initialise it with the project name and focus it\n    if (\n      prevState.editingProjectName === false &&\n      this.state.editingProjectName\n    ) {\n      document.getElementById(\"projectName\").value = this.props.project;\n      document.getElementById(\"projectName\").focus();\n    }\n    //if the input box for renaming the description has been made visible and it has no value, then initialise it with the description and focus it\n    if (\n      prevState.editingDescription === false &&\n      this.state.editingDescription\n    ) {\n      document.getElementById(\n        \"descriptionEdit\"\n      ).value = this.props.metadata.DESCRIPTION;\n      document.getElementById(\"descriptionEdit\").focus();\n    }\n  }\n\n  onKeyPress(e) {\n    if (e.nativeEvent.keyCode === 13 || e.nativeEvent.keyCode === 27) {\n      document.getElementById(e.nativeEvent.target.id).blur(); //call the onBlur event which will call the REST service to rename the project\n    }\n  }\n\n  onBlur(e) {\n    if (e.nativeEvent.target.id === \"projectName\") {\n      this.props.renameProject(e.target.value).then(() => {\n        this.setState({ editingProjectName: false });\n      });\n    } else {\n      this.props.renameDescription(e.target.value).then(() => {\n        this.setState({ editingDescription: false });\n      });\n    }\n  }\n\n  startEditingProjectName() {\n    if (this.props.project) {\n      //a project may not be loaded\n      this.setState({ editingProjectName: true });\n    }\n  }\n  startEditingDescription() {\n    if (this.props.project) {\n      //a project may not be loaded\n      this.setState({ editingDescription: true });\n    }\n  }\n  startStopPuEditSession(evt) {\n    this.props.puEditing ? this.stopPuEditSession() : this.startPuEditSession();\n  }\n  startPuEditSession() {\n    this.setState({ puEditing: true });\n    this.props.startPuEditSession();\n  }\n\n  stopPuEditSession() {\n    this.setState({ puEditing: false });\n    this.props.stopPuEditSession();\n  }\n\n  changeIucnCategory(event, key, payload) {\n    this.props.changeIucnCategory(CONSTANTS.IUCN_CATEGORIES[key]);\n  }\n  changeCostname(event, key, payload) {\n    //get the costname\n    let costname = this.costnames[key];\n    if (costname === \"Custom..\") {\n      this.props.openCostsDialog();\n    } else {\n      //update the cost profile on the server\n      this.props.changeCostname(costname).then((_) => {\n        //load the costs\n        this.props.loadCostsLayer(true);\n      });\n    }\n  }\n  toggleProjectPrivacy(evt, isInputChecked) {\n    let checkedString = isInputChecked ? \"True\" : \"False\";\n    this.props.toggleProjectPrivacy(checkedString);\n  }\n  stopProcess() {\n    this.props.stopProcess(this.props.pid);\n  }\n  togglePlanningUnits(event, isInputChecked) {\n    //toggles the visibility of the planning grid\n    this.setState({ showPlanningGrid: !this.state.showPlanningGrid });\n    this.props.togglePULayer(isInputChecked);\n  }\n  toggleProtectedAreas(event, isInputChecked) {\n    //toggles the visibility of the protected areas\n    this.setState({ showProtectedAreas: !this.state.showProtectedAreas });\n    this.props.togglePALayer(isInputChecked);\n  }\n  toggleCosts(event, isInputChecked) {\n    //toggles the visibility of the costs\n    this.setState({ showCosts: !this.state.showCosts });\n    this.props.toggleCostsLayer(isInputChecked);\n  }\n  toggleStatuses(event, isInputChecked) {\n    //toggles the visibility of the statuses\n    this.setState({ showStatuses: !this.state.showStatuses });\n    this.props.toggleStatuses(isInputChecked);\n  }\n  render() {\n    this.costnames = [];\n    //add a custom item to the end of the cost profiles\n    if (this.props.costnames) {\n      this.costnames = this.props.costnames.slice();\n      this.costnames.push(\"Custom..\");\n    }\n    return (\n      <React.Fragment>\n        <div\n          className={\"infoPanel\"}\n          style={{ display: this.props.open ? \"block\" : \"none\" }}\n        >\n          <Paper zDepth={2} className=\"InfoPanelPaper\">\n            <Paper zDepth={2} className=\"titleBar\">\n              {this.props.userRole === \"ReadOnly\" ? (\n                <span\n                  className={\"projectNameEditBox\"}\n                  title={this.props.project + \" (Read-only)\"}\n                >\n                  <FontAwesomeIcon\n                    style={{\n                      color: \"white\",\n                      height: \"16px\",\n                      marginTop: \"4px\",\n                      marginBottom: \"2px\",\n                      marginRight: \"5px\",\n                    }}\n                    icon={faLock}\n                  />\n                  {this.props.project}\n                </span>\n              ) : (\n                <span\n                  onClick={this.startEditingProjectName.bind(this)}\n                  className={\"projectNameEditBox\"}\n                  title=\"Click to rename the project\"\n                >\n                  {this.props.project}\n                </span>\n              )}\n              {this.props.userRole === \"ReadOnly\" ? null : (\n                <input\n                  id=\"projectName\"\n                  style={{\n                    position: \"absolute\",\n                    display: this.state.editingProjectName ? \"block\" : \"none\",\n                    left: \"39px\",\n                    top: \"32px\",\n                    width: \"365px\",\n                    border: \"1px lightgray solid\",\n                  }}\n                  className={\"projectNameEditBox\"}\n                  onKeyPress={this.onKeyPress.bind(this)}\n                  onBlur={this.onBlur.bind(this)}\n                />\n              )}\n            </Paper>\n            <Tabs\n              contentContainerStyle={{ margin: \"20px\" }}\n              className={\"tabs\"}\n              value={this.props.activeTab}\n              style={{\n                backgroundColor: this.state.puEditing ? \"#eee\" : \"unset\",\n              }}\n            >\n              <Tab\n                label=\"Project\"\n                onActive={this.props.project_tab_active}\n                value=\"project\"\n                disabled={this.props.puEditing ? true : false}\n              >\n                <div>\n                  <div className={\"tabTitle\"}>Description</div>\n                  {this.props.userRole === \"ReadOnly\" ? null : (\n                    <Textarea\n                      minRows={5}\n                      id=\"descriptionEdit\"\n                      style={{\n                        display: this.state.editingDescription\n                          ? \"block\"\n                          : \"none\",\n                      }}\n                      className={\"descriptionEditBox\"}\n                      onKeyPress={this.onKeyPress.bind(this)}\n                      onBlur={this.onBlur.bind(this)}\n                    />\n                  )}\n                  {this.props.userRole === \"ReadOnly\" ? (\n                    <div\n                      className={\"description\"}\n                      title={this.props.metadata.DESCRIPTION}\n                      dangerouslySetInnerHTML={{\n                        __html: this.props.metadata.DESCRIPTION,\n                      }}\n                    />\n                  ) : (\n                    <div\n                      className={\"description\"}\n                      onClick={this.startEditingDescription.bind(this)}\n                      style={{\n                        display: !this.state.editingDescription\n                          ? \"block\"\n                          : \"none\",\n                      }}\n                      title=\"Click to edit\"\n                      dangerouslySetInnerHTML={{\n                        __html: this.props.metadata.DESCRIPTION,\n                      }}\n                    />\n                  )}\n                  <div className={\"tabTitle tabTitleTopMargin\"}>Created</div>\n                  <div className={\"createDate\"}>\n                    {this.props.metadata.CREATEDATE}\n                  </div>\n                  <div\n                    style={{\n                      display:\n                        this.props.user !== this.props.owner ? \"block\" : \"none\",\n                    }}\n                  >\n                    <div className={\"tabTitle tabTitleTopMargin\"}>\n                      Created by\n                    </div>\n                    <div className={\"createDate\"}>{this.props.owner}</div>\n                  </div>\n                  <div className={\"tabTitle tabTitleTopMargin\"}>\n                    {this.props.metadata.OLDVERSION ? \"Imported project\" : \"\"}\n                  </div>\n                  <div\n                    style={{\n                      position: \"absolute\",\n                      top: \"413px\",\n                      display:\n                        this.props.userRole === \"ReadOnly\" ? \"none\" : \"block\",\n                    }}\n                  >\n                    <Checkbox\n                      label=\"Private\"\n                      style={{ fontSize: \"12px\" }}\n                      checked={this.props.metadata.PRIVATE}\n                      onCheck={this.toggleProjectPrivacy.bind(this)}\n                    />\n                  </div>\n                </div>\n              </Tab>\n              <Tab\n                label=\"Features\"\n                onActive={this.props.features_tab_active}\n                value=\"features\"\n                disabled={this.props.puEditing ? true : false}\n              >\n                <SelectFeatures\n                  features={this.props.features}\n                  openFeatureMenu={this.props.openFeatureMenu}\n                  openFeaturesDialog={this.props.openFeaturesDialog}\n                  metadata={this.props.metadata}\n                  updateFeature={this.props.updateFeature}\n                  leftmargin={\"10px\"}\n                  maxheight={\"409px\"}\n                  simple={false}\n                  showTargetButton={true}\n                  openTargetDialog={this.props.openTargetDialog}\n                  userRole={this.props.userRole}\n                  toggleFeatureLayer={this.props.toggleFeatureLayer}\n                  toggleFeaturePUIDLayer={this.props.toggleFeaturePUIDLayer}\n                  useFeatureColors={this.props.useFeatureColors}\n                  smallLinearGauge={this.props.smallLinearGauge}\n                />\n              </Tab>\n              <Tab\n                label=\"Planning units\"\n                onActive={this.props.pu_tab_active}\n                value=\"planning_units\"\n              >\n                <div>\n                  <div>\n                    <div className={\"tabTitle tabTitleInlineBlock\"}>\n                      Planning Grid\n                    </div>\n                  </div>\n                  <div className={\"description\"}>\n                    {this.props.metadata.pu_alias}\n                  </div>\n                  <div>\n                    <div className={\"tabTitle tabTitleTopMargin\"}>Statuses</div>\n                  </div>\n                  <div\n                    style={{\n                      display:\n                        this.props.userRole === \"ReadOnly\" ? \"none\" : \"block\",\n                    }}\n                  >\n                    <div className={\"puManualEditContainer\"}>\n                      <FontAwesomeIcon\n                        icon={this.props.puEditing ? faSave : faLock}\n                        onClick={this.startStopPuEditSession.bind(this)}\n                        title={this.props.puEditing ? \"Save\" : \"Manually edit\"}\n                        style={{\n                          cursor: \"pointer\",\n                          marginLeft: \"3px\",\n                          marginRight: \"10px\",\n                          color: \"rgba(255, 64, 129, 0.7)\",\n                        }}\n                      />\n                      <div\n                        style={{\n                          display: this.props.puEditing\n                            ? \"inline-block\"\n                            : \"none\",\n                        }}\n                        className={\"puManualEditClear\"}\n                      >\n                        <FontAwesomeIcon\n                          icon={faEraser}\n                          onClick={this.props.clearManualEdits.bind(this)}\n                          title={\"Clear all manual edits\"}\n                          style={{\n                            cursor: \"pointer\",\n                            color: \"rgba(255, 64, 129, 0.7)\",\n                          }}\n                        />\n                      </div>\n                      <div\n                        className={\"description\"}\n                        style={{\n                          display: \"inline-block\",\n                          fontSize: \"12px\",\n                          paddingLeft: \"7px\",\n                        }}\n                      >\n                        {this.props.puEditing\n                          ? \"Click on the map to change the status\"\n                          : \"Manually edit\"}\n                      </div>\n                    </div>\n                  </div>\n                  <SelectField\n                    floatingLabelText={\"Lock in protected areas\"}\n                    floatingLabelFixed={true}\n                    underlineShow={false}\n                    disabled={\n                      this.props.preprocessing ||\n                      this.props.userRole === \"ReadOnly\"\n                    }\n                    menuItemStyle={{ fontSize: \"12px\" }}\n                    labelStyle={{ fontSize: \"12px\" }}\n                    style={{ marginTop: \"-14px\", width: \"180px\" }}\n                    value={this.props.metadata.IUCN_CATEGORY}\n                    onChange={this.changeIucnCategory.bind(this)}\n                    children={CONSTANTS.IUCN_CATEGORIES.map((item) => {\n                      return (\n                        <MenuItem\n                          value={item}\n                          key={item}\n                          primaryText={item}\n                          style={{ fontSize: \"12px\" }}\n                        />\n                      );\n                    })}\n                  />\n                  {/*<FontAwesomeIcon icon={faExclamationTriangle} style={{color:'red', display:(this.props.metadata.IUCN_CATEGORY!=='None' && this.props.protected_area_intersections && this.props.protected_area_intersections.length===0) ? 'inline' : 'none', position:'absolute'}} title={'Protected areas have been updated since you locked these ones in'}/>*/}\n                  <div>\n                    <div className={\"tabTitle\"}>Costs</div>\n                  </div>\n                  <SelectField\n                    floatingLabelText={\"Use cost surface\"}\n                    floatingLabelFixed={true}\n                    underlineShow={false}\n                    disabled={\n                      this.props.preprocessing ||\n                      this.props.userRole === \"ReadOnly\"\n                    }\n                    menuItemStyle={{ fontSize: \"12px\" }}\n                    labelStyle={{ fontSize: \"12px\" }}\n                    style={{ marginTop: \"-14px\", width: \"230px\" }}\n                    value={this.props.costname}\n                    onChange={this.changeCostname.bind(this)}\n                    children={this.costnames.map((item) => {\n                      return (\n                        <MenuItem\n                          value={item}\n                          key={item}\n                          primaryText={item}\n                          style={{ fontSize: \"12px\" }}\n                        />\n                      );\n                    })}\n                  />\n                </div>\n              </Tab>\n            </Tabs>\n            <Paper className={\"lowerToolbar\"}>\n              <ToolbarButton\n                icon={<FontAwesomeIcon icon={faShareAlt} />}\n                title={\"Get a shareable link to this project\"}\n                onClick={this.props.getShareableLink}\n                show={this.props.marxanServer.type === \"remote\"}\n              />\n              <ToolbarButton\n                icon={<Settings style={{ height: \"20px\", width: \"20px\" }} />}\n                title=\"Run Settings\"\n                onClick={this.props.showRunSettingsDialog}\n              />\n              <div className=\"toolbarSpacer\" />\n              <ToolbarButton\n                label=\"Stop\"\n                title=\"Click to stop the current run\"\n                show={this.props.userRole !== \"ReadOnly\"}\n                style={{ marginLeft: \"194px\" }}\n                onClick={this.stopProcess.bind(this)}\n                disabled={this.props.pid === 0}\n                secondary={true}\n              />\n              <ToolbarButton\n                label=\"Run\"\n                title=\"Click to run this project\"\n                show={this.props.userRole !== \"ReadOnly\"}\n                onClick={this.props.runMarxan}\n                disabled={\n                  this.props.preprocessing ||\n                  this.props.features.length === 0 ||\n                  this.props.puEditing\n                }\n                secondary={true}\n              />\n            </Paper>\n          </Paper>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default InfoPanel;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport Slider from \"material-ui/Slider\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faEye } from \"@fortawesome/free-regular-svg-icons\";\nimport { faEyeSlash } from \"@fortawesome/free-regular-svg-icons\";\n\nclass TransparencyControl extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showSlider: false,\n    };\n    this.old_opacity = 0.5;\n  }\n  onChange(evt, newValue) {\n    //set a local property to capture the old opacity\n    this.old_opacity = this.props.opacity;\n    this.props.changeOpacity(newValue);\n  }\n\n  toggleLayer() {\n    //see if the layer is currently visible\n    if (this.props.opacity > 0) {\n      //hide the layer\n      this.onChange(undefined, 0);\n    } else {\n      //show the layer\n      this.onChange(undefined, this.old_opacity);\n    }\n  }\n  mouseEnter(event) {\n    this.setState({\n      showSlider: true,\n    });\n  }\n\n  mouseLeave(event) {\n    this.setState({\n      showSlider: false,\n    });\n  }\n\n  render() {\n    return (\n      <div\n        className={\"transparencyControl\"}\n        onMouseEnter={this.mouseEnter.bind(this)}\n        onMouseLeave={this.mouseLeave.bind(this)}\n        title={\"Click to toggle visibility\"}\n      >\n        <div className={\"opacityToggleContainer\"}>\n          <FontAwesomeIcon\n            icon={this.props.opacity === 0 ? faEyeSlash : faEye}\n            style={{ color: \"gainsboro\" }}\n            onClick={this.toggleLayer.bind(this)}\n          />\n        </div>\n        <Slider\n          value={this.props.opacity}\n          onChange={this.onChange.bind(this)}\n          className={\"opacitySlider\"}\n          style={{\n            display: this.state.showSlider ? \"inline-block\" : \"none\",\n            width: \"100px\",\n          }}\n          sliderStyle={{ margin: \"0px\" }}\n        />\n      </div>\n    );\n  }\n}\n\nexport default TransparencyControl;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport Hexagon from \"react-hexagon\";\n\nclass Swatch extends React.Component {\n  render() {\n    //get a slightly wider line if the fill-color is not specified\n    let lineWidth = this.props.item.fillColor === \"none\" ? \"1.5px\" : \"1px\";\n    switch (this.props.shape) {\n      case \"hexagon\":\n        return (\n          <div className={\"hexDiv\"}>\n            <Hexagon\n              className={\"hexLegendItem\"}\n              style={{\n                fill: this.props.item.fillColor,\n                stroke: this.props.item.strokeColor,\n                strokeWidth: 30,\n              }}\n            />\n          </div>\n        );\n      default:\n        return (\n          <div\n            style={{\n              backgroundColor: this.props.item.fillColor,\n              width: \"14px\",\n              height: \"16px\",\n              border: this.props.item.strokeColor + \" \" + lineWidth + \" solid\",\n              margin: \"3px\",\n              display: \"inline-flex\",\n              verticalAlign: \"top\",\n            }}\n          ></div>\n        );\n    }\n  }\n}\n\nexport default Swatch;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from \"react\";\nimport TransparencyControl from \"./TransparencyControl\";\nimport Swatch from \"./Swatch\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCog } from \"@fortawesome/free-solid-svg-icons\";\nimport Sync from \"material-ui/svg-icons/notification/sync\";\n\nclass LayerLegend extends React.Component {\n  constructor(props) {\n    super(props);\n    //set the initial opacity of the layer based on the layers paint property or for legends with subLayers, the first layers opacity\n    let layer = this.props.hasOwnProperty(\"subLayers\")\n      ? this.props.subLayers[0]\n      : this.props.layer;\n    let opacity = 0;\n    switch (layer.type) {\n      case \"fill\":\n        opacity = layer.paint[\"fill-opacity\"];\n        break;\n      case \"line\":\n        opacity = layer.paint[\"line-opacity\"];\n        break;\n      default:\n      // code\n    }\n    this.state = { opacity: opacity };\n  }\n  changeOpacity(opacity) {\n    //set the state\n    this.setState({ opacity: opacity });\n    //the layer legend may in fact represent many separate layers (e.g. for features) - these are passed in as subLayers and each needs to have the opacity set\n    if (this.props.hasOwnProperty(\"subLayers\")) {\n      this.props.subLayers.forEach((layer) => {\n        this.props.changeOpacity(layer.id, opacity);\n      });\n    } else {\n      //call the change opacity method on a single layer - this actually changes the opacity of the layer\n      this.props.changeOpacity(this.props.layer.id, opacity);\n    }\n  }\n  renderItems() {\n    //iterate through the items in this layers legend\n    return this.props.items.map((item, index) => {\n      //get a unique key\n      let key = \"legend_\" + this.props.layer.id + \"_item_\" + index;\n      //if the legend is showing a range in values then put in a horizontal separator between the items\n      let separator =\n        this.props.range && index === 1 ? (\n          <div className={\"separator\"}>-</div>\n        ) : null;\n      return (\n        <div\n          key={key}\n          style={{ display: this.props.range ? \"inline\" : \"block\" }}\n        >\n          {separator}\n          <Swatch item={item} key={key} shape={this.props.shape} />\n          <div\n            style={{\n              display: \"inline-flex\",\n              verticalAlign: \"top\",\n              marginLeft: \"7px\",\n              fontSize: \"12px\",\n            }}\n            key={key + \"_label\"}\n          >\n            {item.label}\n          </div>\n        </div>\n      );\n    });\n  }\n  render() {\n    //get the items to render - if the layer is loading then get a spinner\n    let items = this.props.loading ? (\n      <Sync\n        className=\"spin costsLayerSpinner\"\n        style={{ display: this.props.loading ? \"inline-block\" : \"none\" }}\n        key={\"costsspinner\"}\n      />\n    ) : (\n      this.renderItems()\n    );\n    //set symbology button\n    let setSymbologyBtn = this.props.hasOwnProperty(\"setSymbology\") ? (\n      <FontAwesomeIcon\n        className={\"setSymbologyBtn\"}\n        icon={faCog}\n        style={{ color: \"gainsboro\" }}\n        onClick={this.props.setSymbology}\n        title={\"Configure symbology\"}\n      />\n    ) : null;\n    return (\n      <React.Fragment>\n        <div\n          className={\"tabTitle tabTitleInlineBlock\"}\n          style={{\n            marginTop: this.props.hasOwnProperty(\"topMargin\")\n              ? this.props.topMargin\n              : \"unset\",\n          }}\n          key={\"legend_\" + this.props.layer.id}\n        >\n          {this.props.layer.metadata.name}\n        </div>\n        {setSymbologyBtn}\n        <TransparencyControl\n          changeOpacity={this.changeOpacity.bind(this)}\n          opacity={this.state.opacity}\n        />\n        <div>{items}</div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default LayerLegend;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from \"react\";\nimport CONSTANTS from \"./constants\";\nimport { getMaxNumberOfClasses } from \"./Helpers.js\";\nimport LayerLegend from \"./LayerLegend\";\n\nclass MapLegend extends React.Component {\n  //gets the summed solutions legend item\n  getSummedSolution(layer, colorCode) {\n    let items;\n    //get the data value for the highest break in the data to see if we are viewing the sum solutions or an individual solution\n    let summed =\n      this.props.brew.breaks[this.props.brew.breaks.length - 1] === 1\n        ? false\n        : true;\n    if (summed) {\n      //get the number of classes the user currently has selected\n      let numClasses = this.props.brew.getNumClasses();\n      //get the maximum number of colors in this scheme\n      let colorSchemeLength = getMaxNumberOfClasses(this.props.brew, colorCode);\n      //get the color scheme\n      let colorScheme = this.props.brew.colorSchemes[colorCode];\n      //get the number of colors to show as an array\n      let numClassesArray =\n        numClasses <= colorSchemeLength\n          ? Array.apply(null, {\n              length: numClasses,\n            }).map(Number.call, Number)\n          : Array.apply(null, {\n              length: colorSchemeLength,\n            }).map(Number.call, Number);\n      let classesToShow = numClassesArray.length;\n      //get the legend items\n      items = numClassesArray.map((item) => {\n        //see if the data is a range - if the difference in the number of solutions is only 1, then it is not a range\n        let range =\n          this.props.brew.breaks[item + 1] - this.props.brew.breaks[item] > 1\n            ? true\n            : false;\n        let suffix =\n          this.props.brew.breaks[item + 1] === 1 ? \" solution\" : \" solutions\";\n        let legendLabel = range\n          ? this.props.brew.breaks[item] +\n            1 +\n            \" - \" +\n            this.props.brew.breaks[item + 1] +\n            suffix\n          : this.props.brew.breaks[item + 1] + suffix;\n        return {\n          layer: layer,\n          fillColor: colorScheme[classesToShow][item],\n          strokeColor: \"lightgray\",\n          label: legendLabel,\n        };\n      });\n      //return the items\n      return items;\n    } else {\n      //viewing a single solution rather than the sum solution\n      return [\n        {\n          fillColor: \"rgba(255, 0, 136,1)\",\n          strokeColor: \"lightgray\",\n          label: \"Proposed network\",\n        },\n      ];\n    }\n  }\n\n  render() {\n    let layers = [];\n    //get the planning grid shape\n    this.planning_grid_shape =\n      this.props.metadata &&\n      this.props.metadata.PLANNING_UNIT_NAME &&\n      this.props.metadata.PLANNING_UNIT_NAME.includes(\"hexagon\")\n        ? \"hexagon\"\n        : \"square\";\n    //move the costs layer to the end of the map legend - first see if it is present\n    let costLayers = this.props.visibleLayers.filter(\n      (item) => item.id === CONSTANTS.COSTS_LAYER_NAME\n    );\n    //cost layer present - move it to the end of the array\n    if (costLayers.length) {\n      //get the other layers\n      layers = this.props.visibleLayers.filter(\n        (item) => item.id !== CONSTANTS.COSTS_LAYER_NAME\n      );\n      //append the cost layer to the end\n      layers.push(costLayers[0]);\n    } else {\n      layers = this.props.visibleLayers;\n    }\n    //get the legend items for non-feature layers\n    let nonFeatureLegendItems = layers.map((layer) => {\n      //get a unique key\n      let key = \"legend_\" + layer.id;\n      //create the legend for non-feature layers\n      if (layer.metadata.type !== CONSTANTS.LAYER_TYPE_FEATURE_LAYER) {\n        switch (layer.metadata.type) {\n          case CONSTANTS.LAYER_TYPE_SUMMED_SOLUTIONS: //get the summed solutions legend\n            let items =\n              this.props.brew &&\n              this.props.brew.breaks &&\n              this.props.brew.colorCode\n                ? this.getSummedSolution(layer, this.props.brew.colorCode)\n                : [];\n            return (\n              <LayerLegend\n                key={key}\n                topMargin={\"15px\"}\n                changeOpacity={this.props.changeOpacity}\n                layer={layer}\n                items={items}\n                shape={this.planning_grid_shape}\n                setSymbology={this.props.openClassificationDialog}\n              />\n            );\n          case CONSTANTS.LAYER_TYPE_PLANNING_UNITS_COST:\n            let minColor = layer.paint[\"fill-color\"][3]; //min paint color\n            let maxColor =\n              layer.paint[\"fill-color\"][layer.paint[\"fill-color\"].length - 2]; //max paint color\n            //if the min and max costs are the same only create a single legend item\n            if (layer.metadata.min === layer.metadata.max) {\n              return (\n                <LayerLegend\n                  key={key}\n                  loading={this.props.costsLoading}\n                  topMargin={\"15px\"}\n                  changeOpacity={this.props.changeOpacity}\n                  layer={layer}\n                  items={[\n                    {\n                      fillColor: minColor,\n                      strokeColor: \"lightgray\",\n                      label: layer.metadata.min,\n                    },\n                  ]}\n                  shape={this.planning_grid_shape}\n                />\n              );\n            } else {\n              return (\n                <LayerLegend\n                  key={key}\n                  loading={this.props.costsLoading}\n                  topMargin={\"15px\"}\n                  changeOpacity={this.props.changeOpacity}\n                  layer={layer}\n                  items={[\n                    {\n                      fillColor: minColor,\n                      strokeColor: \"lightgray\",\n                      label: layer.metadata.min,\n                    },\n                    {\n                      fillColor: maxColor,\n                      strokeColor: \"lightgray\",\n                      label: layer.metadata.max,\n                    },\n                  ]}\n                  shape={this.planning_grid_shape}\n                  range={true}\n                />\n              );\n            }\n          case CONSTANTS.LAYER_TYPE_PLANNING_UNITS_STATUS:\n            //get the layers that will be subLayers in the legend\n            let puLayer = layers.filter(\n              (layer) => layer.id === CONSTANTS.PU_LAYER_NAME\n            )[0];\n            let puStatusLayer = layers.filter(\n              (layer) => layer.id === CONSTANTS.STATUS_LAYER_NAME\n            )[0];\n            return (\n              <LayerLegend\n                key={key}\n                topMargin={\"15px\"}\n                changeOpacity={this.props.changeOpacity}\n                layer={layer}\n                subLayers={[puLayer, puStatusLayer]}\n                items={[\n                  CONSTANTS.PU_STATUS_DEFAULT,\n                  CONSTANTS.PU_STATUS_LOCKED_IN,\n                  CONSTANTS.PU_STATUS_LOCKED_OUT,\n                ]}\n                shape={this.planning_grid_shape}\n              />\n            );\n          case CONSTANTS.LAYER_TYPE_PROTECTED_AREAS:\n            return (\n              <LayerLegend\n                key={key}\n                changeOpacity={this.props.changeOpacity}\n                layer={layer}\n                items={[\n                  {\n                    fillColor: \"rgba(63,127,191)\",\n                    strokeColor: \"lightgray\",\n                    label: \"Marine\",\n                  },\n                  {\n                    fillColor: \"rgba(99,148,69)\",\n                    strokeColor: \"lightgray\",\n                    label: \"Terrestrial\",\n                  },\n                ]}\n                shape={\"square\"}\n              />\n            );\n          default:\n            return null;\n        }\n      } else {\n        return null;\n      }\n    });\n    //get any feature legend items - these are combined into a single legend - first populate the legend items for each feature\n    let featureLayers = layers.filter(\n      (layer) => layer.metadata.type === CONSTANTS.LAYER_TYPE_FEATURE_LAYER\n    );\n    //populate the colors of the feature swatches and their labels\n    let items = featureLayers.map((layer) => {\n      return {\n        fillColor: layer.paint[\"fill-color\"],\n        strokeColor: \"lightgray\",\n        label: layer.metadata.name,\n      };\n    });\n    //sort the items by label\n    items.sort((a, b) => {\n      if (a.label.toLowerCase() < b.label.toLowerCase()) return -1;\n      if (a.label.toLowerCase() > b.label.toLowerCase()) return 1;\n      return 0;\n    });\n    //now create the legend for features\n    let featureLegendItems =\n      items.length > 0 ? (\n        <LayerLegend\n          topMargin={\"15px\"}\n          changeOpacity={this.props.changeOpacity}\n          layer={{ metadata: { name: \"Features\" } }}\n          subLayers={featureLayers}\n          items={items}\n          shape={\"square\"}\n        />\n      ) : null;\n    //get any feature planning unit legend items - these are combined into a single legend - first populate the legend items for each feature planning unit\n    let featurePUIDLayers = layers.filter(\n      (layer) =>\n        layer.metadata.type === CONSTANTS.LAYER_TYPE_FEATURE_PLANNING_UNIT_LAYER\n    );\n    //populate the colors of the feature planning grid swatches and their labels\n    items = featurePUIDLayers.map((layer) => {\n      return {\n        fillColor: \"none\",\n        strokeColor: layer.metadata.lineColor,\n        label: layer.metadata.name,\n      };\n    });\n    //now create the legend for feature planning grids\n    let featurePUIDLegendItems =\n      items.length > 0 ? (\n        <LayerLegend\n          topMargin={\"15px\"}\n          changeOpacity={this.props.changeOpacity}\n          layer={{ metadata: { name: \"Planning units for features\" } }}\n          subLayers={featurePUIDLayers}\n          items={items}\n          shape={this.planning_grid_shape}\n        />\n      ) : null;\n    return (\n      <React.Fragment>\n        {nonFeatureLegendItems}\n        {featureLegendItems}\n        {featurePUIDLegendItems}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default MapLegend;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faExclamationTriangle } from \"@fortawesome/free-solid-svg-icons\";\nimport { faCheckCircle } from \"@fortawesome/free-solid-svg-icons\";\nimport { faArrowAltCircleRight } from \"@fortawesome/free-solid-svg-icons\";\nimport Sync from \"material-ui/svg-icons/notification/sync\";\n\nclass Log extends React.Component {\n  render() {\n    return (\n      <div className={this.props.className}>\n        {/*spinner*/}\n        <Sync\n          className=\"spin\"\n          style={{\n            display:\n              this.props.message.status === \"Preprocessing\" ? \"inline\" : \"none\",\n            height: \"16px\",\n            width: \"16px\",\n            verticalAlign: \"sub\",\n            color: \"rgb(255, 64, 129)\",\n            marginRight: \"6px\",\n          }}\n          title={this.props.message.info}\n        />\n        {/*preprocessing complete*/}\n        <FontAwesomeIcon\n          icon={faCheckCircle}\n          style={{\n            display:\n              this.props.message.status === \"Finished\" &&\n              !this.props.message.hasOwnProperty(\"error\")\n                ? \"inline\"\n                : \"none\",\n            color: \"green\",\n            marginRight: \"6px\",\n          }}\n          title={\"Preprocessing completed\"}\n        />\n        {/*upload complete*/}\n        <FontAwesomeIcon\n          icon={faArrowAltCircleRight}\n          style={{\n            display:\n              this.props.message.status === \"UploadComplete\"\n                ? \"inline\"\n                : \"none\",\n            color: \"green\",\n            marginRight: \"6px\",\n          }}\n          title={\"Upload complete\"}\n        />\n        {/*error*/}\n        <FontAwesomeIcon\n          icon={faExclamationTriangle}\n          style={{\n            color: \"red\",\n            display: this.props.message.hasOwnProperty(\"error\")\n              ? \"inline\"\n              : \"none\",\n            marginRight: \"6px\",\n          }}\n          title={this.props.message.info}\n        />\n        {/*all other messages*/}\n        <div\n          style={{ display: \"inline\" }}\n          dangerouslySetInnerHTML={{ __html: this.props.message.info }}\n        />\n        {/*timestamp*/}\n        <div\n          className=\"timestamp\"\n          style={{\n            display: this.props.className.includes(\"logFinish\")\n              ? \"inline\"\n              : \"none\",\n          }}\n        >\n          {this.props.message.hasOwnProperty(\"timestamp\")\n            ? this.props.message.timestamp.toLocaleString()\n            : \"\"}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Log;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from \"react\";\nimport LogItem from \"./LogItem\";\n\nclass Log extends React.Component {\n  render() {\n    let children = this.props.messages.map((message, index) => {\n      let className = \"\";\n      //message cleaning and formatting\n      switch (message.status) {\n        case \"RunningMarxan\": //from marxan runs - remove all the double line endings\n          className = \"logItem logMessage\";\n          Object.assign(message, {\n            info: message.info\n              .replace(/(\\n\\n {2}Init)/gm, \"\\n  Init\")\n              .replace(/(\\n\\n {2}ThermalAnnealing)/gm, \"\\n  ThermalAnnealing\")\n              .replace(/(\\n\\n {2}Iterative)/gm, \"\\n  Iterative\")\n              .replace(/(\\n\\n {2}Best)/gm, \"\\n  Best\"),\n          });\n          break;\n        case \"Started\":\n        case \"Uploading\":\n          className = \"logItem logStart\";\n          break;\n        case \"Preprocessing\":\n        case \"FeatureCreated\":\n          className = \"logItem logMessageBlock\";\n          break;\n        case \"Finished\":\n        case \"UploadComplete\":\n        case \"UploadFailed\":\n          className = \"logItem logFinish\";\n          break;\n        default:\n          className = \"logItem logNone\";\n          break;\n      }\n      //if there is an error, then set that as the message\n      if (message.hasOwnProperty(\"error\"))\n        Object.assign(message, { info: message.error });\n      return (\n        <LogItem\n          message={message}\n          key={index}\n          preprocessing={this.props.preprocessing}\n          className={className}\n        />\n      );\n    });\n    return (\n      <div\n        id=\"log\"\n        onMouseEnter={this.props.mouseEnter}\n        onMouseLeave={this.props.mouseLeave}\n      >\n        {children}\n      </div>\n    );\n  }\n}\n\nexport default Log;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport ToolbarButton from \"./ToolbarButton\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faEraser } from \"@fortawesome/free-solid-svg-icons\";\nimport ReactTable from \"react-table\";\nimport Paper from \"material-ui/Paper\";\nimport { Tabs, Tab } from \"material-ui/Tabs\";\nimport MapLegend from \"./MapLegend\";\nimport Log from \"./Log\";\nimport Clipboard from \"material-ui/svg-icons/action/assignment\";\nimport Sync from \"material-ui/svg-icons/notification/sync\";\n\nlet runtime = 0;\n\nclass ResultsPanel extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showClipboard: false,\n      selectedSolution: undefined,\n      runtimeStr: \"00:00s\",\n    };\n  }\n  componentDidUpdate(prevProps, prevState) {\n    //scroll the log div to the bottom\n    // if (this.props.messages.length !== prevProps.messages.length) {\n    // \tvar objDiv = document.getElementById(\"log\");\n    // \tif (objDiv) objDiv.scrollTop = objDiv.scrollHeight;\n    // }\n    var objDiv = document.getElementById(\"log\");\n    if (objDiv) objDiv.scrollTop = objDiv.scrollHeight;\n    if (this.props.solutions !== prevProps.solutions) {\n      this.resetSolution(); //unselect a solution\n    }\n    if (\n      this.props &&\n      this.props.preprocessing &&\n      prevProps &&\n      !prevProps.preprocessing\n    )\n      this.startTimer();\n    if (\n      prevProps &&\n      prevProps.preprocessing &&\n      this.props &&\n      !this.props.preprocessing\n    )\n      this.stopTimer();\n  }\n  str_pad_left(string, pad, length) {\n    return (new Array(length + 1).join(pad) + string).slice(-length);\n  }\n  startTimer() {\n    runtime = 0;\n    this.timer = setInterval(() => {\n      var minutes = Math.floor(runtime / 60);\n      var seconds = runtime - minutes * 60;\n      var finalTime =\n        this.str_pad_left(minutes, \"0\", 2) +\n        \":\" +\n        this.str_pad_left(seconds, \"0\", 2);\n      this.setState({ runtimeStr: finalTime });\n      runtime = runtime + 1;\n    }, 1000);\n  }\n  stopTimer() {\n    //clear the timer\n    clearInterval(this.timer);\n    this.timer = null;\n  }\n  loadSolution(solution) {\n    //loads the solution using the projects owner\n    this.props.loadSolution(solution, this.props.owner);\n  }\n\n  mouseEnter(event) {\n    this.setState({ showClipboard: true });\n  }\n\n  mouseLeave(event) {\n    if (event.relatedTarget.id !== \"buttonsDiv\")\n      this.setState({ showClipboard: false });\n  }\n\n  selectText(node) {\n    node = document.getElementById(node);\n    if (document.body.createTextRange) {\n      const range = document.body.createTextRange();\n      range.moveToElementText(node);\n      range.select();\n    } else if (window.getSelection) {\n      const selection = window.getSelection();\n      const range = document.createRange();\n      range.selectNodeContents(node);\n      selection.removeAllRanges();\n      selection.addRange(range);\n    } else {\n      console.warn(\"Could not select text in node: Unsupported browser.\");\n    }\n  }\n\n  copyLog(evt) {\n    this.selectText(\"log\");\n    evt.target.focus();\n    document.execCommand(\"copy\");\n  }\n\n  //resets the currently selected solution\n  resetSolution() {\n    if (this.state.selectedSolution) this.changeSolution(undefined, undefined);\n  }\n\n  //fired in the onClick event handler of the react table\n  changeSolution(event, solution) {\n    this.setState({ selectedSolution: solution });\n    if (solution) this.loadSolution(solution.Run_Number);\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <div\n          style={{\n            width: \"300px\",\n            height: \"400px\",\n            position: \"absolute\",\n            right: \"140px\",\n            display: this.props.open ? \"block\" : \"none\",\n          }}\n        >\n          <Paper zDepth={2} className=\"ResultsPanelPaper\">\n            <div className=\"resultsTitle\">Results</div>\n            <Tabs\n              contentContainerStyle={{ margin: \"20px\" }}\n              className={\"resultsTabs\"}\n              value={this.props.activeResultsTab}\n              id=\"resultsTabs\"\n            >\n              <Tab\n                label=\"Legend\"\n                value=\"legend\"\n                onActive={() => this.props.setActiveTab(\"legend\")}\n              >\n                <div className={\"legendTab\"}>\n                  <MapLegend {...this.props} brew={this.props.brew} />\n                </div>\n              </Tab>\n              <Tab\n                label=\"Solutions\"\n                value=\"solutions\"\n                onActive={() => this.props.setActiveTab(\"solutions\")}\n              >\n                <div\n                  id=\"solutionsPanel\"\n                  style={{ display: !this.props.processing ? \"block\" : \"none\" }}\n                >\n                  {this.props.solutions && this.props.solutions.length > 0 ? (\n                    <ReactTable\n                      thisRef={this}\n                      getTrProps={(state, rowInfo, column, instance) => {\n                        return {\n                          onClick: (e) => {\n                            state.thisRef.changeSolution(e, rowInfo.original);\n                          },\n                          style: {\n                            background:\n                              rowInfo.original.Run_Number ===\n                              (state.thisRef.state.selectedSolution &&\n                                state.thisRef.state.selectedSolution.Run_Number)\n                                ? \"aliceblue\"\n                                : \"\",\n                          },\n                          title: \"Click to show on the map\",\n                        };\n                      }}\n                      className={\"solutions_infoTable -highlight\"}\n                      showPagination={false}\n                      minRows={0}\n                      pageSize={this.props.solutions.length}\n                      noDataText=\"\"\n                      data={this.props.solutions}\n                      columns={[\n                        {\n                          Header: \"Run\",\n                          accessor: \"Run_Number\",\n                          width: 40,\n                          headerStyle: { textAlign: \"left\" },\n                        },\n                        {\n                          Header: \"Score\",\n                          accessor: \"Score\",\n                          width: 80,\n                          headerStyle: { textAlign: \"left\" },\n                        },\n                        {\n                          Header: \"Cost\",\n                          accessor: \"Cost\",\n                          width: 80,\n                          headerStyle: { textAlign: \"left\" },\n                        },\n                        {\n                          Header: \"Planning Units\",\n                          accessor: \"Planning_Units\",\n                          width: 50,\n                          headerStyle: { textAlign: \"left\" },\n                        },\n                        {\n                          Header: \"Missing Values\",\n                          accessor: \"Missing_Values\",\n                          width: 105,\n                          headerStyle: { textAlign: \"left\" },\n                        },\n                      ]}\n                    />\n                  ) : null}\n                </div>\n              </Tab>\n              <Tab\n                label=\"Log\"\n                value=\"log\"\n                onActive={() => this.props.setActiveTab(\"log\")}\n                style={{\n                  display:\n                    this.props.userRole === \"ReadOnly\" ? \"none\" : \"block\",\n                }}\n              >\n                <Log\n                  messages={this.props.messages}\n                  id=\"log\"\n                  mouseEnter={this.mouseEnter.bind(this)}\n                  mouseLeave={this.mouseLeave.bind(this)}\n                  preprocessing={this.props.preprocessing}\n                />\n                <div\n                  id=\"buttonsDiv\"\n                  style={{\n                    position: \"absolute\",\n                    top: \"430px\",\n                    right: \"16px\",\n                    padding: \"10px\",\n                  }}\n                >\n                  <ToolbarButton\n                    icon={\n                      <Clipboard style={{ height: \"20px\", width: \"20px\" }} />\n                    }\n                    title=\"Copy to clipboard\"\n                    onClick={this.copyLog.bind(this)}\n                    show={this.state.showClipboard}\n                  />\n                  <ToolbarButton\n                    icon={<FontAwesomeIcon icon={faEraser} />}\n                    title=\"Clear log\"\n                    onClick={this.props.clearLog.bind(this)}\n                    show={this.state.showClipboard}\n                  />\n                </div>\n                <div\n                  className={\"runtime\"}\n                  style={{\n                    display: this.props.preprocessing ? \"block\" : \"none\",\n                  }}\n                >\n                  Runtime: {this.state.runtimeStr}s\n                </div>\n              </Tab>\n            </Tabs>\n            <div\n              className=\"processingDiv\"\n              style={{ display: this.props.preprocessing ? \"block\" : \"none\" }}\n              title=\"Processing..\"\n            >\n              <Paper zDepth={2}>\n                <div className=\"processingText\"></div>\n                <Sync\n                  className=\"spin processingSpin\"\n                  style={{ color: \"rgb(255, 64, 129)\" }}\n                />\n              </Paper>\n            </div>\n          </Paper>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default ResultsPanel;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport CONSTANTS from \"./constants\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport ReactTable from \"react-table\";\nimport { getArea, isNumber, isValidTargetValue } from \"./Helpers.js\";\n\nclass FeatureInfoDialog extends React.Component {\n  onKeyPress(key, e) {\n    if (e.nativeEvent.keyCode === 13 || e.nativeEvent.keyCode === 27) {\n      //update the feature\n      this.updateFeatureValue(key, e);\n      //closes this window\n      this.props.onOk();\n    }\n  }\n  getHTML(value, title = \"\") {\n    return <div title={title !== \"\" ? title : value}>{value}</div>;\n  }\n  //adds Kms to the area values and rounds to 1 decimal place\n  getAreaHTML(props) {\n    //set the font color to red if the area protected is less than the target area\n    let color =\n      this.props.feature.protected_area < this.props.feature.target_area &&\n      props.row.key === \"Area protected\"\n        ? \"red\"\n        : \"rgba(0, 0, 0, 0.6)\";\n    //rounded to 6 sf in the hint\n    let html = (\n      <div\n        title={getArea(props.row.value, this.props.reportUnits, false, 6)}\n        style={{ color: color }}\n      >\n        {getArea(props.row.value, this.props.reportUnits, true)}\n      </div>\n    );\n    return html;\n  }\n  renderKeyCell(props) {\n    return this.getHTML(props.row.key, props.original.hint);\n  }\n  //called when the user moves away from an editable property, e.g. target percent or spf\n  updateFeatureValue(key, evt) {\n    var value = evt.currentTarget.innerHTML;\n    if (\n      (key === \"target_value\" && isValidTargetValue(value)) ||\n      (key === \"spf\" && isNumber(value))\n    ) {\n      var obj = {};\n      obj[key] = value;\n      this.props.updateFeature(this.props.feature, obj);\n    } else {\n      alert(\"Invalid value\");\n    }\n  }\n  renderValueCell(props) {\n    let html;\n    switch (props.row.key) {\n      case \"ID\":\n      case \"Alias\":\n      case \"Feature class name\":\n        html = this.getHTML(props.row.value, props.original.hint);\n        break;\n      case \"Description\":\n        html = this.getHTML(props.row.value);\n        break;\n      case \"Creation date\":\n        html = this.getHTML(props.row.value);\n        break;\n      case \"Mapbox ID\":\n        html =\n          props.row.value === \"\" || props.row.value === null\n            ? this.getHTML(\n                \"Not available\",\n                \"The feature was not uploaded to Mapbox\"\n              )\n            : this.getHTML(\n                props.row.value,\n                \"The feature was uploaded to Mapbox with this identifier\"\n              );\n        break;\n      case \"Total area\":\n        html =\n          props.row.value === -1\n            ? this.getHTML(\n                \"Not calculated\",\n                \"Total areas are not available for imported projects\"\n              )\n            : this.getAreaHTML(props, props.original.hint);\n        break;\n      case \"Total\":\n        html = this.getHTML(props.row.value);\n        break;\n      case \"Target percent\":\n        html =\n          this.props.userRole === \"ReadOnly\" ? (\n            <div>{props.row.value}</div>\n          ) : (\n            <div\n              contentEditable\n              suppressContentEditableWarning\n              title=\"Click to edit\"\n              onBlur={this.updateFeatureValue.bind(this, \"target_value\")}\n              onKeyPress={this.onKeyPress.bind(this, \"target_value\")}\n            >\n              {props.row.value}\n            </div>\n          );\n        break;\n      case \"Species Penalty Factor\":\n        html =\n          this.props.userRole === \"ReadOnly\" ? (\n            <div>{props.row.value}</div>\n          ) : (\n            <div\n              contentEditable\n              suppressContentEditableWarning\n              title=\"Click to edit\"\n              onBlur={this.updateFeatureValue.bind(this, \"spf\")}\n              onKeyPress={this.onKeyPress.bind(this, \"spf\")}\n            >\n              {props.row.value}\n            </div>\n          );\n        break;\n      case \"Preprocessed\":\n        html = props.row.value\n          ? this.getHTML(\n              \"Yes\",\n              \"The feature has been intersected with the planning units\"\n            )\n          : this.getHTML(\n              \"No\",\n              \"The feature has not yet been intersected with the planning units\"\n            );\n        break;\n      case \"Planning grid area\":\n        html =\n          props.row.value === -1\n            ? this.getHTML(\"Not calculated\", \"Calculated during pre-processing\")\n            : this.getAreaHTML(props);\n        break;\n      case \"Planning grid amount\":\n        html =\n          props.row.value === -1\n            ? this.getHTML(\"Not calculated\", \"Calculated during pre-processing\")\n            : this.getHTML(props.row.value);\n        break;\n      case \"Planning unit count\":\n        html =\n          props.row.value === -1\n            ? this.getHTML(\"Not calculated\", \"Calculated during pre-processing\")\n            : this.getHTML(props.row.value);\n        break;\n      case \"Target area\":\n        html =\n          props.row.value === -1\n            ? this.getHTML(\"Not calculated\", \"Calculated during a Marxan run\")\n            : this.getAreaHTML(props);\n        break;\n      case \"Target amount\":\n        html =\n          props.row.value === -1\n            ? this.getHTML(\"Not calculated\", \"Calculated during pre-processing\")\n            : this.getHTML(props.row.value);\n        break;\n      case \"Area protected\":\n        html =\n          props.row.value === -1\n            ? this.getHTML(\"Not calculated\", \"Calculated during a Marxan run\")\n            : this.getAreaHTML(props);\n        break;\n      case \"Protected amount\":\n        html =\n          props.row.value === -1\n            ? this.getHTML(\"Not calculated\", \"Calculated during pre-processing\")\n            : this.getHTML(props.row.value);\n        break;\n      default:\n        break;\n    }\n    return html;\n  }\n  render() {\n    if (this.props.feature) {\n      let data = [];\n      //iterate through the feature properties and set the data to bind to the table - if it is a feature from the old version of marxan then showForOld must be true for that property to be shown\n      let properties =\n        this.props.feature.source === \"Imported shapefile\"\n          ? CONSTANTS.FEATURE_PROPERTIES_POLYGONS\n          : CONSTANTS.FEATURE_PROPERTIES_POINTS;\n      properties.forEach((item) => {\n        if (\n          (!this.props.feature.old_version && item.showForNew) ||\n          (this.props.feature.old_version && item.showForOld)\n        ) {\n          data.push({\n            key: item.key,\n            value: this.props.feature[item.name],\n            hint: item.hint,\n          });\n        }\n      }, this);\n      return (\n        <MarxanDialog\n          title=\"Properties\"\n          {...this.props}\n          contentWidth={380}\n          helpLink={\"user.html#feature-properties-window\"}\n          offsetX={135}\n          offsetY={250}\n          children={\n            <ReactTable\n              showPagination={false}\n              className={\n                this.props.feature.old_version\n                  ? \"infoTableOldVersion\"\n                  : \"infoTable\"\n              }\n              minRows={0}\n              pageSize={data.length}\n              data={data}\n              noDataText=\"\"\n              columns={[\n                {\n                  Header: \"Key\",\n                  accessor: \"key\",\n                  width: 150,\n                  headerStyle: { textAlign: \"left\" },\n                  Cell: (props) => this.renderKeyCell(props),\n                },\n                {\n                  Header: \"Value\",\n                  accessor: \"value\",\n                  width: 185,\n                  headerStyle: { textAlign: \"left\" },\n                  Cell: (props) => this.renderValueCell(props),\n                },\n              ]}\n              key=\"k9\"\n            />\n          }\n        />\n      );\n    } else {\n      return null;\n    }\n  }\n}\n\nexport default FeatureInfoDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n// import { faBookOpen } from '@fortawesome/free-solid-svg-icons';\nimport { faPlusCircle } from \"@fortawesome/free-solid-svg-icons\";\nimport { faTrashAlt } from \"@fortawesome/free-regular-svg-icons\";\nimport Import from \"material-ui/svg-icons/action/get-app\";\nimport Export from \"material-ui/svg-icons/editor/publish\";\nimport Clone from \"material-ui/svg-icons/content/content-copy\";\nimport ToolbarButton from \"./ToolbarButton\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport MarxanTable from \"./MarxanTable\";\nimport Popover from \"material-ui/Popover\";\nimport Menu from \"material-ui/Menu\";\nimport MenuItem from \"material-ui/MenuItem\";\n\nclass ProjectsDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { searchText: \"\", selectedProject: undefined };\n  }\n  _delete() {\n    this.props.deleteProject(\n      this.state.selectedProject.user,\n      this.state.selectedProject.name\n    );\n    this.setState({ selectedProject: false });\n  }\n  load() {\n    if (\n      this.props.oldVersion === true &&\n      this.state.selectedProject.oldVersion === false\n    ) {\n      //get all the features again otherwise the allFeatures state will be bound to the old versions features\n      this.props.getAllFeatures().then(\n        function () {\n          this.loadAndClose();\n        }.bind(this)\n      );\n    } else {\n      this.loadAndClose();\n    }\n  }\n  loadAndClose() {\n    //load the project\n    this.props.loadProject(\n      this.state.selectedProject.name,\n      this.state.selectedProject.user\n    );\n    this.closeDialog();\n  }\n  showImportProjectPopover(event) {\n    this.setState({ importProjectAnchor: event.currentTarget });\n    this.props.showImportProjectPopover();\n  }\n  _new() {\n    //get all the features again otherwise the allFeatures state may be bound to an old version of marxans features\n    this.props.getAllFeatures().then(\n      function () {\n        this.props.openNewProjectDialog();\n        this.closeDialog();\n      }.bind(this)\n    );\n  }\n  cloneProject() {\n    this.props.cloneProject(\n      this.state.selectedProject.user,\n      this.state.selectedProject.name\n    );\n  }\n  exportProject() {\n    this.props\n      .exportProject(\n        this.state.selectedProject.user,\n        this.state.selectedProject.name\n      )\n      .then((url) => {\n        window.location = url;\n      });\n    this.closeDialog();\n  }\n  openImportProjectDialog() {\n    this.props.openImportProjectDialog();\n    this.closeDialog();\n  }\n  openImportMXWDialog() {\n    this.props.openImportMXWDialog();\n    this.closeDialog();\n  }\n  changeProject(event, project) {\n    this.setState({ selectedProject: project });\n  }\n  closeDialog() {\n    this.setState({ selectedProject: undefined });\n    this.props.onOk();\n  }\n  sortDate(a, b, desc) {\n    return new Date(\n      a.slice(6, 8),\n      a.slice(3, 5) - 1,\n      a.slice(0, 2),\n      a.slice(9, 11),\n      a.slice(12, 14),\n      a.slice(15, 17)\n    ) >\n      new Date(\n        b.slice(6, 8),\n        b.slice(3, 5) - 1,\n        b.slice(0, 2),\n        b.slice(9, 11),\n        b.slice(12, 14),\n        b.slice(15, 17)\n      )\n      ? 1\n      : -1;\n  }\n  renderDate(row) {\n    return (\n      <div\n        style={{\n          width: \"100%\",\n          height: \"100%\",\n          backgroundColor: \"#dadada\",\n          borderRadius: \"2px\",\n        }}\n        title={row.original.createdate}\n      >\n        {row.original.createdate.substr(0, 8)}\n      </div>\n    );\n  }\n  renderTitle(row) {\n    return (\n      <div\n        style={{\n          width: \"100%\",\n          height: \"100%\",\n          backgroundColor: \"#dadada\",\n          borderRadius: \"2px\",\n        }}\n        title={row.original.description}\n      >\n        {row.original.description}\n      </div>\n    );\n  }\n  renderName(row) {\n    return (\n      <div\n        style={{\n          width: \"100%\",\n          height: \"100%\",\n          backgroundColor: \"#dadada\",\n          borderRadius: \"2px\",\n        }}\n        title={row.original.name}\n      >\n        {row.original.name}\n      </div>\n    );\n  }\n  searchTextChanged(value) {\n    this.setState({ searchText: value });\n  }\n  render() {\n    let tableColumns = [];\n    if ([\"Admin\", \"ReadOnly\"].includes(this.props.userRole)) {\n      tableColumns = [\n        {\n          Header: \"User\",\n          accessor: \"user\",\n          width: 90,\n          headerStyle: { textAlign: \"left\" },\n        },\n        {\n          Header: \"Name\",\n          accessor: \"name\",\n          width: 200,\n          headerStyle: { textAlign: \"left\" },\n          Cell: this.renderName.bind(this),\n        },\n        {\n          Header: \"Description\",\n          accessor: \"description\",\n          width: 360,\n          headerStyle: { textAlign: \"left\" },\n          Cell: this.renderTitle.bind(this),\n        },\n        {\n          Header: \"Created\",\n          accessor: \"createdate\",\n          width: 70,\n          headerStyle: { textAlign: \"left\" },\n          Cell: this.renderDate.bind(this),\n          sortMethod: this.sortDate.bind(this),\n        },\n      ];\n    } else {\n      tableColumns = [\n        {\n          Header: \"Name\",\n          accessor: \"name\",\n          width: 260,\n          headerStyle: { textAlign: \"left\" },\n          Cell: this.renderName.bind(this),\n        },\n        {\n          Header: \"Description\",\n          accessor: \"description\",\n          width: 390,\n          headerStyle: { textAlign: \"left\" },\n          Cell: this.renderTitle.bind(this),\n        },\n        {\n          Header: \"Created\",\n          accessor: \"createdate\",\n          width: 220,\n          headerStyle: { textAlign: \"left\" },\n          Cell: this.renderDate.bind(this),\n          sortMethod: this.sortDate.bind(this),\n        },\n      ];\n    }\n    if (this.props.projects) {\n      return (\n        <MarxanDialog\n          {...this.props}\n          // titleBarIcon={faBookOpen}\n          okLabel={\n            this.props.userRole === \"ReadOnly\" ? \"Open (Read-only)\" : \"Open\"\n          }\n          onOk={this.load.bind(this)}\n          onCancel={this.closeDialog.bind(this)}\n          okDisabled={!this.state.selectedProject}\n          showCancelButton={true}\n          helpLink={\"user.html#the-projects-window\"}\n          autoDetectWindowHeight={false}\n          bodyStyle={{ padding: \"0px 24px 0px 24px\" }}\n          title=\"Projects\"\n          showSearchBox={true}\n          searchTextChanged={this.searchTextChanged.bind(this)}\n          children={\n            <React.Fragment key=\"k2\">\n              <div id=\"projectsTable\">\n                <MarxanTable\n                  data={this.props.projects}\n                  columns={tableColumns}\n                  searchColumns={[\"user\", \"name\", \"description\"]}\n                  searchText={this.state.searchText}\n                  selectedProject={this.state.selectedProject}\n                  changeProject={this.changeProject.bind(this)}\n                  getTrProps={(state, rowInfo, column) => {\n                    return {\n                      style: {\n                        background:\n                          rowInfo.original.user ===\n                            (state.selectedProject &&\n                              state.selectedProject.user) &&\n                          rowInfo.original.name ===\n                            (state.selectedProject &&\n                              state.selectedProject.name)\n                            ? \"aliceblue\"\n                            : \"\",\n                      },\n                      onClick: (e) => {\n                        state.changeProject(e, rowInfo.original);\n                      },\n                    };\n                  }}\n                />\n              </div>\n              <div\n                id=\"projectsToolbar\"\n                style={{\n                  display:\n                    this.props.userRole === \"ReadOnly\" ? \"none\" : \"block\",\n                }}\n              >\n                <ToolbarButton\n                  show={\n                    !this.props.unauthorisedMethods.includes(\"createProject\")\n                  }\n                  icon={<FontAwesomeIcon icon={faPlusCircle} />}\n                  title=\"New project\"\n                  onClick={this._new.bind(this)}\n                  label={\"New\"}\n                />\n                <ToolbarButton\n                  show={!(this.props.userRole === \"ReadOnly\")}\n                  icon={<Import style={{ height: \"20px\", width: \"20px\" }} />}\n                  title=\"Import a project from Marxan Web or Marxan DOS\"\n                  onClick={this.showImportProjectPopover.bind(this)}\n                  disabled={this.props.loading}\n                  label={\"Import\"}\n                />\n                <Popover\n                  open={this.props.importProjectPopoverOpen}\n                  anchorEl={this.state.importProjectAnchor}\n                  anchorOrigin={{ horizontal: \"left\", vertical: \"bottom\" }}\n                  targetOrigin={{ horizontal: \"left\", vertical: \"top\" }}\n                  onRequestClose={this.props.hideImportProjectPopover}\n                >\n                  <Menu desktop={true}>\n                    <MenuItem\n                      style={{\n                        display: !this.props.unauthorisedMethods.includes(\n                          \"importProject\"\n                        )\n                          ? \"inline-block\"\n                          : \"none\",\n                      }}\n                      primaryText=\"From Marxan Web\"\n                      title=\"Import a project from a Marxan Web *.mxw file\"\n                      onClick={this.openImportMXWDialog.bind(this)}\n                    />\n                    <MenuItem\n                      style={{\n                        display: !this.props.unauthorisedMethods.includes(\n                          \"createImportProject\"\n                        )\n                          ? \"inline-block\"\n                          : \"none\",\n                      }}\n                      primaryText=\"From Marxan DOS\"\n                      title=\"Import a project from a Marxan DOS\"\n                      onClick={this.openImportProjectDialog.bind(this)}\n                    />\n                  </Menu>\n                </Popover>\n                <ToolbarButton\n                  show={\n                    !this.props.unauthorisedMethods.includes(\"exportProject\")\n                  }\n                  icon={<Export style={{ height: \"20px\", width: \"20px\" }} />}\n                  title=\"Export project\"\n                  onClick={this.exportProject.bind(this)}\n                  disabled={\n                    !this.state.selectedProject ||\n                    this.props.loading ||\n                    this.state.selectedProject.oldVersion\n                  }\n                  label={\"Export\"}\n                />\n                <ToolbarButton\n                  show={\n                    !this.props.unauthorisedMethods.includes(\"cloneProject\")\n                  }\n                  icon={<Clone style={{ height: \"20px\", width: \"20px\" }} />}\n                  title=\"Clone project\"\n                  onClick={this.cloneProject.bind(this)}\n                  disabled={!this.state.selectedProject || this.props.loading}\n                  label={\"Clone\"}\n                />\n                <ToolbarButton\n                  show={\n                    !this.props.unauthorisedMethods.includes(\"deleteProject\")\n                  }\n                  icon={\n                    <FontAwesomeIcon\n                      icon={faTrashAlt}\n                      color=\"rgb(255, 64, 129)\"\n                    />\n                  }\n                  title=\"Delete project\"\n                  disabled={!this.state.selectedProject || this.props.loading}\n                  onClick={this._delete.bind(this)}\n                  label={\"Delete\"}\n                />\n              </div>\n            </React.Fragment>\n          }\n        />\n      );\n    } else {\n      return null;\n    }\n  }\n}\n\nexport default ProjectsDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from \"react\";\nimport MarxanTextField from \"./MarxanTextField\";\n\nclass Metadata extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      validName: undefined,\n    };\n  }\n  changeName(event, newValue) {\n    let expr = new RegExp(/[/\\\\?%*:|<>]/);\n    //check there are no invalid characters in the project name\n    if (expr.test(newValue)) {\n      if (this.props.hasOwnProperty('setSnackBar')) this.props.setSnackBar('Invalid character');\n    }\n    else {\n      this.props.setName(newValue);\n    }\n  }\n  changeDescription(event, newValue) {\n    this.props.setDescription(newValue);\n  }\n  render() {\n    return (\n      <React.Fragment>\n        <div style={{ marginTop: \"-13px\" }}>\n          <MarxanTextField\n            style={{ width: \"310px\" }}\n            errorText={this.state.validName === false ? \"Required field\" : \"\"}\n            value={this.props.name}\n            onChange={this.changeName.bind(this)}\n            floatingLabelText=\"Enter a name for the project\"\n          />\n          <MarxanTextField\n            style={{ width: \"310px\" }}\n            value={this.props.description}\n            onChange={this.changeDescription.bind(this)}\n            multiLine={true}\n            rows={3}\n            floatingLabelText=\"Enter a description for the project\"\n          />\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default Metadata;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from \"react\";\nimport MenuItem from \"material-ui/MenuItem\";\nimport SelectField from \"material-ui/SelectField\";\n\n//this is a generic component for selecting and dynamically displaying a layer from mapbox on a mapbox map\n//the following are property requirements:\n// map:         the mapbox map where the layer will be displayed\n// mapboxUser   the mapbox user id where the tilesets are stored, e.g. blished\n// items:       the items that you want to display in the select box. these must contain the following properties:\n//  alias               - a string for the text that will be shown in the select box\n//  feature_class_name  - the actual value that determines which item is selected - this should be the tileset name, e.g. pupng_terrestrial_hexagon_50\n//  envelope            - a well-known-text representation of the bounds of the mapbox layer, e.g. \"POLYGON((60.4758290002083 29.3772500001874,60.4758290002083 38.4906960004201,74.8898619998315 38.4906960004201,74.8898619998315 29.3772500001874,60.4758290002083 29.3772500001874))\" (optional)\n// selectedValue the value that is selected (controlled from the controlling component)\n//prerequisitives:\n// request library\n\nclass SelectFieldMapboxLayer extends React.Component {\n  changeItem(event, newValue) {\n    //get the selected item\n    let item = this.props.items[newValue];\n    //zoom to the layer\n    if (item.envelope !== null) {\n      var envelope = this.getLatLngLikeFromWKT(item.envelope);\n      this.props.map.fitBounds(envelope, {\n        easing: function (num) {\n          return 1;\n        },\n      });\n    }\n    // this.props.map.setPitch(60);\n    //add the layer to the map\n    this.addLayerToMap(item.feature_class_name);\n    //update the state in the owner\n    this.props.changeItem(item.feature_class_name);\n  }\n\n  getLatLngLikeFromWKT(wkt) {\n    let envelope, returnVal;\n    var parse = require(\"wellknown\");\n    var geometry = parse(wkt);\n    //see if the envelope spans the dateline\n    if (geometry.coordinates.length > 1) {\n      //if the envelope spans the dateline then the first polygon is in the western hemisphere\n      let west = parse(wkt).coordinates[0];\n      let east = parse(wkt).coordinates[1];\n      returnVal = [\n        [east[0][1][0], east[0][1][1]],\n        [west[0][1][0] + 360, west[0][1][1]],\n      ];\n    } else {\n      envelope = parse(wkt).coordinates[0];\n      returnVal = [\n        [envelope[0][0], envelope[0][1]],\n        [envelope[2][0], envelope[2][1]],\n      ];\n    }\n    return returnVal;\n  }\n\n  //check the layer exists\n  addLayerToMap(mapboxlayername) {\n    this.mapboxlayername = mapboxlayername;\n    var request = require(\"request\");\n    request(\n      \"https://api.mapbox.com/v4/\" +\n        this.props.mapboxUser +\n        \".\" +\n        mapboxlayername +\n        \".json?access_token=\" +\n        this.props.registry.MBAT_PUBLIC +\n        \"&secure\",\n      this.parseUrlExists.bind(this)\n    );\n  }\n\n  parseUrlExists(err, res) {\n    let exists = res && res.statusCode === 200 ? true : false;\n    if (exists) {\n      //remove the previous planning unit layer\n      let previousLayerId = this.props.map.getStyle().layers[\n        this.props.map.getStyle().layers.length - 1\n      ].id;\n      //check it is a planning unit layer\n      if (previousLayerId.substr(0, 3) === \"pu_\") {\n        this.props.map.removeLayer(\n          this.props.map.getStyle().layers[\n            this.props.map.getStyle().layers.length - 1\n          ].id\n        );\n      }\n      //remove the source if it already exists\n      if (this.props.map.getSource(this.props.mapboxUser)) {\n        this.props.map.removeSource(this.props.mapboxUser);\n      }\n      //add the source for this layer\n      this.props.map.addSource(\"andrewcottam\", {\n        type: \"vector\",\n        url: \"mapbox://\" + this.props.mapboxUser + \".\" + this.mapboxlayername,\n      });\n      //add the layer\n      this.props.map.addLayer({\n        id: this.mapboxlayername,\n        type: \"fill\",\n        source: this.props.mapboxUser,\n        \"source-layer\": this.mapboxlayername,\n        paint: {\n          \"fill-color\": \"#f08\",\n          \"fill-opacity\": 0.4,\n        },\n      });\n    } else {\n      console.log(\"The MapBox layer does not exist\");\n    }\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <SelectField\n          onChange={this.changeItem.bind(this)}\n          value={this.props.selectedValue}\n          menuItemStyle={{ fontSize: \"12px\" }}\n          labelStyle={{ fontSize: \"12px\" }}\n          floatingLabelText=\"Select the planning units\"\n          floatingLabelFixed={true}\n          style={{ width: this.props.width, verticalAlign: \"middle\" }}\n        >\n          {this.props.items.map((item) => {\n            return (\n              <MenuItem\n                value={item.feature_class_name}\n                primaryText={item.alias}\n                key={item.feature_class_name}\n                style={{ fontSize: \"12px\" }}\n                menuItemStyle={{ fontSize: \"12px\" }}\n                labelStyle={{ fontSize: \"12px\" }}\n              />\n            );\n          })}\n        </SelectField>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default SelectFieldMapboxLayer;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from \"react\";\nimport mapboxgl from \"mapbox-gl\";\nimport SelectFieldMapboxLayer from \"./SelectFieldMapboxLayer\";\n\nclass PlanningUnitsDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { planning_unit_grids_received: false };\n  }\n  componentDidMount() {\n    let map = new mapboxgl.Map({\n      container: this.mapContainer,\n      style: \"mapbox://styles/andrewcottam/cjg6jk8vg3tir2spd2eatu5fd\", //north star + marine PAs in pacific\n      center: [0, 0],\n      zoom: 2,\n    });\n    this.setState({ map: map });\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <div className={\"newPUDialogPane\"}>\n          <div>\n            <div\n              ref={(el) => (this.mapContainer = el)}\n              className=\"absolute top right left bottom\"\n              style={{\n                width: \"352px\",\n                height: \"300px\",\n                marginTop: \"50px\",\n                marginLeft: \"24px\",\n              }}\n            />\n            <div\n              style={{\n                position: \"absolute\",\n                top: \"380px\",\n                verticalAlign: \"middle\",\n              }}\n            >\n              <SelectFieldMapboxLayer\n                {...this.props}\n                menuItemStyle={{ fontSize: \"12px\" }}\n                labelStyle={{ fontSize: \"12px\" }}\n                selectedValue={this.props.pu}\n                map={this.state.map}\n                mapboxUser={\"andrewcottam\"}\n                items={this.props.planning_unit_grids}\n                changeItem={this.props.changeItem}\n                disabled={!this.state.planning_unit_grids_received}\n                width={\"352px\"}\n              />\n            </div>\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default PlanningUnitsDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport { List, ListItem } from \"material-ui/List\";\nimport IconMenu from \"material-ui/IconMenu\";\nimport MenuItem from \"material-ui/MenuItem\";\nimport { grey400 } from \"material-ui/styles/colors\";\nimport IconButton from \"material-ui/IconButton\";\nimport MoreVertIcon from \"material-ui/svg-icons/navigation/more-vert\";\nimport ToolbarButton from \"./ToolbarButton\";\n\nclass SelectCostFeatures extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { selectedFeature: undefined };\n  }\n  componentWillMount() {\n    ListItem.defaultProps.disableTouchRipple = true;\n    ListItem.defaultProps.disableFocusRipple = true;\n  }\n  changeFeature(event, feature) {\n    this.setState({ selectedFeature: feature });\n  }\n  clickListItem(event) {}\n  render() {\n    const iconButtonElement = (\n      <IconButton touch={true} tooltipPosition=\"bottom-left\">\n        <MoreVertIcon color={grey400} />\n      </IconButton>\n    );\n\n    const rightIconMenu = (\n      <IconMenu iconButtonElement={iconButtonElement}>\n        <MenuItem>Info</MenuItem>\n        <MenuItem title=\"Not implemented\">View</MenuItem>\n        <MenuItem title=\"Not implemented\">Prioritise</MenuItem>\n      </IconMenu>\n    );\n\n    return (\n      <React.Fragment>\n        <div className={\"newPUDialogPane\"}>\n          <div>Select the costs</div>\n          <List>\n            {this.props.selectedCosts.map((item) => {\n              return (\n                <ListItem\n                  disableFocusRipple={true}\n                  primaryText={item.alias}\n                  secondaryText={item.description}\n                  key={item.id}\n                  value={item.alias}\n                  rightIconButton={rightIconMenu}\n                />\n              );\n            })}\n          </List>\n          <ToolbarButton label=\"Select\" onClick={this.props.openCostsDialog} />\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default SelectCostFeatures;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\n\nclass TableRow extends React.Component {\n  render() {\n    const subcontent = this.props.htmlContent\n      ? this.props.htmlContent\n      : this.props.title;\n    return (\n      <div\n        style={{\n          width: \"100%\",\n          height: \"100%\",\n          backgroundColor: \"#dadada\",\n          borderRadius: \"2px\",\n        }}\n        title={this.props.title}\n      >\n        {subcontent}\n      </div>\n    );\n  }\n}\n\nexport default TableRow;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPlusCircle } from \"@fortawesome/free-solid-svg-icons\";\nimport { faCircle } from \"@fortawesome/free-regular-svg-icons\";\nimport { faCheckCircle } from \"@fortawesome/free-regular-svg-icons\";\nimport { faTrashAlt } from \"@fortawesome/free-regular-svg-icons\";\n// import { faSync } from '@fortawesome/free-solid-svg-icons';\nimport Import from \"material-ui/svg-icons/action/get-app\";\nimport ToolbarButton from \"./ToolbarButton\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport MarxanTable from \"./MarxanTable\";\nimport Popover from \"material-ui/Popover\";\nimport Menu from \"material-ui/Menu\";\nimport MenuItem from \"material-ui/MenuItem\";\nimport TableRow from \"./TableRow.js\";\n//import gbif_logo from './gbif.jpg';\n//import FontIcon from 'material-ui/FontIcon';\n// add this to the gbif item: leftIcon={<FontIcon className=\"gbifLogo\"/>\n\nclass FeaturesDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedFeature: undefined,\n      previousRow: undefined,\n      searchText: \"\",\n    };\n    //initialise the filteredRows variable\n    this.filteredRows = [];\n  }\n  _delete() {\n    this.props.deleteFeature(this.state.selectedFeature);\n    this.setState({ selectedFeature: undefined });\n  }\n  showNewFeaturePopover(event) {\n    this.setState({ newFeatureAnchor: event.currentTarget });\n    this.props.showNewFeaturePopover();\n  }\n  showImportFeaturePopover(event) {\n    this.setState({ importFeatureAnchor: event.currentTarget });\n    this.props.showImportFeaturePopover();\n  }\n  _openImportFeaturesDialog() {\n    //close the dialog\n    this.props.onCancel();\n    //show the new feature dialog\n    this.props.openImportFeaturesDialog(\"import\");\n  }\n  _openImportFromWebDialog() {\n    //close the dialog\n    this.props.onCancel();\n    //show the new feature dialog\n    this.props.openImportFromWebDialog();\n  }\n  _newByDigitising() {\n    //hide this dialog\n    this.onOk();\n    //show the drawing controls\n    this.props.initialiseDigitising();\n  }\n  openImportGBIFDialog() {\n    this.props.openImportGBIFDialog();\n    this.props.onCancel();\n  }\n  clickFeature(event, rowInfo) {\n    //if adding or removing features from a project\n    if (this.props.addingRemovingFeatures) {\n      //if the shift key is pressed then select/deselect the features in between\n      if (event.shiftKey) {\n        //get the selected feature ids\n        let selectedIds = this.getFeaturesBetweenRows(\n          this.state.previousRow,\n          rowInfo\n        );\n        //update the selected ids\n        this.props.selectFeatures(selectedIds);\n      } else {\n        //single feature has been clicked\n        this.props.clickFeature(\n          rowInfo.original,\n          event.shiftKey,\n          this.state.previousRow\n        );\n      }\n      this.setState({ previousRow: rowInfo });\n    } else {\n      this.setState({ selectedFeature: rowInfo.original });\n    }\n  }\n\n  //toggles the selection state of the features between the first and last indices and returns an array of the selected featureIds\n  toggleSelectionState(selectedIds, features, first, last) {\n    //get the features between the first and last positions\n    let spannedFeatures = features.slice(first, last);\n    //iterate through them and toggle their selected state\n    spannedFeatures.forEach((feature) => {\n      if (selectedIds.includes(feature.id)) {\n        selectedIds.splice(selectedIds.indexOf(feature.id), 1);\n      } else {\n        selectedIds.push(feature.id);\n      }\n    });\n    return selectedIds;\n  }\n  //gets the features ids between the two passed rows and toggles their selection state\n  getFeaturesBetweenRows(previousRow, thisRow) {\n    let selectedIds;\n    //get the index position of the previous row that was clicked\n    let idx1 =\n      previousRow.index < thisRow.index ? previousRow.index + 1 : thisRow.index;\n    //get the index position of this row that was clicked\n    let idx2 =\n      previousRow.index < thisRow.index ? thisRow.index + 1 : previousRow.index;\n    //toggle the selected features depending on if the current features are filtered\n    if (this.filteredRows.length < this.props.allFeatures.length) {\n      selectedIds = this.toggleSelectionState(\n        this.props.selectedFeatureIds,\n        this.filteredRows,\n        idx1,\n        idx2\n      );\n    } else {\n      selectedIds = this.toggleSelectionState(\n        this.props.selectedFeatureIds,\n        this.props.allFeatures,\n        idx1,\n        idx2\n      );\n    }\n    return selectedIds;\n  }\n  //selects all feature depending on whether the data is filtered or not\n  selectAllFeatures() {\n    let selectedIds = [];\n    //if the table is filtered then select only the filtered rows\n    if (this.filteredRows.length < this.props.allFeatures.length) {\n      this.filteredRows.forEach((feature) => {\n        selectedIds.push(feature.id);\n      });\n      this.props.selectFeatures(selectedIds);\n    } else {\n      //select all features\n      this.props.selectAllFeatures();\n    }\n  }\n  onOk(evt) {\n    if (this.props.addingRemovingFeatures) {\n      this.props.onOk();\n    } else {\n      this.unselectFeature();\n    }\n  }\n  unselectFeature(evt) {\n    this.setState({\n      selectedFeature: undefined,\n    });\n    this.props.onCancel();\n  }\n  sortDate(a, b, desc) {\n    return new Date(\n      a.slice(6, 8),\n      a.slice(3, 5) - 1,\n      a.slice(0, 2),\n      a.slice(9, 11),\n      a.slice(12, 14),\n      a.slice(15, 17)\n    ) >\n      new Date(\n        b.slice(6, 8),\n        b.slice(3, 5) - 1,\n        b.slice(0, 2),\n        b.slice(9, 11),\n        b.slice(12, 14),\n        b.slice(15, 17)\n      )\n      ? 1\n      : -1;\n  }\n  preview(feature_metadata) {\n    this.props.previewFeature(feature_metadata);\n  }\n  renderTitle(row) {\n    return <TableRow title={row.original.description} />;\n  }\n  renderSource(row) {\n    return <TableRow title={row.original.source} />;\n  }\n  renderDate(row) {\n    return (\n      <TableRow\n        title={row.original.creation_date}\n        htmlContent={row.original.creation_date.substr(0, 8)}\n      />\n    );\n  }\n  renderCreatedBy(row) {\n    return <TableRow title={row.original.created_by} />;\n  }\n  renderPreview(row) {\n    return <TableRow title=\"Click to preview\" htmlContent=\"..\" />;\n  }\n\n  searchTextChanged(value) {\n    this.setState({ searchText: value });\n  }\n  //called when the data in the marxantable is filtered\n  dataFiltered(filteredRows) {\n    //set the local filteredRows variable which is used to get filtered features between clicked rows\n    this.filteredRows = filteredRows;\n  }\n  render() {\n    if (this.props.allFeatures) {\n      return (\n        <MarxanDialog\n          {...this.props}\n          autoDetectWindowHeight={false}\n          bodyStyle={{ padding: \"0px 24px 0px 24px\" }}\n          title=\"Features\"\n          onOk={this.onOk.bind(this)}\n          showCancelButton={this.props.addingRemovingFeatures}\n          helpLink={\n            this.props.addingRemovingFeatures\n              ? \"user.html#adding-and-removing-features\"\n              : \"user.html#the-features-window\"\n          }\n          showSearchBox={true}\n          searchTextChanged={this.searchTextChanged.bind(this)}\n          children={\n            <React.Fragment key=\"k10\">\n              <div id=\"projectsTable\">\n                <MarxanTable\n                  data={this.props.allFeatures}\n                  searchColumns={[\n                    \"alias\",\n                    \"description\",\n                    \"source\",\n                    \"created_by\",\n                  ]}\n                  searchText={this.state.searchText}\n                  dataFiltered={this.dataFiltered.bind(this)}\n                  addingRemovingFeatures={this.props.addingRemovingFeatures}\n                  selectedFeatureIds={this.props.selectedFeatureIds}\n                  selectedFeature={this.state.selectedFeature}\n                  clickFeature={this.clickFeature.bind(this)}\n                  preview={this.preview.bind(this)}\n                  columns={[\n                    {\n                      Header: \"Name\",\n                      accessor: \"alias\",\n                      width: 193,\n                      headerStyle: { textAlign: \"left\" },\n                    },\n                    {\n                      Header: \"Description\",\n                      accessor: \"description\",\n                      width: 246,\n                      headerStyle: { textAlign: \"left\" },\n                      Cell: this.renderTitle.bind(this),\n                    },\n                    {\n                      Header: \"Source\",\n                      accessor: \"source\",\n                      width: 120,\n                      headerStyle: { textAlign: \"left\" },\n                      Cell: this.renderSource.bind(this),\n                    },\n                    {\n                      Header: \"Created\",\n                      accessor: \"creation_date\",\n                      width: 70,\n                      headerStyle: { textAlign: \"left\" },\n                      Cell: this.renderDate.bind(this),\n                      sortMethod: this.sortDate.bind(this),\n                    },\n                    {\n                      Header: \"Created by\",\n                      accessor: \"created_by\",\n                      width: 70,\n                      headerStyle: { textAlign: \"left\" },\n                      Cell: this.renderCreatedBy.bind(this),\n                    },\n                    {\n                      Header: \"\",\n                      width: 8,\n                      headerStyle: { textAlign: \"center\" },\n                      Cell: this.renderPreview.bind(this),\n                    },\n                  ]}\n                  getTrProps={(state, rowInfo, column) => {\n                    return {\n                      style: {\n                        background:\n                          (state.addingRemovingFeatures &&\n                            state.selectedFeatureIds.includes(\n                              rowInfo.original.id\n                            )) ||\n                          (!state.addingRemovingFeatures &&\n                            state.selectedFeature &&\n                            state.selectedFeature.id === rowInfo.original.id)\n                            ? \"aliceblue\"\n                            : \"\",\n                      },\n                      onClick: (e) => {\n                        state.clickFeature(e, rowInfo);\n                      },\n                    };\n                  }}\n                  getTdProps={(state, rowInfo, column) => {\n                    return {\n                      onClick: (e) => {\n                        if (column.Header === \"\")\n                          state.preview(rowInfo.original);\n                      },\n                    };\n                  }}\n                />\n              </div>\n              <div id=\"projectsToolbar\">\n                <div\n                  style={{\n                    display: this.props.metadata.OLDVERSION ? \"block\" : \"none\",\n                  }}\n                  className={\"tabTitle\"}\n                >\n                  This is an imported project. Only features from this project\n                  are shown.\n                </div>\n                <ToolbarButton\n                  show={\n                    this.props.userRole !== \"ReadOnly\" &&\n                    !this.props.metadata.OLDVERSION &&\n                    !this.props.addingRemovingFeatures\n                  }\n                  icon={<FontAwesomeIcon icon={faPlusCircle} />}\n                  title=\"New feature\"\n                  disabled={this.props.loading}\n                  onClick={this.showNewFeaturePopover.bind(this)}\n                  label={\"New\"}\n                />\n                <Popover\n                  open={this.props.newFeaturePopoverOpen}\n                  anchorEl={this.state.newFeatureAnchor}\n                  anchorOrigin={{ horizontal: \"left\", vertical: \"bottom\" }}\n                  targetOrigin={{ horizontal: \"left\", vertical: \"top\" }}\n                  onRequestClose={this.props.hideNewFeaturePopover}\n                >\n                  <Menu desktop={true}>\n                    <MenuItem\n                      primaryText=\"Draw on screen\"\n                      title=\"Create a new feature by digitising it on the screen\"\n                      onClick={this._newByDigitising.bind(this)}\n                    />\n                  </Menu>\n                </Popover>\n                <ToolbarButton\n                  show={\n                    !this.props.metadata.OLDVERSION &&\n                    !this.props.addingRemovingFeatures &&\n                    this.props.userRole !== \"ReadOnly\"\n                  }\n                  icon={<Import style={{ height: \"20px\", width: \"20px\" }} />}\n                  title=\"Create new features from existing data\"\n                  disabled={this.props.loading}\n                  onClick={this.showImportFeaturePopover.bind(this)}\n                  label={\"Import\"}\n                />\n                <Popover\n                  open={this.props.importFeaturePopoverOpen}\n                  anchorEl={this.state.importFeatureAnchor}\n                  anchorOrigin={{ horizontal: \"left\", vertical: \"bottom\" }}\n                  targetOrigin={{ horizontal: \"left\", vertical: \"top\" }}\n                  onRequestClose={this.props.hideImportFeaturePopover}\n                >\n                  <Menu desktop={true}>\n                    <MenuItem\n                      primaryText=\"From a shapefile\"\n                      title=\"Import one or more features from a shapefile\"\n                      onClick={this._openImportFeaturesDialog.bind(this)}\n                    />\n                    <MenuItem\n                      primaryText=\"From the web\"\n                      title=\"Import one or more features from a web resource\"\n                      onClick={this._openImportFromWebDialog.bind(this)}\n                    />\n                    <MenuItem\n                      primaryText=\"From the Global Biodiversity Information Facility\"\n                      title=\"The worlds largest provider of species observations\"\n                      onClick={this.openImportGBIFDialog.bind(this)}\n                    />\n                    <MenuItem\n                      primaryText=\"From the IUCN Red List of Threatened Species\"\n                      disabled={true}\n                    />\n                  </Menu>\n                </Popover>\n                <ToolbarButton\n                  show={\n                    this.props.userRole === \"Admin\" &&\n                    !this.props.metadata.OLDVERSION &&\n                    !this.props.addingRemovingFeatures\n                  }\n                  icon={\n                    <FontAwesomeIcon\n                      icon={faTrashAlt}\n                      color=\"rgb(255, 64, 129)\"\n                    />\n                  }\n                  title=\"Delete feature\"\n                  disabled={\n                    this.state.selectedFeature === undefined ||\n                    this.props.loading ||\n                    (this.state.selectedFeature &&\n                      this.state.selectedFeature.created_by === \"global admin\")\n                  }\n                  onClick={this._delete.bind(this)}\n                  label={\"Delete\"}\n                />\n                {/*<ToolbarButton  \n            \t\t\t\t\t\t\t\tshow={(this.props.marxanServer&&this.props.marxanServer.system !== \"Windows\")&&(!this.props.addingRemovingFeatures)}\n            \t\t\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faSync} color='rgb(51, 153, 51)'/>} \n            \t\t\t\t\t\t\t\ttitle=\"Refresh features\" \n            \t\t\t\t\t\t\t\tdisabled={this.props.loading}\n            \t\t\t\t\t\t\t\tlabel={\"Refresh\"}\n            \t\t\t\t\t\t\t\tonClick={ this.props.refreshFeatures }\n            \t\t\t\t\t\t\t/>*/}\n                <ToolbarButton\n                  show={this.props.addingRemovingFeatures}\n                  icon={<FontAwesomeIcon icon={faCircle} />}\n                  title=\"Clear all features\"\n                  onClick={this.props.clearAllFeatures}\n                  label={\"Clear all\"}\n                />\n                <ToolbarButton\n                  show={this.props.addingRemovingFeatures}\n                  icon={<FontAwesomeIcon icon={faCheckCircle} />}\n                  title=\"Select all features\"\n                  onClick={this.selectAllFeatures.bind(this)}\n                  label={\"Select all\"}\n                />\n              </div>\n            </React.Fragment>\n          }\n        />\n      );\n    } else {\n      return null;\n    }\n  }\n}\n\nexport default FeaturesDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport Metadata from \"./Metadata\";\nimport PlanningUnitsDialog from \"./PlanningUnitsDialog\";\nimport SelectFeatures from \"./SelectFeatures\";\nimport SelectCostFeatures from \"./SelectCostFeatures\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport FeaturesDialog from \"./FeaturesDialog\";\nimport ToolbarButton from \"./ToolbarButton\";\n\nclass NewProjectDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      steps: [\"Info\", \"Planning units\", \"Features\"],\n      loadingFeatures: false,\n      finished: false,\n      stepIndex: 0,\n      name: \"\",\n      description: \"\",\n      pu: \"\",\n      featuresDialogOpen: false,\n      allFeatures: [],\n      selectedFeatureIds: [],\n    };\n  }\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.features !== this.props.features) {\n      //this is probably an unreliable check but it seems to work!\n      this.setState({\n        allFeatures: JSON.parse(JSON.stringify(this.props.features)),\n      }); //a copy of all the features\n    }\n  }\n  handleNext = () => {\n    const { stepIndex } = this.state;\n    this.setState({\n      stepIndex: stepIndex + 1,\n    });\n  };\n  handlePrev = () => {\n    const { stepIndex } = this.state;\n    if (stepIndex > 0) {\n      this.setState({ stepIndex: stepIndex - 1 });\n    }\n  };\n  openFeaturesDialog() {\n    this.setState({ featuresDialogOpen: true });\n  }\n  setName(value) {\n    this.setState({ name: value });\n  }\n  setDescription(value) {\n    this.setState({ description: value });\n  }\n  changePU(value) {\n    this.setState({ pu: value });\n  }\n  onOk(evt) {\n    this.gotoStart();\n    this.props.onOk();\n  }\n  gotoStart() {\n    //reset to the beginning\n    this.setState({ stepIndex: 0 });\n  }\n  closeFeaturesDialog() {\n    this.setState({ featuresDialogOpen: false });\n  }\n  //updates the allFeatures to set the various properties based on which features have been selected in the FeaturesDialog\n  updateSelectedFeatures() {\n    let allFeatures = this.state.allFeatures;\n    allFeatures.forEach((feature) => {\n      if (this.state.selectedFeatureIds.includes(feature.id)) {\n        Object.assign(feature, { selected: true });\n      } else {\n        Object.assign(feature, { selected: false });\n      }\n    }, this);\n    //update allFeatures to reflect those that are selected\n    this.setState({ allFeatures: allFeatures });\n    this.closeFeaturesDialog();\n  }\n\n  clickFeature(feature) {\n    let ids = this.state.selectedFeatureIds;\n    if (ids.includes(feature.id)) {\n      //remove the feature if it is already selected\n      this.removeFeature(feature);\n    } else {\n      //add the feautre to the selected feature array\n      this.addFeature(feature);\n    }\n  }\n  //selects all the features\n  selectAllFeatures() {\n    let ids = [];\n    this.state.allFeatures.forEach((feature) => {\n      ids.push(feature.id);\n    });\n    this.selectFeatures(ids);\n  }\n\n  //clears all the Conservation features\n  clearAllFeatures() {\n    this.setState({ selectedFeatureIds: [] });\n  }\n\n  selectFeatures(ids) {\n    this.setState({ selectedFeatureIds: ids });\n  }\n\n  //removes a feature from the selectedFeatureIds array\n  removeFeature(feature) {\n    let ids = this.state.selectedFeatureIds;\n    //remove the feature  - this requires a callback on setState otherwise the state is not updated before updateSelectedFeatures is called\n    ids = ids.filter(function (value, index, arr) {\n      return value !== feature.id;\n    });\n    return new Promise(\n      function (resolve, reject) {\n        this.setState({ selectedFeatureIds: ids }, function () {\n          resolve();\n        });\n      }.bind(this)\n    );\n  }\n\n  //adds a feature to the selectedFeatureIds array\n  addFeature(feature) {\n    let ids = this.state.selectedFeatureIds;\n    //add the feautre to the selected feature array\n    ids.push(feature.id);\n    this.setState({ selectedFeatureIds: ids });\n  }\n\n  createNewProject() {\n    this.props.createNewProject({\n      name: this.state.name,\n      description: this.state.description,\n      planning_grid_name: this.state.pu,\n      features: this.state.allFeatures.filter((item) => {\n        return item.selected;\n      }),\n    });\n    this.onOk();\n  }\n\n  render() {\n    const { stepIndex } = this.state;\n    const contentStyle = { margin: \"0 16px\" };\n    const actions = [\n      <div\n        style={{\n          width: \"100%\",\n          maxWidth: \"500px\",\n          margin: \"auto\",\n          textAlign: \"center\",\n        }}\n      >\n        {/*dynamically create the stepper\n\t\t\t\t\t\t\t<Stepper activeStep={stepIndex}>\n\t\t\t\t\t\t\t\t\t{this.state.steps.map((item) => {return <Step key={item}><StepLabel>{item}</StepLabel></Step>})}\n\t\t\t\t\t\t\t</Stepper> */}\n        <div style={contentStyle}>\n          <div style={{ marginTop: 12 }}>\n            <ToolbarButton\n              label=\"Back\"\n              disabled={stepIndex === 0}\n              onClick={this.handlePrev}\n            />\n            <ToolbarButton\n              label={\n                stepIndex === this.state.steps.length - 1 ? \"Finish\" : \"Next\"\n              }\n              onClick={\n                stepIndex === this.state.steps.length - 1\n                  ? this.createNewProject.bind(this)\n                  : this.handleNext\n              }\n              primary={true}\n              disabled={\n                (stepIndex === 0 &&\n                  (this.state.name === \"\" || this.state.description === \"\")) ||\n                (stepIndex === 1 && this.state.pu === \"\") ||\n                (stepIndex === 2 && this.state.selectedFeatureIds.length === 0)\n              }\n            />\n          </div>\n        </div>\n      </div>,\n    ];\n    let c = (\n      <div key=\"k3\">\n        {stepIndex === 0 ? (\n          <Metadata\n            name={this.state.name}\n            description={this.state.description}\n            setName={this.setName.bind(this)}\n            setDescription={this.setDescription.bind(this)}\n          />\n        ) : null}\n        {stepIndex === 1 ? (\n          <PlanningUnitsDialog\n            {...this.props}\n            getPlanningUnitGrids={this.props.getPlanningUnitGrids}\n            planning_unit_grids={this.props.planning_unit_grids}\n            changeItem={this.changePU.bind(this)}\n            pu={this.state.pu}\n            openImportPlanningGridDialog={\n              this.props.openImportPlanningGridDialog\n            }\n          />\n        ) : null}\n        {stepIndex === 2 ? (\n          <div style={{ height: \"390px\" }}>\n            <div className={\"tabTitle\"}>Select the features</div>\n            <SelectFeatures\n              features={this.state.allFeatures.filter((item) => {\n                return item.selected;\n              })}\n              openFeaturesDialog={this.openFeaturesDialog.bind(this)}\n              simple={true}\n              showTargetButton={false}\n              leftmargin={\"0px\"}\n              maxheight={\"356px\"}\n            />\n          </div>\n        ) : null}\n        {stepIndex === 3 ? (\n          <SelectCostFeatures\n            openCostsDialog={this.props.openCostsDialog}\n            selectedCosts={this.props.selectedCosts}\n          />\n        ) : null}\n      </div>\n    );\n    return (\n      <React.Fragment>\n        <MarxanDialog\n          {...this.props}\n          title={\"New project\"}\n          contentWidth={400}\n          children={c}\n          actions={actions}\n          okLabel={\"Cancel\"}\n          onOk={this.onOk.bind(this)}\n          onCancel={this.onOk.bind(this)}\n          onRequestClose={this.onOk.bind(this)}\n          helpLink={\"user.html#creating-new-projects\"}\n        />\n        <FeaturesDialog\n          open={this.state.featuresDialogOpen}\n          onOk={this.updateSelectedFeatures.bind(this)}\n          onCancel={this.closeFeaturesDialog.bind(this)}\n          loadingFeatures={this.state.loadingFeatures}\n          allFeatures={this.state.allFeatures}\n          selectAllFeatures={this.selectAllFeatures.bind(this)}\n          clearAllFeatures={this.clearAllFeatures.bind(this)}\n          selectFeatures={this.selectFeatures.bind(this)}\n          clickFeature={this.clickFeature.bind(this)}\n          addingRemovingFeatures={true}\n          selectedFeatureIds={this.state.selectedFeatureIds}\n          metadata={{ OLDVERSION: false }}\n          userRole={\"User\"}\n          previewFeature={this.props.previewFeature}\n        />\n      </React.Fragment>\n    );\n  }\n}\n\nexport default NewProjectDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from \"react\";\nimport CONSTANTS from \"./constants\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport ToolbarButton from \"./ToolbarButton\";\nimport SelectField from \"material-ui/SelectField\";\nimport MenuItem from \"material-ui/MenuItem\";\nimport Checkbox from \"material-ui/Checkbox\";\n\nclass NewProjectWizardDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      domainEnabled: true,\n      steps: [\n        \"Country\",\n        \"Planning units\",\n        \"Habitats\",\n        \"Species\",\n        \"Existing PAs\",\n      ],\n      stepIndex: 0,\n      stepComplete: false,\n      iso3: \"\",\n      country: \"\",\n      domain: \"\",\n      shape: \"Hexagon\",\n      areakm2: 50,\n      worldEcosystems: false,\n      allSpecies: false,\n      endemicSpecies: false,\n      endangeredSpecies: false,\n      includeExistingPAs: false,\n      iucn_category: \"None\",\n    };\n  }\n  //moves to the next step of the wizard\n  handleNext = () => {\n    this.setState({ stepIndex: this.state.stepIndex + 1 });\n  };\n  //moves to the previous step of the wizard\n  handlePrev = () => {\n    this.setState({ stepIndex: this.state.stepIndex - 1 });\n  };\n  //function to return true if the inputs are complete\n  getComplete() {\n    let complete = false;\n    switch (this.state.stepIndex) {\n      case 0:\n        complete = this.state.country !== \"\" && this.state.domain !== \"\";\n        break;\n      case 1:\n        complete = this.state.shape !== \"\" && this.state.areakm2 !== 0;\n        break;\n      default:\n      // code\n    }\n    this.setState({ stepComplete: complete });\n  }\n  changeCountry(evt, value) {\n    //set the value of the domain to terrestrial only if the country has no marine area\n    if (!this.props.countries[value].has_marine) {\n      this.changeDomain(null, 1);\n      this.setState({ domainEnabled: false });\n    } else {\n      this.setState({ domainEnabled: true });\n    }\n    this.setState(\n      {\n        iso3: this.props.countries[value].iso3,\n        country: this.props.countries[value].name_iso31,\n      },\n      () => this.getComplete()\n    );\n  }\n  changeDomain(evt, value) {\n    this.setState({ domain: CONSTANTS.DOMAINS[value] }, () =>\n      this.getComplete()\n    );\n  }\n  changeShape(evt, value) {\n    this.setState({ shape: CONSTANTS.SHAPES[value] }, () => this.getComplete());\n  }\n  changeAreaKm2(evt, value) {\n    this.setState({ areakm2: CONSTANTS.AREAKM2S[value] }, () =>\n      this.getComplete()\n    );\n  }\n  toggleWorldEcosystems(evt, isInputChecked) {\n    this.setState({ worldEcosystems: isInputChecked });\n  }\n  toggleAllSpecies(evt, isInputChecked) {\n    this.setState({ allSpecies: isInputChecked });\n  }\n  toggleEndemicSpecies(evt, isInputChecked) {\n    this.setState({ endemicSpecies: isInputChecked });\n  }\n  toggleEndangeredSpecies(evt, isInputChecked) {\n    this.setState({ endangeredSpecies: isInputChecked });\n  }\n  toggleIncludeExistingPAs(evt, isInputChecked) {\n    this.setState({ includeExistingPAs: isInputChecked });\n  }\n  changeIucnCategory(evt, value) {\n    this.setState({ iucn_category: CONSTANTS.IUCN_CATEGORIES[value] });\n  }\n  //create a new national project\n  createNewNationalProject() {\n    this.props.createNewNationalProject(this.state);\n  }\n  render() {\n    let dropDownStyle = { width: \"240px\" };\n    const actions = [\n      <div\n        style={{\n          width: \"100%\",\n          maxWidth: \"500px\",\n          margin: \"auto\",\n          textAlign: \"center\",\n        }}\n      >\n        <div style={{ margin: \"0 16px\" }}>\n          <div style={{ marginTop: 12 }}>\n            <ToolbarButton\n              label=\"Back\"\n              disabled={this.state.stepIndex === 0}\n              onClick={this.handlePrev}\n            />\n            <ToolbarButton\n              label={\n                this.state.stepIndex === this.state.steps.length - 1\n                  ? \"Finish\"\n                  : \"Next\"\n              }\n              onClick={\n                this.state.stepIndex === this.state.steps.length - 1\n                  ? this.createNewNationalProject.bind(this)\n                  : this.handleNext\n              }\n              primary={true}\n              disabled={!this.state.stepComplete}\n            />\n          </div>\n        </div>\n      </div>,\n    ];\n    const children = (\n      <div className={\"newNationalProjectContent\"}>\n        {this.state.stepIndex === 0 ? (\n          <React.Fragment key={\"_wiz01\"}>\n            <div>Choose a country and domain</div>\n            <SelectField\n              menuItemStyle={{ fontSize: \"12px\" }}\n              labelStyle={{ fontSize: \"12px\" }}\n              onChange={this.changeCountry.bind(this)}\n              value={this.state.iso3}\n              floatingLabelText=\"Country\"\n              floatingLabelFixed={true}\n            >\n              {this.props.countries.map((item) => {\n                return (\n                  <MenuItem\n                    style={{ fontSize: \"12px\" }}\n                    value={item.iso3}\n                    primaryText={item.name_iso31}\n                    key={item.iso3}\n                  />\n                );\n              })}\n            </SelectField>\n            <br />\n            <SelectField\n              menuItemStyle={{ fontSize: \"12px\" }}\n              labelStyle={{ fontSize: \"12px\" }}\n              onChange={this.changeDomain.bind(this)}\n              value={this.state.domain}\n              style={dropDownStyle}\n              floatingLabelText=\"Domain\"\n              floatingLabelFixed={true}\n              disabled={!this.state.domainEnabled}\n            >\n              {CONSTANTS.DOMAINS.map((item) => {\n                return (\n                  <MenuItem\n                    style={{ fontSize: \"12px\" }}\n                    value={item}\n                    primaryText={item}\n                    key={item}\n                  />\n                );\n              })}\n            </SelectField>\n          </React.Fragment>\n        ) : null}\n        {this.state.stepIndex === 1 ? (\n          <React.Fragment key={\"_wiz02\"}>\n            <div>Choose the shape and size of the planning units</div>\n            <SelectField\n              menuItemStyle={{ fontSize: \"12px\" }}\n              labelStyle={{ fontSize: \"12px\" }}\n              onChange={this.changeShape.bind(this)}\n              value={this.state.shape}\n              style={dropDownStyle}\n              floatingLabelText=\"Planning unit shape\"\n              floatingLabelFixed={true}\n            >\n              {CONSTANTS.SHAPES.map((item) => {\n                return (\n                  <MenuItem\n                    style={{ fontSize: \"12px\" }}\n                    value={item}\n                    primaryText={item}\n                    key={item}\n                  />\n                );\n              })}\n            </SelectField>\n            <br />\n            <SelectField\n              menuItemStyle={{ fontSize: \"12px\" }}\n              labelStyle={{ fontSize: \"12px\" }}\n              onChange={this.changeAreaKm2.bind(this)}\n              value={this.state.areakm2}\n              style={dropDownStyle}\n              floatingLabelText=\"Area of each planning unit\"\n              floatingLabelFixed={true}\n            >\n              {CONSTANTS.AREAKM2S.map((item) => {\n                return (\n                  <MenuItem\n                    style={{ fontSize: \"12px\" }}\n                    value={item}\n                    primaryText={item + \" Km2\"}\n                    key={item}\n                  />\n                );\n              })}\n            </SelectField>\n          </React.Fragment>\n        ) : null}\n        {this.state.stepIndex === 2 ? (\n          <React.Fragment key={\"_wiz03\"}>\n            <div>What habitats do you want to include in your project?</div>\n            <div className={\"habitatsList\"}>\n              <Checkbox\n                label=\"World Ecosystems\"\n                style={{ fontSize: \"12px\" }}\n                onCheck={this.toggleWorldEcosystems.bind(this)}\n              />\n            </div>\n          </React.Fragment>\n        ) : null}\n        {this.state.stepIndex === 3 ? (\n          <React.Fragment key={\"_wiz04\"}>\n            <div>What species do you want to include in your project?</div>\n            <div className={\"speciesList\"}>\n              <Checkbox\n                label={\"All species that occur in \" + this.state.country}\n                style={{ fontSize: \"12px\" }}\n                onCheck={this.toggleAllSpecies.bind(this)}\n              />\n              <Checkbox\n                label={\"All species that are endemic to \" + this.state.country}\n                style={{ fontSize: \"12px\" }}\n                onCheck={this.toggleEndemicSpecies.bind(this)}\n              />\n              <Checkbox\n                label={\n                  \"All endangered species that occur in \" + this.state.country\n                }\n                style={{ fontSize: \"12px\" }}\n                onCheck={this.toggleEndangeredSpecies.bind(this)}\n              />\n            </div>\n          </React.Fragment>\n        ) : null}\n        {this.state.stepIndex === 4 ? (\n          <React.Fragment key={\"_wiz05\"}>\n            <div>Do you want to include existing protected areas?</div>\n            <div className={\"speciesList\"}>\n              <Checkbox\n                label={\"Include existing protected areas\"}\n                style={{ fontSize: \"12px\" }}\n                onCheck={this.toggleIncludeExistingPAs.bind(this)}\n              />\n              <SelectField\n                menuItemStyle={{ fontSize: \"12px\" }}\n                labelStyle={{ fontSize: \"12px\" }}\n                onChange={this.changeIucnCategory.bind(this)}\n                value={this.state.iucn_category}\n                style={dropDownStyle}\n                floatingLabelText=\"IUCN Category\"\n                floatingLabelFixed={true}\n                disabled={!this.state.includeExistingPAs}\n              >\n                {CONSTANTS.IUCN_CATEGORIES.map((item) => {\n                  return (\n                    <MenuItem\n                      value={item}\n                      key={item}\n                      primaryText={item}\n                      style={{ fontSize: \"12px\" }}\n                    />\n                  );\n                })}\n              </SelectField>\n            </div>\n          </React.Fragment>\n        ) : null}\n      </div>\n    );\n    return (\n      <MarxanDialog\n        {...this.props}\n        title={\"New national project\"}\n        contentWidth={600}\n        showCancelButton={true}\n        onCancel={this.props.closeNewProjectWizardDialog}\n        onRequestClose={this.props.closeNewProjectWizardDialog}\n        helpLink={\"user.html#creating-new-projects\"}\n        actions={actions}\n        children={children}\n      />\n    );\n  }\n}\n\nexport default NewProjectWizardDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport ReactTable from \"react-table\";\n\nclass ProjectsListDialog extends React.Component {\n  renderName(row) {\n    return (\n      <div\n        style={{\n          width: \"100%\",\n          height: \"100%\",\n          backgroundColor: \"#dadada\",\n          borderRadius: \"2px\",\n        }}\n        title={row.original.name}\n      >\n        {row.original.name}\n      </div>\n    );\n  }\n  render() {\n    let tableColumns = [];\n    if ([\"Admin\"].includes(this.props.userRole)) {\n      tableColumns = [\n        {\n          Header: \"User\",\n          accessor: \"user\",\n          width: 90,\n          headerStyle: { textAlign: \"left\" },\n        },\n        {\n          Header: \"Name\",\n          accessor: \"name\",\n          width: 200,\n          headerStyle: { textAlign: \"left\" },\n          Cell: this.renderName.bind(this),\n        },\n      ];\n    } else {\n      tableColumns = [\n        {\n          Header: \"Name\",\n          accessor: \"name\",\n          width: 200,\n          headerStyle: { textAlign: \"left\" },\n          Cell: this.renderName.bind(this),\n        },\n      ];\n    }\n    if (this.props.projects) {\n      return (\n        <MarxanDialog\n          {...this.props}\n          // titleBarIcon={faBookOpen}\n          showCancelButton={false}\n          autoDetectWindowHeight={false}\n          bodyStyle={{ padding: \"0px 24px 0px 24px\" }}\n          title={this.props.title}\n          contentWidth={500}\n          helpLink={\"user.html#projects-list\"}\n          children={\n            <React.Fragment key=\"k24\">\n              <div style={{ marginBottom: \"5px\" }}>{this.props.heading}</div>\n              <div id=\"failedProjectsTable\">\n                <ReactTable\n                  pageSize={this.props.projects.length}\n                  className={\"projectsReactTable\"}\n                  showPagination={false}\n                  minRows={0}\n                  noDataText=\"\"\n                  data={this.props.projects}\n                  thisRef={this}\n                  columns={tableColumns}\n                />\n              </div>\n            </React.Fragment>\n          }\n        />\n      );\n    } else {\n      return null;\n    }\n  }\n}\n\nexport default ProjectsListDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from \"react\";\nimport mapboxgl from \"mapbox-gl\";\nimport { zoomToBounds } from \"./Helpers.js\";\n//TODO: Combine this with MapContainer.js as they do similar things\nclass MapContainer2 extends React.Component {\n  componentDidMount() {\n    this.map = new mapboxgl.Map({\n      container: this.mapContainer,\n      style: \"mapbox://styles/andrewcottam/cjg6jk8vg3tir2spd2eatu5fd\", //north star + marine PAs in pacific\n      center: [0, 0],\n      zoom: 2,\n      attributionControl: false,\n    });\n    this.map.on(\"load\", (evt) => {\n      let color = this.props.color ? this.props.color : \"rgba(255, 0, 0, 0.4)\";\n      let outlineColor = this.props.outlineColor\n        ? this.props.outlineColor\n        : \"rgba(255, 0, 0, 0.5)\";\n      evt.target.addLayer({\n        id: \"planning_grid\",\n        type: \"fill\",\n        source: {\n          type: \"vector\",\n          url: \"mapbox://\" + this.props.planning_grid_metadata.tilesetid,\n        },\n        \"source-layer\": this.props.planning_grid_metadata.feature_class_name,\n        paint: {\n          \"fill-color\": color,\n          \"fill-opacity\": 0.9,\n          \"fill-outline-color\": outlineColor,\n        },\n      });\n    });\n    this.props\n      .getTilesetMetadata(this.props.planning_grid_metadata.tilesetid)\n      .then((tileset) => {\n        if (tileset.bounds != null) zoomToBounds(this.map, tileset.bounds);\n      })\n      .catch((error) => {\n        this.props.setSnackBar(error);\n      });\n  }\n\n  componentWillUnmount() {\n    //remove the map and free all resources\n    if (this.map) this.map.remove();\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <div className={\"floatLeft mapContainer2\"}>\n          <div>\n            <div\n              ref={(el) => (this.mapContainer = el)}\n              className=\"absolute top right left bottom\"\n              style={{\n                width: \"352px\",\n                height: \"300px\",\n                marginTop: \"50px\",\n                marginLeft: \"24px\",\n              }}\n            />\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default MapContainer2;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport MapContainer2 from \"./MapContainer2\";\nimport FontAwesome from \"react-fontawesome\";\n\nclass PlanningGridDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { expanded: false };\n  }\n  expand() {\n    this.setState({ expanded: !this.state.expanded });\n  }\n  getProjectList() {\n    this.props.getProjectList(\n      this.props.planning_grid_metadata,\n      \"planning_grid\"\n    );\n  }\n  render() {\n    let areaTD = this.props.planning_grid_metadata._area ? (\n      <td className=\"metadataItemValue\">\n        {this.props.planning_grid_metadata._area}Km\n        <span className=\"superscript\">2</span>\n      </td>\n    ) : (\n      <td />\n    );\n    // let country_idTD = (this.props.planning_grid_metadata.country_id) ? <td className='metadataItemValue'>{this.props.planning_grid_metadata.country_id}</td> : <td/>;\n    return (\n      <MarxanDialog\n        {...this.props}\n        onRequestClose={this.props.onCancel}\n        showCancelButton={false}\n        title={this.props.planning_grid_metadata.alias}\n        helpLink={\"user.html#the-planning-grid-details-window\"}\n        contentWidth={768}\n        children={\n          <React.Fragment key=\"k27\">\n            <MapContainer2\n              planning_grid_metadata={this.props.planning_grid_metadata}\n              getTilesetMetadata={this.props.getTilesetMetadata}\n              setSnackBar={this.props.setSnackBar}\n            />\n            <div className=\"metadataPanel\">\n              <table>\n                <tbody>\n                  <tr>\n                    <td colSpan=\"2\" className=\"metadataItemTitle\">\n                      Description:\n                    </td>\n                  </tr>\n                  <tr>\n                    <td colSpan=\"2\" className=\"metadataItemValue2\">\n                      {this.props.planning_grid_metadata.description}\n                    </td>\n                  </tr>\n                  <tr>\n                    <td className=\"metadataItemTitle\">Country:</td>\n                    <td className=\"metadataItemValue\">\n                      {this.props.planning_grid_metadata.country}\n                    </td>\n                  </tr>\n                  <tr>\n                    <td className=\"metadataItemTitle\">Domain:</td>\n                    <td className=\"metadataItemValue\">\n                      {this.props.planning_grid_metadata.domain}\n                    </td>\n                  </tr>\n                  <tr>\n                    <td className=\"metadataItemTitle\">Area:</td>\n                    {areaTD}\n                  </tr>\n                  <tr>\n                    <td className=\"metadataItemTitle\">Unit count:</td>\n                    <td className=\"metadataItemValue\">\n                      {this.props.planning_grid_metadata.planning_unit_count}\n                    </td>\n                  </tr>\n                  <tr>\n                    <td className=\"metadataItemTitle\">Created:</td>\n                    <td className=\"metadataItemValue\">\n                      {this.props.planning_grid_metadata.creation_date}\n                    </td>\n                  </tr>\n                  <tr>\n                    <td className=\"metadataItemTitle\">Created by:</td>\n                    <td className=\"metadataItemValue\">\n                      {this.props.planning_grid_metadata.created_by}\n                    </td>\n                  </tr>\n                  <tr>\n                    <td className=\"metadataItemTitle\">Source:</td>\n                    <td className=\"metadataItemValue\">\n                      {this.props.planning_grid_metadata.source}\n                    </td>\n                  </tr>\n                  <tr\n                    style={{\n                      display: this.state.expanded ? \"table-row\" : \"none\",\n                    }}\n                  >\n                    <td className=\"metadataItemTitle\">aoi_id:</td>\n                    <td className=\"metadataItemValue\">\n                      {this.props.planning_grid_metadata.aoi_id}\n                    </td>\n                  </tr>\n                  {/*<tr style={{display:(this.state.expanded) ? 'table-row' : 'none'}}>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>country_id:</td>\n\t\t\t\t\t\t\t\t\t\t{country_idTD}\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr style={{display:(this.state.expanded) ? 'table-row' : 'none'}}>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemTitle'>guid:</td>\n\t\t\t\t\t\t\t\t\t\t<td className='metadataItemValue'>{this.props.planning_grid_metadata.feature_class_name}</td>\n\t\t\t\t\t\t\t\t\t</tr>*/}\n                  <tr\n                    style={{\n                      display: this.state.expanded ? \"table-row\" : \"none\",\n                    }}\n                  >\n                    <td className=\"metadataItemTitle\">tilesetid:</td>\n                    <td className=\"metadataItemValue\">\n                      {this.props.planning_grid_metadata.tilesetid}\n                    </td>\n                  </tr>\n                  <tr\n                    style={{\n                      display: this.state.expanded ? \"table-row\" : \"none\",\n                    }}\n                  >\n                    <td className=\"metadataItemTitle\">Projects:</td>\n                    <td className=\"metadataItemValue\">\n                      <FontAwesome\n                        name=\"external-link-alt\"\n                        onClick={this.getProjectList.bind(this)}\n                        title=\"View a list of projects that this planning grid is used in\"\n                        style={{ cursor: \"pointer\", paddingTop: \"6px\" }}\n                      />\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n              <div\n                onClick={this.expand.bind(this)}\n                title={\n                  this.state.expanded\n                    ? \"Show less details\"\n                    : \"Show more details\"\n                }\n                className={\"textHyperlink\"}\n              >\n                {this.state.expanded ? \"less\" : \"more..\"}\n              </div>\n              <div>You may need to zoom in to see the planning grid units</div>\n            </div>\n          </React.Fragment>\n        }\n      />\n    ); //return\n  }\n}\n\nexport default PlanningGridDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n// import { faBookOpen } from '@fortawesome/free-solid-svg-icons';\nimport { faPlusCircle } from \"@fortawesome/free-solid-svg-icons\";\nimport { faTrashAlt } from \"@fortawesome/free-regular-svg-icons\";\n// import { faSync } from '@fortawesome/free-solid-svg-icons';\nimport Import from \"material-ui/svg-icons/action/get-app\";\nimport Export from \"material-ui/svg-icons/editor/publish\";\nimport ToolbarButton from \"./ToolbarButton\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport MarxanTable from \"./MarxanTable\";\n\nclass PlanningGridsDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { searchText: \"\", selectedPlanningGrid: undefined };\n  }\n  _delete() {\n    this.props.deletePlanningGrid(\n      this.state.selectedPlanningGrid.feature_class_name\n    );\n    this.setState({ selectedPlanningGrid: false });\n  }\n  _new() {\n    this.props.openNewPlanningGridDialog();\n    this.closeDialog();\n  }\n  openImportDialog() {\n    this.props.openImportPlanningGridDialog();\n    this.closeDialog();\n  }\n  exportPlanningGrid() {\n    this.props\n      .exportPlanningGrid(this.state.selectedPlanningGrid.feature_class_name)\n      .then((url) => {\n        window.location = url;\n      });\n    this.closeDialog();\n  }\n  changePlanningGrid(event, planningGrid) {\n    this.setState({ selectedPlanningGrid: planningGrid });\n  }\n  closeDialog() {\n    this.setState({ selectedPlanningGrid: undefined });\n    this.props.onOk();\n  }\n  preview(planning_grid_metadata) {\n    this.props.previewPlanningGrid(planning_grid_metadata);\n  }\n  sortDate(a, b, desc) {\n    return new Date(\n      a.slice(6, 8),\n      a.slice(3, 5) - 1,\n      a.slice(0, 2),\n      a.slice(9, 11),\n      a.slice(12, 14),\n      a.slice(15, 17)\n    ) >\n      new Date(\n        b.slice(6, 8),\n        b.slice(3, 5) - 1,\n        b.slice(0, 2),\n        b.slice(9, 11),\n        b.slice(12, 14),\n        b.slice(15, 17)\n      )\n      ? 1\n      : -1;\n  }\n  renderName(row) {\n    return (\n      <div\n        style={{\n          width: \"100%\",\n          height: \"100%\",\n          backgroundColor: \"#dadada\",\n          borderRadius: \"2px\",\n        }}\n        title={\n          row.original.alias + \" (\" + row.original.feature_class_name + \")\"\n        }\n      >\n        {row.original.alias}\n      </div>\n    );\n  }\n  renderTitle(row) {\n    return (\n      <div\n        style={{\n          width: \"100%\",\n          height: \"100%\",\n          backgroundColor: \"#dadada\",\n          borderRadius: \"2px\",\n        }}\n        title={row.original.description}\n      >\n        {row.original.description}\n      </div>\n    );\n  }\n  renderDate(row) {\n    return (\n      <div\n        style={{\n          width: \"100%\",\n          height: \"100%\",\n          backgroundColor: \"#dadada\",\n          borderRadius: \"2px\",\n        }}\n        title={row.original.creation_date}\n      >\n        {row.original.creation_date.substr(0, 8)}\n      </div>\n    );\n  }\n  renderCreatedBy(row) {\n    return (\n      <div\n        style={{\n          width: \"100%\",\n          height: \"100%\",\n          backgroundColor: \"#dadada\",\n          borderRadius: \"2px\",\n        }}\n        title={row.original.created_by}\n      >\n        {row.original.created_by}\n      </div>\n    );\n  }\n  renderCountry(row) {\n    return (\n      <div\n        style={{\n          width: \"100%\",\n          height: \"100%\",\n          backgroundColor: \"#dadada\",\n          borderRadius: \"2px\",\n        }}\n        title={row.original.country}\n      >\n        {row.original.country}\n      </div>\n    );\n  }\n  renderArea(row) {\n    return (\n      <div\n        style={{\n          width: \"100%\",\n          height: \"100%\",\n          backgroundColor: \"#dadada\",\n          borderRadius: \"2px\",\n        }}\n      >\n        {isNaN(row.original._area) ? \"\" : row.original._area}\n      </div>\n    );\n  }\n  renderPreview(row) {\n    return (\n      <div\n        style={{\n          width: \"100%\",\n          height: \"100%\",\n          backgroundColor: \"#dadada\",\n          borderRadius: \"2px\",\n        }}\n        title=\"Click to preview\"\n      >\n        ..\n      </div>\n    );\n  }\n  searchTextChanged(value) {\n    this.setState({ searchText: value });\n  }\n  render() {\n    let tableColumns = [];\n    tableColumns = [\n      {\n        Header: \"Name\",\n        accessor: \"alias\",\n        width: 290,\n        headerStyle: { textAlign: \"left\" },\n        Cell: this.renderName.bind(this),\n      },\n      {\n        Header: \"Description\",\n        accessor: \"description\",\n        width: 269,\n        headerStyle: { textAlign: \"left\" },\n        Cell: this.renderTitle.bind(this),\n      },\n      // { Header: 'Country', accessor: 'country', width: 70, headerStyle: { 'textAlign': 'left' }, Cell: this.renderCountry.bind(this)},\n      // { Header: 'Domain', accessor: 'domain', width: 70, headerStyle: { 'textAlign': 'left' }},\n      // { Header: 'Area (Km2)', accessor: '_area', width: 73, headerStyle: { 'textAlign': 'left' }, Cell: this.renderArea.bind(this) },\n      {\n        Header: \"Created\",\n        accessor: \"creation_date\",\n        width: 70,\n        headerStyle: { textAlign: \"left\" },\n        Cell: this.renderDate.bind(this),\n        sortMethod: this.sortDate.bind(this),\n      },\n      {\n        Header: \"Created by\",\n        accessor: \"created_by\",\n        width: 70,\n        headerStyle: { textAlign: \"left\" },\n        Cell: this.renderCreatedBy.bind(this),\n      },\n      {\n        Header: \"\",\n        width: 8,\n        headerStyle: { textAlign: \"center\" },\n        Cell: this.renderPreview.bind(this),\n      },\n    ];\n    return (\n      <MarxanDialog\n        {...this.props}\n        // titleBarIcon={faBookOpen}\n        onOk={this.closeDialog.bind(this)}\n        showCancelButton={false}\n        helpLink={\"user.html#the-planning-grids-window\"}\n        autoDetectWindowHeight={false}\n        bodyStyle={{ padding: \"0px 24px 0px 24px\" }}\n        title=\"Planning grids\"\n        showSearchBox={true}\n        searchTextChanged={this.searchTextChanged.bind(this)}\n        children={\n          <React.Fragment key=\"k2\">\n            <div id=\"projectsTable\">\n              <MarxanTable\n                data={this.props.planningGrids}\n                columns={tableColumns}\n                searchColumns={[\n                  \"country\",\n                  \"domain\",\n                  \"alias\",\n                  \"description\",\n                  \"created_by\",\n                ]}\n                searchText={this.state.searchText}\n                selectedPlanningGrid={this.state.selectedPlanningGrid}\n                changePlanningGrid={this.changePlanningGrid.bind(this)}\n                getTrProps={(state, rowInfo) => {\n                  return {\n                    style: {\n                      background:\n                        rowInfo.original.alias ===\n                        (state.selectedPlanningGrid &&\n                          state.selectedPlanningGrid.alias)\n                          ? \"aliceblue\"\n                          : \"\",\n                    },\n                    onClick: (e) => {\n                      state.changePlanningGrid(e, rowInfo.original);\n                    },\n                  };\n                }}\n                getTdProps={(state, rowInfo, column) => {\n                  return {\n                    onClick: (e) => {\n                      if (column.Header === \"\") this.preview(rowInfo.original);\n                    },\n                  };\n                }}\n              />\n            </div>\n            <div\n              id=\"projectsToolbar\"\n              style={{\n                display: this.props.userRole === \"ReadOnly\" ? \"none\" : \"block\",\n              }}\n            >\n              <ToolbarButton\n                show={\n                  !this.props.unauthorisedMethods.includes(\n                    \"createPlanningUnitGrid\"\n                  )\n                }\n                icon={<FontAwesomeIcon icon={faPlusCircle} />}\n                title=\"New planning grid\"\n                onClick={this._new.bind(this)}\n                label={\"New\"}\n              />\n              <ToolbarButton\n                show={\n                  !this.props.unauthorisedMethods.includes(\n                    \"importPlanningUnitGrid\"\n                  )\n                }\n                icon={<Import style={{ height: \"20px\", width: \"20px\" }} />}\n                title=\"Import an existing planning grid from the local machine\"\n                onClick={this.openImportDialog.bind(this)}\n                label={\"Import\"}\n              />\n              <ToolbarButton\n                show={\n                  !this.props.unauthorisedMethods.includes(\n                    \"exportPlanningUnitGrid\"\n                  )\n                }\n                icon={<Export style={{ height: \"20px\", width: \"20px\" }} />}\n                title=\"Export planning grid\"\n                onClick={this.exportPlanningGrid.bind(this)}\n                disabled={\n                  !this.state.selectedPlanningGrid || this.props.loading\n                }\n                label={\"Export\"}\n              />\n              <ToolbarButton\n                show={\n                  !this.props.unauthorisedMethods.includes(\n                    \"deletePlanningUnitGrid\"\n                  )\n                }\n                icon={\n                  <FontAwesomeIcon\n                    icon={faTrashAlt}\n                    color=\"rgb(255, 64, 129)\"\n                  />\n                }\n                title=\"Delete planning grid\"\n                disabled={\n                  !this.state.selectedPlanningGrid ||\n                  this.props.loading ||\n                  (this.state.selectedPlanningGrid &&\n                    this.state.selectedPlanningGrid.created_by ===\n                      \"global admin\")\n                }\n                onClick={this._delete.bind(this)}\n                label={\"Delete\"}\n              />\n              {/*<ToolbarButton  \n\t\t\t\t\t\t\t\tshow={(this.props.marxanServer.system !== \"Windows\")}\n\t\t\t\t\t\t\t\ticon={<FontAwesomeIcon icon={faSync} color='rgb(51, 153, 51)'/>} \n\t\t\t\t\t\t\t\ttitle=\"Refresh planning grids\" \n\t\t\t\t\t\t\t\tdisabled={this.props.loading}\n\t\t\t\t\t\t\t\tonClick={this.props.getPlanningUnitGrids} \n\t\t\t\t\t\t\t\tlabel={\"Refresh\"}\n\t\t\t\t\t\t\t/>*/}\n            </div>\n          </React.Fragment>\n        }\n      />\n    ); //return\n  }\n}\n\nexport default PlanningGridsDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from \"react\";\nimport CONSTANTS from \"./constants\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport SelectField from \"material-ui/SelectField\";\nimport MenuItem from \"material-ui/MenuItem\";\n// import ToolbarButton from \"./ToolbarButton\";\n// import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n// import { faArrowAltCircleUp } from '@fortawesome/free-regular-svg-icons';\n\nclass NewPlanningGridDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      iso3: \"\",\n      domain: \"\",\n      shape: \"\",\n      areakm2: undefined,\n      domainEnabled: true,\n    };\n  }\n  changeIso3(evt, value) {\n    let iso3 = this.props.countries[value].iso3;\n    if ([\"FJI\", \"KIR\", \"NZL\", \"RUS\", \"TUV\", \"USA\", \"WLF\"].includes(iso3)) {\n      //no support currently for countries that span the meridian\n      // this.setState({iso3: undefined});\n      // this.props.setSnackBar(\"Countries that span the meridian are currently not supported. See <a href='\" + CONSTANTS.ERRORS_PAGE + \"#planning-grids-cannot-be-created-for-countries-that-span-the-meridian' target='blank'>here</a>\");\n      this.setState({ iso3: this.props.countries[value].iso3 });\n    } else {\n      this.setState({ iso3: this.props.countries[value].iso3 });\n    }\n    //set the value of the domain to terrestrial only if the country has no marine area\n    if (!this.props.countries[value].has_marine) {\n      this.changeDomain(null, 1);\n      this.setState({ domainEnabled: false });\n    } else {\n      this.setState({ domainEnabled: true });\n    }\n  }\n  changeDomain(evt, value) {\n    this.setState({ domain: CONSTANTS.DOMAINS[value] });\n  }\n  changeShape(evt, value) {\n    this.setState({ shape: CONSTANTS.SHAPES[value] });\n  }\n  changeAreaKm2(evt, value) {\n    this.setState({ areakm2: CONSTANTS.AREAKM2S[value] });\n  }\n  onOk() {\n    //create the new planning grid\n    this.props\n      .createNewPlanningUnitGrid(\n        this.state.iso3,\n        this.state.domain,\n        this.state.areakm2,\n        this.state.shape\n      )\n      .then(\n        function (response) {\n          //close the dialog\n          this.props.onCancel();\n        }.bind(this)\n      );\n  }\n  render() {\n    let dropDownStyle = { width: \"240px\" };\n    return (\n      <MarxanDialog\n        {...this.props}\n        onOk={this.onOk.bind(this)}\n        onRequestClose={this.props.onCancel}\n        okDisabled={\n          !this.state.iso3 ||\n          !this.state.domain ||\n          !this.state.areakm2 ||\n          this.props.loading\n        }\n        cancelLabel={\"Cancel\"}\n        showCancelButton={true}\n        helpLink={\"user.html#creating-new-planning-grids-using-marxan-web\"}\n        title=\"New planning grid\"\n        contentWidth={358}\n        children={\n          <React.Fragment key=\"k13\">\n            <div>\n              <SelectField\n                menuItemStyle={{ fontSize: \"12px\" }}\n                labelStyle={{ fontSize: \"12px\" }}\n                onChange={this.changeIso3.bind(this)}\n                value={this.state.iso3}\n                floatingLabelText=\"Area of interest\"\n                floatingLabelFixed={true}\n              >\n                {this.props.countries.map((item) => {\n                  return (\n                    <MenuItem\n                      style={{ fontSize: \"12px\" }}\n                      value={item.iso3}\n                      primaryText={item.name_iso31}\n                      key={item.iso3}\n                    />\n                  );\n                })}\n              </SelectField>\n              {/*<ToolbarButton icon={<FontAwesomeIcon icon={faArrowAltCircleUp} />} title=\"Load a custom area of interest from a shapefile (not currently implemented)\" style={{position: 'absolute', top: '83px', right: '32px'}}/>*/}\n            </div>\n            <div>\n              <SelectField\n                menuItemStyle={{ fontSize: \"12px\" }}\n                labelStyle={{ fontSize: \"12px\" }}\n                onChange={this.changeDomain.bind(this)}\n                value={this.state.domain}\n                style={dropDownStyle}\n                floatingLabelText=\"Domain\"\n                floatingLabelFixed={true}\n                disabled={!this.state.domainEnabled}\n              >\n                {CONSTANTS.DOMAINS.map((item) => {\n                  return (\n                    <MenuItem\n                      style={{ fontSize: \"12px\" }}\n                      value={item}\n                      primaryText={item}\n                      key={item}\n                    />\n                  );\n                })}\n              </SelectField>\n            </div>\n            <div>\n              <SelectField\n                menuItemStyle={{ fontSize: \"12px\" }}\n                labelStyle={{ fontSize: \"12px\" }}\n                onChange={this.changeShape.bind(this)}\n                value={this.state.shape}\n                style={dropDownStyle}\n                floatingLabelText=\"Planning unit shape\"\n                floatingLabelFixed={true}\n              >\n                {CONSTANTS.SHAPES.map((item) => {\n                  return (\n                    <MenuItem\n                      style={{ fontSize: \"12px\" }}\n                      value={item}\n                      primaryText={item}\n                      key={item}\n                    />\n                  );\n                })}\n              </SelectField>\n            </div>\n            <div>\n              <SelectField\n                menuItemStyle={{ fontSize: \"12px\" }}\n                labelStyle={{ fontSize: \"12px\" }}\n                onChange={this.changeAreaKm2.bind(this)}\n                value={this.state.areakm2}\n                style={dropDownStyle}\n                floatingLabelText=\"Area of each planning unit\"\n                floatingLabelFixed={true}\n              >\n                {CONSTANTS.AREAKM2S.map((item) => {\n                  return (\n                    <MenuItem\n                      style={{ fontSize: \"12px\" }}\n                      value={item}\n                      primaryText={item + \" Km2\"}\n                      key={item}\n                    />\n                  );\n                })}\n              </SelectField>\n            </div>\n          </React.Fragment>\n        }\n      />\n    );\n  }\n}\n\nexport default NewPlanningGridDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\n/*eslint-disable no-unused-vars*/\nimport axios, { post } from \"axios\";\n/*eslint-enable no-unused-vars*/\nimport FontAwesome from \"react-fontawesome\";\nimport Sync from \"material-ui/svg-icons/notification/sync\";\n\n//From AshikNesin https://gist.github.com/AshikNesin/e44b1950f6a24cfcd85330ffc1713513\n\nclass FileUpload extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: false,\n      active: false,\n    };\n    this.onChange = this.onChange.bind(this);\n    //the destination folder on the server where the file will be uploaded\n    this.destFolder = props.hasOwnProperty(\"destFolder\")\n      ? props.destFolder\n      : \"\";\n  }\n\n\tonClick(e){\n\t\tthis.setState({active:true});\n\t}\n\tonChange(e) {\n\t\tif (e.target.files.length) {\n\t\t\t//set the loading state \n\t\t\tthis.setState({ loading: true });\n\t\t\t//get the filename - if a unique filename is needed then append the user in front\n\t\t\tthis.filename = (this.props.hasOwnProperty('uniqueName')) ? this.props.user + e.target.files[0].name : e.target.files[0].name;\n\t\t\t//upload the file\n\t\t\tthis.props.fileUpload(e.target.files[0], this.filename, this.destFolder).then(response=>{\n\t\t\t\tthis.setState({ loading: false,active:false});\n\t\t\t\tthis.props.setFilename(this.filename);\n\t\t\t});\n\t\t\t//reset the file selector\n\t\t\tdocument.getElementById(this.id).value = \"\";\n\t\t}\n\t}\n\n  render() {\n    this.id = \"upload\" + this.props.parameter;\n    return (\n      <form style={this.props.style}>\n        <div\n          className=\"uploadLabel\"\n          style={{\n            color: this.state.active\n              ? \"rgb(0, 188, 212)\"\n              : \"rgba(0, 0, 0, 0.3)\",\n          }}\n        >\n          {this.props.label}\n        </div>\n        <div className=\"uploadFileField\">\n          <div className=\"uploadFileFieldIcon\">\n            <label htmlFor={this.id}>\n              <FontAwesome\n                name=\"file\"\n                title=\"Click to upload a file\"\n                style={{ cursor: \"pointer\" }}\n              />\n            </label>\n            <input\n              type=\"file\"\n              onChange={this.onChange}\n              onClick={this.onClick.bind(this)}\n              accept={this.props.fileMatch}\n              style={{ display: \"none\", width: \"10px\" }}\n              id={this.id}\n            />\n          </div>\n          <div className=\"uploadFileFieldLabel\" style={{ width: \"168px\" }}>\n            {this.props.filename}\n          </div>\n        </div>\n        <Sync\n          className=\"spin\"\n          style={{\n            display: this.state.loading ? \"inline-block\" : \"none\",\n            marginLeft: \"6px\",\n            color: \"rgb(255, 64, 129)\",\n            height: \"22px\",\n            width: \"22px\",\n            verticalAlign: \"middle\",\n          }}\n          key={\"spinner\"}\n        />\n      </form>\n    );\n  }\n}\n\nexport default FileUpload;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from \"react\";\nimport MarxanTextField from \"./MarxanTextField\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport FileUpload from \"./FileUpload\";\n\nclass ImportPlanningGridDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { planning_grid_name: \"\", zipFilename: \"\", description: \"\" };\n  }\n  changeName(event, newValue) {\n    this.setState({ planning_grid_name: newValue });\n  }\n  changeDescription(event, newValue) {\n    this.setState({ description: newValue });\n  }\n  setzipFilename(filename) {\n    this.setState({ zipFilename: filename });\n  }\n  onOk() {\n    let _description =\n      this.state.description === \"\"\n        ? \"Imported using the import planning grid dialog\"\n        : this.state.description;\n    this.props\n      .onOk(this.state.zipFilename, this.state.planning_grid_name, _description)\n      .then(function (response) {\n        //reset the state\n        this.setState({\n          planning_grid_name: \"\",\n          zipFilename: \"\",\n          description: \"\",\n        });\n      })\n      .catch(function (ex) {\n        //error uploading the shapefile\n      });\n  }\n  render() {\n    return (\n      <MarxanDialog\n        {...this.props}\n        title={\"Import planning grid\"}\n        contentWidth={390}\n        children={\n          <React.Fragment key=\"22\">\n            <FileUpload\n              {...this.props}\n              fileMatch={\".zip\"}\n              destFolder=\"imports\"\n              mandatory={true}\n              filename={this.state.zipFilename}\n              setFilename={this.setzipFilename.bind(this)}\n              label=\"Shapefile\"\n            />\n            <MarxanTextField\n              style={{ width: \"310px\" }}\n              value={this.state.planning_grid_name}\n              onChange={this.changeName.bind(this)}\n              floatingLabelText=\"Name\"\n            />\n            <MarxanTextField\n              style={{ width: \"310px\" }}\n              value={this.state.description}\n              onChange={this.changeDescription.bind(this)}\n              multiLine={true}\n              rows={2}\n              floatingLabelText=\"Enter a description\"\n            />\n          </React.Fragment>\n        }\n        showCancelButton={true}\n        onOk={this.onOk.bind(this)}\n        okDisabled={\n          this.props.loading ||\n          this.state.planning_grid_name === \"\" ||\n          this.state.zipFilename === \"\" ||\n          this.state.description === \"\"\n        }\n        onRequestClose={this.props.onCancel.bind(this)}\n        helpLink={\"user.html#importing-existing-planning-grids\"}\n      />\n    );\n  }\n}\n\nexport default ImportPlanningGridDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport MapContainer2 from \"./MapContainer2\";\nimport { getArea } from \"./Helpers.js\";\nimport FontAwesome from \"react-fontawesome\";\n\nclass FeatureDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { expanded: false };\n  }\n  expand() {\n    this.setState({ expanded: !this.state.expanded });\n  }\n  getProjectList() {\n    this.props.getProjectList(this.props.feature_metadata, \"feature\");\n  }\n  render() {\n    //get the area or amount depending on whether the feature is a polygon or a point layer\n    let amount =\n      this.props.feature_metadata.source === \"Imported shapefile\"\n        ? getArea(\n            this.props.feature_metadata.area,\n            this.props.reportUnits,\n            true\n          )\n        : this.props.feature_metadata.area;\n    let unit =\n      this.props.feature_metadata.source === \"Imported shapefile\"\n        ? \"Area\"\n        : \"Amount\";\n    return (\n      <MarxanDialog\n        {...this.props}\n        onRequestClose={this.props.onCancel}\n        showCancelButton={false}\n        title={this.props.feature_metadata.alias}\n        helpLink={\"user.html#the-feature-details-window\"}\n        contentWidth={768}\n        children={\n          <React.Fragment key=\"k26\">\n            <MapContainer2\n              planning_grid_metadata={this.props.feature_metadata}\n              getTilesetMetadata={this.props.getTilesetMetadata}\n              setSnackBar={this.props.setSnackBar}\n              color={this.props.feature_metadata.color}\n              outlineColor={\"rgba(0, 0, 0, 0.2)\"}\n            />\n            <div className=\"metadataPanel\">\n              <table>\n                <tbody>\n                  <tr>\n                    <td colSpan=\"2\" className=\"metadataItemTitle\">\n                      Description:\n                    </td>\n                  </tr>\n                  <tr>\n                    <td colSpan=\"2\" className=\"metadataItemValue2\">\n                      {this.props.feature_metadata.description}\n                    </td>\n                  </tr>\n                  <tr>\n                    <td className=\"metadataItemTitle\">{unit}</td>\n                    <td className=\"metadataItemValue\">{amount}</td>\n                  </tr>\n                  <tr>\n                    <td className=\"metadataItemTitle\">Created:</td>\n                    <td className=\"metadataItemValue\">\n                      {this.props.feature_metadata.creation_date}\n                    </td>\n                  </tr>\n                  <tr>\n                    <td className=\"metadataItemTitle\">Created by:</td>\n                    <td className=\"metadataItemValue\">\n                      {this.props.feature_metadata.created_by}\n                    </td>\n                  </tr>\n                  <tr>\n                    <td className=\"metadataItemTitle\">Source:</td>\n                    <td className=\"metadataItemValue\">\n                      {this.props.feature_metadata.source}\n                    </td>\n                  </tr>\n                  <tr\n                    style={{\n                      display: this.state.expanded ? \"table-row\" : \"none\",\n                    }}\n                  >\n                    <td className=\"metadataItemTitle\">id:</td>\n                    <td className=\"metadataItemValue\">\n                      {this.props.feature_metadata.id}\n                    </td>\n                  </tr>\n                  <tr\n                    style={{\n                      display: this.state.expanded ? \"table-row\" : \"none\",\n                    }}\n                  >\n                    <td className=\"metadataItemTitle\">guid:</td>\n                    <td className=\"metadataItemValue\">\n                      {this.props.feature_metadata.feature_class_name}\n                    </td>\n                  </tr>\n                  <tr\n                    style={{\n                      display: this.state.expanded ? \"table-row\" : \"none\",\n                    }}\n                  >\n                    <td className=\"metadataItemTitle\">tileset:</td>\n                    <td className=\"metadataItemValue\">\n                      {this.props.feature_metadata.tilesetid}\n                    </td>\n                  </tr>\n                  <tr\n                    style={{\n                      display: this.state.expanded ? \"table-row\" : \"none\",\n                    }}\n                  >\n                    <td className=\"metadataItemTitle\">Projects:</td>\n                    <td className=\"metadataItemValue\">\n                      <FontAwesome\n                        name=\"external-link-alt\"\n                        onClick={this.getProjectList.bind(this)}\n                        title=\"View a list of projects that this feature is used in\"\n                        style={{ cursor: \"pointer\", paddingTop: \"6px\" }}\n                      />\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n              <div\n                onClick={this.expand.bind(this)}\n                title={\n                  this.state.expanded\n                    ? \"Show less details\"\n                    : \"Show more details\"\n                }\n                className={\"textHyperlink\"}\n              >\n                {this.state.expanded ? \"less\" : \"more..\"}\n              </div>\n            </div>\n          </React.Fragment>\n        }\n      />\n    ); //return\n  }\n}\n\nexport default FeatureDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport MarxanTextField from \"./MarxanTextField\";\nimport Checkbox from \"material-ui/Checkbox\";\n\nclass NewFeatureDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { name: \"\", description: \"\" };\n  }\n  changeName(event, newValue) {\n    this.setState({ name: newValue });\n  }\n  changeDescription(event, newValue) {\n    this.setState({ description: newValue });\n  }\n  createNewFeature() {\n    this.props.createNewFeature(this.state.name, this.state.description);\n  }\n  render() {\n    let c = (\n      <React.Fragment key=\"k12\">\n        <div>\n          <MarxanTextField\n            value={this.state.name}\n            onChange={this.changeName.bind(this)}\n            floatingLabelText=\"Enter a name\"\n          />\n          <MarxanTextField\n            value={this.state.description}\n            onChange={this.changeDescription.bind(this)}\n            multiLine={true}\n            rows={2}\n            floatingLabelText=\"Enter a description\"\n          />\n          <Checkbox\n            label=\"Add to project\"\n            style={{\n              fontSize: \"12px\",\n              width: \"200px\",\n              display: \"inline-block\",\n              marginTop: \"10px\",\n            }}\n            onCheck={this.props.setAddToProject}\n            checked={this.props.addToProject}\n          />\n        </div>\n      </React.Fragment>\n    );\n    return (\n      <MarxanDialog\n        {...this.props}\n        onOk={this.createNewFeature.bind(this)}\n        okDisabled={\n          !(\n            this.state.name !== \"\" &&\n            this.state.description !== \"\" &&\n            this.props.loading === false\n          )\n        }\n        showCancelButton={true}\n        contentWidth={390}\n        title=\"Create new feature\"\n        children={c}\n        onRequestClose={this.props.onOk}\n        helpLink={\"user.html#drawing-features-on-screen\"}\n      />\n    );\n  }\n}\n\nexport default NewFeatureDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport MarxanTextField from \"./MarxanTextField\";\nimport FileUpload from \"./FileUpload.js\";\nimport SelectField from \"material-ui/SelectField\";\nimport MenuItem from \"material-ui/MenuItem\";\nimport ToolbarButton from \"./ToolbarButton\";\nimport { RadioButton, RadioButtonGroup } from \"material-ui/RadioButton\";\nimport Checkbox from \"material-ui/Checkbox\";\n\nlet INITIAL_STATE = {\n  steps: [\"shapefile\", \"single_or_multiple\", \"metadata\"],\n  stepIndex: 0,\n  fieldnames: [],\n  splitField: \"\",\n  name: \"\",\n  description: \"\",\n};\nclass ImportFeaturesDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = INITIAL_STATE;\n  }\n  handleNext() {\n    const { stepIndex } = this.state;\n    switch (stepIndex) {\n      case 0:\n        //unzip the shapefile on the server\n        this.props.unzipShapefile(this.props.filename).then((response) => {\n          //get the name of the shapefile in the zip file\n          this.shapefile = response.rootfilename + \".shp\";\n          this.setState({ stepIndex: stepIndex + 1 });\n        });\n        break;\n      case this.state.steps.length - 1:\n        this.importFeatures();\n        break;\n      default:\n        this.setState({ stepIndex: stepIndex + 1 });\n    }\n  }\n  handlePrev() {\n    const { stepIndex } = this.state;\n    this.setState({ stepIndex: stepIndex - 1 });\n  }\n  changeName(event, newValue) {\n    this.setState({ name: newValue });\n  }\n  changeDescription(event, newValue) {\n    this.setState({ description: newValue });\n  }\n  changeSplitField(event, index) {\n    this.setState({ splitField: this.state.fieldnames[index] });\n  }\n  getShapefileFieldnames() {\n    //get the field names from the unzipped shapefile on the server\n    this.props.getShapefileFieldnames(this.shapefile).then((response) => {\n      //set the fieldnames in local state\n      this.setState({ fieldnames: response.fieldnames });\n    });\n  }\n  resetFieldnames() {\n    this.setState({ fieldnames: [] });\n  }\n  importFeatures() {\n    this.props\n      .importFeatures(\n        this.props.filename,\n        this.state.name,\n        this.state.description,\n        this.shapefile,\n        this.state.splitField\n      )\n      .then((response) => {\n        this.closeDialog();\n      });\n  }\n  closeDialog() {\n    //delete the zip file and shapefile\n    this.props.deleteShapefile(this.props.filename, this.shapefile);\n    this.setState(INITIAL_STATE);\n    this.shapefile = \"\";\n    this.props.setFilename(\"\");\n    this.props.onCancel();\n  }\n  render() {\n    let _disabled = false;\n    const { stepIndex } = this.state;\n    const contentStyle = { margin: \"0 16px\" };\n    //get the disabled state for the next/finish button\n    switch (stepIndex) {\n      case 0:\n        _disabled = this.props.filename === \"\";\n        break;\n      case 1:\n        _disabled = this.props.loading;\n        break;\n      default:\n      // code\n    }\n    const actions = [\n      <div\n        style={{\n          width: \"100%\",\n          maxWidth: \"500px\",\n          margin: \"auto\",\n          textAlign: \"center\",\n        }}\n      >\n        <div style={contentStyle}>\n          <div style={{ marginTop: 12 }}>\n            <ToolbarButton\n              label=\"Back\"\n              disabled={stepIndex === 0 || this.props.loading}\n              onClick={this.handlePrev.bind(this)}\n            />\n            <ToolbarButton\n              label={\n                stepIndex === this.state.steps.length - 1 ? \"Finish\" : \"Next\"\n              }\n              onClick={this.handleNext.bind(this)}\n              disabled={\n                _disabled ||\n                this.props.loading ||\n                (stepIndex === 2 &&\n                  this.state.fieldnames.length === 0 &&\n                  (this.state.name === \"\" || this.state.description === \"\")) ||\n                (stepIndex === 2 &&\n                  this.state.fieldnames.length !== 0 &&\n                  this.state.splitField === \"\")\n              }\n              primary={true}\n            />\n          </div>\n        </div>\n      </div>,\n    ];\n    let children = (\n      <div key=\"k12\">\n        {stepIndex === 0 ? (\n          <div>\n            <FileUpload\n              {...this.props}\n              fileMatch={\".zip\"}\n              mandatory={true}\n              filename={this.props.filename}\n              setFilename={this.props.setFilename}\n              destFolder={\"imports\"}\n              label=\"Shapefile\"\n              style={{ paddingTop: \"10px\" }}\n            />\n          </div>\n        ) : null}\n        {stepIndex === 1 ? (\n          <div>\n            <RadioButtonGroup name=\"createFeatureType\" defaultSelected=\"single\">\n              <RadioButton\n                className={\"radioButton\"}\n                value=\"single\"\n                label=\"Create single feature\"\n                style={{ padding: \"10px\" }}\n                onClick={this.resetFieldnames.bind(this)}\n              />\n              <RadioButton\n                className={\"radioButton\"}\n                value=\"multiple\"\n                label=\"Split into multiple features\"\n                style={{ padding: \"10px\" }}\n                onClick={this.getShapefileFieldnames.bind(this)}\n              />\n            </RadioButtonGroup>\n          </div>\n        ) : null}\n        {stepIndex === 2 ? (\n          this.state.fieldnames.length === 0 ? (\n            <div>\n              <MarxanTextField\n                value={this.state.name}\n                onChange={this.changeName.bind(this)}\n                floatingLabelText=\"Enter a name\"\n              />\n              <MarxanTextField\n                value={this.state.description}\n                onChange={this.changeDescription.bind(this)}\n                multiLine={true}\n                rows={2}\n                floatingLabelText=\"Enter a description\"\n              />\n              <Checkbox\n                label=\"Add to project\"\n                style={{\n                  fontSize: \"12px\",\n                  width: \"200px\",\n                  display: \"inline-block\",\n                  marginTop: \"10px\",\n                }}\n                onCheck={this.props.setAddToProject}\n                checked={this.props.addToProject}\n              />\n            </div>\n          ) : (\n            <div>\n              <SelectField\n                menuItemStyle={{ fontSize: \"12px\" }}\n                labelStyle={{ fontSize: \"12px\" }}\n                onChange={this.changeSplitField.bind(this)}\n                value={this.state.splitField}\n                floatingLabelText=\"Split features by\"\n                floatingLabelFixed={true}\n              >\n                {this.state.fieldnames.map((item) => {\n                  return (\n                    <MenuItem\n                      style={{ fontSize: \"12px\" }}\n                      value={item}\n                      primaryText={item}\n                      key={item}\n                    />\n                  );\n                })}\n              </SelectField>\n              <Checkbox\n                label=\"Add to project\"\n                style={{\n                  fontSize: \"12px\",\n                  width: \"200px\",\n                  display: \"inline-block\",\n                  marginTop: \"10px\",\n                }}\n                onCheck={this.props.setAddToProject}\n                checked={this.props.addToProject}\n              />\n            </div>\n          )\n        ) : null}\n      </div>\n    );\n    return (\n      <MarxanDialog\n        {...this.props}\n        onOk={this.closeDialog.bind(this)}\n        okLabel={\"Cancel\"}\n        contentWidth={390}\n        title={\"Import features\"}\n        children={children}\n        actions={actions}\n        onRequestClose={this.closeDialog.bind(this)}\n        helpLink={\"user.html#importing-from-a-shapefile\"}\n      />\n    );\n  }\n}\n\nexport default ImportFeaturesDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\n/*global fetch*/\n/*global DOMParser*/\nimport * as React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport MarxanTextField from \"./MarxanTextField\";\nimport SelectField from \"material-ui/SelectField\";\nimport MenuItem from \"material-ui/MenuItem\";\nimport ToolbarButton from \"./ToolbarButton\";\nimport Checkbox from \"material-ui/Checkbox\";\n\nlet INITIAL_STATE = {\n  steps: [\"type\", \"endpoint\", \"layer\", \"metadata\"],\n  stepIndex: 0,\n  name: \"\",\n  description: \"\",\n  sourceType: \"\",\n  endpoint: \"\",\n  srs: \"\",\n  featureTypes: [],\n  featureType: \"\",\n  validendpoint: true,\n  loading: false,\n};\nlet SOURCE_TYPES = [\"Web Feature Service\"];\n\nclass ImportFromWebDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = INITIAL_STATE;\n  }\n  handleNext() {\n    const { stepIndex } = this.state;\n    switch (stepIndex) {\n      case this.state.steps.length - 1:\n        this.importFeatures();\n        break;\n      default:\n        this.setState({ stepIndex: stepIndex + 1 });\n    }\n  }\n  handlePrev() {\n    const { stepIndex } = this.state;\n    this.setState({ stepIndex: stepIndex - 1 });\n  }\n  changeSourceType(event, index) {\n    this.setState({ sourceType: SOURCE_TYPES[index] });\n  }\n  //loads an WFS getcapabilities endpoint\n  getCapabilities(endpoint) {\n    return new Promise((resolve, reject) => {\n      //must start with http\n      if (endpoint.substr(0, 4) !== \"http\") {\n        reject(\"Invalid endpoint\");\n        return;\n      }\n      //fetch the data\n      fetch(endpoint)\n        .then((response) => {\n          response.text().then((xml) => {\n            //return the xml\n            resolve(xml);\n          });\n        })\n        .catch((error) => {\n          //reject any errors in the call\n          reject(error);\n        });\n    });\n  }\n  //when the user changes the wfs endpoint\n  changeEndpoint(event, newValue) {\n    this.setState({ endpoint: newValue, loading: true, validendpoint: true });\n    //load the GetCapabilities XML\n    this.getCapabilities(newValue)\n      .then((response) => {\n        this.setState({ loading: false, validendpoint: true });\n        //parse the reponse as an xml document\n        let parser = new DOMParser();\n        let xmlDoc = parser.parseFromString(response, \"text/xml\");\n        //get the required info from the getcapabilities data\n        this.getWFSInfo(xmlDoc);\n      })\n      .catch((err) => {\n        this.setState({ loading: false, validendpoint: false });\n        console.log(err);\n      });\n  }\n  //retrieves information from the WFS getcapabilities data\n  getWFSInfo(xmlDoc) {\n    //get the feature types\n    let featureTypesElements = xmlDoc.getElementsByTagName(\"wfs:FeatureType\");\n    //initialise the feature names array\n    let featureTypes = [];\n    //get the feature types (i.e. names)\n    for (let item of featureTypesElements) {\n      featureTypes.push(item.getElementsByTagName(\"wfs:Name\")[0].textContent);\n    }\n    //get the spatial reference system - in WFS it is encoded as 'urn:ogc:def:crs:EPSG::3857'\n    let srs =\n      \"EPSG:\" +\n      xmlDoc.getElementsByTagName(\"wfs:DefaultCRS\")[0].textContent.substr(-4);\n    this.setState({ featureTypes: featureTypes, srs: srs });\n  }\n  changeFeatureType(event, newValue) {\n    this.setState({ featureType: this.state.featureTypes[newValue] });\n  }\n  changeName(event, newValue) {\n    this.setState({ name: newValue });\n  }\n  changeDescription(event, newValue) {\n    this.setState({ description: newValue });\n  }\n  importFeatures() {\n    //remove the &request=getCapabilities from the endpoint\n    let getFeatureEndpoint = this.state.endpoint.substr(\n      0,\n      this.state.endpoint.indexOf(\"request\") - 1\n    );\n    this.props\n      .importFeatures(\n        this.state.name,\n        this.state.description,\n        getFeatureEndpoint,\n        this.state.srs,\n        this.state.featureType\n      )\n      .then((response) => {\n        this.closeDialog();\n      })\n      .catch((error) => {\n        this.closeDialog();\n      });\n  }\n  closeDialog() {\n    this.setState(INITIAL_STATE);\n    this.props.onCancel();\n  }\n  render() {\n    let _disabled = false;\n    const { stepIndex } = this.state;\n    const contentStyle = { margin: \"0 16px\" };\n    //get the disabled state for the next/finish button\n    switch (stepIndex) {\n      case 0:\n        _disabled = this.state.sourceType === \"\";\n        break;\n      case 1:\n        _disabled =\n          !this.state.validendpoint ||\n          this.state.endpoint === \"\" ||\n          this.state.loading;\n        break;\n      case 2:\n        _disabled = this.state.featureType === \"\";\n        break;\n      case 3:\n        _disabled = this.state.name === \"\" || this.state.description === \"\";\n        break;\n      default:\n      // code\n    }\n    const actions = [\n      <div\n        style={{\n          width: \"100%\",\n          maxWidth: \"500px\",\n          margin: \"auto\",\n          textAlign: \"center\",\n        }}\n      >\n        <div style={contentStyle}>\n          <div style={{ marginTop: 12 }}>\n            <ToolbarButton\n              label=\"Back\"\n              disabled={stepIndex === 0 || this.props.loading}\n              onClick={this.handlePrev.bind(this)}\n            />\n            <ToolbarButton\n              label={\n                stepIndex === this.state.steps.length - 1 ? \"Finish\" : \"Next\"\n              }\n              onClick={this.handleNext.bind(this)}\n              disabled={_disabled || this.props.loading}\n              primary={true}\n            />\n          </div>\n        </div>\n      </div>,\n    ];\n    let children = (\n      <div key=\"k28\">\n        {stepIndex === 0 ? (\n          <div>\n            <SelectField\n              menuItemStyle={{ fontSize: \"12px\" }}\n              labelStyle={{ fontSize: \"12px\" }}\n              onChange={this.changeSourceType.bind(this)}\n              value={this.state.sourceType}\n              floatingLabelText=\"Select source type\"\n              floatingLabelFixed={true}\n            >\n              {SOURCE_TYPES.map((item) => {\n                return (\n                  <MenuItem\n                    style={{ fontSize: \"12px\" }}\n                    value={item}\n                    primaryText={item}\n                    key={item}\n                  />\n                );\n              })}\n            </SelectField>\n          </div>\n        ) : null}\n        {stepIndex === 1 ? (\n          <div>\n            <MarxanTextField\n              style={{ width: \"330px\" }}\n              value={this.state.endpoint}\n              errorText={this.state.validendpoint ? \"\" : \"Invalid WFS endpoint\"}\n              onChange={this.changeEndpoint.bind(this)}\n              floatingLabelText=\"Enter the WFS endpoint\"\n            />\n          </div>\n        ) : null}\n        {stepIndex === 2 ? (\n          <div>\n            <SelectField\n              menuItemStyle={{ fontSize: \"12px\" }}\n              autoWidth={true}\n              labelStyle={{ fontSize: \"12px\" }}\n              onChange={this.changeFeatureType.bind(this)}\n              value={this.state.featureType}\n              floatingLabelText=\"Select feature type\"\n              floatingLabelFixed={true}\n            >\n              {this.state.featureTypes.map((item) => {\n                return (\n                  <MenuItem\n                    style={{ fontSize: \"12px\" }}\n                    value={item}\n                    primaryText={item}\n                    key={item}\n                  />\n                );\n              })}\n            </SelectField>\n          </div>\n        ) : null}\n        {stepIndex === 3 ? (\n          <div>\n            <MarxanTextField\n              value={this.state.name}\n              onChange={this.changeName.bind(this)}\n              floatingLabelText=\"Enter a name\"\n            />\n            <MarxanTextField\n              value={this.state.description}\n              onChange={this.changeDescription.bind(this)}\n              multiLine={true}\n              rows={2}\n              floatingLabelText=\"Enter a description\"\n            />\n            <Checkbox\n              label=\"Add to project\"\n              style={{\n                fontSize: \"12px\",\n                width: \"200px\",\n                display: \"inline-block\",\n                marginTop: \"10px\",\n              }}\n              onCheck={this.props.setAddToProject}\n              checked={this.props.addToProject}\n            />\n          </div>\n        ) : null}\n      </div>\n    );\n    return (\n      <MarxanDialog\n        {...this.props}\n        onOk={this.closeDialog.bind(this)}\n        okLabel={\"Cancel\"}\n        loading={this.props.loading || this.state.loading}\n        contentWidth={390}\n        title={\"Import from web\"}\n        children={children}\n        actions={actions}\n        onRequestClose={this.closeDialog.bind(this)}\n        helpLink={\"user.html#importing-from-the-web\"}\n      />\n    );\n  }\n}\n\nexport default ImportFromWebDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport CONSTANTS from \"./constants\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport ReactTable from \"react-table\";\nimport ToolbarButton from \"./ToolbarButton\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTrashAlt } from \"@fortawesome/free-regular-svg-icons\";\nimport Import from \"material-ui/svg-icons/action/get-app\";\n\nclass CostsDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { selectedCost: undefined };\n  }\n  changeCost(event, cost) {\n    this.setState({ selectedCost: cost });\n  }\n  _delete() {\n    this.props.deleteCost(this.state.selectedCost.name);\n    this.setState({ selectedCost: undefined });\n  }\n  render() {\n    let _data = this.props.data.map((item) => {\n      return { name: item };\n    });\n    return (\n      <MarxanDialog\n        {...this.props}\n        contentWidth={390}\n        autoDetectWindowHeight={false}\n        bodyStyle={{ padding: \"0px 24px 0px 24px\" }}\n        offsetY={80}\n        title=\"Costs\"\n        onRequestClose={this.props.closeCostsDialog}\n        helpLink={\"user.html#importing-a-cost-surface\"}\n        children={\n          <React.Fragment key=\"k8\">\n            <ReactTable\n              {...this.props}\n              pageSize={_data.length}\n              columns={[\n                {\n                  Header: \"Name\",\n                  accessor: \"name\",\n                  headerStyle: { textAlign: \"left\" },\n                },\n              ]}\n              className={\"projectsReactTable noselect\"}\n              showPagination={false}\n              minRows={0}\n              data={_data}\n              selectedCost={this.state.selectedCost}\n              changeCost={this.changeCost.bind(this)}\n              getTrProps={(state, rowInfo) => {\n                return {\n                  style: {\n                    background:\n                      rowInfo.original.name ===\n                      (state.selectedCost && state.selectedCost.name)\n                        ? \"aliceblue\"\n                        : \"\",\n                  },\n                  onClick: (e) => {\n                    state.changeCost(e, rowInfo.original);\n                  },\n                };\n              }}\n            />\n            <div id=\"costsToolbar\">\n              <ToolbarButton\n                show={this.props.userRole !== \"ReadOnly\"}\n                icon={<Import style={{ height: \"20px\", width: \"20px\" }} />}\n                title=\"Upload a new costs file\"\n                disabled={this.props.loading}\n                onClick={this.props.openImportCostsDialog.bind(this)}\n                label={\"Import\"}\n              />\n              <ToolbarButton\n                show={\n                  !this.props.unauthorisedMethods.includes(\n                    \"deletePlanningUnitGrid\"\n                  )\n                }\n                icon={\n                  <FontAwesomeIcon\n                    icon={faTrashAlt}\n                    color=\"rgb(255, 64, 129)\"\n                  />\n                }\n                title=\"Delete cost profile\"\n                disabled={\n                  !this.state.selectedCost ||\n                  (this.state.selectedCost &&\n                    this.state.selectedCost.name === this.props.costname) ||\n                  (this.state.selectedCost &&\n                    this.state.selectedCost.name ===\n                      CONSTANTS.UNIFORM_COST_NAME)\n                }\n                onClick={this._delete.bind(this)}\n                label={\"Delete\"}\n              />\n            </div>\n          </React.Fragment>\n        }\n      />\n    );\n  }\n}\n\nexport default CostsDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport FileUpload from \"./FileUpload.js\";\nlet INITIAL_STATE = { costs_filename: \"\", costname: \"\" };\n\nclass ImportCostsDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = INITIAL_STATE;\n  }\n  resetState() {\n    this.setState(INITIAL_STATE);\n  }\n  onOk() {\n    //add the cost to the application state\n    this.props.addCost(this.state.costname);\n    //reset the import cost state\n    this.resetState();\n    //close the dialog\n    this.props.closeImportCostsDialog();\n  }\n  setCostsFilename(filename) {\n    this.setState({\n      costs_filename: filename,\n      costname: filename.substring(0, filename.length - 5),\n    });\n  }\n  deleteCostFileThenClose() {\n    this.props.deleteCostFileThenClose(this.state.costname).then((_) => {\n      //reset the import cost state\n      this.resetState();\n      //close the dialog\n      this.props.closeImportCostsDialog();\n    });\n  }\n  render() {\n    return (\n      <MarxanDialog\n        {...this.props}\n        contentWidth={390}\n        offsetY={80}\n        okDisabled={this.props.loading}\n        title=\"Import Cost surface\"\n        showCancelButton={true}\n        onOk={this.onOk.bind(this)}\n        onCancel={this.deleteCostFileThenClose.bind(this)}\n        onRequestClose={this.deleteCostFileThenClose.bind(this)}\n        helpLink={\"user.html#importing-a-cost-surface\"}\n        children={\n          <React.Fragment key=\"k8\">\n            <FileUpload\n              {...this.props}\n              fileMatch={\".cost\"}\n              mandatory={true}\n              filename={this.state.costs_filename}\n              setFilename={this.setCostsFilename.bind(this)}\n              label=\"Costs surface filename\"\n              style={{ paddingTop: \"15px\" }}\n            />\n          </React.Fragment>\n        }\n      />\n    );\n  }\n}\n\nexport default ImportCostsDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport \"react-table/react-table.css\";\nimport ReactTable from \"react-table\";\nimport FontAwesome from \"react-fontawesome\";\nimport MarxanDialog from \"./MarxanDialog\";\n\nclass RunSettingsDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { data: [], updateEnabled: false };\n    this.renderEditable = this.renderEditable.bind(this);\n  }\n  componentDidUpdate(prevProps) {\n    if (prevProps.runParams !== this.props.runParams) {\n      this.setState({ data: this.props.runParams });\n    }\n  }\n  openParametersDialog() {\n    this.props.openParametersDialog();\n  }\n  //posts the results back to the server\n  updateRunParams() {\n    //ui feedback\n    this.setState({ updateEnabled: false });\n    if (this.props.userRole !== \"ReadOnly\")\n      this.props.updateRunParams(this.state.data);\n    this.props.onOk();\n  }\n  setUpdateEnabled() {\n    this.setState({ updateEnabled: true });\n  }\n  renderEditable(cellInfo) {\n    return this.props.userRole === \"ReadOnly\" ? (\n      <React.Fragment>\n        <div>{this.state.data[cellInfo.index][\"value\"]}</div>\n      </React.Fragment>\n    ) : (\n      <React.Fragment>\n        <div\n          style={{\n            backgroundColor: \"#fafafa\",\n            float:\n              [...this.state.data][cellInfo.index][\"key\"] === \"BLM\"\n                ? \"left\"\n                : \"none\",\n          }}\n          contentEditable\n          suppressContentEditableWarning\n          onFocus={this.setUpdateEnabled.bind(this)}\n          onBlur={(e) => {\n            const data = [...this.state.data];\n            data[cellInfo.index][cellInfo.column.id] = e.target.innerHTML;\n            this.setState({ data });\n          }}\n        >\n          {this.state.data[cellInfo.index][\"value\"]}\n        </div>\n        <FontAwesome\n          name=\"external-link-alt\"\n          onClick={this.props.showClumpingDialog}\n          title=\"Click to open the BLM comparison dialog\"\n          style={{\n            display:\n              [...this.state.data][cellInfo.index][\"key\"] === \"BLM\"\n                ? \"block\"\n                : \"none\",\n            cursor: \"pointer\",\n            paddingTop: \"6px\",\n            paddingLeft: \"35px\",\n          }}\n        />\n      </React.Fragment>\n    );\n  }\n  render() {\n    return (\n      <MarxanDialog\n        {...this.props}\n        contentWidth={400}\n        offsetX={80}\n        offsetY={260}\n        onOk={this.updateRunParams.bind(this)}\n        helpLink={\"user.html#run-settings\"}\n        title=\"Run settings\"\n        children={\n          <div style={{ height: \"275px\" }} key=\"k16\">\n            <ReactTable\n              showPagination={false}\n              className={\"summary_infoTable\"}\n              minRows={0}\n              pageSize={this.state.data.length}\n              data={this.state.data}\n              noDataText=\"\"\n              columns={[\n                {\n                  Header: \"Parameter\",\n                  accessor: \"key\",\n                  width: 165,\n                  headerStyle: { textAlign: \"left\" },\n                },\n                {\n                  Header: \"Value\",\n                  accessor: \"value\",\n                  width: 193,\n                  headerStyle: { textAlign: \"left\" },\n                  Cell: this.renderEditable,\n                },\n              ]}\n            />\n          </div>\n        }\n      />\n    );\n  }\n}\n\nexport default RunSettingsDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport SelectField from \"material-ui/SelectField\";\nimport MenuItem from \"material-ui/MenuItem\";\n\nclass RendererSelector extends React.Component {\n  handleChange(event, index, value) {\n    this.props.changeValue(value);\n  }\n  render() {\n    let primaryText;\n    let c = this.props.values.map((item) => {\n      if (typeof item === \"string\") {\n        primaryText = item\n          .substr(0, 1)\n          .toUpperCase()\n          .concat(item.replace(\"_\", \" \").substr(1)); // sentence case and replace _ with space\n      } else {\n        primaryText = item.toString();\n      }\n      return <MenuItem value={item} key={item} primaryText={primaryText} />;\n    });\n    return (\n      <SelectField\n        selectionRenderer={this.props.selectionRenderer}\n        menuItemStyle={{ fontSize: \"12px\" }}\n        labelStyle={{ fontSize: \"12px\" }}\n        listStyle={{ fontSize: \"12px\" }}\n        style={{ width: \"150px\", margin: \"0px 10px\" }}\n        autoWidth={true}\n        floatingLabelText={this.props.floatingLabelText}\n        floatingLabelFixed={true}\n        children={c}\n        onChange={this.handleChange.bind(this)}\n        value={this.props.property}\n      />\n    );\n  }\n}\n\nexport default RendererSelector;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport SelectField from \"material-ui/SelectField\";\nimport MenuItem from \"material-ui/MenuItem\";\nimport { getMaxNumberOfClasses } from \"./Helpers.js\";\n\nclass ColorSelector extends React.Component {\n  handleChange(event, index, value) {\n    this.props.changeValue(value);\n  }\n  selectionRenderer() {\n    let c = this.getSwatch(this.props.property, true);\n    return c;\n  }\n  getSwatch(colorCode, disableHighlight) {\n    //get the number of classes the user currently has selected\n    let numClasses = this.props.brew.getNumClasses();\n    //get the maximum number of colors in this scheme\n    let colorSchemeLength = getMaxNumberOfClasses(this.props.brew, colorCode);\n    //get the color scheme\n    let colorScheme = this.props.brew.colorSchemes[colorCode];\n    //get the number of colors to show as an array\n    let numClassesArray =\n      numClasses <= colorSchemeLength\n        ? Array.apply(null, { length: numClasses }).map(Number.call, Number)\n        : Array.apply(null, { length: colorSchemeLength }).map(\n            Number.call,\n            Number\n          );\n    let classesToShow = numClassesArray.length;\n    let divWidth = 112 / classesToShow;\n    let colorDivs = numClassesArray.map((item) => {\n      return (\n        <div\n          key={item}\n          style={{\n            backgroundColor: colorScheme[classesToShow][item],\n            width: divWidth,\n            height: \"16px\",\n            display: \"inline-block\",\n          }}\n        />\n      );\n    });\n    let borderColor =\n      colorCode === this.props.property && !disableHighlight\n        ? \"rgb(255, 64, 129)\"\n        : \"lightgray\";\n    colorDivs = (\n      <div\n        style={{\n          display: \"inline-flex\",\n          marginTop: \"12px\",\n          border: \"1px solid \" + borderColor,\n        }}\n      >\n        {colorDivs}\n      </div>\n    );\n    return colorDivs;\n  }\n  render() {\n    let primaryText;\n    let c = this.props.values.map(function (colorCode) {\n      colorCode !== \"opacity\" ? (primaryText = \"\") : (primaryText = \"Opacity\");\n      let _c =\n        colorCode !== \"opacity\" ? this.getSwatch(colorCode, false) : null;\n      return (\n        <MenuItem\n          value={colorCode}\n          primaryText={primaryText}\n          key={colorCode}\n          children={_c}\n          title={colorCode}\n        />\n      );\n    }, this);\n    return (\n      <SelectField\n        selectionRenderer={this.selectionRenderer.bind(this)}\n        menuItemStyle={{ fontSize: \"12px\" }}\n        labelStyle={{ fontSize: \"12px\" }}\n        listStyle={{ fontSize: \"12px\" }}\n        style={{ width: \"150px\", margin: \"0px 10px\" }}\n        autoWidth={true}\n        floatingLabelText={this.props.floatingLabelText}\n        floatingLabelFixed={true}\n        children={c}\n        onChange={this.handleChange.bind(this)}\n        value={this.props.property}\n      />\n    );\n  }\n}\n\nexport default ColorSelector;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from 'react';\nimport 'react-table/react-table.css';\nimport MarxanDialog from './MarxanDialog';\nimport RendererSelector from './RendererSelector.js'; \nimport ColorSelector from './ColorSelector.js';\nimport { BarChart, ReferenceLine, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Label } from 'recharts';\n\nlet RENDERERS = [\"equal_interval\", \"jenks\", \"std_deviation\", \"quantile\"];\nlet COLORCODES = [\"opacity\", \"OrRd\", \"PuBu\", \"BuPu\", \"Oranges\", \"BuGn\", \"YlOrBr\", \"YlGn\", \"Reds\", \"RdPu\", \"Greens\", \"YlGnBu\", \"Purples\", \"GnBu\", \"Greys\", \"YlOrRd\", \"PuRd\", \"Blues\", \"PuBuGn\", \"Spectral\", \"RdYlGn\", \"RdBu\", \"PiYG\", \"PRGn\", \"RdYlBu\", \"BrBG\", \"RdGy\", \"PuOr\", \"Set2\", \"Accent\", \"Set1\", \"Set3\", \"Dark2\", \"Paired\", \"Pastel2\", \"Pastel1\"];\nlet NUMCLASSES = [\"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"];\nlet TOPCLASSES = [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"];\n\nclass ClassificationDialog extends React.Component {\n\n\trender() { \n\t\tlet breaks = this.props.dataBreaks.map((item, index) => {\n\t\t\t//dont include the bottom line as we will use the y axis\n\t\t\treturn <ReferenceLine x={item} key={index} stroke=\"#00BCD4\" />;\n\t\t});\n\t\treturn (\n\t\t\t<MarxanDialog \n\t\t\t\t{...this.props} \n\t\t\t\tcontentWidth={390}\n\t\t\t\trightX={0}\n\t\t\t\toffsetY={80}\n\t\t\t\tshowCancelButton={false}\n\t\t\t\thelpLink={\"user.html#changing-how-the-results-are-displayed\"}\n\t\t\t\ttitle=\"Classification\" \n\t\t\t\tchildren={\n\t\t\t\t\t<div style={{height:'275px'}} key=\"k6\">\n\t\t\t\t\t\t<BarChart width={250} height={150} data={this.props.summaryStats}>\n\t\t\t\t\t\t\t<CartesianGrid strokeDasharray=\"1\" stroke=\"#f4f4f4\"/>\n\t\t\t\t\t\t\t<XAxis dataKey=\"number\" tick={{fontSize:11}} type={'number'}>\n\t\t\t\t\t\t\t\t<Label value=\"Sum solutions\" offset={0} position=\"insideBottom\" style={{fontSize:'11px',color:'#222222'}} />\n\t\t\t\t\t\t\t</XAxis> \n\t\t\t\t\t\t\t<YAxis tick={{fontSize:11}}>\n\t\t\t\t\t\t\t\t<Label value='Count' angle={-90} position='insideLeft' style={{fontSize:'11px',color:'#222222'}}/>\n\t\t\t\t\t\t\t</YAxis>\n\t\t\t\t\t\t\t<Tooltip />\n\t\t\t\t\t\t\t<Bar dataKey=\"count\" fill=\"#E14081\" />\n\t\t\t\t\t\t\t{breaks}\n\t\t\t\t\t\t</BarChart>\n\t\t\t\t\t\t<div className={'renderers'}>\n\t\t\t\t\t\t\t<ColorSelector values={COLORCODES} changeValue={this.props.changeColorCode} property={this.props.renderer.COLORCODE} floatingLabelText={\"Colour scheme\"} brew={this.props.brew} />\n\t\t\t\t\t\t\t<RendererSelector values={RENDERERS} changeValue={this.props.changeRenderer} property={this.props.renderer.CLASSIFICATION} floatingLabelText={\"Classification\"}/>\n\t\t\t\t\t\t\t<RendererSelector values={NUMCLASSES} changeValue={this.props.changeNumClasses} property={this.props.renderer.NUMCLASSES} floatingLabelText={\"Number of classes\"} />\n\t\t\t\t\t\t\t<RendererSelector values={TOPCLASSES} changeValue={this.props.changeShowTopClasses} property={this.props.renderer.TOPCLASSES} floatingLabelText={\"Show top n classes\"}/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t} \n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default ClassificationDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport mapboxgl from \"mapbox-gl\";\n\nclass MapContainer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.resultsRendered = false;\n  }\n  componentDidMount() {\n    this.map = new mapboxgl.Map({\n      container: this.mapContainer,\n      style: \"mapbox://styles/mapbox/light-v9\",\n      center: this.props.mapCentre,\n      zoom: this.props.mapZoom,\n      attributionControl: false,\n      interactive: false,\n    });\n    this.map.on(\"load\", (evt) => {\n      evt.target.addLayer({\n        id: this.props.RESULTS_LAYER_NAME,\n        type: \"fill\",\n        source: {\n          type: \"vector\",\n          url: \"mapbox://\" + this.props.tileset.id,\n        },\n        \"source-layer\": this.props.tileset.name,\n        layout: {\n          visibility: \"none\",\n        },\n      });\n      this.map.setCenter(this.props.mapCentre);\n      this.setMapZoom();\n      if (!this.resultsRendered) this.renderResults();\n      // this.map.setCenter(this.props.tileset.center);\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.paintProperty !== prevProps.paintProperty) {\n      if (this.props.paintProperty.length === 0) {\n        //resetting the layout property\n        this.map.setLayoutProperty(\n          this.props.RESULTS_LAYER_NAME,\n          \"visibility\",\n          \"none\"\n        );\n      } else {\n        //the solution has been loaded and the paint properties have been calculated - if the results layer (i.e. the planning unit grid layer) is loaded then render the results\n        if (this.map.getLayer(this.props.RESULTS_LAYER_NAME)) {\n          this.renderResults();\n        } else {\n          this.resultsRendered = false;\n        }\n      }\n    }\n    if (this.props.mapCentre !== prevProps.mapCentre) {\n      this.map.setCenter(this.props.mapCentre);\n    }\n    if (this.props.mapZoom !== prevProps.mapZoom) {\n      this.setMapZoom();\n    }\n  }\n\n  //the results layer has been loaded and so the results can be rendered\n  renderResults() {\n    if (this.props.paintProperty.length === 0) return;\n    this.map.setLayoutProperty(\n      this.props.RESULTS_LAYER_NAME,\n      \"visibility\",\n      \"visible\"\n    );\n    this.map.setPaintProperty(\n      this.props.RESULTS_LAYER_NAME,\n      \"fill-color\",\n      this.props.paintProperty.fillColor\n    );\n    this.map.setPaintProperty(\n      this.props.RESULTS_LAYER_NAME,\n      \"fill-outline-color\",\n      this.props.paintProperty.oulineColor\n    );\n    this.map.setPaintProperty(\n      this.props.RESULTS_LAYER_NAME,\n      \"fill-opacity\",\n      0.5\n    );\n    this.resultsRendered = true;\n  }\n  componentWillUnmount() {\n    //remove the map and free all resources\n    if (this.map) this.map.remove();\n  }\n\n  setMapZoom() {\n    // this.map.setZoom(this.props.mapZoom - 3);\n    this.map.setZoom(this.props.mapZoom);\n  }\n\n  render() {\n    return (\n      <div\n        style={{ display: \"inline-block\", margin: \"5px\" }}\n        onClick={\n          this.props.disabled\n            ? null\n            : this.props.selectBlm.bind(this, this.props.blmValue)\n        }\n      >\n        <div style={{ fontSize: \"14px\" }}>BLM: {this.props.blmValue}</div>\n        <div\n          ref={(el) => (this.mapContainer = el)}\n          style={{\n            width: \"200px\",\n            height: \"200px\",\n            cursor: this.props.disabled ? \"default\" : \"pointer\",\n          }}\n          className={\"hoverMapContainer\"}\n          title={this.props.disabled ? \"\" : \"Click to select this BLM value\"}\n        />\n      </div>\n    );\n  }\n}\n\nexport default MapContainer;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport CONSTANTS from \"./constants\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport ToolbarButton from \"./ToolbarButton\";\nimport MapContainer from \"./MapContainer.js\";\nimport MarxanTextField from \"./MarxanTextField\";\n\nlet CLUMP_COUNT = 5;\n\nclass ClumpingDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      blmValues: [0.001, 0.01, 0.1, 1, 10],\n      blmMin: 0.001,\n      blmMax: 10,\n      blmChanged: false,\n    };\n  }\n\n  //when the dialog is shown, create the project group and run the projects with different blm values\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.open !== prevProps.open && this.props.open) {\n      //create the project group and run\n      this.props.createProjectGroupAndRun(this.state.blmValues);\n    }\n  }\n  changeBlmMin(event, newValue) {\n    //get the new blmValues\n    this.getBlmValues(newValue, this.state.blmMax);\n    //set the new blmMin\n    this.setState({ blmMin: newValue });\n  }\n\n  changeBlmMax(event, newValue) {\n    //get the new blmValues\n    this.getBlmValues(this.state.blmMin, newValue);\n    //set the new blmMax\n    this.setState({ blmMax: newValue });\n  }\n\n  //calculates the 5 blm values based on the min and max\n  getBlmValues(min, max) {\n    var blmValues = [];\n    //get the increment\n    var increment = (max - min) / (CLUMP_COUNT - 1);\n    //make the array of blmValues\n    for (var i = 0; i < CLUMP_COUNT; i++) {\n      blmValues[i] = i * increment + Number(min);\n    }\n    this.setState({ blmValues: blmValues });\n    //flag that the blmValues have changed\n    this.setState({ blmChanged: true });\n  }\n\n  parseBlmValue(value) {\n    if (!isNaN(parseFloat(value)) && isFinite(value)) {\n      return value;\n    } else {\n      return \"\";\n    }\n  }\n\n  selectBlm(blmValue) {\n    //set the blmValue for the project\n    this.props.setBlmValue(blmValue);\n    //close the dialog\n    this.props.onOk();\n  }\n\n  rerunProjects() {\n    this.props.rerunProjects(this.state.blmChanged, this.state.blmValues);\n    this.setState({ blmChanged: false });\n  }\n  onRequestClose() {\n    if (!this.props.clumpingRunning) this.props.onOk();\n  }\n\n  render() {\n    return (\n      <MarxanDialog\n        {...this.props}\n        showSpinner={this.props.clumpingRunning}\n        contentWidth={680}\n        offsetX={80}\n        offsetY={80}\n        onOk={this.onRequestClose.bind(this)}\n        okDisabled={this.props.clumpingRunning}\n        showCancelButton={true}\n        helpLink={\"user.html#clumping-window\"}\n        actions={[\n          <ToolbarButton\n            label=\"Refresh\"\n            primary={true}\n            onClick={this.rerunProjects.bind(this)}\n            disabled={this.props.clumpingRunning || !this.state.blmChanged}\n          />,\n        ]}\n        title=\"Clumping\"\n        children={\n          <div key=\"k7\">\n            <MapContainer\n              key={0}\n              disabled={this.props.clumpingRunning}\n              selectBlm={this.selectBlm.bind(this)}\n              tileset={this.props.tileset}\n              RESULTS_LAYER_NAME={CONSTANTS.RESULTS_LAYER_NAME}\n              paintProperty={this.props.map0_paintProperty}\n              blmValue={this.parseBlmValue(this.state.blmValues[0])}\n              mapCentre={this.props.mapCentre}\n              mapZoom={this.props.mapZoom}\n            />\n            <MapContainer\n              key={1}\n              disabled={this.props.clumpingRunning}\n              selectBlm={this.selectBlm.bind(this)}\n              tileset={this.props.tileset}\n              RESULTS_LAYER_NAME={CONSTANTS.RESULTS_LAYER_NAME}\n              paintProperty={this.props.map1_paintProperty}\n              blmValue={this.parseBlmValue(this.state.blmValues[1])}\n              mapCentre={this.props.mapCentre}\n              mapZoom={this.props.mapZoom}\n            />\n            <MapContainer\n              key={2}\n              disabled={this.props.clumpingRunning}\n              selectBlm={this.selectBlm.bind(this)}\n              tileset={this.props.tileset}\n              RESULTS_LAYER_NAME={CONSTANTS.RESULTS_LAYER_NAME}\n              paintProperty={this.props.map2_paintProperty}\n              blmValue={this.parseBlmValue(this.state.blmValues[2])}\n              mapCentre={this.props.mapCentre}\n              mapZoom={this.props.mapZoom}\n            />\n            <MapContainer\n              key={3}\n              disabled={this.props.clumpingRunning}\n              selectBlm={this.selectBlm.bind(this)}\n              tileset={this.props.tileset}\n              RESULTS_LAYER_NAME={CONSTANTS.RESULTS_LAYER_NAME}\n              paintProperty={this.props.map3_paintProperty}\n              blmValue={this.parseBlmValue(this.state.blmValues[3])}\n              mapCentre={this.props.mapCentre}\n              mapZoom={this.props.mapZoom}\n            />\n            <MapContainer\n              key={4}\n              disabled={this.props.clumpingRunning}\n              selectBlm={this.selectBlm.bind(this)}\n              tileset={this.props.tileset}\n              RESULTS_LAYER_NAME={CONSTANTS.RESULTS_LAYER_NAME}\n              paintProperty={this.props.map4_paintProperty}\n              blmValue={this.parseBlmValue(this.state.blmValues[4])}\n              mapCentre={this.props.mapCentre}\n              mapZoom={this.props.mapZoom}\n            />\n            <div\n              style={{\n                display: \"inline-block\",\n                margin: \"5px\",\n                verticalAlign: \"top\",\n                paddingTop: \"60px\",\n                textAlign: \"center\",\n                fontSize: \"14px\",\n                width: \"200px\",\n                height: \"224px\",\n              }}\n            >\n              <div>Move and zoom the main map to preview the clumping</div>\n              <div style={{ paddingTop: \"30px\" }}>\n                <span>BLM from </span>\n                <MarxanTextField\n                  value={this.state.blmMin}\n                  onChange={this.changeBlmMin.bind(this)}\n                  style={{ width: \"36px\" }}\n                  inputStyle={{ textAlign: \"center\", fontSize: \"14px\" }}\n                  id=\"blmmin\"\n                  disabled={this.props.clumpingRunning}\n                />\n                <span> to </span>\n                <MarxanTextField\n                  value={this.state.blmMax}\n                  onChange={this.changeBlmMax.bind(this)}\n                  style={{ width: \"36px\" }}\n                  inputStyle={{ textAlign: \"center\", fontSize: \"14px\" }}\n                  id=\"blmmax\"\n                  disabled={this.props.clumpingRunning}\n                />\n              </div>\n            </div>\n          </div>\n        }\n      />\n    );\n  }\n}\n\nexport default ClumpingDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport FontAwesome from \"react-fontawesome\";\n\nclass UploadFolder extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { folderUploadText: \"\", active: false };\n  }\n  onClick(e) {\n    this.setState({ active: true });\n  }\n  onChange(e) {\n    this.props.filesListed(e.target.files);\n    this.setState({ folderUploadText: e.target.files.length + \" files\" });\n    this.setState({ active: false });\n  }\n  _addDirectory(node) {\n    if (node) {\n      node.directory = true;\n      node.webkitdirectory = true;\n    }\n  }\n  render() {\n    return (\n      <div>\n        <div\n          className=\"uploadLabel\"\n          style={{\n            color: this.state.active\n              ? \"rgb(0, 188, 212)\"\n              : \"rgba(0, 0, 0, 0.3)\",\n          }}\n        >\n          {this.props.label}\n        </div>\n        <div className=\"uploadFileField\">\n          <div className=\"uploadFileFieldIcon\">\n            <div style={{ display: \"inline-flex\" }}>\n              <label htmlFor={\"folderSelector\"}>\n                <FontAwesome\n                  name=\"folder\"\n                  title=\"Click to select a Marxan project folder\"\n                  style={{ cursor: \"pointer\", display: \"inline-flex\" }}\n                />\n              </label>\n            </div>\n            <input\n              id=\"folderSelector\"\n              ref={(node) => this._addDirectory(node)}\n              type=\"file\"\n              onChange={this.onChange.bind(this)}\n              onClick={this.onClick.bind(this)}\n              style={{ display: \"none\", width: \"10px\" }}\n            />\n          </div>\n          <div className=\"uploadFileFieldLabel\">\n            {this.state.folderUploadText}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default UploadFolder;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from \"react\";\nimport UploadFolder from \"./UploadFolder\";\nimport FileUpload from \"./FileUpload\";\nimport MarxanTextField from \"./MarxanTextField\";\n\nclass UploadMarxanFiles extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { planning_grid_name: \"\", zipFilename: \"\" };\n  }\n  setzipFilename(filename) {\n    this.setState({ zipFilename: filename });\n    this.props.setZipFilename(filename);\n  }\n  render() {\n    return (\n      <React.Fragment>\n        <div>\n          <UploadFolder\n            label=\"Marxan project folder\"\n            filesListed={this.props.filesListed}\n          />\n          <FileUpload\n            {...this.props}\n            fileMatch={\".zip\"}\n            destFolder=\"imports\"\n            mandatory={true}\n            filename={this.state.zipFilename}\n            setFilename={this.setzipFilename.bind(this)}\n            label=\"Planning grid zipped shapefile\"\n            style={{ paddingTop: \"15px\" }}\n          />\n          <MarxanTextField\n            style={{ width: \"310px\" }}\n            value={this.props.planning_grid_name}\n            onChange={this.props.setPlanningGridName}\n            floatingLabelText=\"Planning grid name\"\n          />\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default UploadMarxanFiles;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport ToolbarButton from \"./ToolbarButton\";\nimport Metadata from \"./Metadata\";\nimport UploadMarxanFiles from \"./UploadMarxanFiles\";\n\n//some of the code in this component should be moved up to app.js like the POSTs but I have limited time\n\nclass ImportProjectDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      steps: [\"Files and planning grid\", \"Info\"],\n      loading: false,\n      stepIndex: 0,\n      name: \"\",\n      description: \"\",\n      zipFilename: \"\",\n      files: [],\n      planning_grid_name: \"\",\n    };\n  }\n  handleNext = () => {\n    const { stepIndex } = this.state;\n    if (stepIndex === 1) {\n      this.setState({ loading: true });\n      //create the new project\n      this.props\n        .importProject(\n          this.state.name,\n          this.state.description,\n          this.state.zipFilename,\n          this.state.files,\n          this.state.planning_grid_name\n        )\n        .then((response) => {\n          //close the import wizard\n          this.onOk();\n        })\n        .catch((error) => {\n          this.setState({ loading: false });\n          this.props.log(error + \"Import stopped\");\n          this.props.setSnackBar(error);\n        });\n      return;\n    }\n    this.setState({ stepIndex: stepIndex + 1 });\n  };\n  handlePrev = () => {\n    const { stepIndex } = this.state;\n    if (stepIndex > 0) {\n      this.setState({ stepIndex: stepIndex - 1 });\n    }\n  };\n  filesListed(files) {\n    //TODO filter the files to exclude all of the output files - these are unnecessary and will be creating on the first run anyway\n    this.setState({ files: files });\n  }\n  setZipFilename(filename) {\n    this.setState({ zipFilename: filename });\n  }\n  setPlanningGridName(event, planning_grid_name) {\n    this.setState({ planning_grid_name: planning_grid_name });\n  }\n  setName(value) {\n    this.setState({ name: value });\n  }\n  setDescription(value) {\n    this.setState({ description: value });\n  }\n  onOk() {\n    //return the wizard back to zero\n    this.setState({ loading: false, stepIndex: 0 });\n    this.props.onOk();\n  }\n  render() {\n    const { stepIndex } = this.state;\n    const contentStyle = { margin: \"0 16px\" };\n    const actions = [\n      <div\n        style={{\n          width: \"100%\",\n          maxWidth: 700,\n          margin: \"auto\",\n          textAlign: \"center\",\n        }}\n      >\n        <div style={contentStyle}>\n          <div style={{ marginTop: 12 }}>\n            <ToolbarButton\n              label=\"Back\"\n              disabled={stepIndex === 0}\n              onClick={this.handlePrev}\n            />\n            <ToolbarButton\n              label={\n                stepIndex === this.state.steps.length - 1 ? \"Finish\" : \"Next\"\n              }\n              onClick={this.handleNext.bind(this)}\n              primary={true}\n              disabled={\n                this.state.loading ||\n                (stepIndex === 0 &&\n                  (this.state.files.length === 0 ||\n                    this.state.zipFilename === \"\" ||\n                    this.state.planning_grid_name === \"\")) ||\n                (stepIndex === 1 &&\n                  (this.state.name === \"\" || this.state.description === \"\"))\n              }\n            />\n          </div>\n        </div>\n      </div>,\n    ];\n    let c = (\n      <React.Fragment key=\"k4\">\n        <div>\n          {stepIndex === 0 ? (\n            <UploadMarxanFiles\n              {...this.props}\n              filesListed={this.filesListed.bind(this)}\n              setZipFilename={this.setZipFilename.bind(this)}\n              setPlanningGridName={this.setPlanningGridName.bind(this)}\n              planning_grid_name={this.state.planning_grid_name}\n            />\n          ) : null}\n          {stepIndex === 1 ? (\n            <Metadata\n              name={this.state.name}\n              description={this.state.description}\n              setName={this.setName.bind(this)}\n              setDescription={this.setDescription.bind(this)}\n            />\n          ) : null}\n        </div>\n      </React.Fragment>\n    );\n    return (\n      <MarxanDialog\n        {...this.props}\n        title={\"Import Marxan DOS project\"}\n        contentWidth={390}\n        children={c}\n        okLabel={\"Cancel\"}\n        actions={actions}\n        onOk={this.onOk.bind(this)}\n        onRequestClose={this.onOk.bind(this)}\n        helpLink={\"user.html#importing-marxan-dos-projects\"}\n      />\n    );\n  }\n}\n\nexport default ImportProjectDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport ToolbarButton from \"./ToolbarButton\";\nimport Metadata from \"./Metadata\";\nimport FileUpload from \"./FileUpload\";\n\n//some of the code in this component should be moved up to app.js like the POSTs but I have limited time\n\nclass ImportMXWDialog extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { steps: ['mxw file','Info' ], loading: false, stepIndex: 0, name: '', description: '', zipFilename: ''};\n\t}\n\thandleNext = () => {\n\t\tconst { stepIndex } = this.state;\n\t\tif (stepIndex === 1) {\n\t\t\tthis.setState({loading: true});\n\t\t\t//create the new project \n\t\t\tthis.props.importMXWProject(this.state.name, this.state.description, this.state.zipFilename).then((response) => {\n\t\t\t\tthis.onOk();\n\t\t\t}).catch((error) => {\n\t\t\t\tthis.setState({loading: false});\n\t\t\t\tthis.props.log(error + \"Import stopped\");\n\t\t\t\tthis.props.setSnackBar(error);\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tthis.setState({ stepIndex: stepIndex + 1 });\n\t};\n\thandlePrev = () => {\n\t\tconst { stepIndex } = this.state;\n\t\tif (stepIndex > 0) {\n\t\t\tthis.setState({ stepIndex: stepIndex - 1 });\n\t\t}\n\t};\n\tsetZipFilename(filename){\n\t\tthis.setState({zipFilename: filename});\n\t}\n\tsetName(value) {\n\t\tthis.setState({ name: value });\n\t}\n\tsetDescription(value) {\n\t\tthis.setState({ description: value });\n\t}\n\tonOk(){\n\t\t//return the wizard back to zero\n\t\tthis.setState({loading: false, stepIndex: 0, zipFilename:'' });\n\t\tthis.props.onOk();\n\t}\n\trender() {\n\t\tconst { stepIndex } = this.state; \n\t\tconst contentStyle = { margin: '0 16px' };\n\t\tconst actions = [\n\t\t\t<div style={{width: '100%', maxWidth: 700, margin: 'auto',textAlign:'center'}}>\n\t\t\t\t<div style={contentStyle}>\n\t\t\t\t\t<div style={{marginTop: 12}}>\n\t\t\t\t\t\t<ToolbarButton label=\"Back\" disabled={stepIndex === 0} onClick={this.handlePrev} />\n\t\t\t\t\t\t<ToolbarButton label={stepIndex === (this.state.steps.length-1) ? 'Finish' : 'Next'} onClick={this.handleNext.bind(this)} primary={true} disabled={this.state.loading || this.state.zipFilename==='' || (stepIndex===1 && (this.state.name==='' || this.state.description===''))} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t];\n\t\tlet c = <React.Fragment key=\"k4\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{stepIndex === 0 ? \n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t    <FileUpload \n\t\t\t\t\t\t    {...this.props} \n\t\t\t\t\t\t    fileMatch={'.mxw'}\n\t\t\t\t\t\t    destFolder='imports' \n\t\t\t\t\t\t    uniqueName={true}\n\t\t\t\t\t\t    mandatory={true} \n\t\t\t\t\t\t    filename={this.state.zipFilename.substr(this.props.user.length)} \n\t\t\t\t\t\t    setFilename={this.setZipFilename.bind(this)} \n\t\t\t\t\t\t    label=\"Select *.mxw file\" \n\t\t\t\t\t\t    style={{'paddingTop':'20px'}}/> \n\t\t\t\t\t\t</div> : null}\n\t\t\t\t\t\t{stepIndex === 1 ? <Metadata {...this.props} name={this.state.name} description={this.state.description} setName={this.setName.bind(this)} setDescription={this.setDescription.bind(this)}/> : null}\n\t\t\t\t\t</div>\n\t\t\t\t</React.Fragment>;\n\t\treturn (\n\t\t\t<MarxanDialog \n\t\t\t\t{...this.props} \n\t\t\t\ttitle={'Import Marxan Web project'}\n\t\t\t\tcontentWidth={390}\n\t\t\t\tchildren={c} \n\t\t\t\tokLabel={\"Cancel\"}\n\t\t\t\tactions={actions} \n\t\t\t\tonOk={this.onOk.bind(this)}\n\t\t\t\tonRequestClose={this.onOk.bind(this)} \n\t\t\t\thelpLink={\"user.html#importing-marxan-web-projects\"}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default ImportMXWDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport ToolbarButton from \"./ToolbarButton\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCheckCircle } from \"@fortawesome/free-solid-svg-icons\";\nimport { faExclamationTriangle } from \"@fortawesome/free-solid-svg-icons\";\nimport { faTimesCircle } from \"@fortawesome/free-solid-svg-icons\";\nimport { faRedoAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport { faEraser } from \"@fortawesome/free-solid-svg-icons\";\nimport Sync from \"material-ui/svg-icons/notification/sync\";\nimport MarxanTable from \"./MarxanTable\";\n\nclass RunLogDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { searchText: \"\", selectedRun: undefined, runningJobs: false };\n  }\n  componentDidUpdate(prevProps, prevState) {\n    //if this browser isnt running a marxan job (i.e. this.props.preprocessing === false) but there are jobs which are running then we still want to be able to stop those jobs - here we set a flag to allow the STOP button to be enabled even if this.props.preprocessing === false\n    if (this.props.runLogs !== prevProps.runLogs) {\n      //see of any of the run logs are running\n      let runningLogs = this.props.runLogs.filter((item) => {\n        return item.status === \"Running\";\n      });\n      this.setState({ runningJobs: runningLogs.length > 0 });\n    }\n  }\n  closeDialog() {\n    this.setState({ selectedRun: undefined });\n    this.props.onOk();\n  }\n  stopRun(evt) {\n    //stop the run\n    this.props.stopMarxan(\"m\" + this.state.selectedRun.pid);\n    //refresh the run log - this may be done when the process stops on the server and it sends the results back in the websocket - but in case the client is not connected to the server explicitly request it\n    this.refreshRunLogs();\n  }\n  clearRunLogs(evt) {\n    this.props.clearRunLogs();\n  }\n  refreshRunLogs(evt) {\n    this.props.getRunLogs();\n    //unselect the selected run\n    this.setState({ selectedRun: undefined });\n  }\n  changeSelectedRun(event, run) {\n    this.setState({ selectedRun: run });\n  }\n  renderUser(row) {\n    return (\n      <div\n        style={{\n          width: \"100%\",\n          height: \"100%\",\n          backgroundColor: \"#dadada\",\n          borderRadius: \"2px\",\n        }}\n        title={row.original.user}\n      >\n        {row.original.user}\n      </div>\n    );\n  }\n  renderProject(row) {\n    return (\n      <div\n        style={{\n          width: \"100%\",\n          height: \"100%\",\n          backgroundColor: \"#dadada\",\n          borderRadius: \"2px\",\n        }}\n        title={row.original.project}\n      >\n        {row.original.project}\n      </div>\n    );\n  }\n  renderStatus(row) {\n    var icon;\n    switch (row.original.status) {\n      case \"Completed\":\n        icon = (\n          <FontAwesomeIcon\n            icon={faCheckCircle}\n            style={{ color: \"green\" }}\n            title={\"Run completed\"}\n          />\n        );\n        break;\n      case \"Stopped\":\n        icon = (\n          <FontAwesomeIcon\n            icon={faTimesCircle}\n            style={{ color: \"darkgray\" }}\n            title={\"Run stopped by the user\"}\n          />\n        );\n        break;\n      case \"Killed\":\n        icon = (\n          <FontAwesomeIcon\n            icon={faExclamationTriangle}\n            style={{ color: \"red\" }}\n            title={\"Run stopped by the operating system\"}\n          />\n        );\n        break;\n      case \"Running\":\n        icon = (\n          <Sync\n            className=\"spin\"\n            style={{\n              height: \"16px\",\n              width: \"16px\",\n              verticalAlign: \"sub\",\n              color: \"rgb(255, 64, 129)\",\n            }}\n          />\n        );\n        break;\n      default:\n        break;\n    }\n    return (\n      <div\n        style={{\n          width: \"100%\",\n          height: \"100%\",\n          backgroundColor: \"#dadada\",\n          borderRadius: \"2px\",\n        }}\n        title={row.original.status}\n      >\n        {icon}\n        {\"  \" + row.original.status}\n      </div>\n    );\n  }\n  renderEnded(row) {\n    return (\n      <div\n        style={{\n          width: \"100%\",\n          height: \"100%\",\n          backgroundColor: \"#dadada\",\n          borderRadius: \"2px\",\n        }}\n      >\n        {row.original.endtime ? row.original.endtime : \"\"}\n      </div>\n    );\n  }\n  renderRuntime(row) {\n    if (row.original.runtime) {\n      let s = Number(\n        row.original.runtime.substr(0, row.original.runtime.length - 1)\n      );\n      let mins = Math.floor(s / 60);\n      let secs = (s % 60) + \"s\";\n      let runTimeFormatted = mins !== 0 ? mins + \"m \" + secs : secs;\n      return (\n        <div\n          style={{\n            width: \"100%\",\n            height: \"100%\",\n            backgroundColor: \"#dadada\",\n            borderRadius: \"2px\",\n          }}\n        >\n          {runTimeFormatted}\n        </div>\n      );\n    } else {\n      return \"\";\n    }\n  }\n  searchTextChanged(value) {\n    this.setState({ searchText: value });\n  }\n  render() {\n    let tableColumns = [];\n    tableColumns = [\n      {\n        Header: \"pid\",\n        accessor: \"pid\",\n        width: 60,\n        headerStyle: { textAlign: \"left\" },\n      },\n      {\n        Header: \"User\",\n        accessor: \"user\",\n        width: 60,\n        headerStyle: { textAlign: \"left\" },\n        Cell: this.renderUser.bind(this),\n      },\n      {\n        Header: \"Project\",\n        accessor: \"project\",\n        width: 150,\n        headerStyle: { textAlign: \"left\" },\n        Cell: this.renderProject.bind(this),\n      },\n      {\n        Header: \"Started\",\n        accessor: \"starttime\",\n        width: 112,\n        headerStyle: { textAlign: \"left\" },\n      },\n      {\n        Header: \"Ended\",\n        accessor: \"endtime\",\n        width: 112,\n        headerStyle: { textAlign: \"left\" },\n        Cell: this.renderEnded.bind(this),\n      },\n      {\n        Header: \"Runtime\",\n        accessor: \"runtime\",\n        width: 60,\n        headerStyle: { textAlign: \"right\" },\n        className: \"table_column_right_align\",\n        Cell: this.renderRuntime.bind(this),\n      },\n      {\n        Header: \"Runs\",\n        accessor: \"runs\",\n        width: 60,\n        headerStyle: { textAlign: \"right\" },\n        className: \"table_column_right_align\",\n      },\n      {\n        Header: \"Status\",\n        accessor: \"status\",\n        width: 80,\n        headerStyle: { textAlign: \"left\" },\n        Cell: this.renderStatus.bind(this),\n      },\n    ];\n    return (\n      <MarxanDialog\n        {...this.props}\n        // titleBarIcon={faBookOpen}\n        onOk={this.closeDialog.bind(this)}\n        onCancel={this.closeDialog.bind(this)}\n        showCancelButton={false}\n        helpLink={\"user.html#the-run-log\"}\n        autoDetectWindowHeight={false}\n        bodyStyle={{ padding: \"0px 24px 0px 24px\" }}\n        title=\"Runs\"\n        showSearchBox={true}\n        searchTextChanged={this.searchTextChanged.bind(this)}\n        children={\n          <React.Fragment key=\"k2\">\n            <div id=\"projectsTable\">\n              <MarxanTable\n                data={this.props.runLogs}\n                columns={tableColumns}\n                searchColumns={[\"user\", \"project\", \"status\", \"runs\", \"runtime\"]}\n                searchText={this.state.searchText}\n                selectedRun={this.state.selectedRun}\n                changeSelectedRun={this.changeSelectedRun.bind(this)}\n                getTrProps={(state, rowInfo, column) => {\n                  return {\n                    style: {\n                      background:\n                        rowInfo.original.pid ===\n                        (state.selectedRun && state.selectedRun.pid)\n                          ? \"aliceblue\"\n                          : \"\",\n                    },\n                    onClick: (e) => {\n                      state.changeSelectedRun(e, rowInfo.original);\n                    },\n                  };\n                }}\n              />\n            </div>\n            <div\n              id=\"projectsToolbar\"\n              style={{\n                display: this.props.userRole !== \"Admin\" ? \"none\" : \"block\",\n              }}\n            >\n              <ToolbarButton\n                show={!this.props.unauthorisedMethods.includes(\"stopMarxan\")}\n                title=\"Stop run\"\n                disabled={\n                  this.state.selectedRun === undefined\n                    ? true\n                    : !this.props.preprocessing && !this.state.runningJobs\n                    ? true\n                    : this.state.selectedRun.status !== \"Running\"\n                }\n                onClick={this.stopRun.bind(this)}\n                label={\"Stop\"}\n                secondary={true}\n              />\n              <ToolbarButton\n                show={!this.props.unauthorisedMethods.includes(\"getRunLogs\")}\n                title=\"Refresh run logs\"\n                icon={<FontAwesomeIcon icon={faRedoAlt} />}\n                onClick={this.refreshRunLogs.bind(this)}\n              />\n              <ToolbarButton\n                show={!this.props.unauthorisedMethods.includes(\"clearRunLogs\")}\n                title=\"Clear run logs\"\n                icon={<FontAwesomeIcon icon={faEraser} />}\n                onClick={this.clearRunLogs.bind(this)}\n              />\n            </div>\n          </React.Fragment>\n        }\n      />\n    ); //return\n  }\n}\n\nexport default RunLogDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport ReactTable from \"react-table\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faExclamationTriangle } from \"@fortawesome/free-solid-svg-icons\";\n\nclass ServerDetailsDialog extends React.Component {\n  renderWithIcon(cellInfo) {\n    let newServerSoftware =\n      cellInfo.row.key === \"Marxan Server version\" &&\n      this.props.marxanServer.server_version !==\n        this.props.registry.SERVER_VERSION;\n    return (\n      <React.Fragment>\n        <div style={{ float: \"left\" }}>{cellInfo.row.value}</div>\n        <FontAwesomeIcon\n          icon={faExclamationTriangle}\n          style={{\n            color: \"red\",\n            display:\n              cellInfo.row.key === \"Disk space\" &&\n              cellInfo.row.value.substr(0, 1) === \"0\"\n                ? \"inline\"\n                : \"none\",\n            right: \"5px\",\n            position: \"absolute\",\n            marginTop: \"5px\",\n          }}\n          title={\"Disk space running low\"}\n        />\n        <FontAwesomeIcon\n          icon={faExclamationTriangle}\n          style={{\n            color: \"red\",\n            display: newServerSoftware ? \"inline\" : \"none\",\n            right: \"5px\",\n            position: \"absolute\",\n            marginTop: \"5px\",\n          }}\n          title={\n            \"A new version of Marxan Server is available (\" +\n            this.props.registry.SERVER_VERSION +\n            \")\"\n          }\n        />\n        <FontAwesomeIcon\n          icon={faExclamationTriangle}\n          style={{\n            color: \"red\",\n            display:\n              cellInfo.row.key === \"WDPA version\" && this.props.newWDPAVersion\n                ? \"inline\"\n                : \"none\",\n            position: \"absolute\",\n            right: \"5px\",\n            marginTop: \"5px\",\n          }}\n          title={\"A new version of the WDPA is available - click for details\"}\n          onClick={this.props.showUpdateWDPADialog}\n        />\n      </React.Fragment>\n    );\n  }\n  render() {\n    let data = this.props.marxanServer\n      ? [\n          { key: \"Name\", value: this.props.marxanServer.name },\n          { key: \"Description\", value: this.props.marxanServer.description },\n          { key: \"Host\", value: this.props.marxanServer.host },\n          //   {key:'Port',value:this.props.marxanServer.port},\n          { key: \"System\", value: this.props.marxanServer.system },\n          { key: \"Processors\", value: this.props.marxanServer.processor_count },\n          { key: \"Disk space\", value: this.props.marxanServer.disk_space },\n          { key: \"RAM\", value: this.props.marxanServer.ram },\n          {\n            key: \"Marxan Server version\",\n            value: this.props.marxanServer.server_version,\n          },\n          { key: \"WDPA version\", value: this.props.marxanServer.wdpa_version },\n          {\n            key: \"Planning grid units limit\",\n            value: this.props.marxanServer.planning_grid_units_limit,\n          },\n          {\n            key: \"Shutdown\",\n            value: this.props.marxanServer.shutdowntime\n              ? new Date(this.props.marxanServer.shutdowntime).toLocaleString()\n              : \"Never\",\n          },\n        ]\n      : [];\n    // add the following if necessary\n    // <div className=\"tabTitle\">Release: {this.props.marxanServer&&this.props.marxanServer.release}</div>\n    // <div className=\"tabTitle\">Version: {this.props.marxanServer&&this.props.marxanServer.version}</div>\n    // <div className=\"tabTitle\">Processor: {this.props.marxanServer&&this.props.marxanServer.processor}</div>\n    return (\n      <MarxanDialog\n        {...this.props}\n        contentWidth={445}\n        offsetY={80}\n        title=\"Server Details\"\n        helpLink={\"user.html#server-details\"}\n        children={[\n          <ReactTable\n            showPagination={false}\n            className={\"server_details_infoTable\"}\n            minRows={0}\n            pageSize={data.length}\n            data={data}\n            noDataText=\"\"\n            key=\"k27\"\n            columns={[\n              {\n                Header: \"Parameter\",\n                accessor: \"key\",\n                width: 144,\n                headerStyle: { textAlign: \"left\" },\n              },\n              {\n                Header: \"Value\",\n                accessor: \"value\",\n                width: 252,\n                headerStyle: { textAlign: \"left\" },\n                Cell: this.renderWithIcon.bind(this),\n              },\n            ]}\n          />,\n        ]}\n      />\n    );\n  }\n}\n\nexport default ServerDetailsDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\n//a dialog box that is shown when the user first logs in to alert them to anything, e.g. A new version of the WDPA is available for admin users\nimport React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\n\nclass AlertDialog extends React.Component {\n  render() {\n    return (\n      <MarxanDialog\n        {...this.props}\n        contentWidth={500}\n        offsetY={80}\n        title=\"Alert\"\n        children={\n          <div key=\"k23\">\n            <div className={\"description\"}>\n              A new version of the WDPA is available. <br />\n              Click on Help | Server Details for more information.\n            </div>\n          </div>\n        }\n      />\n    );\n  }\n}\n\nexport default AlertDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport MarxanTextField from \"./MarxanTextField\";\n\nclass ChangePasswordDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { currentPassword: \"\", newPassword1: \"\", newPassword2: \"\" };\n  }\n  setCurrentPassword(event, newValue) {\n    this.setState({ currentPassword: newValue });\n  }\n  setNewPassword1(event, newValue) {\n    this.setState({ newPassword1: newValue });\n  }\n  setNewPassword2(event, newValue) {\n    this.setState({ newPassword2: newValue });\n  }\n  onOk(evt) {\n    if (this.state.newPassword2 !== this.state.newPassword1) {\n      this.passwordsDontMatch();\n      return;\n    }\n    this.props\n      .checkPassword(this.props.user, this.state.currentPassword)\n      .then((response) => {\n        this.props\n          .updateUser({ PASSWORD: this.state.newPassword1 })\n          .then((response) => {\n            this.props.setSnackBar(\"Password updated\");\n            this.props.onOk();\n          })\n          .catch((error) => {\n            this.props.setSnackBar(\"Password not updated\");\n          });\n      })\n      .catch((response) => {\n        this.props.setSnackBar(\"Invalid password\");\n      });\n  }\n  passwordsDontMatch() {\n    this.props.setSnackBar(\"Passwords don't match\");\n  }\n  render() {\n    return (\n      <MarxanDialog\n        {...this.props}\n        onOk={this.onOk.bind(this)}\n        showCancelButton={true}\n        onCancel={this.props.onOk}\n        helpLink={\"user.html#change-password\"}\n        contentWidth={358}\n        offsetY={80}\n        title=\"Change Password\"\n        children={\n          <div key=\"k5\">\n            <MarxanTextField\n              floatingLabelText=\"Current password\"\n              onChange={this.setCurrentPassword.bind(this)}\n              floatingLabelShrinkStyle={{ fontSize: \"16px\" }}\n              floatingLabelFocusStyle={{ fontSize: \"16px\" }}\n              type=\"password\"\n            />\n            <MarxanTextField\n              floatingLabelText=\"New password\"\n              onChange={this.setNewPassword1.bind(this)}\n              floatingLabelShrinkStyle={{ fontSize: \"16px\" }}\n              floatingLabelFocusStyle={{ fontSize: \"16px\" }}\n              type=\"password\"\n            />\n            <MarxanTextField\n              floatingLabelText=\"Repeat password\"\n              onChange={this.setNewPassword2.bind(this)}\n              floatingLabelShrinkStyle={{ fontSize: \"16px\" }}\n              floatingLabelFocusStyle={{ fontSize: \"16px\" }}\n              type=\"password\"\n            />\n          </div>\n        }\n      />\n    );\n  }\n}\n\nexport default ChangePasswordDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport CONSTANTS from \"./constants\";\nimport ReactTable from \"react-table\";\nimport Sync from \"material-ui/svg-icons/notification/sync\";\nimport Swatch from \"./Swatch\";\nimport { Tabs, Tab } from \"material-ui/Tabs\";\nimport { getArea } from \"./Helpers.js\";\n\nconst TITLE_LINK = \"Click to open in the Protected Planet website\";\nconst URL_PP = \"https://www.protectedplanet.net/\";\nconst TAB_STYLE = {\n  fontWeight: \"normal\",\n  textTransform: \"none\",\n  height: \"34px\",\n  fontSize: \"15px\",\n};\n\nclass IdentifyPopup extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { selectedValue: \"pu\" };\n  }\n  componentDidUpdate(prevProps, prevState) {\n    //if the popup is shown, start the timer\n    if (this.props.visible && !prevProps.visible) this.startTimer();\n    //if the mouse has been clicked somewhere else while the popup is already open\n    if (this.props.xy.x !== prevProps.xy.x) this.restartTimer();\n  }\n  renderAmount(row) {\n    if (row.original.source !== \"Imported shapefile (points)\") {\n      return (\n        <div title={getArea(row.original.amount, this.props.reportUnits)}>\n          {getArea(row.original.amount, this.props.reportUnits, true)}\n        </div>\n      );\n    } else {\n      //points\n      return <div title={row.original.amount}>{row.original.amount}</div>;\n    }\n  }\n  renderName(row) {\n    return <div title={row.original.alias}>{row.original.alias}</div>;\n  }\n  renderFeatureName(row) {\n    return <div title={row.original.alias}>{row.original.alias}</div>;\n  }\n  renderFeatureDescription(row) {\n    return (\n      <div title={row.original.description}>{row.original.description}</div>\n    );\n  }\n  renderPAName(row) {\n    return (\n      <div title={row.original.properties.name}>\n        {row.original.properties.name}\n      </div>\n    );\n  }\n  renderPADesignation(row) {\n    return (\n      <div title={row.original.properties.desig}>\n        {row.original.properties.desig}\n      </div>\n    );\n  }\n  renderPAIUCNCategory(row) {\n    return (\n      <div title={row.original.properties.iucn_cat}>\n        {row.original.properties.iucn_cat}\n      </div>\n    );\n  }\n  renderPALink(row) {\n    return (\n      <span className={\"ppLink underline\"}>\n        <a\n          href={URL_PP + row.original.properties.wdpaid}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          title={TITLE_LINK}\n        >\n          {row.original.properties.wdpaid}\n        </a>\n      </span>\n    );\n  }\n  changeTab(value) {\n    this.setState({ selectedValue: value });\n  }\n  mouseLeave(e) {\n    this.clearTimeout();\n    this.props.hideIdentifyPopup();\n    //return to the default state\n    this.setState({ selectedValue: \"pu\" });\n  }\n  mouseEnter(e) {\n    this.cancelTimer();\n  }\n  mouseLeavePopup(ms, e) {\n    if (this.timer !== undefined) return;\n    this.timer = setTimeout(() => {\n      if (!this.timerCancelled) {\n        this.mouseLeave();\n      }\n    }, ms);\n  }\n  clearTimeout() {\n    clearTimeout(this.timer);\n    this.timer = undefined;\n  }\n  cancelTimer(e) {\n    this.timerCancelled = true;\n  }\n  restartTimer(e) {\n    this.clearTimeout();\n    this.startTimer();\n  }\n  startTimer(e) {\n    this.timerCancelled = false;\n    this.mouseLeavePopup(4000);\n  }\n  render() {\n    let left = this.props.xy.x + 25 + \"px\";\n    let top = this.props.xy.y - 25 + \"px\";\n    let item = {};\n    //get the status for the planning unit\n    switch (\n      this.props.identifyPlanningUnits &&\n      this.props.identifyPlanningUnits.puData &&\n      this.props.identifyPlanningUnits.puData.status\n    ) {\n      case 0:\n        item = CONSTANTS.PU_STATUS_DEFAULT;\n        break;\n      case 1:\n        //Included in the initial reserve system but may or may not be in the final solution\n        break;\n      case 2:\n        item = CONSTANTS.PU_STATUS_LOCKED_IN;\n        break;\n      case 3:\n        item = CONSTANTS.PU_STATUS_LOCKED_OUT;\n        break;\n      default:\n      // code\n    }\n    //get the planning unit shape\n    let shape =\n      this.props.metadata &&\n      this.props.metadata.PLANNING_UNIT_NAME &&\n      this.props.metadata.PLANNING_UNIT_NAME.includes(\"hexagon\")\n        ? \"hexagon\"\n        : \"square\";\n    //get the tabs which are needed\n    let puTab =\n      this.props.identifyPlanningUnits &&\n      this.props.identifyPlanningUnits.puData ? (\n        <Tab label=\"Planning units\" value=\"pu\" key=\"pu\" buttonStyle={TAB_STYLE}>\n          <Sync\n            className=\"spin\"\n            style={{\n              display: this.props.loading ? \"inline-block\" : \"none\",\n              color: \"rgb(255, 64, 129)\",\n              position: \"absolute\",\n              top: \"-49px\",\n              left: \"-7px\",\n            }}\n            key={\"spinner\"}\n          />\n          <div className={\"identifyPlanningUnitsHeader\"}>\n            <span>\n              <Swatch\n                item={item}\n                key={\"key_\" + item.label + \"_identify\"}\n                shape={shape}\n              />\n              <span style={{ paddingLeft: \"5px\" }} />\n              {item.label}\n            </span>\n            <span>\n              Cost:{\" \"}\n              {this.props.identifyPlanningUnits &&\n                this.props.identifyPlanningUnits.puData &&\n                this.props.identifyPlanningUnits.puData.cost}\n            </span>\n            <span>\n              ID:{\" \"}\n              {this.props.identifyPlanningUnits &&\n                this.props.identifyPlanningUnits.puData &&\n                this.props.identifyPlanningUnits.puData.id}\n            </span>\n          </div>\n          <div\n            style={{\n              display:\n                this.props.identifyPlanningUnits &&\n                this.props.identifyPlanningUnits.features &&\n                this.props.identifyPlanningUnits.features.length\n                  ? \"block\"\n                  : \"none\",\n            }}\n          >\n            <div className={\"featureList\"}>{\"Features in planning unit:\"}</div>\n            <ReactTable\n              showPagination={false}\n              className={\"identifyPUFeaturesInfoTable\"}\n              pageSize={\n                this.props.loading\n                  ? 0\n                  : this.props.identifyPlanningUnits &&\n                    this.props.identifyPlanningUnits.features &&\n                    this.props.identifyPlanningUnits.features.length\n              }\n              minRows={0}\n              noDataText=\"\"\n              data={this.props.identifyPlanningUnits.features}\n              columns={[\n                {\n                  Header: \"Name\",\n                  accessor: \"alias\",\n                  width: 215,\n                  headerStyle: { textAlign: \"left\" },\n                  Cell: this.renderName.bind(this),\n                },\n                {\n                  Header: \"Amount\",\n                  accessor: \"amount\",\n                  width: 65,\n                  headerStyle: { textAlign: \"left\" },\n                  Cell: this.renderAmount.bind(this),\n                },\n              ]}\n            />\n          </div>\n          <div\n            style={{\n              display:\n                this.props.identifyPlanningUnits &&\n                this.props.identifyPlanningUnits.features &&\n                this.props.identifyPlanningUnits.features.length === 0\n                  ? \"block\"\n                  : \"none\",\n            }}\n          >\n            <div className={\"featureList\"}>\n              No features occur in this planning unit\n            </div>\n          </div>\n        </Tab>\n      ) : null;\n    let featuresTab =\n      this.props.identifyFeatures && this.props.identifyFeatures.length ? (\n        <Tab\n          label=\"Features\"\n          value=\"features\"\n          key=\"features\"\n          buttonStyle={TAB_STYLE}\n        >\n          <ReactTable\n            showPagination={false}\n            className={\"identifyFeaturesInfoTable\"}\n            pageSize={\n              this.props.identifyFeatures && this.props.identifyFeatures.length\n            }\n            minRows={0}\n            noDataText=\"\"\n            data={this.props.identifyFeatures}\n            columns={[\n              {\n                Header: \"Name\",\n                accessor: \"alias\",\n                width: 140,\n                headerStyle: { textAlign: \"left\" },\n                Cell: this.renderFeatureName.bind(this),\n              },\n              {\n                Header: \"Description\",\n                accessor: \"description\",\n                width: 140,\n                headerStyle: { textAlign: \"left\" },\n                Cell: this.renderFeatureDescription.bind(this),\n              },\n            ]}\n          />\n        </Tab>\n      ) : null;\n    let protectedAreasTab =\n      this.props.identifyProtectedAreas &&\n      this.props.identifyProtectedAreas.length ? (\n        <Tab\n          label=\"Protected areas\"\n          value=\"pas\"\n          key=\"pas\"\n          buttonStyle={TAB_STYLE}\n        >\n          <ReactTable\n            showPagination={false}\n            className={\"identifyProtectedAreasInfoTable\"}\n            pageSize={\n              this.props.identifyProtectedAreas &&\n              this.props.identifyProtectedAreas.length\n            }\n            minRows={0}\n            noDataText=\"\"\n            data={this.props.identifyProtectedAreas}\n            columns={[\n              {\n                Header: \"Name\",\n                accessor: \"properties.name\",\n                width: 134,\n                headerStyle: { textAlign: \"left\" },\n                Cell: this.renderPAName.bind(this),\n              },\n              {\n                Header: \"Designation\",\n                accessor: \"properties.desig\",\n                width: 70,\n                headerStyle: { textAlign: \"left\" },\n                Cell: this.renderPADesignation.bind(this),\n              },\n              {\n                Header: \"IUCN Category\",\n                accessor: \"properties.iucn_cat\",\n                width: 33,\n                headerStyle: { textAlign: \"left\" },\n                Cell: this.renderPAIUCNCategory.bind(this),\n              },\n              {\n                Header: \"Link\",\n                width: 43,\n                Cell: this.renderPALink.bind(this),\n              },\n            ]}\n          />\n        </Tab>\n      ) : null;\n    let tabs = [puTab, featuresTab, protectedAreasTab];\n    if (!puTab && !featuresTab && !protectedAreasTab) tabs = [];\n    //if the user has clicked on a pa outside the planning grid then select the pas tab\n    let onlyPA = !puTab && !featuresTab && protectedAreasTab;\n    return (\n      <div\n        style={{\n          display: this.props.visible && tabs.length ? \"block\" : \"none\",\n          left: left,\n          top: top,\n        }}\n        id=\"popup\"\n        onMouseLeave={this.mouseLeave.bind(this)}\n        onMouseEnter={this.mouseEnter.bind(this)}\n      >\n        <Tabs\n          tabItemContainerStyle={{ height: \"34px\" }}\n          contentContainerStyle={{ margin: \"20px\" }}\n          className={\"identifyPopup\"}\n          value={onlyPA ? \"pas\" : this.state.selectedValue}\n          onChange={this.changeTab.bind(this)}\n        >\n          {tabs}\n        </Tabs>\n      </div>\n    );\n  }\n}\n\nexport default IdentifyPopup;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport MarxanTextField from \"./MarxanTextField\";\nimport { isValidTargetValue } from \"./Helpers.js\";\n\nclass TargetDialog extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = { target_value: 17, validTarget: true };\n  }\n  handleKeyPress(e) {\n    if (e.nativeEvent.key === \"Enter\") this.validateTarget();\n  }\n  validateTarget() {\n    let _validTarget = isValidTargetValue(this.state.target_value);\n    this.setState({ validTarget: _validTarget });\n    if (_validTarget) {\n      this.props.updateTargetValueForFeatures(this.state.target_value);\n      this.props.onOk();\n    }\n  }\n  onOk() {\n    this.validateTarget();\n  }\n  render() {\n    return (\n      <MarxanDialog\n        {...this.props}\n        contentWidth={240}\n        offsetX={80}\n        offsetY={260}\n        title=\"Target for all features\"\n        onOk={this.onOk.bind(this)}\n        children={\n          <React.Fragment>\n            <MarxanTextField\n              style={{ fontSize: \"13px\", width: \"70px\" }}\n              id={\"commonTarget\"}\n              onChange={(event, newValue) =>\n                this.setState({ target_value: newValue })\n              }\n              defaultValue={this.state.target_value}\n              onKeyPress={this.handleKeyPress.bind(this)}\n              floatingLabelShrinkStyle={{ fontSize: \"16px\" }}\n              floatingLabelFocusStyle={{ fontSize: \"16px\" }}\n              errorText={this.state.validTarget ? \"\" : \"Invalid target\"}\n            />\n          </React.Fragment>\n        }\n      />\n    );\n  }\n}\n\nexport default TargetDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport MarxanTextField from \"./MarxanTextField\";\nimport ToolbarButton from \"./ToolbarButton\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faClipboard } from \"@fortawesome/free-solid-svg-icons\";\n\nclass ShareableLinkDialog extends React.PureComponent {\n  copyToClipboard(evt) {\n    window.navigator.clipboard.writeText(this.props.shareableLinkUrl).then(\n      function () {},\n      function () {\n        alert(\"Browser not supported\");\n      }\n    );\n  }\n\n  render() {\n    return (\n      <MarxanDialog\n        {...this.props}\n        contentWidth={600}\n        height={100}\n        offsetX={80}\n        offsetY={360}\n        title=\"Shareable link\"\n        children={\n          <React.Fragment>\n            <MarxanTextField\n              style={{ fontSize: \"13px\", width: \"550px\" }}\n              multiLine={true}\n              rows={2}\n              onChange={(event, newValue) =>\n                this.setState({ target_value: newValue })\n              }\n              defaultValue={this.props.shareableLinkUrl}\n              floatingLabelShrinkStyle={{ fontSize: \"16px\" }}\n              floatingLabelFocusStyle={{ fontSize: \"16px\" }}\n            />\n            <ToolbarButton\n              icon={<FontAwesomeIcon icon={faClipboard} />}\n              title=\"Copy\"\n              onClick={this.copyToClipboard.bind(this)}\n            />\n          </React.Fragment>\n        }\n      />\n    );\n  }\n}\n\nexport default ShareableLinkDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from \"react\";\nimport { PieChart, Pie, Cell } from \"recharts\";\nimport Divider from \"material-ui/Divider\";\nimport { getArea } from \"./Helpers.js\";\n// import star from './images/star.png';\n\nclass MetChart extends React.Component {\n  render() {\n    let rounded = Number(this.props.current_protected_percent.toFixed(1));\n    let country_area = getArea(\n      this.props.country_area,\n      this.props.reportUnits,\n      false\n    );\n    let protected_area = getArea(\n      this.props.current_protected_area,\n      this.props.reportUnits,\n      false\n    );\n    let total_area = getArea(\n      this.props.total_area,\n      this.props.reportUnits,\n      false\n    );\n    let titleText =\n      \"Total area: \" +\n      total_area +\n      \"\\nCountry area: \" +\n      country_area +\n      \"\\nProtected area: \" +\n      protected_area;\n    const data = this.props.showCountryArea\n      ? [\n          { name: \"Protected area\", value: this.props.current_protected_area },\n          {\n            name: \"Country area\",\n            value: this.props.country_area - this.props.current_protected_area,\n          },\n          {\n            name: \"Total area\",\n            value: this.props.total_area - this.props.country_area,\n          },\n        ]\n      : [\n          { name: \"Protected area\", value: this.props.current_protected_area },\n          {\n            name: \"Total area\",\n            value: this.props.country_area - this.props.current_protected_area,\n          },\n        ];\n    const colors = [\"#D9D9D9\", this.props.color];\n    return (\n      <React.Fragment>\n        <div className=\"MetChart\">\n          <div className=\"MetChartTitle\">{this.props.title}</div>\n          <Divider />\n          <div className=\"MetChartInner\">\n            <PieChart width={120} height={120}>\n              <Pie\n                data={data}\n                cx=\"50%\"\n                cy=\"50%\"\n                isAnimationActive={false}\n                startAngle={90}\n                endAngle={450}\n                innerRadius={30}\n                outerRadius={50}\n              >\n                {data.map((entry, index) => {\n                  let _color;\n                  switch (index) {\n                    case 0:\n                      _color = this.props.color;\n                      break;\n                    case 1:\n                      _color = this.props.showCountryArea\n                        ? \"#bbbbbb\"\n                        : \"#dddddd\";\n                      break;\n                    default:\n                      _color = \"#dddddd\";\n                      break;\n                  }\n                  return <Cell key={index} fill={_color} strokeWidth={2} />;\n                })}\n              </Pie>\n            </PieChart>\n            <div style={{ color: colors[1] }} className=\"MetChartPercentLabel\">\n              {rounded}%\n            </div>\n            <div\n              className=\"MetChartDiv\"\n              style={\n                this.props.clickable !== false ? { cursor: \"pointer\" } : null\n              }\n              title={titleText}\n            />\n            {/*<span style={{display: (this.props.endemic && (this.props.created_by === \"global admin\")) ? 'inline' : 'none'}}><img src={star} alt=\"Endemic\" title={\"Endemic\"} className={\"endemicImg\"}/></span>*/}\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default MetChart;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from \"react\";\nimport { getArea } from \"./Helpers.js\";\n\nclass CustomTooltip extends React.PureComponent {\n  render() {\n    let tooltip =\n      this.props && this.props.active && this.props && this.props.payload ? (\n        <div className=\"custom-tooltip\">\n          <div className=\"tooltip\">{this.props.payload[0].payload._alias}</div>\n          <div className=\"tooltip\">\n            Total area:{\" \"}\n            {getArea(\n              this.props.payload[0].payload.total_area,\n              this.props.reportUnits,\n              true\n            )}\n          </div>\n          <div className=\"tooltip\">\n            Country area:{\" \"}\n            {getArea(\n              this.props.payload[0].payload.country_area,\n              this.props.reportUnits,\n              true\n            )}\n          </div>\n          <div className=\"tooltip\">\n            Protected area:{\" \"}\n            {getArea(\n              this.props.payload[0].payload.current_protected_area,\n              this.props.reportUnits,\n              true\n            )}\n          </div>\n        </div>\n      ) : null;\n    return tooltip;\n  }\n}\n\nexport default CustomTooltip;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport MetChart from \"./MetChart\";\nimport {\n  Cell,\n  ReferenceLine,\n  ComposedChart,\n  Bar,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Label,\n} from \"recharts\";\nimport Toggle from \"material-ui/Toggle\";\nimport CustomTooltip from \"./CustomTooltip.js\";\n\nclass GapAnalysisDialog extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = { showChart: false };\n  }\n  getRepresentationScore(features) {\n    let sum = 0,\n      amount_under_protection_property,\n      total_amount_property;\n    //get the names of the properties that we will use to calculate the representation scores\n    if (features.length) {\n      if (features[0].hasOwnProperty(\"current_protected_area\")) {\n        amount_under_protection_property = \"current_protected_area\";\n        total_amount_property = \"country_area\"; //should this be total_area or country_area?\n      } else {\n        amount_under_protection_property = \"protected_area\";\n        total_amount_property = \"pu_area\";\n      }\n    }\n    //iterate through the features and get the value for each feature\n    features.forEach((item) => {\n      let val =\n        item[amount_under_protection_property] /\n        item[total_amount_property] /\n        (item.target_value / 100);\n      if (!isNaN(val)) sum = sum + (val > 1 ? 1 : val);\n    });\n    //get the mean value\n    let mean = sum / features.length;\n    return Number(mean * 100).toFixed(1);\n  }\n  toggleView(event, isInputChecked) {\n    this.setState({ showChart: isInputChecked });\n  }\n  renderTooltip(a, b, c) {\n    return \"wibble\";\n  }\n  render() {\n    //join the data from the gap analysis onto the feature data\n    let _data = this.props.gapAnalysis.map((item) => {\n      //get the matching projectFeatures item\n      var stats = this.props.projectFeatures.filter((item2) => {\n        return item2.feature_class_name === item._feature_class_name;\n      })[0];\n      if (stats) {\n        return Object.assign(item, {\n          target_value: stats.target_value,\n          color: stats.color,\n        });\n      } else {\n        return item;\n      }\n    });\n    //sort the data by current protection\n    _data.sort((a, b) => {\n      let returnval =\n        a.current_protected_percent < b.current_protected_percent ? -1 : 1;\n      return returnval;\n    });\n    //get the data only for those features which occur in the country\n    _data = _data.filter((item) => item.country_area > 0);\n    //create the charts and get the count of features that have met the target\n    let targetsMetCount = 0;\n    let charts = _data.map((item, index) => {\n      if (item.country_area > 0) {\n        if (item.current_protected_percent >= item.target_value)\n          targetsMetCount = targetsMetCount + 1;\n        return (\n          <MetChart\n            {...item}\n            title={item._alias}\n            color={item.color}\n            key={item._feature_class_name}\n            reportUnits={this.props.reportUnits}\n            showCountryArea={false}\n            dataKey={item._feature_class_name}\n          />\n        );\n      } else {\n        return null;\n      }\n    });\n    //get the representation score\n    let score = this.props.gapAnalysis.length\n      ? this.getRepresentationScore(_data)\n      : \"Calcuating..\";\n    return (\n      <MarxanDialog\n        showSpinner={this.props.preprocessing}\n        autoDetectWindowHeight={false}\n        {...this.props}\n        contentWidth={680}\n        title=\"Gap Analysis\"\n        helpLink={\"user.html#gap-analysis-window\"}\n        onRequestClose={this.props.closeGapAnalysisDialog}\n        showCancelButton={false}\n        children={\n          <React.Fragment key={\"gapAnalysiskey\"}>\n            <div className=\"analysisReport\">\n              <div>\n                Gap Analysis for {this.props.metadata.pu_country} using the{\" \"}\n                {this.props.marxanServer.wdpa_version} version of the WDPA\n              </div>\n              <div\n                className={\"analysisReportInner\"}\n                style={{\n                  display: this.props.gapAnalysis.length ? \"block\" : \" none\",\n                }}\n              >\n                <div\n                  className={\"analysisChartsDiv\"}\n                  style={{ display: this.state.showChart ? \"none\" : \"block\" }}\n                >\n                  {charts}\n                </div>\n                <ComposedChart\n                  width={550}\n                  height={350}\n                  data={_data}\n                  margin={{ bottom: 20, top: 20 }}\n                  style={{\n                    display: this.state.showChart ? \"block\" : \"none\",\n                    margin: \"auto\",\n                  }}\n                >\n                  <CartesianGrid strokeDasharray=\"1\" stroke=\"#f4f4f4\" />\n                  <XAxis\n                    dataKey=\"_alias\"\n                    height={100}\n                    angle={-90}\n                    textAnchor=\"end\"\n                    dx={-5}\n                  ></XAxis>\n                  <YAxis tick={{ fontSize: 11 }}>\n                    <Label\n                      value=\"Percent Protected\"\n                      angle={-90}\n                      position=\"insideBottomLeft\"\n                      style={{ fontSize: \"11px\", color: \"#222222\" }}\n                      offset={30}\n                    />\n                  </YAxis>\n                  <Tooltip\n                    content={\n                      <CustomTooltip reportUnits={this.props.reportUnits} />\n                    }\n                  />\n                  <Bar dataKey=\"current_protected_percent\" fill=\"#8884d8\">\n                    {_data.map((entry, index) => {\n                      return <Cell fill={entry.color} key={entry.color} />;\n                    })}\n                  </Bar>\n                  <ReferenceLine\n                    y={_data.length ? _data[0].target_value : 0}\n                    stroke=\"#7C7C7C\"\n                    strokeDasharray=\"3 3\"\n                    style={{ display: _data.length ? \"inline\" : \"none\" }}\n                  />\n                </ComposedChart>\n                <div className={\"gapAnalysisBtmPanel\"}>\n                  <div className={\"gapAnalysisStatsPanel\"}>\n                    <table>\n                      <tbody>\n                        <tr>\n                          <td>Features meeting targets:</td>\n                          <td className={\"score\"}>\n                            {targetsMetCount}/{charts.length}\n                          </td>\n                        </tr>\n                        <tr>\n                          <td>Representation score:</td>\n                          <td className={\"score\"}>{score}</td>\n                        </tr>\n                      </tbody>\n                    </table>\n                  </div>\n                  <Toggle\n                    label=\"Show as a chart\"\n                    onToggle={this.toggleView.bind(this)}\n                    style={{\n                      width: \"unset\",\n                      float: \"right\",\n                      paddingTop: \"2px\",\n                    }}\n                    labelStyle={{\n                      fontSize: \"14px\",\n                      width: \"100px\",\n                      color: \"rgba(0, 0, 0, 0.6)\",\n                    }}\n                    toggled={this.state.showChart}\n                  />\n                </div>\n              </div>\n            </div>\n          </React.Fragment>\n        }\n      />\n    );\n  }\n}\n\nexport default GapAnalysisDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\n\nclass ResetDialog extends React.PureComponent {\n  render() {\n    return (\n      <MarxanDialog\n        {...this.props}\n        contentWidth={240}\n        title=\"Reset database\"\n        okLabel=\"Yes\"\n        cancelLabel=\"No\"\n        showCancelButton={true}\n        children={<div>Are you sure you want to reset?</div>}\n      />\n    );\n  }\n}\n\nexport default ResetDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport * as React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport ToolbarButton from \"./ToolbarButton\";\n\nclass UpdateWDPADialog extends React.PureComponent {\n  render() {\n    let html =\n      this.props.registry &&\n      this.props.registry.WDPA.latest_version +\n        \" is available. Details <a href='\" +\n        (this.props.registry && this.props.registry.WDPA.metadataUrl) +\n        \"' target='_blank'>here</a>. Click below to update. \";\n    return (\n      <MarxanDialog\n        {...this.props}\n        contentWidth={380}\n        offsetY={260}\n        title=\"Update WDPA\"\n        children={\n          <React.Fragment>\n            <div\n              style={{ display: this.props.newWDPAVersion ? \"block\" : \"none\" }}\n            >\n              <br />\n              <div dangerouslySetInnerHTML={{ __html: html }} />\n              <br />\n              <ToolbarButton\n                title=\"Update WDPA\"\n                onClick={this.props.updateWDPA}\n                label=\"Update\"\n                disabled={this.props.loading}\n              />\n            </div>\n          </React.Fragment>\n        }\n      />\n    );\n  }\n}\n\nexport default UpdateWDPADialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport MarxanDialog from \"./MarxanDialog\";\nimport MarxanTextField from \"./MarxanTextField\";\nimport Checkbox from \"material-ui/Checkbox\";\n\nclass ImportGBIFDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { searchText: \"\", gbifID: 0, suggestions: [], clicked: false };\n  }\n  onOk() {\n    this.props\n      .importGBIFData(this.state.selectedItem)\n      .then((response) => {\n        this.props.onCancel();\n      })\n      .catch((error) => {\n        this.props.onCancel();\n      });\n  }\n  changeSearchText(event, value) {\n    if (this.state.searchText.length > 2 && !this.state.clicked) {\n      //get the gbif suggested names\n      this.props.gbifSpeciesSuggest(this.state.searchText).then((response) => {\n        this.setState({ suggestions: response });\n      });\n    }\n    this.setState({\n      searchText: value,\n      clicked: false,\n      selectedItem: undefined,\n    });\n  }\n  onClick(item, evt) {\n    this.setState({ clicked: true }, () => {\n      this.setState({ searchText: item.scientificName, selectedItem: item });\n    });\n  }\n  render() {\n    let suggestions = this.state.suggestions.map((item) => {\n      return (\n        <div\n          key={item.key}\n          className={\"suggestion\"}\n          onClick={this.onClick.bind(this, item)}\n        >\n          {item.scientificName}\n        </div>\n      );\n    });\n    return (\n      <MarxanDialog\n        {...this.props}\n        contentWidth={390}\n        offsetY={80}\n        title=\"Import GBIF data\"\n        helpLink={\n          \"user.html#importing-from-the-global-biodiversity-information-facility-gbif\"\n        }\n        onOk={this.onOk.bind(this)}\n        okDisabled={this.state.selectedItem === undefined || this.props.loading}\n        showCancelButton={true}\n        autoDetectWindowHeight={false}\n        children={\n          <React.Fragment key={\"importGBIFKey\"}>\n            <div className={\"importGBIFContent\"}>\n              <MarxanTextField\n                value={this.state.searchText}\n                onChange={this.changeSearchText.bind(this)}\n                floatingLabelText=\"Search\"\n                style={{ width: \"330px\" }}\n              />\n              <div\n                className={\"suggestions\"}\n                style={{\n                  display:\n                    this.state.searchText.length > 2 && !this.state.clicked\n                      ? \"block\"\n                      : \"none\",\n                }}\n              >\n                {suggestions}\n              </div>\n              <Checkbox\n                label=\"Add to project\"\n                style={{\n                  fontSize: \"12px\",\n                  width: \"200px\",\n                  display: \"inline-block\",\n                  marginTop: \"10px\",\n                }}\n                onCheck={this.props.setAddToProject}\n                checked={this.props.addToProject}\n              />\n            </div>\n          </React.Fragment>\n        }\n      />\n    );\n  }\n}\n\nexport default ImportGBIFDialog;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\n/*global fetch*/\n/*global URLSearchParams*/\n/*global AbortController*/\nimport React from \"react\";\nimport packageJson from \"../package.json\";\nimport CONSTANTS from \"./constants\";\n/*eslint-disable no-unused-vars*/\nimport axios, { post } from \"axios\";\n/*eslint-enable no-unused-vars*/\nimport MuiThemeProvider from \"material-ui/styles/MuiThemeProvider\";\n//mapbox imports\nimport MapboxDraw from \"@mapbox/mapbox-gl-draw/dist/mapbox-gl-draw.js\";\nimport mapboxgl from \"mapbox-gl\";\nimport \"@mapbox/mapbox-gl-draw/dist/mapbox-gl-draw.css\";\nimport \"mapbox-gl/dist/mapbox-gl.css\";\nimport HomeButton from \"./HomeButton.js\";\nimport jsonp from \"jsonp-promise\";\nimport classyBrew from \"classybrew\";\nimport { getMaxNumberOfClasses, zoomToBounds } from \"./Helpers.js\";\n//material-ui components and icons\nimport Popover from \"material-ui/Popover\";\nimport Menu from \"material-ui/Menu\";\nimport Snackbar from \"material-ui/Snackbar\";\nimport Properties from \"material-ui/svg-icons/alert/error-outline\";\nimport RemoveFromProject from \"material-ui/svg-icons/content/remove\";\nimport AddToMap from \"material-ui/svg-icons/action/visibility\";\nimport RemoveFromMap from \"material-ui/svg-icons/action/visibility-off\";\nimport ZoomIn from \"material-ui/svg-icons/action/zoom-in\";\nimport Preprocess from \"material-ui/svg-icons/action/autorenew\";\n//project components\nimport AppBar from \"./AppBar\";\nimport LoadingDialog from \"./LoadingDialog\";\nimport LoginDialog from \"./LoginDialog\";\nimport RegisterDialog from \"./RegisterDialog.js\";\nimport ResendPasswordDialog from \"./ResendPasswordDialog.js\";\nimport Welcome from \"./Welcome.js\";\nimport ToolsMenu from \"./ToolsMenu\";\nimport UserMenu from \"./UserMenu\";\nimport HelpMenu from \"./HelpMenu\";\nimport UserSettingsDialog from \"./UserSettingsDialog\";\nimport ProfileDialog from \"./ProfileDialog\";\nimport UsersDialog from \"./UsersDialog\";\nimport AboutDialog from \"./AboutDialog\";\nimport MenuItemWithButton from \"./MenuItemWithButton\";\nimport InfoPanel from \"./InfoPanel\";\nimport ResultsPanel from \"./ResultsPanel\";\nimport FeatureInfoDialog from \"./FeatureInfoDialog\";\nimport ProjectsDialog from \"./ProjectsDialog\";\nimport NewProjectDialog from \"./NewProjectDialog\";\nimport NewProjectWizardDialog from \"./NewProjectWizardDialog\";\nimport ProjectsListDialog from \"./ProjectsListDialog\";\nimport PlanningGridDialog from \"./PlanningGridDialog\";\nimport PlanningGridsDialog from \"./PlanningGridsDialog\";\nimport NewPlanningGridDialog from \"./NewPlanningGridDialog\";\nimport ImportPlanningGridDialog from \"./ImportPlanningGridDialog\";\nimport FeatureDialog from \"./FeatureDialog\";\nimport FeaturesDialog from \"./FeaturesDialog\";\nimport NewFeatureDialog from \"./NewFeatureDialog\";\nimport ImportFeaturesDialog from \"./ImportFeaturesDialog\";\nimport ImportFromWebDialog from \"./ImportFromWebDialog\";\nimport CostsDialog from \"./CostsDialog\";\nimport ImportCostsDialog from \"./ImportCostsDialog\";\nimport RunSettingsDialog from \"./RunSettingsDialog\";\nimport ClassificationDialog from \"./ClassificationDialog\";\nimport ClumpingDialog from \"./ClumpingDialog\";\nimport ImportProjectDialog from \"./ImportProjectDialog\";\nimport ImportMXWDialog from \"./ImportMXWDialog\";\nimport RunLogDialog from \"./RunLogDialog\";\nimport ServerDetailsDialog from \"./ServerDetailsDialog\";\nimport AlertDialog from \"./AlertDialog\";\nimport ChangePasswordDialog from \"./ChangePasswordDialog\";\nimport IdentifyPopup from \"./IdentifyPopup\";\nimport TargetDialog from \"./TargetDialog\";\nimport ShareableLinkDialog from \"./ShareableLinkDialog\";\nimport GapAnalysisDialog from \"./GapAnalysisDialog\";\nimport ResetDialog from \"./ResetDialog\";\nimport UpdateWDPADialog from \"./UpdateWDPADialog\";\nimport ImportGBIFDialog from \"./ImportGBIFDialog\";\n\n//GLOBAL VARIABLES\nlet MARXAN_CLIENT_VERSION = packageJson.version;\nlet timers = []; //array of timers for seeing when asynchronous calls have finished\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      registry: undefined,\n      marxanServers: [],\n      marxanServer: {},\n      usersDialogOpen: false,\n      alertDialogOpen: false,\n      featureMenuOpen: false,\n      profileDialogOpen: false,\n      aboutDialogOpen: false,\n      helpDialogOpen: false,\n      importProjectDialogOpen: false,\n      UserSettingsDialogOpen: false,\n      welcomeDialogOpen: false,\n      registerDialogOpen: false,\n      clumpingDialogOpen: false,\n      settingsDialogOpen: false,\n      projectsDialogOpen: false,\n      openInfoDialogOpen: false,\n      importGBIFDialogOpen: false,\n      newProjectDialogOpen: false,\n      newProjectWizardDialogOpen: false,\n      shareableLinkDialogOpen: false,\n      classificationDialogOpen: false,\n      resendPasswordDialogOpen: false,\n      NewPlanningGridDialogOpen: false,\n      importPlanningGridDialogOpen: false,\n      ProjectsListDialogOpen: false,\n      changePasswordDialogOpen: false,\n      importFeaturesDialogOpen: false,\n      importFromWebDialogOpen: false,\n      serverDetailsDialogOpen: false,\n      planningGridsDialogOpen: false,\n      planningGridDialogOpen: false,\n      updateWDPADialogOpen: false,\n      NewFeatureDialogOpen: false,\n      importMXWDialogOpen: false,\n      featuresDialogOpen: false,\n      gapAnalysisDialogOpen: false,\n      featureDialogOpen: false,\n      runLogDialogOpen: false,\n      resetDialogOpen: false,\n      costsDialogOpen: false,\n      importCostsDialogOpen: false,\n      infoPanelOpen: false,\n      resultsPanelOpen: false,\n      targetDialogOpen: false,\n      notificationsOpen: false,\n      guestUserEnabled: true,\n      toolsMenuOpen: false,\n      userMenuOpen: false,\n      helpMenuOpen: false,\n      addToProject: true,\n      smallLinearGauge: true,\n      users: [],\n      user: \"\",\n      password: \"\",\n      project: \"\",\n      projectList: [],\n      owner: \"\", // the owner of the project - may be different to the user, e.g. if logged on as guest (user) and accessing someone elses project (owner)\n      loggedIn: false,\n      shareableLink: false,\n      userData: { SHOWWELCOMESCREEN: true, REPORTUNITS: \"Ha\" },\n      unauthorisedMethods: [],\n      metadata: {},\n      renderer: {},\n      runParams: [],\n      files: {},\n      popup_point: { x: 0, y: 0 },\n      snackbarOpen: false,\n      snackbarMessage: \"\",\n      tilesets: [],\n      identifyPlanningUnits: {},\n      identifyProtectedAreas: [],\n      identifyFeatures: [],\n      loading: false, //true when GET/POST requests are ongoing\n      preprocessing: false, //true when a WebSocket is ongoing\n      uploading: false, //true when an upload to Mapbox is ongoing\n      identifyVisible: false,\n      pa_layer_visible: false,\n      currentFeature: {},\n      featureDatasetFilename: \"\",\n      dataBreaks: [],\n      allFeatures: [], //all of the interest features in the metadata_interest_features table\n      projectFeatures: [], //the features for the currently loaded project\n      selectedFeatureIds: [],\n      addingRemovingFeatures: false,\n      costnames: [],\n      selectedCosts: [],\n      countries: [],\n      planning_units: [],\n      planning_unit_grids: [],\n      planning_grid_metadata: {},\n      feature_metadata: {},\n      activeTab: \"project\",\n      activeResultsTab: \"legend\",\n      logMessages: [],\n      map0_paintProperty: [],\n      map1_paintProperty: [],\n      map2_paintProperty: [],\n      map3_paintProperty: [],\n      map4_paintProperty: [],\n      clumpingRunning: false,\n      projectListDialogTitle: \"\",\n      projectListDialogHeading: \"\",\n      pid: 0,\n      basemaps: [],\n      basemap: \"North Star\",\n      mapCentre: { lng: 0, lat: 0 },\n      mapZoom: 12,\n      runLogs: [],\n      puEditing: false,\n      wdpaAttribution: \"\",\n      shareableLinkUrl: \"\",\n      notifications: [],\n      gapAnalysis: [],\n      costsLoading: false,\n      protected_area_intersections: [],\n      visibleLayers: [],\n    };\n  }\n\n  componentDidMount() {\n    //get the query parameters\n    var searchParams = new URLSearchParams(window.location.search);\n    //if this is a shareable link, then dont show the login form\n    if (searchParams.has(\"project\"))\n      this.setState({ loggedIn: true, shareableLink: true });\n    //parse the application level variables from the Marxan Registry\n    this.getGlobalVariables().then(() => {\n      //automatically login if this is a shareable link\n      if (searchParams.has(\"project\")) this.openShareableLink(searchParams);\n      //select a server if it is passed\n      if (searchParams.has(\"server\"))\n        this._selectServer(searchParams.get(\"server\"));\n    });\n    //instantiate the classybrew to get the color ramps for the renderers\n    this.setState({ brew: new classyBrew() });\n  }\n\n  //gets various global variables from the marxan registry\n  getGlobalVariables() {\n    return new Promise((resolve, reject) => {\n      fetch(CONSTANTS.MARXAN_REGISTRY).then((response) => {\n        response.json().then((registryData) => {\n          this.setState({ registry: registryData });\n          mapboxgl.accessToken = registryData.MBAT_PUBLIC; //this is my public access token\n          //initialise the basemaps\n          this.setState({ basemaps: registryData.MAPBOX_BASEMAPS });\n          //get all the information for the marxan servers by polling them\n          this.initialiseServers(registryData.MARXAN_SERVERS).then(\n            (response) => {\n              resolve(response);\n            }\n          );\n        });\n      });\n    });\n  }\n\n  //automatically logs in and loads a project as a guest user\n  openShareableLink(searchParams) {\n    try {\n      if (\n        searchParams.has(\"server\") &&\n        searchParams.has(\"user\") &&\n        searchParams.has(\"project\")\n      ) {\n        //get the server data from the servers object\n        let serverData = this.state.marxanServers.find(\n          (server) => server.name === searchParams.get(\"server\")\n        );\n        if (serverData === undefined)\n          throw new Error(\"Invalid server parameter on shareable link\");\n        if (serverData && serverData.offline)\n          throw new Error(\"Server is offline\");\n        if (serverData && !serverData.guestUserEnabled)\n          throw new Error(\"Guest user is not enabled on the server\");\n        //set the server\n        this.selectServer(serverData);\n        //switch to the guest user\n        this.switchToGuestUser().then(() => {\n          //login\n          this.validateUser().then((response) => {\n            this.loadProject(\n              searchParams.get(\"project\"),\n              searchParams.get(\"user\")\n            ).then(() => {\n              //hide the loading dialog\n              this.setState({ shareableLink: false });\n            });\n          });\n        });\n      } else {\n        throw new Error(\"Invalid query parameters on shareable link\");\n      }\n    } catch (err) {\n      alert(err);\n    }\n  }\n\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// REQUEST HELPERS\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //makes a GET request and returns a promise which will either be resolved (passing the response) or rejected (passing the error)\n  _get(params, timeout = CONSTANTS.TIMEOUT) {\n    return new Promise((resolve, reject) => {\n      //set the global loading flag\n      this.setState({ loading: true });\n      jsonp(this.state.marxanServer.endpoint + params, {\n        timeout: timeout,\n      }).promise.then(\n        (response) => {\n          this.setState({ loading: false });\n          if (!this.checkForErrors(response)) {\n            resolve(response);\n          } else {\n            reject(response.error);\n          }\n        },\n        (err) => {\n          this.setState({ loading: false });\n          this.setSnackBar(\n            \"Request timeout - See <a href='\" +\n              CONSTANTS.ERRORS_PAGE +\n              \"#request-timeout' target='blank'>here</a>\"\n          );\n          reject(err);\n        }\n      );\n    });\n  }\n\n  //makes a POST request and returns a promise which will either be resolved (passing the response) or rejected (passing the error)\n  _post(\n    method,\n    formData,\n    timeout = CONSTANTS.TIMEOUT,\n    withCredentials = CONSTANTS.SEND_CREDENTIALS\n  ) {\n    return new Promise((resolve, reject) => {\n      //set the global loading flag\n      this.setState({ loading: true });\n      post(this.state.marxanServer.endpoint + method, formData, {\n        withCredentials: withCredentials,\n      }).then(\n        (response) => {\n          if (!this.checkForErrors(response.data)) {\n            this.setState({ loading: false });\n            resolve(response.data);\n          } else {\n            this.setState({ loading: false });\n            reject(response.data.error);\n          }\n        },\n        (err) => {\n          //TODO - If the request is unauthorised it returns the Status Code of 200 with the error: \"HTTP 403: Forbidden (The 'ReadOnly' role does not have permission to access the 'updateSpecFile' service)\" - but for some reason this error handling is used\n          this.setState({ loading: false });\n          if (err.message !== \"Network Error\") this.setSnackBar(err.message);\n          reject(err);\n        }\n      );\n    });\n  }\n\n  //web socket requests\n  _ws(params, msgCallback) {\n    return new Promise((resolve, reject) => {\n      let ws = new WebSocket(\n        this.state.marxanServer.websocketEndpoint + params\n      );\n      //get the message and pass it to the msgCallback function\n      ws.onmessage = (evt) => {\n        let message = JSON.parse(evt.data);\n        //check for errors\n        if (!this.checkForErrors(message)) {\n          if (message.status === \"Finished\") {\n            //pass the message back to the callback\n            msgCallback(message);\n            //reset state\n            this.setState({ preprocessing: false });\n            //if the web socket has finished then resolve the promise\n            resolve(message);\n          } else {\n            msgCallback(message);\n          }\n        } else {\n          //pass the message back to the callback\n          msgCallback(message);\n          //reset state\n          this.setState({ preprocessing: false });\n          reject(message.error);\n        }\n      };\n      ws.onopen = (evt) => {\n        //do something if necessary\n      };\n      ws.onerror = (evt) => {\n        //reset state\n        this.setState({ preprocessing: false });\n        reject(evt);\n      };\n      ws.onclose = (evt) => {\n        //reset state\n        this.setState({ preprocessing: false });\n        if (!evt.wasClean) {\n          msgCallback({ status: \"SocketClosedUnexpectedly\" });\n        } else {\n          reject(evt);\n        }\n      };\n    });\n  }\n\n  //checks the reponse for errors\n  checkForErrors(response, showSnackbar = true) {\n    let networkError = this.responseIsTimeoutOrEmpty(response, showSnackbar);\n    //check the response from the server for an error property - if it has one then show it in the snackbar\n    let serverError = this.isServerError(response, showSnackbar);\n    let isError = networkError || serverError;\n    if (isError) {\n      //write the full trace to the console if available\n      let error = response.hasOwnProperty(\"trace\")\n        ? response.trace\n        : response.hasOwnProperty(\"error\")\n        ? response.error\n        : \"No error message returned\";\n      console.error(\"Error message from server: \" + error);\n    }\n    return isError;\n  }\n\n  //checks the response from a REST call for timeout errors or empty responses\n  responseIsTimeoutOrEmpty(response, showSnackbar = true) {\n    if (!response) {\n      let msg = \"No response received from server\";\n      if (showSnackbar) this.setSnackBar(msg);\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  //checks to see if the rest server raised an error and if it did then show in the snackbar\n  isServerError(response, showSnackbar) {\n    //errors may come from the marxan server or from the rest server which have slightly different json responses\n    if (\n      (response && response.error) ||\n      (response &&\n        response.hasOwnProperty(\"metadata\") &&\n        response.metadata.hasOwnProperty(\"error\") &&\n        response.metadata.error != null)\n    ) {\n      var err = response.error ? response.error : response.metadata.error;\n      if (showSnackbar) this.setSnackBar(err);\n      return true;\n    } else {\n      //some server responses are warnings and will not stop the function from running as normal\n      if (response.warning) {\n        if (showSnackbar) this.setSnackBar(response.warning);\n      }\n      return false;\n    }\n  }\n\n  //called when any websocket message is received - this logic removes duplicate messages\n  wsMessageCallback(message) {\n    //dont log any clumping projects\n    if (message.user === \"_clumping\") return;\n    //log the message\n    this.logMessage(message);\n    switch (message.status) {\n      case \"Started\": //from the open method of all MarxanWebSocketHandler subclasses\n        //set the processing state when the websocket starts\n        this.setState({ preprocessing: true });\n        break;\n      case \"pid\": //from marxan runs and preprocessing - the pid is an identifer and the pid, e.g. m1234 is a marxan run process with a pid of 1234\n        this.setState({ pid: message.pid });\n        break;\n      case \"FeatureCreated\":\n        //remove all preprocessing messages\n        this.removeMessageFromLog(\"Preprocessing\");\n        this.newFeatureCreated(message.id);\n        break;\n      case \"Finished\": //from the close method of all MarxanWebSocketHandler subclasses\n        //reset the pid\n        this.resetPID();\n        //remove all preprocessing messages\n        this.removeMessageFromLog(\"Preprocessing\");\n        break;\n      default:\n        break;\n    }\n  }\n\n  //resets the pid value\n  resetPID() {\n    this.setState({ pid: 0 });\n  }\n  //logs the message if necessary - this removes duplicates\n  logMessage(message) {\n    //log the message from the websocket\n    if (message.status === \"SocketClosedUnexpectedly\") {\n      //server closed WebSocket unexpectedly - uncaught server error, server crash or WebSocket timeout)\n      this.log({\n        method: message.method,\n        status: \"Finished\",\n        error: \"The WebSocket connection closed unexpectedly\",\n      });\n      //remove the Preprocessing messages which show the processing spinner\n      this.removeMessageFromLog(\"Preprocessing\");\n      //reset the PID\n      this.resetPID();\n    } else {\n      //see if the message has a pid and if it does then see if the status has changed since the last message - if it has then log the message - this does not apply to RunningMarxan messages as all of these need to be logged\n      if (message.hasOwnProperty(\"pid\") && message.status !== \"RunningMarxan\") {\n        //get the existing status\n        let _messages = this.state.logMessages.filter((_message) => {\n          if (_message.hasOwnProperty(\"pid\")) {\n            return _message.pid === message.pid;\n          } else {\n            return false;\n          }\n        });\n        //if there is already a message for that pid\n        if (_messages.length > 0) {\n          //compare with the latest status\n          if (message.status !== _messages[_messages.length - 1].status) {\n            //if the new status is different and the message status is finished, then remove the processing message\n            if (message.status === \"Finished\")\n              this.removeMessageFromLog(\"RunningQuery\", message.pid);\n            this.log(message);\n          }\n        } else {\n          //log the first message for that pid\n          this.log(message);\n        }\n      } else {\n        //remove duplicate messages from the log (unless they are from the marxan run or have a status of started or finished)\n        if (\n          !(\n            message.status === \"RunningMarxan\" ||\n            message.status === \"Started\" ||\n            message.status === \"Finished\"\n          )\n        )\n          this.removeMessageFromLog(message.status);\n        //log the message\n        this.log(message);\n      }\n    }\n  }\n\n  //removes a message from the log by matching on the status and if it is passed, the pid\n  removeMessageFromLog(status, pid) {\n    let _messages = this.state.logMessages;\n    //filter the messages to remove those that match on status (and pid)\n    _messages = _messages.filter((_message) => {\n      if (pid !== undefined) {\n        if (_message.hasOwnProperty(\"pid\")) {\n          return !(_message.pid === pid && _message.status === status);\n        } else {\n          return true;\n        }\n      } else {\n        //match just on the status\n        return !(_message.status === status);\n      }\n    });\n    this.setState({ logMessages: _messages });\n  }\n\n  //can be called from other components\n  setSnackBar(message, silent = false) {\n    if (!silent)\n      this.setState({ snackbarOpen: true, snackbarMessage: message });\n  }\n\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// MANAGING MARXAN SERVERS\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //initialises the servers by requesting their capabilities and then filtering the list of available servers\n  initialiseServers(marxanServers) {\n    return new Promise((resolve, reject) => {\n      //get a list of server hosts from the marxan.json registry\n      let hosts = marxanServers.map((server) => {\n        return server.host;\n      });\n      //add the current domain - this may be a local/local network install\n      let name =\n        window.location.hostname === \"localhost\"\n          ? \"localhost\"\n          : window.location.hostname;\n      marxanServers.push({\n        name: name,\n        protocol: window.location.protocol,\n        host: window.location.hostname,\n        port: 80,\n        description: \"Local machine\",\n        type: \"local\",\n      });\n      //get all the server capabilities - when all the servers have responded, finalise the marxanServer array\n      this.getAllServerCapabilities(marxanServers).then((server) => {\n        //remove the current domain if either the marxan server is not installed, or it is already in the list of servers from the marxan registry\n        marxanServers = marxanServers.filter((item) => {\n          return (\n            item.type === \"remote\" ||\n            (item.type === \"local\" &&\n              !item.offline &&\n              hosts.indexOf(item.host) === -1) ||\n            item.host === \"localhost\"\n          );\n        });\n        //sort the servers by the name\n        marxanServers.sort((a, b) => {\n          if (a.name.toLowerCase() < b.name.toLowerCase() || a.type === \"local\")\n            return -1;\n          if (a.name.toLowerCase() > b.name.toLowerCase()) return 1;\n          return 0;\n        });\n        this.setState({ marxanServers: marxanServers }, () => {\n          resolve(\"ServerData retrieved\");\n        });\n      });\n    });\n  }\n\n  //gets the capabilities of all servers\n  async getAllServerCapabilities(marxanServers) {\n    let promises = await marxanServers.map(async (server) => {\n      await this.getServerCapabilities(server);\n    });\n    await Promise.all(promises);\n  }\n\n  //gets the capabilities of the server by making a request to the getServerData method\n  async getServerCapabilities(server) {\n    //get the endpoint for all http/https requests\n    let endpoint =\n      server.protocol +\n      \"//\" +\n      server.host +\n      \":\" +\n      server.port +\n      CONSTANTS.TORNADO_PATH;\n    //get the WebService endpoint\n    let websocketEndpoint =\n      server.protocol === \"http:\"\n        ? \"ws://\" + server.host + \":\" + server.port + CONSTANTS.TORNADO_PATH\n        : \"wss://\" + server.host + \":\" + server.port + CONSTANTS.TORNADO_PATH;\n    //set the default properties for the server - by default the server is offline, has no guest access and CORS is not enabled\n    server = Object.assign(server, {\n      endpoint: endpoint,\n      websocketEndpoint: websocketEndpoint,\n      offline: true,\n      guestUserEnabled: false,\n      corsEnabled: false,\n    });\n    //poll the server to make sure tornado is running\n    try {\n      const controller = new AbortController();\n      const signal = controller.signal;\n      const timeoutId = setTimeout(() => controller.abort(), 2000);\n      const response = await fetch(endpoint + \"getServerData\", {\n        credentials: \"include\",\n        signal: signal,\n      });\n      clearTimeout(timeoutId);\n      if (!response.ok) {\n        throw Error(\n          \"fetch returned a 404 or 500 error: \" + response.statusText\n        );\n      }\n      const json = await response.json();\n      if (json.hasOwnProperty(\"info\")) {\n        //see if CORS is enabled from this domain - either the domain has been added as an allowable domain on the server, or the client and server are on the same machine\n        let corsEnabled =\n          json.serverData.PERMITTED_DOMAINS.indexOf(window.location.hostname) >\n            -1 || server.host === window.location.hostname\n            ? true\n            : false;\n        //set the flags for the server capabilities\n        server = Object.assign(server, {\n          guestUserEnabled: json.serverData.ENABLE_GUEST_USER,\n          corsEnabled: corsEnabled,\n          offline: false,\n          machine: json.serverData.MACHINE,\n          client_version: json.serverData.MARXAN_CLIENT_VERSION,\n          server_version: json.serverData.MARXAN_SERVER_VERSION,\n          node: json.serverData.NODE,\n          processor: json.serverData.PROCESSOR,\n          processor_count: json.serverData.PROCESSOR_COUNT,\n          ram: json.serverData.RAM,\n          release: json.serverData.RELEASE,\n          system: json.serverData.SYSTEM,\n          version: json.serverData.VERSION,\n          wdpa_version: json.serverData.WDPA_VERSION,\n          planning_grid_units_limit: Number(\n            json.serverData.PLANNING_GRID_UNITS_LIMIT\n          ),\n          disk_space: json.serverData.DISK_FREE_SPACE,\n          shutdowntime: json.serverData.SHUTDOWNTIME,\n          enable_reset: json.serverData.ENABLE_RESET,\n        });\n        //if the server defines its own name then set it\n        if (json.serverData.SERVER_NAME !== \"\") {\n          server = Object.assign(server, { name: json.serverData.SERVER_NAME });\n        }\n        //if the server defines its own description then set it\n        if (json.serverData.SERVER_DESCRIPTION !== \"\") {\n          server = Object.assign(server, {\n            description: json.serverData.SERVER_DESCRIPTION,\n          });\n        }\n      }\n    } catch (error) {\n      console.log(\"fetch failed with: \" + error);\n    }\n  }\n  //programatically selects a server\n  _selectServer(servername) {\n    //remove the search part of the url\n    window.history.replaceState({}, document.title, \"/\");\n    //get the server object from the name\n    let server = this.state.marxanServers.filter(\n      (item) => item.name === servername\n    );\n    if (server.length) this.selectServer(server[0]);\n  }\n\n  //sets the layer name for the WDPA vector tiles based on the WDPA version\n  setWDPAVectorTilesLayerName(wdpa_version) {\n    //get the short version of the wdpa_version, e.g. August 2019 to aug_2019\n    let version =\n      wdpa_version.toLowerCase().substr(0, 3) + \"_\" + wdpa_version.substr(-4);\n    //set the value of the vector_tile_layer based on which version of the wdpa the server has in the PostGIS database\n    this.wdpa_vector_tile_layer = \"wdpa_\" + version + \"_polygons\";\n  }\n  //called when the user selects a server\n  selectServer(value) {\n    this.setState({ marxanServer: value });\n    //see if there is a new version of the wdpa\n    value.wdpa_version !== this.state.registry.WDPA.latest_version\n      ? this.setState({ newWDPAVersion: true })\n      : this.setState({ newWDPAVersion: false });\n    //set the link to the WDPA vector tiles based on the version that is included in the server in the PostGIS database\n    this.setWDPAVectorTilesLayerName(value.wdpa_version);\n    //if the server is ready only then change the user/password to the guest user\n    if (!value.offline && !value.corsEnabled && value.guestUserEnabled) {\n      this.switchToGuestUser();\n    }\n  }\n\n  closeSnackbar() {\n    this.setState({ snackbarOpen: false });\n  }\n\n  startLogging(clearLog = false) {\n    //switches the results pane to the log tab\n    this.setActiveTab(\"log\");\n    //clear the log if needs be\n    if (clearLog) this.clearLog();\n  }\n\n  //clears the log\n  clearLog() {\n    this.setState({ logMessages: [] });\n  }\n\n  //centralised logging method - all log messages are routed through this method (can be called from components to update the log)\n  log(message) {\n    //add a timestamp to the message\n    Object.assign(message, { timestamp: new Date() });\n    let _messages = this.state.logMessages;\n    //add the message to the existing log\n    _messages.push(message);\n    //set the state\n    this.setState({ logMessages: _messages });\n  }\n\n  //utiliy method for getting all puids from normalised data, e.g. from [[\"VI\", [7, 8, 9]], [\"IV\", [0, 1, 2, 3, 4]], [\"V\", [5, 6]]]\n  getPuidsFromNormalisedData(normalisedData) {\n    let puids = [];\n    normalisedData.forEach((item) => {\n      puids = puids.concat(item[1]);\n    });\n    return puids;\n  }\n\n  changeUserName(user) {\n    this.setState({ user: user });\n  }\n\n  changePassword(password) {\n    this.setState({ password: password });\n  }\n\n  //checks the users credentials\n  checkPassword(user, password) {\n    return new Promise((resolve, reject) => {\n      this._get(\"validateUser?user=\" + user + \"&password=\" + password, 10000)\n        .then((response) => {\n          resolve();\n        })\n        .catch((error) => {\n          reject(error);\n        });\n    });\n  }\n  //validates the user and then logs in if successful\n  validateUser() {\n    return new Promise((resolve, reject) => {\n      this.checkPassword(this.state.user, this.state.password)\n        .then(() => {\n          //user validated - log them in\n          this.login().then((response) => {\n            resolve(\"User validated\");\n          });\n        })\n        .catch((error) => {\n          //\n        });\n    });\n  }\n\n  //the user is validated so login\n  login() {\n    return new Promise((resolve, reject) => {\n      this._get(\"getUser?user=\" + this.state.user)\n        .then((response) => {\n          this.setState(\n            {\n              userData: response.userData,\n              unauthorisedMethods: response.unauthorisedMethods,\n              project: response.userData.LASTPROJECT,\n              dismissedNotifications: response.dismissedNotifications\n                ? response.dismissedNotifications\n                : [],\n            },\n            () => {\n              //show the welcome dialog\n              //   this.openWelcomeDialog();\n            }\n          );\n          //set the basemap\n          var basemap = this.state.basemaps.filter((item) => {\n            return item.name === response.userData.BASEMAP;\n          })[0];\n          this.setBasemap(basemap).then(() => {\n            //get all features\n            this.getAllFeatures().then(() => {\n              //get the users last project and load it\n              this.loadProject(\n                response.userData.LASTPROJECT,\n                this.state.user\n              ).then((response) => {\n                resolve(\"Logged in\");\n              });\n            });\n            //get all planning grids\n            this.getPlanningUnitGrids();\n          });\n        })\n        .catch((error) => {\n          //do something\n        });\n    });\n  }\n\n  //log out and reset some state\n  logout() {\n    this.hideUserMenu();\n    this.setState({\n      loggedIn: false,\n      user: \"\",\n      password: \"\",\n      project: \"\",\n      owner: \"\",\n      runParams: [],\n      files: {},\n      metadata: {},\n      renderer: {},\n      planning_units: [],\n      projectFeatures: [],\n      infoPanelOpen: false,\n      resultsPanelOpen: false,\n      brew: new classyBrew(),\n      notifications: [],\n    });\n    this.resetResults();\n    //clear the currently set cookies\n    this._get(\"logout\").then((response) => {\n      //do something\n    });\n  }\n\n  switchToGuestUser() {\n    return new Promise((resolve, reject) => {\n      this.setState({ user: \"guest\", password: \"password\" }, () => {\n        resolve(\"Switched to guest user\");\n      });\n    });\n  }\n\n  changeEmail(value) {\n    this.setState({ resendEmail: value });\n  }\n\n  resendPassword() {\n    this._get(\"resendPassword?user=\" + this.state.user)\n      .then((response) => {\n        //ui feedback\n        this.setSnackBar(response.info);\n        //close the resend password dialog\n        this.closeResendPasswordDialog();\n      })\n      .catch((error) => {\n        //do something\n      });\n  }\n\n  //gets data for all users\n  getUsers() {\n    this._get(\"getUsers\")\n      .then((response) => {\n        this.setState({ users: response.users });\n      })\n      .catch((error) => {\n        this.setState({ users: [] });\n      });\n  }\n\n  //deletes a user\n  deleteUser(user) {\n    this._get(\"deleteUser?user=\" + user).then((response) => {\n      this.setSnackBar(\"User deleted\");\n      //remove it from the users array\n      let usersCopy = this.state.users;\n      //remove the user\n      usersCopy = usersCopy.filter((item) => {\n        return item.user !== user;\n      });\n      //update the users state\n      this.setState({ users: usersCopy });\n      //see if the current project belongs to the deleted user\n      if (this.state.owner === user) {\n        this.setSnackBar(\n          \"Current project no longer exists. Loading next available.\"\n        );\n        //load the next available project\n        this.state.projects.some((project) => {\n          if (project.user !== user)\n            this.loadProject(project.name, project.user);\n          return project.name !== this.state.project;\n        });\n        //delete all the projects belonging to that user\n        this.deleteProjectsForUser(user);\n      }\n    });\n  }\n\n  //deletes all of the projects belonging to the passed user from the state\n  deleteProjectsForUser(user) {\n    let projects = this.state.projects.map((project) => {\n      return project.user !== user;\n    });\n    this.setState({ projects: projects });\n  }\n\n  //changes a users role\n  changeRole(user, role) {\n    this.updateUser({ ROLE: role }, user);\n    //copy the users state\n    let usersCopy = this.state.users;\n    //change the users role\n    usersCopy = usersCopy.map((item) => {\n      if (item.user === user) {\n        return Object.assign(item, { ROLE: role });\n      } else {\n        return item;\n      }\n    });\n    //update the users state\n    this.setState({ users: usersCopy });\n  }\n\n  //toggles if the guest user is enabled on the server or not\n  toggleEnableGuestUser() {\n    this._get(\"toggleEnableGuestUser\").then((response) => {\n      //if succesfull set the state\n      let _marxanServer = this.state.marxanServer;\n      _marxanServer = Object.assign(_marxanServer, {\n        guestUserEnabled: response.enabled,\n      });\n      this.setState({ marxanServer: _marxanServer });\n    });\n  }\n\n  //toggles the projects privacy\n  toggleProjectPrivacy(newValue) {\n    this.updateProjectParameter(\"PRIVATE\", newValue).then((response) => {\n      this.setState({\n        metadata: Object.assign(this.state.metadata, {\n          PRIVATE: newValue === \"True\",\n        }),\n      });\n    });\n  }\n\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// NOTIFICATIONS\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //parse the notifications\n  parseNotifications() {\n    //see if there are any new notifications from the marxan-registry\n    if (this.state.registry.NOTIFICATIONS.length > 0) {\n      this.addNotifications(this.state.registry.NOTIFICATIONS);\n    }\n    //see if there is a new version of the wdpa data - this comes from the Marxan Registry WDPA object - if there is then show a notification to admin users\n    if (this.state.newWDPAVersion)\n      this.addNotifications([\n        {\n          id: \"wdpa_update_\" + this.state.registry.WDPA.latest_version,\n          html:\n            \"A new version of the WDPA is available. Go to Help | Server Details for more information.\",\n          type: \"Data Update\",\n          showForRoles: [\"Admin\"],\n        },\n      ]);\n    //see if there is a new version of the marxan-client software\n    if (MARXAN_CLIENT_VERSION !== this.state.registry.CLIENT_VERSION)\n      this.addNotifications([\n        {\n          id: \"marxan_client_update_\" + this.state.registry.CLIENT_VERSION,\n          html:\n            \"A new version of marxan-client is available (\" +\n            this.state.registry.CLIENT_VERSION +\n            \"). Go to Help | About for more information.\",\n          type: \"Software Update\",\n          showForRoles: [\"Admin\"],\n        },\n      ]);\n    //see if there is a new version of the marxan-server software\n    if (\n      this.state.marxanServer.server_version !==\n      this.state.registry.SERVER_VERSION\n    )\n      this.addNotifications([\n        {\n          id: \"marxan_server_update_\" + this.state.registry.SERVER_VERSION,\n          html:\n            \"A new version of marxan-server is available (\" +\n            this.state.registry.SERVER_VERSION +\n            \"). Go to Help | Server Details for more information.\",\n          type: \"Software Update\",\n          showForRoles: [\"Admin\"],\n        },\n      ]);\n    //check that there is enough disk space\n    if (this.state.marxanServer.disk_space < 1000) {\n      this.addNotifications([\n        {\n          id: \"hardware_1000\",\n          html: \"Disk space < 1Gb\",\n          type: \"Hardware Issue\",\n          showForRoles: [\"Admin\"],\n        },\n      ]);\n    } else {\n      if (this.state.marxanServer.disk_space < 2000) {\n        this.addNotifications([\n          {\n            id: \"hardware_2000\",\n            html: \"Disk space < 2Gb\",\n            type: \"Hardware Issue\",\n            showForRoles: [\"Admin\"],\n          },\n        ]);\n      } else {\n        if (this.state.marxanServer.disk_space < 3000)\n          this.addNotifications([\n            {\n              id: \"hardware_3000\",\n              html: \"Disk space < 3Gb\",\n              type: \"Hardware Issue\",\n              showForRoles: [\"Admin\"],\n            },\n          ]);\n      }\n    }\n  }\n\n  //hides the notifications from the UI\n  hideNotifications() {\n    this.setState({ notificationsOpen: false });\n  }\n\n  //add the passed notifications to the notifications state\n  addNotifications(notifications) {\n    let _notifications = this.state.notifications;\n    //set the visibility of the notifications based on the users role, whether they have already been dismissed or if it has expired\n    notifications = notifications.map((item) => {\n      let allowedForRole =\n        item.showForRoles.indexOf(this.state.userData.ROLE) > -1;\n      let notDismissed =\n        this.state.dismissedNotifications.indexOf(String(item.id)) === -1;\n      let notExpired = true;\n      //if an expiry date is set, then get this as a Date\n      if (\n        item.hasOwnProperty(\"expires\") &&\n        item.hasOwnProperty(\"expires\") &&\n        item.expires !== \"\"\n      ) {\n        try {\n          var d = Date.parse(item.expires);\n          if (new Date() > d) notExpired = false;\n        } catch (err) {\n          //invalid date so not expiry date\n        }\n      }\n      let visible = allowedForRole && notDismissed && notExpired;\n      return Object.assign(item, { visible: visible });\n    });\n    _notifications.push.apply(_notifications, notifications);\n    this.setState({ notifications: _notifications });\n  }\n\n  //removes a notification\n  removeNotification(notification) {\n    //remove the notification from the state\n    let _notifications = this.state.notifications.filter(\n      (_notification) => _notification.id !== notification.id\n    );\n    //remove it in the users notifications.dat file\n    this.dismissNotification(notification);\n    //set the state\n    this.setState({ notifications: _notifications });\n  }\n\n  //dismisses a notification on the server\n  dismissNotification(notification) {\n    this._get(\n      \"dismissNotification?user=\" +\n        this.state.user +\n        \"&notificationid=\" +\n        notification.id\n    );\n  }\n\n  //clears all of the dismissed notifications on the server\n  resetNotifications() {\n    this._get(\"resetNotifications?user=\" + this.state.user).then(() => {\n      this.setState({ notifications: [], dismissedNotifications: [] });\n      this.parseNotifications();\n    });\n  }\n\n  appendToFormData(formData, obj) {\n    //iterate through the object and add each key/value pair to the formData to post to the server\n    for (var key in obj) {\n      //only add non-prototype objects\n      if (obj.hasOwnProperty(key)) {\n        formData.append(key, obj[key]);\n      }\n    }\n    return formData;\n  }\n\n  //removes the keys from the object\n  removeKeys(obj, keys) {\n    keys.map((key) => {\n      delete obj[key];\n      return null;\n    });\n    return obj;\n  }\n\n  //updates all parameter in the user.dat file then updates the state (in userData)\n  updateUser(parameters, user = this.state.user) {\n    return new Promise((resolve, reject) => {\n      //remove the keys that are not part of the users information\n      parameters = this.removeKeys(parameters, [\"updated\", \"validEmail\"]);\n      //initialise the form data\n      let formData = new FormData();\n      //add the current user\n      formData.append(\"user\", user);\n      //append all the key/value pairs\n      this.appendToFormData(formData, parameters);\n      //post to the server\n      this._post(\"updateUserParameters\", formData)\n        .then((response) => {\n          // if succesfull write the state back to the userData key\n          if (this.state.user === user)\n            this.setState({ userData: this.newUserData });\n          resolve();\n        })\n        .catch((error) => {\n          reject(error);\n        });\n      //if we have updated the current user then save a local property so that if the changes are saved to the server then we can update the local state\n      if (this.state.user === user)\n        this.newUserData = Object.assign(this.state.userData, parameters);\n    });\n  }\n\n  //saveOptions - the options are in the users data so we use the updateUser REST call to update them\n  saveOptions(options) {\n    this.updateUser(options);\n  }\n  //updates the project from the old version to the new version\n  upgradeProject(project) {\n    return this._get(\n      \"upgradeProject?user=\" + this.state.user + \"&project=\" + project\n    );\n  }\n\n  //updates the project parameters back to the server (i.e. the input.dat file)\n  updateProjectParams(project, parameters) {\n    //initialise the form data\n    let formData = new FormData();\n    //add the current user\n    formData.append(\"user\", this.state.owner);\n    //add the current project\n    formData.append(\"project\", project);\n    //append all the key/value pairs\n    this.appendToFormData(formData, parameters);\n    //post to the server and return a promise\n    return this._post(\"updateProjectParameters\", formData);\n  }\n\n  //updates a single parameter in the input.dat file directly\n  updateProjectParameter(parameter, value) {\n    let obj = {};\n    obj[parameter] = value;\n    //update the parameter and return a promise\n    return this.updateProjectParams(this.state.project, obj);\n  }\n\n  //updates the run parameters for the current project\n  updateRunParams(array) {\n    //convert the run parameters array into an object\n    let parameters = {};\n    array.map((obj) => {\n      parameters[obj.key] = obj.value;\n      return null;\n    });\n    //update the project parameters\n    this.updateProjectParams(this.state.project, parameters).then(\n      (response) => {\n        //if succesfull write the state back\n        this.setState({ runParams: this.runParams });\n      }\n    );\n    //save the local state to be able to update the state on callback\n    this.runParams = array;\n  }\n\n  //gets the planning unit grids\n  getPlanningUnitGrids() {\n    this._get(\"getPlanningUnitGrids\").then((response) => {\n      this.setState({ planning_unit_grids: response.planning_unit_grids });\n    });\n  }\n\n  //loads a project\n  loadProject(project, user) {\n    return new Promise((resolve, reject) => {\n      //reset the results from any previous projects\n      this.resetResults();\n      this._get(\"getProject?user=\" + user + \"&project=\" + project)\n        .then((response) => {\n          //set the state for the app based on the data that is returned from the server\n          this.setState({\n            loggedIn: true,\n            project: response.project,\n            owner: user,\n            runParams: response.runParameters,\n            files: Object.assign(response.files),\n            metadata: response.metadata,\n            renderer: response.renderer,\n            planning_units: response.planning_units,\n            costnames: response.costnames,\n            infoPanelOpen: true,\n            resultsPanelOpen: true,\n          });\n          //if there is a PLANNING_UNIT_NAME passed then change to this planning grid and load the results if there are any available\n          if (response.metadata.PLANNING_UNIT_NAME) {\n            this.changePlanningGrid(\n              CONSTANTS.MAPBOX_USER + \".\" + response.metadata.PLANNING_UNIT_NAME\n            ).then(() => {\n              //poll the server to see if results are available for this project - if there are these will be loaded\n              this.getResults(user, response.project).then((response) => {\n                resolve(\"Project loaded\");\n              });\n            });\n          }\n          //set a local variable for the feature preprocessing - this is because we dont need to track state with these variables as they are not bound to anything\n          this.feature_preprocessing = response.feature_preprocessing;\n          //set a local variable for the protected area intersections - this is because we dont need to track state with these variables as they are not bound to anything\n          this.setState({\n            protected_area_intersections: response.protected_area_intersections,\n          });\n          //set a local variable for the selected iucn category\n          this.previousIucnCategory = response.metadata.IUCN_CATEGORY;\n          //initialise all the interest features with the interest features for this project\n          this.initialiseInterestFeatures(\n            response.metadata.OLDVERSION,\n            response.features\n          );\n          //preload the costs data instead of loading it when the user clicks on the Planning Units tab\n          this.getPlanningUnitsCostData();\n          //activate the project tab\n          this.project_tab_active();\n        })\n        .catch((error) => {\n          if (error.indexOf(\"Logged on as read-only guest user\") > -1) {\n            this.setState({ loggedIn: true });\n            resolve(\"No project loaded - logged on as read-only guest user'\");\n          }\n          if (error.indexOf(\"does not exist\") > -1) {\n            //probably the last loaded project has been deleted - send some feedback and load another project\n            this.setSnackBar(\"Loading first available project\");\n            //passing an empty project to loadProject will load the first project\n            this.loadProject(\"\", this.state.user);\n          }\n        });\n    });\n  }\n\n  //matches and returns an item in an object array with the passed id - this assumes the first item in the object is the id identifier\n  getArrayItem(arr, id) {\n    let tmpArr = arr.filter((item) => {\n      return item[0] === id;\n    });\n    let returnValue = tmpArr.length > 0 ? tmpArr[0] : undefined;\n    return returnValue;\n  }\n\n  //initialises the interest features based on the currently loading project\n  initialiseInterestFeatures(oldVersion, projectFeatures) {\n    //if the project is from an old version of marxan then the interest features can only come from the list of features in the current project\n    let features = oldVersion\n      ? JSON.parse(JSON.stringify(projectFeatures))\n      : this.state.allFeatures; //make a copy of the projectFeatures\n    //get a list of the ids for the features that are in this project\n    var ids = projectFeatures.map((item) => {\n      return item.id;\n    });\n    //iterate through features to add the required attributes to be used in the app and to populate them based on the current project features\n    var outFeatures = features.map((item) => {\n      //see if the feature is in the current project\n      var projectFeature =\n        ids.indexOf(item.id) > -1\n          ? projectFeatures[ids.indexOf(item.id)]\n          : null;\n      //get the preprocessing for that feature from the feature_preprocessing.dat file\n      let preprocessing = this.getArrayItem(\n        this.feature_preprocessing,\n        item.id\n      );\n      //add the required attributes to the features - these will be populated in the function calls preprocessFeature (pu_area, pu_count) and pollResults (protected_area, target_area)\n      this.addFeatureAttributes(item, oldVersion);\n      //if the interest feature is in the current project then populate the data from that feature\n      if (projectFeature) {\n        item[\"selected\"] = true;\n        item[\"preprocessed\"] = preprocessing ? true : false;\n        item[\"pu_area\"] = preprocessing ? preprocessing[1] : -1;\n        item[\"pu_count\"] = preprocessing ? preprocessing[2] : -1;\n        item[\"spf\"] = projectFeature[\"spf\"];\n        item[\"target_value\"] = projectFeature[\"target_value\"];\n        item[\"occurs_in_planning_grid\"] = item[\"pu_count\"] > 0;\n      }\n      return item;\n    });\n    //get the selected feature ids\n    this.getSelectedFeatureIds();\n    //set the state\n    this.setState({\n      allFeatures: outFeatures,\n      projectFeatures: outFeatures.filter((item) => {\n        return item.selected;\n      }),\n    });\n  }\n\n  //adds the required attributes for the features to work in the marxan web app - these are the default values\n  addFeatureAttributes(item, oldVersion) {\n    // the -1 flag indicates that the values are unknown\n    item[\"selected\"] = false; //if the feature is currently selected (i.e. in the current project)\n    item[\"preprocessed\"] = false; //has the feature already been intersected with the planning grid to populate the puvspr.dat file\n    item[\"pu_area\"] = -1; //the area of the feature within the planning grid\n    item[\"pu_count\"] = -1; //the number of planning units that the feature intersects with\n    item[\"spf\"] = 40; //species penalty factor\n    item[\"target_value\"] = 17; //the target value for the feature to protect as a percentage\n    item[\"target_area\"] = -1; //the area of the feature that must be protected to meet the targets percentage\n    item[\"protected_area\"] = -1; //the area of the feature that is protected\n    item[\"feature_layer_loaded\"] = false; //is the features distribution currently visible on the map\n    item[\"feature_puid_layer_loaded\"] = false; //are the planning units that intersect the feature currently visible on the map\n    item[\"old_version\"] = oldVersion; //true if the current project is an project imported from marxan for DOS\n    item[\"occurs_in_planning_grid\"] = false; //does the feature occur in the planning grid\n    item[\"color\"] = window.colors[item.id % window.colors.length]; //color for the map layer and analysis outputs\n    item[\"in_filter\"] = true; //true if the feature is currently visible in the features dialog\n  }\n\n  //resets various variables and state in between users\n  resetResults() {\n    //reset the run\n    this.resetRun();\n    //reset the cost data\n    this.cost_data = undefined;\n    //reset any feature layers that are shown\n    this.hideFeatureLayer();\n  }\n  //resets state in between runs\n  resetRun() {\n    this.runMarxanResponse = {};\n    this.setState({ solutions: [] });\n  }\n  //create a new user on the server\n  createNewUser(user, password, name, email) {\n    let formData = new FormData();\n    formData.append(\"user\", user);\n    formData.append(\"password\", password);\n    formData.append(\"fullname\", name);\n    formData.append(\"email\", email);\n    this._post(\"createUser\", formData).then((response) => {\n      //ui feedback\n      this.setSnackBar(response.info);\n      //close the register dialog\n      this.closeRegisterDialog();\n      //enter the new users name in the username box and a blank password\n      this.setState({ user: user, password: \"\" });\n    });\n  }\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// PROJECTS\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //REST call to create a new project from the wizard\n  createNewProject(project) {\n    let formData = new FormData();\n    formData.append(\"user\", this.state.user);\n    formData.append(\"project\", project.name);\n    formData.append(\"description\", project.description);\n    formData.append(\"planning_grid_name\", project.planning_grid_name);\n    var interest_features = [];\n    var target_values = [];\n    var spf_values = [];\n    project.features.forEach((item) => {\n      interest_features.push(item.id);\n      target_values.push(17);\n      spf_values.push(40);\n    });\n    //prepare the data that will populate the spec.dat file\n    formData.append(\"interest_features\", interest_features.join(\",\"));\n    formData.append(\"target_values\", target_values.join(\",\"));\n    formData.append(\"spf_values\", spf_values.join(\",\"));\n    this._post(\"createProject\", formData).then((response) => {\n      this.setSnackBar(response.info);\n      this.setState({ projectsDialogOpen: false });\n      this.loadProject(response.name, response.user);\n    });\n  }\n\n  createNewNationalProject(params) {\n    return new Promise((resolve, reject) => {\n      //first create the planning grid\n      this.createNewPlanningUnitGrid(\n        params.iso3,\n        params.domain,\n        params.areakm2,\n        params.shape\n      )\n        .then((response) => {\n          console.log(response);\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n      //create the features from\n      // world ecosystems\n      // species from gbif\n      // species from the red list\n    });\n  }\n\n  //REST call to create a new import project from the wizard\n  createImportProject(project) {\n    let formData = new FormData();\n    formData.append(\"user\", this.state.user);\n    formData.append(\"project\", project);\n    return this._post(\"createImportProject\", formData);\n  }\n\n  //REST call to delete a specific project\n  deleteProject(user, project, silent = false) {\n    this._get(\"deleteProject?user=\" + user + \"&project=\" + project).then(\n      (response) => {\n        //refresh the projects list\n        this.getProjects();\n        //ui feedback\n        this.setSnackBar(response.info, silent); //we may not want to show the snackbar if we are deleting a project silently, e.g. on a rollback after an unsuccesful import\n        //see if the user deleted the current project\n        if (response.project === this.state.project) {\n          //ui feedback\n          this.setSnackBar(\"Current project deleted - loading first available\");\n          //load the next available project\n          this.state.projects.some((project) => {\n            if (project.name !== this.state.project)\n              this.loadProject(project.name, this.state.user);\n            return project.name !== this.state.project;\n          });\n        }\n      }\n    );\n  }\n\n  //exports the project on the server and returns the *.mxw file\n  exportProject(user, project) {\n    return new Promise((resolve, reject) => {\n      //switches the results pane to the log tab\n      this.setActiveTab(\"log\");\n      //call the websocket\n      this._ws(\n        \"exportProject?user=\" + user + \"&project=\" + project,\n        this.wsMessageCallback.bind(this)\n      )\n        .then((message) => {\n          //websocket has finished\n          resolve(\n            this.state.marxanServer.endpoint + \"exports/\" + message.filename\n          );\n        })\n        .catch((error) => {\n          reject(error);\n        });\n    });\n  }\n\n  cloneProject(user, project) {\n    this._get(\"cloneProject?user=\" + user + \"&project=\" + project)\n      .then((response) => {\n        //refresh the projects list\n        this.getProjects();\n        //ui feedback\n        this.setSnackBar(response.info);\n      })\n      .catch((error) => {\n        //do something\n      });\n  }\n\n  //rename a specific project on the server\n  renameProject(newName) {\n    return new Promise((resolve, reject) => {\n      if (newName !== \"\" && newName !== this.state.project) {\n        this._get(\n          \"renameProject?user=\" +\n            this.state.owner +\n            \"&project=\" +\n            this.state.project +\n            \"&newName=\" +\n            newName\n        )\n          .then((response) => {\n            this.setState({ project: newName });\n            this.setSnackBar(response.info);\n            resolve(\"Project renamed\");\n          })\n          .catch((error) => {\n            //do something\n          });\n      }\n    });\n  }\n  //rename the description for a specific project on the server\n  renameDescription(newDesc) {\n    return new Promise((resolve, reject) => {\n      this.updateProjectParameter(\"DESCRIPTION\", newDesc).then((response) => {\n        this.setState({\n          metadata: Object.assign(this.state.metadata, {\n            DESCRIPTION: newDesc,\n          }),\n        });\n        resolve(\"Description renamed\");\n      });\n    });\n  }\n\n  getProjects() {\n    this._get(\"getProjects?user=\" + this.state.user).then((response) => {\n      let projects = [];\n      //filter the projects so that private ones arent shown\n      response.projects.forEach((project) => {\n        if (\n          !(\n            project.private &&\n            project.user !== this.state.user &&\n            this.state.userData.ROLE !== \"Admin\"\n          )\n        )\n          projects.push(project);\n      });\n      this.setState({ projects: projects });\n    });\n  }\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////CODE TO PREPROCESS AND RUN MARXAN\n  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //run a marxan job on the server\n  runMarxan(e) {\n    //start the logging\n    this.startLogging();\n    //reset all of the protected and target areas for all features\n    this.resetProtectedAreas();\n    //reset the run results\n    this.resetRun();\n    //update the spec.dat file with any that have been added or removed or changed target or spf\n    this.updateSpecFile()\n      .then((value) => {\n        //when the species file has been updated, update the planning unit file\n        this.updatePuFile();\n        //when the planning unit file has been updated, update the PuVSpr file - this does all the preprocessing using websockets\n        this.updatePuvsprFile()\n          .then((value) => {\n            //start the marxan job\n            this.startMarxanJob(this.state.owner, this.state.project)\n              .then((response) => {\n                //update the run log\n                this.getRunLogs();\n                if (!this.checkForErrors(response)) {\n                  //run completed - get the results\n                  this.getResults(response.user, response.project);\n                  //switch to the features tab\n                  this.features_tab_active();\n                } else {\n                  //set state with no solutions\n                  this.runFinished([]);\n                }\n              })\n              .catch((error) => {\n                //reset the running state\n                this.marxanStopped(error);\n              }); //startMarxanJob\n          })\n          .catch((error) => {\n            //updatePuvsprFile error\n            console.error(error);\n          });\n      })\n      .catch((error) => {\n        //updateSpecFile error\n        console.error(error);\n      });\n  }\n\n  //stops a process running on the server\n  stopProcess(pid) {\n    this._get(\"stopProcess?pid=\" + pid, 10000).catch((error) => {\n      //if the pid no longer exists then the state needs to be reset anyway\n      this.getRunLogs();\n    });\n  }\n\n  //ui feedback when marxan is stopped by the user\n  marxanStopped(error) {\n    //update the run log\n    this.getRunLogs();\n  }\n\n  resetProtectedAreas() {\n    //reset all of the results for allFeatures to set their protected_area and target_area to -1\n    this.state.allFeatures.forEach((feature) => {\n      feature.protected_area = -1;\n      feature.target_area = -1;\n    });\n  }\n\n  //updates the species file with any target values that have changed\n  updateSpecFile() {\n    let formData = new FormData();\n    formData.append(\"user\", this.state.owner);\n    formData.append(\"project\", this.state.project);\n    var interest_features = [];\n    var target_values = [];\n    var spf_values = [];\n    this.state.projectFeatures.forEach((item) => {\n      interest_features.push(item.id);\n      target_values.push(item.target_value);\n      spf_values.push(item.spf);\n    });\n    //prepare the data that will populate the spec.dat file\n    formData.append(\"interest_features\", interest_features.join(\",\"));\n    formData.append(\"target_values\", target_values.join(\",\"));\n    formData.append(\"spf_values\", spf_values.join(\",\"));\n    return this._post(\"updateSpecFile\", formData);\n  }\n\n  //updates the planning unit file with any changes - not implemented yet\n  updatePuFile() {}\n\n  updatePuvsprFile() {\n    //preprocess the features to create the puvspr.dat file on the server - this is done on demand when the project is run because the user may add/remove Conservation features willy nilly\n    let promise = this.preprocessAllFeatures();\n    return promise;\n  }\n\n  //preprocess a single feature\n  async preprocessSingleFeature(feature) {\n    this.closeFeatureMenu();\n    this.startLogging();\n    this.preprocessFeature(feature);\n  }\n\n  //preprocess synchronously, i.e. one after another\n  async preprocessAllFeatures() {\n    var feature;\n    //iterate through the features and preprocess the ones that need preprocessing\n    for (var i = 0; i < this.state.projectFeatures.length; ++i) {\n      feature = this.state.projectFeatures[i];\n      if (!feature.preprocessed) {\n        await this.preprocessFeature(feature);\n      } else {\n        //\n      }\n    }\n  }\n\n  //preprocesses a feature using websockets - i.e. intersects it with the planning units grid and writes the intersection results into the puvspr.dat file ready for a marxan run - this will have no server timeout as its running using websockets\n  preprocessFeature(feature) {\n    return new Promise((resolve, reject) => {\n      //switches the results pane to the log tab\n      this.setActiveTab(\"log\");\n      //call the websocket\n      this._ws(\n        \"preprocessFeature?user=\" +\n          this.state.owner +\n          \"&project=\" +\n          this.state.project +\n          \"&planning_grid_name=\" +\n          this.state.metadata.PLANNING_UNIT_NAME +\n          \"&feature_class_name=\" +\n          feature.feature_class_name +\n          \"&alias=\" +\n          feature.alias +\n          \"&id=\" +\n          feature.id,\n        this.wsMessageCallback.bind(this)\n      )\n        .then((message) => {\n          //websocket has finished\n          this.updateFeature(feature, {\n            preprocessed: true,\n            pu_count: Number(message.pu_count),\n            pu_area: Number(message.pu_area),\n            occurs_in_planning_grid: Number(message.pu_count) > 0,\n          });\n          resolve(message);\n        })\n        .catch((error) => {\n          reject(error);\n        });\n    });\n  }\n\n  //calls the marxan executeable and runs it getting the output streamed through websockets\n  startMarxanJob(user, project) {\n    return new Promise((resolve, reject) => {\n      //make the request to get the marxan data\n      this._ws(\n        \"runMarxan?user=\" + user + \"&project=\" + project,\n        this.wsMessageCallback.bind(this)\n      )\n        .then((message) => {\n          resolve(message);\n        })\n        .catch((error) => {\n          reject(error);\n        });\n    });\n  }\n\n  //gets the results for a project\n  getResults(user, project) {\n    return new Promise((resolve, reject) => {\n      this._get(\"getResults?user=\" + user + \"&project=\" + project)\n        .then((response) => {\n          this.runCompleted(response);\n          resolve(\"Results retrieved\");\n        })\n        .catch((error) => {\n          reject(\"Unable to get results\");\n        });\n    });\n  }\n\n  //run completed\n  runCompleted(response) {\n    var solutions;\n    //get the response and store it in this component\n    this.runMarxanResponse = response;\n    //if we have some data to map then set the state to reflect this\n    if (\n      this.runMarxanResponse.ssoln &&\n      this.runMarxanResponse.ssoln.length > 0\n    ) {\n      this.setSnackBar(response.info);\n      //render the sum solution map\n      this.renderSolution(this.runMarxanResponse.ssoln, true);\n      //create the array of solutions to pass to the InfoPanels table\n      solutions = response.summary;\n      //the array data are in the format \"Run_Number\",\"Score\",\"Cost\",\"Planning_Units\" - so create an array of objects to pass to the outputs table\n      solutions = solutions.map((item) => {\n        return {\n          Run_Number: item[0],\n          Score: Number(item[1]).toFixed(1),\n          Cost: Number(item[2]).toFixed(1),\n          Planning_Units: item[3],\n          Missing_Values: item[12],\n        };\n      });\n      //add in the row for the summed solutions\n      solutions.splice(0, 0, {\n        Run_Number: \"Sum\",\n        Score: \"\",\n        Cost: \"\",\n        Planning_Units: \"\",\n        Missing_Values: \"\",\n      });\n      //select the first row in the solutions table\n\n      //update the amount of each target that is protected in the current run from the output_mvbest.txt file\n      this.updateProtectedAmount(this.runMarxanResponse.mvbest);\n    } else {\n      solutions = [];\n    }\n    //set state\n    this.runFinished(solutions);\n  }\n\n  runFinished(solutions) {\n    this.setState({ solutions: solutions });\n  }\n\n  //gets the protected area information in m2 from the marxan run and populates the interest features with the values\n  updateProtectedAmount(mvData) {\n    //copy the current project features state\n    let features = this.state.allFeatures;\n    //iterate through the features and set the protected amount\n    features.forEach((feature) => {\n      //get the matching item in the mvbest data\n      let mvbestItemIndex = mvData.findIndex((item) => {\n        return item[0] === feature.id;\n      });\n      if (mvbestItemIndex > -1) {\n        //the mvbest file may not contain the data for the feature if the project has not been run since the feature was added\n        //get the missing values item for the specific feature\n        let mvItem = mvData[mvbestItemIndex];\n        Object.assign(feature, {\n          target_area: mvItem[2],\n          protected_area: mvItem[3],\n        });\n      }\n    });\n    //update allFeatures and projectFeatures with the new value\n    this.setFeaturesState(features);\n  }\n\n  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////IMPORT PROJECT ROUTINES\n  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  importProject(project, description, zipFilename, files, planning_grid_name) {\n    return new Promise((resolve, reject) => {\n      let feature_class_name = \"\",\n        uploadId;\n      //start the logging\n      this.startLogging();\n      //set the spinner and lot states\n      this.log({\n        method: \"importProject\",\n        status: \"Importing\",\n        info: \"Starting import..\",\n      });\n      //create a new project\n      //TODO: SORT OUT ROLLING BACK IF AN IMPORT FAILS - AND DONT PROVIDE REST CALLS TO DELETE PLANNING UNITS\n      this.createImportProject(project)\n        .then((response) => {\n          this.log({\n            method: \"importProject\",\n            status: \"Importing\",\n            info: \"Project '\" + project + \"' created\",\n          });\n          //create the planning unit file\n          this.importZippedShapefileAsPu(\n            zipFilename,\n            planning_grid_name,\n            \"Imported with the project '\" + project + \"'\"\n          )\n            .then((response) => {\n              //get the planning unit feature_class_name\n              feature_class_name = response.feature_class_name;\n              //get the uploadid\n              uploadId = response.uploadId;\n              this.log({\n                method: \"importProject\",\n                status: \"Importing\",\n                info: \"Planning grid imported\",\n              });\n              //upload all of the files from the local system\n              this.uploadFiles(files, project)\n                .then((response) => {\n                  this.log({\n                    method: \"importProject\",\n                    status: \"Importing\",\n                    info: \"All files uploaded\",\n                  });\n                  //upgrade the project to the new version of Marxan - this adds the necessary settings in the project file and calculates the statistics for species in the puvspr.dat and puts them in the feature_preprocessing.dat file\n                  this.upgradeProject(project)\n                    .then((response) => {\n                      this.log({\n                        method: \"importProject\",\n                        status: \"Importing\",\n                        info: \"Project updated to new version\",\n                      });\n                      //update the project file with the new settings - we also have to set the OUTPUTDIR to the standard 'output' as some imported projects may have set different output folders, e.g. output_BLMBEST\n                      let d = new Date();\n                      let formattedDate =\n                        (\"00\" + d.getDate()).slice(-2) +\n                        \"/\" +\n                        (\"00\" + (d.getMonth() + 1)).slice(-2) +\n                        \"/\" +\n                        d.getFullYear().toString().slice(-2) +\n                        \" \" +\n                        (\"00\" + d.getHours()).slice(-2) +\n                        \":\" +\n                        (\"00\" + d.getMinutes()).slice(-2) +\n                        \":\" +\n                        (\"00\" + d.getSeconds()).slice(-2);\n                      this.updateProjectParams(project, {\n                        DESCRIPTION:\n                          description +\n                          \" (imported from an existing Marxan project)\",\n                        CREATEDATE: formattedDate,\n                        OLDVERSION: \"True\",\n                        PLANNING_UNIT_NAME: feature_class_name,\n                        OUTPUTDIR: \"output\",\n                      })\n                        .then((response) => {\n                          // wait for the tileset to upload to mapbox\n                          this.pollMapbox(uploadId).then((response) => {\n                            //refresh the planning grids\n                            this.getPlanningUnitGrids();\n                            this.log({\n                              method: \"importProject\",\n                              status: \"Finished\",\n                              info: \"Import complete\",\n                            });\n                            //now open the project\n                            this.loadProject(project, this.state.user);\n                            resolve(\"Import complete\");\n                          });\n                        })\n                        .catch((error) => {\n                          //updateProjectParams error\n                          reject(error);\n                        });\n                    })\n                    .catch((error) => {\n                      //upgradeProject error\n                      reject(error);\n                    });\n                })\n                .catch((error) => {\n                  //uploadFiles error\n                  reject(error);\n                });\n            })\n            .catch((error) => {\n              //importZippedShapefileAsPu error - delete the project\n              this.deleteProject(this.state.user, project, true);\n              reject(error);\n            });\n        })\n        .catch((error) => {\n          //createImportProject failed - the project already exists\n          reject(error);\n        });\n    });\n  }\n\n  //uploads a list of files to the current project\n  async uploadFiles(files, project) {\n    var file, filepath;\n    for (var i = 0; i < files.length; i++) {\n      file = files.item(i);\n      //see if it is a marxan data file\n      if (file.name.slice(-4) === \".dat\") {\n        const formData = new FormData();\n        formData.append(\"user\", this.state.owner);\n        formData.append(\"project\", project);\n        //the webkitRelativePath will include the folder itself so we have to remove this, e.g. 'Marxan project/input/puvspr.dat' -> '/input/puvspr.dat'\n        filepath = file.webkitRelativePath.split(\"/\").slice(1).join(\"/\");\n        formData.append(\"filename\", filepath);\n        formData.append(\"value\", file);\n        this.log({\n          method: \"uploadFiles\",\n          status: \"Uploading\",\n          info: \"Uploading: \" + file.webkitRelativePath,\n        });\n        await this._post(\"uploadFile\", formData);\n      }\n    }\n  }\n\n  //uploads a single file to the current projects input folder\n  uploadFileToProject(value, filename, project) {\n    return new Promise((resolve, reject) => {\n      const formData = new FormData();\n      formData.append(\"user\", this.state.owner);\n      formData.append(\"project\", this.state.project);\n      formData.append(\"filename\", \"input/\" + filename);\n      formData.append(\"value\", value);\n      this._post(\"uploadFile\", formData).then(function (response) {\n        resolve(response);\n      });\n    });\n  }\n\n  //uploads a single file to a specific folder - value is the filename\n  uploadFileToFolder(value, filename, destFolder) {\n    return new Promise((resolve, reject) => {\n      this.setState({ loading: true });\n      const formData = new FormData();\n      //the binary data for the file\n      formData.append(\"value\", value);\n      //the filename\n      formData.append(\"filename\", filename);\n      //the folder to upload to\n      formData.append(\"destFolder\", destFolder);\n      this._post(\"uploadFileToFolder\", formData).then(function (response) {\n        resolve(response);\n      });\n    });\n  }\n\n  //pads a number with zeros to a specific size, e.g. pad(9,5) => 00009\n  pad(num, size) {\n    var s = num + \"\";\n    while (s.length < size) s = \"0\" + s;\n    return s;\n  }\n\n  //imports a project from an mxd file\n  importMXWProject(project, description, filename) {\n    return new Promise((resolve, reject) => {\n      this.startLogging();\n      this._ws(\n        \"importProject?user=\" +\n          this.state.user +\n          \"&project=\" +\n          project +\n          \"&filename=\" +\n          filename +\n          \"&description=\" +\n          description,\n        this.wsMessageCallback.bind(this)\n      )\n        .then((message) => {\n          //websocket has finished\n          resolve(message);\n          //refresh the project features as there may be new ones\n          this.refreshFeatures();\n          //load the project\n          this.loadProject(project, this.state.user);\n        })\n        .catch((error) => {\n          //do something\n          reject(error);\n        });\n    });\n  }\n\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// SOLUTIONS\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //load a specific solution for the current project\n  loadSolution(solution) {\n    if (solution === \"Sum\") {\n      this.updateProtectedAmount(this.runMarxanResponse.mvbest);\n      //load the sum of solutions which will already be loaded\n      this.renderSolution(this.runMarxanResponse.ssoln, true);\n    } else {\n      this.getSolution(this.state.owner, this.state.project, solution).then(\n        (response) => {\n          this.updateProtectedAmount(response.mv);\n          this.renderSolution(response.solution, false);\n        }\n      );\n    }\n  }\n\n  //load a solution from another project - used in the clumping dialog - when the solution is loaded the paint properties are set on the individual maps through state changes\n  loadOtherSolution(user, project, solution) {\n    this.getSolution(user, project, solution).then((response) => {\n      var paintProperties = this.getPaintProperties(\n        response.solution,\n        false,\n        false\n      );\n      //get the project that matches the project name from the this.projects property - this was set when the projectGroup was created\n      if (this.projects) {\n        var _projects = this.projects.filter((item) => {\n          return item.projectName === project;\n        });\n        //get which clump it is\n        var clump = _projects[0].clump;\n        switch (clump) {\n          case 0:\n            this.setState({ map0_paintProperty: paintProperties });\n            break;\n          case 1:\n            this.setState({ map1_paintProperty: paintProperties });\n            break;\n          case 2:\n            this.setState({ map2_paintProperty: paintProperties });\n            break;\n          case 3:\n            this.setState({ map3_paintProperty: paintProperties });\n            break;\n          case 4:\n            this.setState({ map4_paintProperty: paintProperties });\n            break;\n          default:\n            break;\n        }\n      }\n    });\n  }\n\n  //gets a solution and returns a promise\n  getSolution(user, project, solution) {\n    return this._get(\n      \"getSolution?user=\" +\n        user +\n        \"&project=\" +\n        project +\n        \"&solution=\" +\n        solution\n    );\n  }\n\n  //gets the total number of planning units in the ssoln and outputs the statistics of the distribution to state, e.g. 2 PUs with a value of 1, 3 with a value of 2 etc.\n  getssolncount(data) {\n    let total = 0;\n    let summaryStats = [];\n    data.map((item) => {\n      summaryStats.push({ number: item[0], count: item[1].length });\n      total += item[1].length;\n      return null;\n    });\n    this.setState({ summaryStats: summaryStats });\n    return total;\n  }\n  //gets a sample of the data to be able to do a classification, e.g. natural breaks, jenks etc.\n  getssolnSample(data, sampleSize) {\n    let sample = [],\n      num = 0;\n    let ssolnLength = this.getssolncount(data);\n    data.map((item) => {\n      //use the ceiling function to force outliers to be in the classification, i.e. those planning units that were only selected in 1 solution\n      num = Math.ceil((item[1].length / ssolnLength) * sampleSize);\n      sample.push(Array(num).fill(item[0]));\n      return null;\n    });\n    return [].concat.apply([], sample);\n  }\n\n  //get all data from the ssoln arrays\n  getSsolnData(data) {\n    let arrays = data.map((item) => {\n      return item[1];\n    });\n    return [].concat.apply([], arrays);\n  }\n\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// CLASSIFICATION AND RENDERING\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //gets the classification and colorbrewer object for doing the rendering\n  classifyData(data, numClasses, colorCode, classification) {\n    //get a sample of the data to make the renderer classification\n    let sample = this.getssolnSample(data, 1000); //samples dont work\n    // let sample = this.getSsolnData(data); //get all the ssoln data\n    //set the data\n    this.state.brew.setSeries(sample);\n    //if the colorCode is opacity then calculate the rgba values dynamically and add them to the color schemes\n    if (colorCode === \"opacity\") {\n      //see if we have already created a brew color scheme for opacity with NUMCLASSES\n      if (\n        this.state.brew.colorSchemes.opacity === undefined ||\n        (this.state.brew.colorSchemes.opacity &&\n          !this.state.brew.colorSchemes.opacity[this.state.renderer.NUMCLASSES])\n      ) {\n        //get a copy of the brew state\n        let brewCopy = this.state.brew;\n        let newBrewColorScheme = Array(Number(this.state.renderer.NUMCLASSES))\n          .fill(\"rgba(255,0,136,\")\n          .map((item, index) => {\n            return item + (1 / this) * (index + 1) + \")\";\n          }, this.state.renderer.NUMCLASSES);\n        //add the new color scheme\n        if (brewCopy.colorSchemes.opacity === undefined)\n          brewCopy.colorSchemes.opacity = [];\n        brewCopy.colorSchemes.opacity[\n          this.state.renderer.NUMCLASSES\n        ] = newBrewColorScheme;\n        //set the state\n        this.setState({ brew: brewCopy });\n      }\n    }\n    //set the color code - see the color theory section on Joshua Tanners page here https://github.com/tannerjt/classybrew - for all the available colour codes\n    this.state.brew.setColorCode(colorCode);\n    //get the maximum number of colors in this scheme\n    let colorSchemeLength = getMaxNumberOfClasses(this.state.brew, colorCode);\n    //check the color scheme supports the passed number of classes\n    if (numClasses > colorSchemeLength) {\n      //set the numClasses to the max for the color scheme\n      numClasses = colorSchemeLength;\n      //reset the renderer\n      this.setState({\n        renderer: Object.assign(this.state.renderer, {\n          NUMCLASSES: numClasses,\n        }),\n      });\n    }\n    //set the number of classes\n    this.state.brew.setNumClasses(numClasses);\n    //set the classification method - one of equal_interval, quantile, std_deviation, jenks (default)\n    this.state.brew.classify(classification);\n    this.setState({ dataBreaks: this.state.brew.getBreaks() });\n  }\n\n  //called when the renderer state has been updated - renders the solution and saves the renderer back to the server\n  rendererStateUpdated(parameter, value) {\n    this.renderSolution(this.runMarxanResponse.ssoln, true);\n    if (this.state.userData.ROLE !== \"ReadOnly\")\n      this.updateProjectParameter(parameter, value);\n  }\n  //change the renderer, e.g. jenks, natural_breaks etc.\n  changeRenderer(renderer) {\n    this.setState(\n      {\n        renderer: Object.assign(this.state.renderer, {\n          CLASSIFICATION: renderer,\n        }),\n      },\n      () => {\n        this.rendererStateUpdated(\"CLASSIFICATION\", renderer);\n      }\n    );\n  }\n  //change the number of classes of the renderer\n  changeNumClasses(numClasses) {\n    this.setState(\n      {\n        renderer: Object.assign(this.state.renderer, {\n          NUMCLASSES: numClasses,\n        }),\n      },\n      () => {\n        this.rendererStateUpdated(\"NUMCLASSES\", numClasses);\n      }\n    );\n  }\n  //change the color code of the renderer\n  changeColorCode(colorCode) {\n    //set the maximum number of classes that can be selected in the other select boxes\n    if (this.state.renderer.NUMCLASSES > this.state.brew.getNumClasses()) {\n      this.setState({\n        renderer: Object.assign(this.state.renderer, {\n          NUMCLASSES: this.state.brew.getNumClasses(),\n        }),\n      });\n    }\n    this.setState(\n      {\n        renderer: Object.assign(this.state.renderer, { COLORCODE: colorCode }),\n      },\n      () => {\n        this.rendererStateUpdated(\"COLORCODE\", colorCode);\n      }\n    );\n  }\n  //change how many of the top classes only to show\n  changeShowTopClasses(numClasses) {\n    this.setState(\n      {\n        renderer: Object.assign(this.state.renderer, {\n          TOPCLASSES: numClasses,\n        }),\n      },\n      () => {\n        this.rendererStateUpdated(\"TOPCLASSES\", numClasses);\n      }\n    );\n  }\n  //renders the solution - data is the REST response and sum is a flag to indicate if the data is the summed solution (true) or an individual solution (false)\n  renderSolution(data, sum) {\n    if (!data) return;\n    var paintProperties = this.getPaintProperties(data, sum, true);\n    //set the render paint property\n    this.map.setPaintProperty(\n      CONSTANTS.RESULTS_LAYER_NAME,\n      \"fill-color\",\n      paintProperties.fillColor\n    );\n    this.map.setPaintProperty(\n      CONSTANTS.RESULTS_LAYER_NAME,\n      \"fill-outline-color\",\n      paintProperties.oulineColor\n    );\n  }\n\n  //gets the various paint properties for the planning unit layer - if setRenderer is true then it will also update the renderer in the Legend panel\n  getPaintProperties(data, sum, setRenderer) {\n    //build an expression to get the matching puids with different numbers of 'numbers' in the marxan results\n    var fill_color_expression = this.initialiseFillColorExpression(\"puid\");\n    var fill_outline_color_expression = this.initialiseFillColorExpression(\n      \"puid\"\n    );\n    if (data.length > 0) {\n      var color, visibleValue, value;\n      //create the renderer using Joshua Tanners excellent library classybrew - available here https://github.com/tannerjt/classybrew\n      if (setRenderer)\n        this.classifyData(\n          data,\n          Number(this.state.renderer.NUMCLASSES),\n          this.state.renderer.COLORCODE,\n          this.state.renderer.CLASSIFICATION\n        );\n      //if only the top n classes will be rendered then get the visible value at the boundary\n      if (this.state.renderer.TOPCLASSES < this.state.renderer.NUMCLASSES) {\n        let breaks = this.state.brew.getBreaks();\n        visibleValue =\n          breaks[\n            this.state.renderer.NUMCLASSES - this.state.renderer.TOPCLASSES + 1\n          ];\n      } else {\n        visibleValue = 0;\n      }\n      // the rest service sends the data grouped by the 'number', e.g. [1,[23,34,36,43,98]],[2,[16,19]]\n      data.forEach((row, index) => {\n        if (sum) {\n          //multi value rendering\n          value = row[0];\n          //for each row add the puids and the color to the expression, e.g. [35,36,37],\"rgba(255, 0, 136,0.1)\"\n          color = this.state.brew.getColorInRange(value);\n          //add the color to the expression - transparent if the value is less than the visible value\n          if (value >= visibleValue) {\n            fill_color_expression.push(row[1], color);\n            fill_outline_color_expression.push(\n              row[1],\n              \"rgba(150, 150, 150, 0.6)\"\n            ); //gray outline\n          } else {\n            fill_color_expression.push(row[1], \"rgba(0, 0, 0, 0)\");\n            fill_outline_color_expression.push(row[1], \"rgba(0, 0, 0, 0)\");\n          }\n        } else {\n          //single value rendering\n          fill_color_expression.push(row[1], \"rgba(255, 0, 136,1)\");\n          fill_outline_color_expression.push(\n            row[1],\n            \"rgba(150, 150, 150, 0.6)\"\n          ); //gray outline\n        }\n      });\n      // Last value is the default, used where there is no data\n      fill_color_expression.push(\"rgba(0,0,0,0)\");\n      fill_outline_color_expression.push(\"rgba(0,0,0,0)\");\n    } else {\n      fill_color_expression = \"rgba(0, 0, 0, 0)\";\n      fill_outline_color_expression = \"rgba(0, 0, 0, 0)\";\n    }\n    return {\n      fillColor: fill_color_expression,\n      oulineColor: fill_outline_color_expression,\n    };\n  }\n\n  //initialises the fill color expression for matching on attributes values\n  initialiseFillColorExpression(attribute) {\n    return [\"match\", [\"get\", attribute]];\n  }\n\n  //renders the planning units edit layer according to the type of layer and pu status\n  renderPuEditLayer() {\n    let expression;\n    if (this.state.planning_units.length > 0) {\n      //build an expression to get the matching puids with different statuses in the planning units data\n      expression = [\"match\", [\"get\", \"puid\"]];\n      // the rest service sends the data grouped by the status, e.g. [1,[23,34,36,43,98]],[2,[16,19]]\n      this.state.planning_units.forEach((row, index) => {\n        var color;\n        //get the status\n        switch (row[0]) {\n          // case 1: //The PU will be included in the initial reserve system but may or may not be in the final solution.\n          //   color = \"rgba(63, 191, 63, 1)\";\n          //   break;\n          case 2: //The PU is fixed in the reserve system (“locked in”). It starts in the initial reserve system and cannot be removed.\n            color = \"rgba(63, 63, 191, 1)\";\n            break;\n          case 3: //The PU is fixed outside the reserve system (“locked out”). It is not included in the initial reserve system and cannot be added.\n            color = \"rgba(191, 63, 63, 1)\";\n            break;\n          default:\n            break;\n        }\n        //add the color to the expression\n        expression.push(row[1], color);\n      });\n      // Last value is the default, used where there is no data - i.e. for all the planning units with a status of 0\n      expression.push(\"rgba(150, 150, 150, 0)\");\n    } else {\n      //there are no statuses apart from the default 0 status so have a single renderer\n      expression = \"rgba(150, 150, 150, 0)\";\n    }\n    //set the render paint property\n    this.map.setPaintProperty(\n      CONSTANTS.STATUS_LAYER_NAME,\n      \"line-color\",\n      expression\n    );\n    this.map.setPaintProperty(\n      CONSTANTS.STATUS_LAYER_NAME,\n      \"line-width\",\n      CONSTANTS.STATUS_LAYER_LINE_WIDTH\n    );\n  }\n\n  //renders the planning units cost layer according to the cost for each planning unit\n  renderPuCostLayer(cost_data) {\n    return new Promise((resolve, reject) => {\n      let expression;\n      if (cost_data.data.length > 0) {\n        //build an expression to get the matching puids with different costs\n        expression = [\"match\", [\"get\", \"puid\"]];\n        //iterate through the cost data and set the expressions\n        cost_data.data.forEach((row, index) => {\n          //get the branch labels, i.e. the puids for this histogram bin - they could be empty\n          if (row[1].length > 0)\n            expression.push(row[1], CONSTANTS.COST_COLORS[index]);\n        });\n        // Last value is the default\n        expression.push(\"rgba(150, 150, 150, 0)\");\n      } else {\n        //there are no costs apart from the default 0 status so have a single renderer\n        expression = \"rgba(150, 150, 150, 0.7)\";\n      }\n      //set the render paint property\n      this.map.setPaintProperty(\n        CONSTANTS.COSTS_LAYER_NAME,\n        \"fill-color\",\n        expression\n      );\n      //set the min/max properties in the layer as metadata\n      this.setLayerMetadata(CONSTANTS.COSTS_LAYER_NAME, {\n        min: cost_data.min,\n        max: cost_data.max,\n      });\n      //show the layer\n      this.showLayer(CONSTANTS.COSTS_LAYER_NAME);\n      resolve(\"Costs rendered\");\n    });\n  }\n\n  //convenience method to get the rendered features safely and not to show and error message if the layer doesnt exist in the map style\n  getRenderedFeatures(pt, layers) {\n    let features = [];\n    if (this.map.getLayer(layers[0]))\n      features = this.map.queryRenderedFeatures(pt, { layers: layers });\n    return features;\n  }\n\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// MAP INSTANTIATION, LAYERS ADDING/REMOVING AND INTERACTION\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //instantiates the mapboxgl map\n  createMap(url) {\n    this.map = new mapboxgl.Map({\n      container: this.mapContainer,\n      style: url,\n      center: [0, 0],\n      zoom: 2,\n    });\n    //add event handlers for the load and error events\n    this.map.on(\"load\", this.mapLoaded.bind(this));\n    this.map.on(\"error\", this.mapError.bind(this));\n    //click event\n    this.map.on(\"click\", this.mapClick.bind(this));\n    //style change, this includes adding/removing layers and showing/hiding layers\n    this.map.on(\"styledata\", this.mapStyleChanged.bind(this));\n  }\n\n  mapLoaded(e) {\n    // this.map.addControl(new mapboxgl.FullscreenControl(), 'bottom-right'); // currently full screen hides the info panel and setting position:absolute and z-index: 10000000000 doesnt work properly\n    this.map.addControl(new mapboxgl.ScaleControl());\n    this.map.addControl(new mapboxgl.NavigationControl(), \"bottom-right\");\n    this.map.addControl(new HomeButton());\n    //create the draw controls for the map\n    this.mapboxDrawControls = new MapboxDraw({\n      displayControlsDefault: false,\n      controls: {\n        polygon: true,\n        trash: true,\n      },\n      defaultMode: \"draw_polygon\",\n    });\n    this.map.on(\"moveend\", (evt) => {\n      if (this.state.clumpingDialogOpen) this.updateMapCentreAndZoom(); //only update the state if the clumping dialog is open\n    });\n    this.map.on(\"draw.create\", this.polygonDrawn.bind(this));\n  }\n\n  updateMapCentreAndZoom() {\n    this.setState({\n      mapCentre: this.map.getCenter(),\n      mapZoom: this.map.getZoom(),\n    });\n  }\n\n  //catch all event handler for map errors\n  mapError(e) {\n    var message = \"\";\n    switch (e.error.message) {\n      case \"Not Found\":\n        message = \"The tileset '\" + e.source.url + \"' was not found\";\n        break;\n      case \"Bad Request\":\n        message =\n          \"The tileset from source '\" +\n          e.sourceId +\n          \"' was not found. See <a href='\" +\n          CONSTANTS.ERRORS_PAGE +\n          \"#the-tileset-from-source-source-was-not-found' target='blank'>here</a>\";\n        break;\n      default:\n        message = e.error.message;\n        break;\n    }\n    if (message !== \"http status 200 returned without content.\") {\n      this.setSnackBar(\"MapError: \" + message);\n      console.error(message);\n    }\n  }\n\n  //\n  mapClick(e) {\n    //if the user is not editing planning units or creating a new feature then show the identify features for the clicked point\n    if (!this.state.puEditing && !this.map.getSource(\"mapbox-gl-draw-cold\")) {\n      //get a list of the layers that we want to query for features\n      var featureLayers = this.getLayers([\n        CONSTANTS.LAYER_TYPE_PLANNING_UNITS,\n        CONSTANTS.LAYER_TYPE_SUMMED_SOLUTIONS,\n        CONSTANTS.LAYER_TYPE_PROTECTED_AREAS,\n        CONSTANTS.LAYER_TYPE_FEATURE_LAYER,\n      ]);\n      //get the feature layer ids\n      let featureLayerIds = featureLayers.map((item) => item.id);\n      //get a list of all of the rendered features that were clicked on - these will be planning units, features and protected areas\n      var clickedFeatures = this.getRenderedFeatures(e.point, featureLayerIds);\n      //set the popup point\n      this.setState({ popup_point: e.point });\n      //get any planning unit features under the mouse\n      let planningUnitFeatures = this.getFeaturesByLayerStartsWith(\n        clickedFeatures,\n        \"marxan_pu_\"\n      );\n      if (\n        planningUnitFeatures.length &&\n        planningUnitFeatures[0].properties.puid\n      )\n        this.getPUData(planningUnitFeatures[0].properties.puid);\n      //get any conservation features under the mouse\n      let identifyFeatures = this.getFeaturesByLayerStartsWith(\n        clickedFeatures,\n        \"marxan_feature_layer_\"\n      );\n      //there may be dupliate conservation features (e.g. with GBIF data) so get a unique list of sourceLayers\n      let sourceLayers = identifyFeatures.map((item) => item.sourceLayer);\n      let uniqueSourceLayers = Array.from(new Set(sourceLayers));\n      //get the full features data from the state.projectFeatures array\n      identifyFeatures = uniqueSourceLayers.map((item) => {\n        let matchingItem = this.state.projectFeatures.filter((item2) => {\n          return item2.feature_class_name === item; //the features feature_class_name is the name of the sourcelayer in the vector tile\n        })[0];\n        return matchingItem;\n      });\n      //get any protected area features under the mouse\n      let identifyProtectedAreas = this.getFeaturesByLayerStartsWith(\n        clickedFeatures,\n        \"marxan_wdpa_\"\n      );\n      //set the state to populate the identify popup\n      this.setState({\n        identifyVisible: true,\n        identifyFeatures: identifyFeatures,\n        identifyProtectedAreas: identifyProtectedAreas,\n      });\n    }\n  }\n\n  //called when layers are added/removed or shown/hidden\n  mapStyleChanged(e) {\n    //update legend items\n    this.updateLegend();\n  }\n  //after a layer has been added/removed/shown/hidden update the legend items\n  updateLegend() {\n    let layers = this.map.getStyle().layers;\n    //get the visible marxan layers\n    let visibleLayers = layers.filter((item) => {\n      if (item.id.substr(0, 7) === \"marxan_\") {\n        return item.layout.visibility === \"visible\";\n      } else {\n        return false;\n      }\n    });\n    //set the state\n    this.setState({ visibleLayers: visibleLayers });\n  }\n  //gets a set of features that have a layerid that starts with the passed text\n  getFeaturesByLayerStartsWith(features, startsWith) {\n    let matchedFeatures = features.filter((item) => {\n      return item.layer.id.substr(0, startsWith.length) === startsWith;\n    });\n    return matchedFeatures;\n  }\n\n  //gets a list of features for the planning unit\n  getPUData(puid) {\n    this._get(\n      \"getPUData?user=\" +\n        this.state.owner +\n        \"&project=\" +\n        this.state.project +\n        \"&puid=\" +\n        puid\n    ).then((response) => {\n      if (response.data.features.length) {\n        //if there are some features for the planning unit join the ids onto the full feature data from the state.projectFeatures array\n        this.joinArrays(\n          response.data.features,\n          this.state.projectFeatures,\n          \"species\",\n          \"id\"\n        );\n      }\n      //set the state to update the identify popup\n      this.setState({\n        identifyPlanningUnits: {\n          puData: response.data.pu_data,\n          features: response.data.features,\n        },\n      });\n    });\n  }\n\n  //joins a set of data from one object array to another\n  joinArrays(arr1, arr2, leftId, rightId) {\n    let outputArr = [];\n    arr1.forEach((item) => {\n      //get the matching item in the second array\n      let matchingItem = arr2.filter(\n        (arr2item) => arr2item[rightId] === item[leftId]\n      );\n      if (matchingItem.length)\n        outputArr.push(Object.assign(item, matchingItem[0]));\n    });\n    return outputArr;\n  }\n\n  //hides the identify popup\n  hideIdentifyPopup(e) {\n    this.setState({ identifyVisible: false, identifyPlanningUnits: {} });\n  }\n\n  //gets a Mapbox Style Specification JSON object from the passed ESRI style endpoint\n  getESRIStyle(styleUrl) {\n    return new Promise((resolve, reject) => {\n      fetch(styleUrl) //fetch the style json\n        .then((response) => {\n          return response.json().then((style) => {\n            // next fetch metadata for the raw tiles\n            const TileJSON = style.sources.esri.url;\n            fetch(TileJSON).then((response) => {\n              return response.json().then((metadata) => {\n                let tilesurl =\n                  metadata.tiles[0].substr(0, 1) === \"/\"\n                    ? TileJSON + metadata.tiles[0]\n                    : TileJSON + \"/\" + metadata.tiles[0];\n                style.sources.esri = {\n                  type: \"vector\",\n                  scheme: \"xyz\",\n                  tilejson: metadata.tilejson || \"2.0.0\",\n                  format:\n                    (metadata.tileInfo && metadata.tileInfo.format) || \"pbf\",\n                  /* mapbox-gl-js does not respect the indexing of esri tiles because we cache to different zoom levels depending on feature density, in rural areas 404s will still be encountered. more info: https://github.com/mapbox/mapbox-gl-js/pull/1377*/\n                  // index: metadata.tileMap ? style.sources.esri.url + '/' + metadata.tileMap : null,\n                  maxzoom: 15,\n                  tiles: [tilesurl],\n                  description: metadata.description,\n                  name: metadata.name,\n                };\n                resolve(style);\n              });\n            });\n          });\n        });\n    });\n  }\n\n  //sets the basemap either on project load, or if the user changes it\n  setBasemap(basemap) {\n    return new Promise((resolve, reject) => {\n      //change the state\n      this.setState({ basemap: basemap.name });\n      //get a valid map style\n      this.getValidStyle(basemap).then((style) => {\n        //load the style\n        this.loadMapStyle(style).then((evt) => {\n          //add the WDPA layer\n          this.addWDPASource();\n          this.addWDPALayer();\n          //add the planning unit layers (if a project has already been loaded)\n          if (this.state.tileset) {\n            this.addPlanningGridLayers(this.state.tileset);\n            //get the results, if any\n            if (this.state.owner)\n              this.getResults(this.state.owner, this.state.project);\n            //filter the wdpa vector tiles - NO LONGER USED\n            // this.filterWdpaByIucnCategory(this.state.metadata.IUCN_CATEGORY);\n            //turn on/off layers depending on which tab is selected\n            if (this.state.activeTab === \"planning_units\") this.pu_tab_active();\n            resolve();\n          } else {\n            resolve();\n          }\n        });\n      });\n    });\n  }\n\n  //gets the style JSON either as a valid TileJSON object or as a url to a valid TileJSON object\n  getValidStyle(basemap) {\n    return new Promise((resolve, reject) => {\n      switch (basemap.provider) {\n        case \"esri\":\n          //the style json will be loaded dynamically from an esri endpoint and parsed to produce a valid TileJSON object\n          this.getESRIStyle(basemap.id).then((styleJson) => {\n            resolve(styleJson);\n          });\n          break;\n        case \"local\":\n          //blank background\n          resolve({\n            version: 8,\n            name: \"blank\",\n            sources: {\n              openmaptiles: {\n                type: \"vector\",\n                url: \"\",\n              },\n            },\n            layers: [\n              {\n                id: \"background\",\n                type: \"background\",\n                paint: {\n                  \"background-color\": \"#ffffff\",\n                },\n              },\n            ],\n          });\n          break;\n        default:\n          // the style is a url - just return the url - either mapbox or jrc provided\n          resolve(CONSTANTS.MAPBOX_STYLE_PREFIX + basemap.id);\n          break;\n      }\n    });\n  }\n\n  //loads the maps style using either a url to a Mapbox Style Specification file or a JSON object\n  loadMapStyle(style) {\n    return new Promise((resolve, reject) => {\n      if (!this.map) {\n        this.createMap(style);\n      } else {\n        //request the style\n        this.map.setStyle(style, { diff: false });\n      }\n      this.map.on(\"style.load\", (evt) => {\n        resolve(\"Map style loaded\");\n      });\n    });\n  }\n\n  //called when the planning grid layer has changed, i.e. the project has changed\n  changePlanningGrid(tilesetid) {\n    return new Promise((resolve, reject) => {\n      //get the tileset metadata\n      this.getMetadata(tilesetid)\n        .then((tileset) => {\n          //remove the results layer, planning unit layer etc.\n          this.removePlanningGridLayers();\n          //add the results layer, planning unit layer etc.\n          this.addPlanningGridLayers(tileset);\n          //zoom to the layers extent\n          if (tileset.bounds != null) zoomToBounds(this.map, tileset.bounds);\n          //set the state\n          this.setState({ tileset: tileset });\n          //filter the wdpa vector tiles as the map doesn't respond to state changes - NO LONGER USED\n          // this.filterWdpaByIucnCategory(this.state.metadata.IUCN_CATEGORY);\n          resolve();\n        })\n        .catch((error) => {\n          this.setSnackBar(error);\n          reject(error);\n        });\n    });\n  }\n\n  //gets all of the metadata for the tileset\n  getMetadata(tilesetId) {\n    return new Promise((resolve, reject) => {\n      fetch(\n        \"https://api.mapbox.com/v4/\" +\n          tilesetId +\n          \".json?secure&access_token=\" +\n          this.state.registry.MBAT_PUBLIC\n      )\n        .then((response) => response.json())\n        .then((response2) => {\n          if (\n            response2.message != null &&\n            response2.message.indexOf(\"does not exist\") > 0\n          ) {\n            reject(\n              \"The tileset '\" +\n                tilesetId +\n                \"' was not found. See <a href='\" +\n                CONSTANTS.ERRORS_PAGE +\n                \"#the-tileset-from-source-source-was-not-found' target='blank'>here</a>\"\n            );\n          } else {\n            resolve(response2);\n          }\n        });\n    });\n  }\n\n  //adds the results, planning unit, planning unit edit etc layers to the map\n  addPlanningGridLayers(tileset) {\n    //add the source for the planning unit layers\n    this.map.addSource(CONSTANTS.PLANNING_UNIT_SOURCE_NAME, {\n      type: \"vector\",\n      url: \"mapbox://\" + tileset.id,\n    });\n    //add the results layer\n    this.addMapLayer({\n      id: CONSTANTS.RESULTS_LAYER_NAME,\n      metadata: {\n        name: \"Results\",\n        type: CONSTANTS.LAYER_TYPE_SUMMED_SOLUTIONS,\n      },\n      type: \"fill\",\n      source: CONSTANTS.PLANNING_UNIT_SOURCE_NAME,\n      layout: {\n        visibility: \"visible\",\n      },\n      \"source-layer\": tileset.name,\n      paint: {\n        \"fill-color\": \"rgba(0, 0, 0, 0)\",\n        \"fill-outline-color\": \"rgba(0, 0, 0, 0)\",\n        \"fill-opacity\": CONSTANTS.RESULTS_LAYER_OPACITY,\n      },\n    });\n    //add the planning units costs layer\n    this.addMapLayer({\n      id: CONSTANTS.COSTS_LAYER_NAME,\n      metadata: {\n        name: \"Planning Unit Cost\",\n        type: CONSTANTS.LAYER_TYPE_PLANNING_UNITS_COST,\n      },\n      type: \"fill\",\n      source: CONSTANTS.PLANNING_UNIT_SOURCE_NAME,\n      layout: {\n        visibility: \"none\",\n      },\n      \"source-layer\": tileset.name,\n      paint: {\n        \"fill-color\": \"rgba(255, 0, 0, 0)\",\n        \"fill-outline-color\": \"rgba(150, 150, 150, 0)\",\n        \"fill-opacity\": CONSTANTS.PU_COSTS_LAYER_OPACITY,\n      },\n    });\n    //set the result layer in app state so that it can update the Legend component and its opacity control\n    this.setState({\n      resultsLayer: this.map.getLayer(CONSTANTS.RESULTS_LAYER_NAME),\n    });\n    //add the planning unit layer\n    this.addMapLayer({\n      id: CONSTANTS.PU_LAYER_NAME,\n      metadata: {\n        name: \"Planning Unit\",\n        type: CONSTANTS.LAYER_TYPE_PLANNING_UNITS,\n      },\n      type: \"fill\",\n      source: CONSTANTS.PLANNING_UNIT_SOURCE_NAME,\n      layout: {\n        visibility: \"none\",\n      },\n      \"source-layer\": tileset.name,\n      paint: {\n        \"fill-color\": \"rgba(0, 0, 0, 0)\",\n        \"fill-outline-color\":\n          \"rgba(150, 150, 150, \" + CONSTANTS.PU_LAYER_OPACITY + \")\",\n        \"fill-opacity\": CONSTANTS.PU_LAYER_OPACITY,\n      },\n    });\n    //add the planning units manual edit layer - this layer shows which individual planning units have had their status changed\n    this.addMapLayer({\n      id: CONSTANTS.STATUS_LAYER_NAME,\n      metadata: {\n        name: \"Planning Unit Status\",\n        type: CONSTANTS.LAYER_TYPE_PLANNING_UNITS_STATUS,\n      },\n      type: \"line\",\n      source: CONSTANTS.PLANNING_UNIT_SOURCE_NAME,\n      layout: {\n        visibility: \"none\",\n      },\n      \"source-layer\": tileset.name,\n      paint: {\n        \"line-color\": \"rgba(150, 150, 150, 0)\",\n        \"line-width\": CONSTANTS.STATUS_LAYER_LINE_WIDTH,\n      },\n    });\n  }\n\n  removePlanningGridLayers() {\n    let layers = this.map.getStyle().layers;\n    //get the dynamically added layers\n    let dynamicLayers = layers.filter((item) => {\n      return item.source === CONSTANTS.PLANNING_UNIT_SOURCE_NAME;\n    });\n    //remove them from the map\n    dynamicLayers.forEach((item) => {\n      this.removeMapLayer(item.id);\n    });\n    //remove the sources if present\n    if (this.map.getSource(CONSTANTS.PLANNING_UNIT_SOURCE_NAME) !== undefined)\n      this.map.removeSource(CONSTANTS.PLANNING_UNIT_SOURCE_NAME);\n  }\n\n  //adds the WDPA vector tile layer source - this is a separate function so that if the source vector tiles are updated, the layer can be re-added on its own\n  addWDPASource() {\n    //add the source for the wdpa\n    let yr = this.state.marxanServer.wdpa_version.substr(-4); //get the year from the wdpa_version\n    let attribution =\n      \"IUCN and UNEP-WCMC (\" +\n      yr +\n      \"), The World Database on Protected Areas (WDPA) \" +\n      this.state.marxanServer.wdpa_version +\n      \", Cambridge, UK: UNEP-WCMC. Available at: <a href='http://www.protectedplanet.net'>www.protectedplanet.net</a>\";\n    let tiles = [\n      this.state.registry.WDPA.tilesUrl +\n        \"layer=marxan:\" +\n        this.wdpa_vector_tile_layer +\n        \"&tilematrixset=EPSG:900913&Service=WMTS&Request=GetTile&Version=1.0.0&Format=application/x-protobuf;type=mapbox-vector&TileMatrix=EPSG:900913:{z}&TileCol={x}&TileRow={y}\",\n    ];\n    this.setState({ wdpaAttribution: attribution });\n    this.map.addSource(CONSTANTS.WDPA_SOURCE_NAME, {\n      attribution: attribution,\n      type: \"vector\",\n      tiles: tiles,\n    });\n  }\n\n  //adds the WDPA vector tile layer - this is a separate function so that if the source vector tiles are updated, the layer can be re-added on its own\n  addWDPALayer() {\n    this.addMapLayer({\n      id: CONSTANTS.WDPA_LAYER_NAME,\n      metadata: {\n        name: \"Protected Areas\",\n        type: CONSTANTS.LAYER_TYPE_PROTECTED_AREAS,\n      },\n      type: \"fill\",\n      source: CONSTANTS.WDPA_SOURCE_NAME,\n      \"source-layer\": this.wdpa_vector_tile_layer,\n      layout: {\n        visibility: \"visible\",\n      },\n      // \"filter\": [\"==\", \"wdpaid\", -1],\n      paint: {\n        \"fill-color\": {\n          type: \"categorical\",\n          property: \"marine\",\n          stops: [\n            [\"0\", \"rgb(99,148,69)\"],\n            [\"1\", \"rgb(63,127,191)\"],\n            [\"2\", \"rgb(63,127,191)\"],\n          ],\n        },\n        \"fill-outline-color\": {\n          type: \"categorical\",\n          property: \"marine\",\n          stops: [\n            [\"0\", \"rgb(99,148,69)\"],\n            [\"1\", \"rgb(63,127,191)\"],\n            [\"2\", \"rgb(63,127,191)\"],\n          ],\n        },\n        \"fill-opacity\": CONSTANTS.WDPA_FILL_LAYER_OPACITY,\n      },\n    });\n    //set the wdpa layer in app state so that it can update the Legend component and its opacity control\n    this.setState({ wdpaLayer: this.map.getLayer(CONSTANTS.WDPA_LAYER_NAME) });\n  }\n\n  showLayer(id) {\n    if (this.map && this.map.getLayer(id))\n      this.map.setLayoutProperty(id, \"visibility\", \"visible\");\n  }\n  hideLayer(id) {\n    if (this.map && this.map.getLayer(id))\n      this.map.setLayoutProperty(id, \"visibility\", \"none\");\n  }\n  //centralised code to add a layer to the maps current style\n  addMapLayer(mapLayer, beforeLayer) {\n    //if a beforeLayer is not passed get the first symbol layer (i.e. label layer) and we will add all fill or line layers before this\n    if (!beforeLayer) {\n      var allLayers = this.map.getStyle().layers;\n      //get the symbol layers\n      let symbollayers = allLayers.filter((item) => item.type === \"symbol\");\n      //get the first symbol layer if there are some, otherwise an empty string\n      beforeLayer = symbollayers.length ? symbollayers[0].id : \"\";\n    }\n    //add the layer\n    this.map.addLayer(mapLayer, beforeLayer);\n  }\n  //centralised code to remove a layer from the maps current style\n  removeMapLayer(layerid) {\n    this.map.removeLayer(layerid);\n  }\n  isLayerVisible(layername) {\n    return (\n      this.map &&\n      this.map.getLayer(layername) &&\n      this.map.getLayoutProperty(layername, \"visibility\") === \"visible\"\n    );\n  }\n\n  //changes the layers opacity\n  changeOpacity(layerId, opacity) {\n    if (this.map) {\n      let layer = this.map.getLayer(layerId);\n      switch (layer.type) {\n        case \"circle\":\n          this.map.setPaintProperty(layerId, \"circle-opacity\", opacity);\n          break;\n        case \"fill\":\n          this.map.setPaintProperty(layerId, \"fill-opacity\", opacity);\n          break;\n        case \"line\":\n          this.map.setPaintProperty(layerId, \"line-opacity\", opacity);\n          break;\n        default:\n        // code\n      }\n    }\n  }\n\n  //sets the metadata for the layer\n  setLayerMetadata(layerId, metadata) {\n    let layer = this.map.getLayer(layerId);\n    //merge the metadata with the existing metadata\n    if (layer) layer.metadata = Object.assign(layer.metadata, metadata);\n  }\n\n  //gets a particular set of layers based on the layer types (layerTypes is an array of layer types)\n  getLayers(layerTypes) {\n    //get the map layers\n    var allLayers = this.map.getStyle().layers;\n    //iterate through the layers to get the matching ones\n    return allLayers.filter((layer) => {\n      if (\n        layer.hasOwnProperty(\"metadata\") &&\n        layer.metadata.hasOwnProperty(\"type\")\n      ) {\n        return layerTypes.includes(layer.metadata.type);\n      } else {\n        return false;\n      }\n    });\n  }\n\n  //shows/hides layers of a particular type (layerTypes is an array of layer types)\n  showHideLayerTypes(layerTypes, show) {\n    //get the marxan layers\n    let layers = this.getLayers(layerTypes);\n    layers.forEach((layer) => {\n      if (show) {\n        this.showLayer(layer.id);\n      } else {\n        this.hideLayer(layer.id);\n      }\n    });\n  }\n\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ///ACTIVATION/DEACTIVATION OF TABS\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //fired when the projects tab is selected\n  project_tab_active() {\n    this.setState({ activeTab: \"project\" });\n    this.pu_tab_inactive();\n  }\n\n  //fired when the features tab is selected\n  features_tab_active() {\n    if (this.state.activeTab !== \"features\") {\n      this.setState({ activeTab: \"features\" });\n      //render the sum solution map\n      // this.renderSolution(this.runMarxanResponse.ssoln, true);\n      //hide the planning unit layers\n      this.pu_tab_inactive();\n    }\n  }\n\n  //fired when the planning unit tab is selected\n  pu_tab_active() {\n    this.setState({ activeTab: \"planning_units\" });\n    //show the planning units layer\n    this.showLayer(CONSTANTS.PU_LAYER_NAME);\n    //show the planning units status layer\n    this.showLayer(CONSTANTS.STATUS_LAYER_NAME);\n    //show the planning units costs layer\n    this.loadCostsLayer();\n    //hide the results layer\n    this.hideLayer(CONSTANTS.RESULTS_LAYER_NAME);\n    //hide the feature layer and feature puid layers\n    this.showHideLayerTypes(\n      [\n        CONSTANTS.LAYER_TYPE_FEATURE_LAYER,\n        CONSTANTS.LAYER_TYPE_FEATURE_PLANNING_UNIT_LAYER,\n      ],\n      false\n    );\n    //render the planning units status layer_edit layer\n    this.renderPuEditLayer(CONSTANTS.STATUS_LAYER_NAME);\n  }\n\n  //fired whenever another tab is selected\n  pu_tab_inactive() {\n    //show the results layer\n    this.showLayer(CONSTANTS.RESULTS_LAYER_NAME);\n    //show the feature layer and feature puid layers\n    this.showHideLayerTypes(\n      [\n        CONSTANTS.LAYER_TYPE_FEATURE_LAYER,\n        CONSTANTS.LAYER_TYPE_FEATURE_PLANNING_UNIT_LAYER,\n      ],\n      true\n    );\n    //hide the planning units layer\n    this.hideLayer(CONSTANTS.PU_LAYER_NAME);\n    //hide the planning units edit layer\n    this.hideLayer(CONSTANTS.STATUS_LAYER_NAME);\n    //hide the planning units cost layer\n    this.hideLayer(CONSTANTS.COSTS_LAYER_NAME);\n  }\n\n  // fired when a new tab is selected\n  setActiveTab(newValue) {\n    this.setState({ activeResultsTab: newValue });\n  }\n\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ///PLANNING UNIT WORKFLOW AND FUNCTIONS\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  startPuEditSession() {\n    //set the state\n    this.setState({ puEditing: true });\n    //set the cursor to a crosshair\n    this.map.getCanvas().style.cursor = \"crosshair\";\n    //add the left mouse click event to the planning unit layer\n    this.onClickRef = this.moveStatusUp.bind(this); //using bind creates a new function instance so we need to get a reference to that to be able to remove it later\n    this.map.on(\"click\", CONSTANTS.PU_LAYER_NAME, this.onClickRef);\n    //add the mouse right click event to the planning unit layer\n    this.onContextMenu = this.resetStatus.bind(this); //using bind creates a new function instance so we need to get a reference to that to be able to remove it later\n    this.map.on(\"contextmenu\", CONSTANTS.PU_LAYER_NAME, this.onContextMenu);\n  }\n\n  stopPuEditSession() {\n    //set the state\n    this.setState({ puEditing: false });\n    //reset the cursor\n    this.map.getCanvas().style.cursor = \"pointer\";\n    //remove the mouse left click event\n    this.map.off(\"click\", CONSTANTS.PU_LAYER_NAME, this.onClickRef);\n    //remove the mouse right click event\n    this.map.off(\"contextmenu\", CONSTANTS.PU_LAYER_NAME, this.onContextMenu);\n    //update the pu.dat file\n    this.updatePuDatFile();\n  }\n\n  //clears all of the manual edits from the pu edit layer (except the protected area units)\n  clearManualEdits() {\n    //clear all the planning unit statuses\n    this.setState({ planning_units: [] }, () => {\n      //get the puids for the current iucn category\n      let puids = this.getPuidsFromIucnCategory(\n        this.state.metadata.IUCN_CATEGORY\n      );\n      //update the planning units\n      this.updatePlanningUnits([], puids);\n    });\n  }\n\n  //sends a list of puids that should be excluded from the run to upddate the pu.dat file\n  updatePuDatFile() {\n    //initialise the form data\n    let formData = new FormData();\n    //add the current user\n    formData.append(\"user\", this.state.owner);\n    //add the current project\n    formData.append(\"project\", this.state.project);\n    //add the planning unit manual exceptions\n    if (this.state.planning_units.length > 0) {\n      this.state.planning_units.forEach((item) => {\n        //get the name of the status parameter\n        let param_name = \"status\" + item[0];\n        //add the planning units\n        formData.append(param_name, item[1]);\n      });\n    }\n    //post to the server\n    this._post(\"updatePUFile\", formData).then((response) => {\n      //do something\n    });\n  }\n\n  //fired when the user left clicks on a planning unit to move its status up\n  moveStatusUp(e) {\n    this.changeStatus(e, \"up\");\n  }\n\n  //fired when the user left clicks on a planning unit to reset its status\n  resetStatus(e) {\n    this.changeStatus(e, \"reset\");\n  }\n\n  changeStatus(e, direction) {\n    //get the feature that the user has clicked\n    var features = this.getRenderedFeatures(e.point, [CONSTANTS.PU_LAYER_NAME]);\n    //get the featureid\n    if (features.length > 0) {\n      //get the puid\n      let puid = features[0].properties.puid;\n      //get its current status\n      let status = this.getStatusLevel(puid);\n      //get the next status level\n      let next_status = this.getNextStatusLevel(status, direction);\n      //copy the current planning unit statuses\n      let statuses = this.state.planning_units;\n      //if the planning unit is not at level 0 (in which case it will not be in the planning_units state) - then remove it from the puids array for that status\n      if (status !== 0) this.removePuidFromArray(statuses, status, puid);\n      //add it to the new status array\n      if (next_status !== 0) this.addPuidToArray(statuses, next_status, puid);\n      //set the state\n      this.setState({ planning_units: statuses });\n      //re-render the planning unit edit layer\n      this.renderPuEditLayer();\n    }\n  }\n\n  getStatusLevel(puid) {\n    //iterate through the planning unit statuses to see which status the clicked planning unit belongs to, i.e. 1, 2 or 3\n    let status_level = 0; //default level as the getPlanningUnits REST call only returns the planning units with non-default values\n    CONSTANTS.PLANNING_UNIT_STATUSES.forEach((item) => {\n      let planning_units = this.getPlanningUnitsByStatus(item);\n      if (planning_units.indexOf(puid) > -1) {\n        status_level = item;\n      }\n    });\n    return status_level;\n  }\n\n  //gets the array index position for the passed status in the planning_units state\n  getStatusPosition(status) {\n    let position = -1;\n    this.state.planning_units.forEach((item, index) => {\n      if (item[0] === status) position = index;\n    });\n    return position;\n  }\n\n  //returns the planning units with a particular status, e.g. 1,2,3\n  getPlanningUnitsByStatus(status) {\n    //get the position of the status items in the this.state.planning_units\n    let position = this.getStatusPosition(status);\n    //get the array of planning units\n    let returnValue =\n      position > -1 ? this.state.planning_units[position][1] : [];\n    return returnValue;\n  }\n\n  //returns the next status level for a planning unit depending on the direction\n  getNextStatusLevel(status, direction) {\n    let nextStatus;\n    switch (status) {\n      case 0:\n        nextStatus = direction === \"up\" ? 3 : 0;\n        break;\n      case 1: //no longer used\n        nextStatus = direction === \"up\" ? 0 : 0;\n        break;\n      case 2:\n        nextStatus = direction === \"up\" ? 0 : 0; //used to be 1 going down\n        break;\n      case 3:\n        nextStatus = direction === \"up\" ? 2 : 0;\n        break;\n      default:\n        break;\n    }\n    return nextStatus;\n  }\n\n  //removes in individual puid value from an array of puid statuses\n  removePuidFromArray(statuses, status, puid) {\n    return this.removePuidsFromArray(statuses, status, [puid]);\n  }\n\n  addPuidToArray(statuses, status, puid) {\n    return this.appPuidsToPlanningUnits(statuses, status, [puid]);\n  }\n\n  //adds all the passed puids to the planning_units state\n  appPuidsToPlanningUnits(statuses, status, puids) {\n    //get the position of the status items in the this.state.planning_units, i.e. the index\n    let position = this.getStatusPosition(status);\n    if (position === -1) {\n      //create a new status and empty puid array\n      statuses.push([status, []]);\n      position = statuses.length - 1;\n    }\n    //add the puids to the puid array ensuring that they are unique\n    statuses[position][1] = Array.from(\n      new Set(statuses[position][1].concat(puids))\n    );\n    return statuses;\n  }\n\n  //removes all the passed puids from the planning_units state\n  removePuidsFromArray(statuses, status, puids) {\n    //get the position of the status items in the this.state.planning_units\n    let position = this.getStatusPosition(status);\n    if (position > -1) {\n      let puid_array = statuses[position][1];\n      let new_array = puid_array.filter((item) => {\n        return puids.indexOf(item) < 0;\n      });\n      statuses[position][1] = new_array;\n      //if there are no more items in the puid array then remove it\n      if (new_array.length === 0) statuses.splice(position, 1);\n    }\n    return statuses;\n  }\n\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  //ROUTINES FOR CREATING A NEW PROJECT AND PLANNING UNIT GRIDS\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //previews the planning grid\n  previewPlanningGrid(planning_grid_metadata) {\n    this.setState({ planning_grid_metadata: planning_grid_metadata });\n    this.openPlanningGridDialog();\n  }\n\n  //creates a new planning grid unit\n  createNewPlanningUnitGrid(iso3, domain, areakm2, shape) {\n    return new Promise((resolve, reject) => {\n      this.startLogging();\n      this._ws(\n        \"createPlanningUnitGrid?iso3=\" +\n          iso3 +\n          \"&domain=\" +\n          domain +\n          \"&areakm2=\" +\n          areakm2 +\n          \"&shape=\" +\n          shape,\n        this.wsMessageCallback.bind(this)\n      )\n        .then((message) => {\n          this.newPlanningGridCreated(message).then(() => {\n            this.closeNewPlanningGridDialog();\n            //websocket has finished\n            resolve(message);\n          });\n        })\n        .catch((error) => {\n          //do something\n          reject(error);\n        });\n    });\n  }\n\n  //imports a zipped shapefile as a new planning grid\n  importPlanningUnitGrid(zipFilename, alias, description) {\n    return new Promise((resolve, reject) => {\n      this.startLogging();\n      this.log({\n        method: \"importPlanningUnitGrid\",\n        status: \"Started\",\n        info: \"Importing planning grid..\",\n      });\n      this.importZippedShapefileAsPu(zipFilename, alias, description)\n        .then((response) => {\n          this.log({\n            method: \"importPlanningUnitGrid\",\n            status: \"Finished\",\n            info: response.info,\n          });\n          this.newPlanningGridCreated(response).then(() => {\n            this.closeImportPlanningGridDialog();\n          });\n        })\n        .catch((error) => {\n          //importZippedShapefileAsPu error\n          this.deletePlanningUnitGrid(alias, true);\n          this.log({\n            method: \"importPlanningUnitGrid\",\n            status: \"Finished\",\n            error: error,\n          });\n          reject(error);\n        });\n    });\n  }\n\n  //called when a new planning grid has been created\n  newPlanningGridCreated(response) {\n    return new Promise((resolve, reject) => {\n      //start polling to see when the upload is done\n      this.pollMapbox(response.uploadId).then((response) => {\n        //update the planning unit items\n        this.getPlanningUnitGrids();\n        resolve(\"Planning grid created\");\n      });\n    });\n  }\n\n  //deletes a planning unit grid\n  deletePlanningUnitGrid(feature_class_name, silent = false) {\n    if (silent) {\n      //used to roll back failed imports of planning grids\n      this.deletePlanningGrid(feature_class_name, true);\n    } else {\n      //get a list of the projects for the planning grid\n      this.getProjectsForPlanningGrid(feature_class_name).then((projects) => {\n        //if the planning grid is not being used then delete it\n        if (projects.length === 0) {\n          this.deletePlanningGrid(feature_class_name, false);\n        } else {\n          //show the projects list dialog\n          this.showProjectListDialog(\n            projects,\n            \"Failed to delete planning grid\",\n            \"The planning grid is used in the following projects\"\n          );\n        }\n      });\n    }\n  }\n\n  //deletes a planning grid\n  deletePlanningGrid(feature_class_name, silent) {\n    this._get(\"deletePlanningUnitGrid?planning_grid_name=\" + feature_class_name)\n      .then((response) => {\n        //update the planning unit grids\n        this.getPlanningUnitGrids();\n        this.setSnackBar(response.info, silent);\n      })\n      .catch((error) => {\n        //additional stuff\n      });\n  }\n\n  //exports a planning grid to a zipped shapefile\n  exportPlanningGrid(feature_class_name) {\n    return new Promise((resolve, reject) => {\n      this._get(\"exportPlanningUnitGrid?name=\" + feature_class_name)\n        .then((response) => {\n          resolve(\n            this.state.marxanServer.endpoint + \"exports/\" + response.filename\n          );\n        })\n        .catch((error) => {\n          reject();\n        });\n    });\n  }\n\n  //gets a list of projects that use a particular planning grid\n  getProjectsForPlanningGrid(feature_class_name) {\n    return new Promise((resolve, reject) => {\n      //get a list of the projects for the planning grid\n      this._get(\n        \"listProjectsForPlanningGrid?feature_class_name=\" + feature_class_name\n      ).then((response) => {\n        resolve(response.projects);\n      });\n    });\n  }\n\n  getCountries() {\n    this._get(\"getCountries\").then((response) => {\n      this.setState({ countries: response.records });\n    });\n  }\n\n  //uploads the named feature class to mapbox on the server\n  uploadToMapBox(feature_class_name, mapbox_layer_name) {\n    return new Promise((resolve, reject) => {\n      this._get(\n        \"uploadTilesetToMapBox?feature_class_name=\" +\n          feature_class_name +\n          \"&mapbox_layer_name=\" +\n          mapbox_layer_name,\n        300000\n      )\n        .then((response) => {\n          this.setState({ loading: true });\n          //poll mapbox to see when the upload has finished\n          this.pollMapbox(response.uploadid).then((response2) => {\n            resolve(response2);\n          });\n        })\n        .catch((error) => {\n          reject(error);\n        });\n    });\n  }\n\n  //polls mapbox to see when an upload has finished - returns as promise\n  pollMapbox(uploadid) {\n    this.setState({ uploading: true });\n    this.log({ info: \"Uploading to Mapbox..\", status: \"Uploading\" });\n    return new Promise((resolve, reject) => {\n      if (uploadid === \"0\") {\n        this.log({\n          info: \"Tileset already exists on Mapbox\",\n          status: \"UploadComplete\",\n        });\n        //reset state\n        this.setState({ uploading: false });\n        resolve(\"Uploaded to Mapbox\");\n      } else {\n        let timer = setInterval(() => {\n          fetch(\n            \"https://api.mapbox.com/uploads/v1/\" +\n              CONSTANTS.MAPBOX_USER +\n              \"/\" +\n              uploadid +\n              \"?access_token=\" +\n              this.state.registry.MBAT\n          )\n            .then((response) => response.json())\n            .then((response) => {\n              if (response.complete) {\n                resolve(\"Uploaded to Mapbox\");\n                this.log({ info: \"Uploaded\", status: \"UploadComplete\" });\n                //clear the timer\n                this.clearMapboxTimer(uploadid);\n              }\n              //if there is an error from mapbox then raise it\n              if (response.error) {\n                reject(response.error);\n                let err =\n                  \"Mapbox upload error: \" +\n                  response.error +\n                  \". See <a href='\" +\n                  CONSTANTS.ERRORS_PAGE +\n                  \"#mapbox-upload-error' target='blank'>here</a>\";\n                //log the error\n                this.log({ error: err, status: \"UploadFailed\" });\n                //set the snackbox\n                this.setSnackBar(err);\n                //clear the timer\n                this.clearMapboxTimer(uploadid);\n              }\n            })\n            .catch((error) => {\n              this.setState({ uploading: false });\n              reject(error);\n            });\n        }, 3000);\n        timers.push({ uploadid: uploadid, timer: timer });\n      }\n    });\n  }\n  //resets a timer for a mapbox upload poll\n  clearMapboxTimer(uploadid) {\n    //clear the timer\n    let _timer = timers.find((timer) => timer.uploadid === uploadid);\n    clearInterval(_timer.timer);\n    //remove the timer from the timers array\n    timers = timers.filter((timer) => timer.uploadid !== uploadid);\n    //reset state\n    if (timers.length === 0) this.setState({ uploading: false });\n  }\n  closeWelcomeDialog() {\n    this.setState({ welcomeDialogOpen: false });\n  }\n  openWelcomeDialog() {\n    this.parseNotifications();\n    this.setState({ welcomeDialogOpen: true });\n  }\n  openFeaturesDialog(showClearSelectAll) {\n    //refresh the features list if we are using a hosted service (other users could have created/deleted items) and the project is not imported (only project features are shown)\n    if (\n      this.state.marxanServer.system !== \"Windows\" &&\n      !this.state.metadata.OLDVERSION\n    )\n      this.refreshFeatures();\n    this.setState({\n      featuresDialogOpen: true,\n      addingRemovingFeatures: showClearSelectAll,\n    });\n    if (showClearSelectAll) this.getSelectedFeatureIds();\n  }\n  closeFeaturesDialog() {\n    this.setState({\n      featuresDialogOpen: false,\n      newFeaturePopoverOpen: false,\n      importFeaturePopoverOpen: false,\n    });\n  }\n  openNewFeatureDialog() {\n    this.setState({ NewFeatureDialogOpen: true });\n  }\n  closeNewFeatureDialog() {\n    this.setState({ NewFeatureDialogOpen: false });\n    //finalise digitising\n    this.finaliseDigitising();\n  }\n  openImportFromWebDialog() {\n    this.setState({ importFromWebDialogOpen: true });\n  }\n  closeImportFromWebDialog() {\n    this.setState({ importFromWebDialogOpen: false });\n  }\n  openImportFeaturesDialog() {\n    this.setState({ importFeaturesDialogOpen: true });\n  }\n  closeImportFeaturesDialog() {\n    this.setState({ importFeaturesDialogOpen: false });\n  }\n  openImportGBIFDialog() {\n    this.setState({ importGBIFDialogOpen: true });\n  }\n  closeImportGBIFDialog() {\n    this.setState({ importGBIFDialogOpen: false });\n  }\n  openPlanningGridsDialog() {\n    //refresh the planning grids if we are using a hosted service - other users could have created/deleted items\n    if (this.state.marxanServer.system !== \"Windows\")\n      this.getPlanningUnitGrids();\n    this.setState({ planningGridsDialogOpen: true });\n  }\n  closePlanningGridsDialog() {\n    this.setState({ planningGridsDialogOpen: false });\n  }\n  openPlanningGridDialog() {\n    this.setState({ planningGridDialogOpen: true });\n  }\n  closePlanningGridDialog() {\n    this.setState({ planningGridDialogOpen: false });\n  }\n  openFeatureDialog() {\n    this.setState({ featureDialogOpen: true });\n  }\n  closeFeatureDialog() {\n    this.setState({ featureDialogOpen: false });\n  }\n  showNewFeaturePopover() {\n    this.setState({ newFeaturePopoverOpen: true });\n  }\n  hideNewFeaturePopover() {\n    this.setState({ newFeaturePopoverOpen: false });\n  }\n  showImportFeaturePopover() {\n    this.setState({ importFeaturePopoverOpen: true });\n  }\n  hideImportFeaturePopover() {\n    this.setState({ importFeaturePopoverOpen: false });\n  }\n  showImportProjectPopover() {\n    this.setState({ importProjectPopoverOpen: true });\n  }\n  hideImportProjectPopover() {\n    this.setState({ importProjectPopoverOpen: false });\n  }\n  openCostsDialog() {\n    this.setState({ costsDialogOpen: true });\n  }\n  closeCostsDialog() {\n    this.setState({ costsDialogOpen: false });\n  }\n  openImportCostsDialog() {\n    this.setState({ importCostsDialogOpen: true });\n  }\n  closeImportCostsDialog() {\n    this.setState({ importCostsDialogOpen: false });\n  }\n  openWDPAUpdateDialog() {\n    this.setState({ updateWDPADialogOpen: true });\n  }\n  closeWDPAUpdateDialog() {\n    this.setState({ updateWDPADialogOpen: false });\n  }\n  setNewFeatureDatasetFilename(filename) {\n    this.setState({ featureDatasetFilename: filename });\n  }\n  //used by the import wizard to import a users zipped shapefile as the planning units\n  importZippedShapefileAsPu(zipname, alias, description) {\n    //the zipped shapefile has been uploaded to the MARXAN folder - it will be imported to PostGIS and a record will be entered in the metadata_planning_units table\n    return this._get(\n      \"importPlanningUnitGrid?filename=\" +\n        zipname +\n        \"&name=\" +\n        alias +\n        \"&description=\" +\n        description\n    );\n  }\n\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  // MANAGING INTEREST FEATURES SECTION\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //updates the properties of a feature and then updates the features state\n  updateFeature(feature, newProps) {\n    let features = this.state.allFeatures;\n    //get the position of the feature\n    var index = features.findIndex((element) => {\n      return element.id === feature.id;\n    });\n    if (index !== -1) {\n      Object.assign(features[index], newProps);\n      //update allFeatures and projectFeatures with the new value\n      this.setFeaturesState(features);\n    }\n  }\n\n  //gets the ids of the selected features\n  getSelectedFeatureIds() {\n    let ids = [];\n    this.state.allFeatures.forEach((feature) => {\n      if (feature.selected) ids.push(feature.id);\n    });\n    this.setState({ selectedFeatureIds: ids });\n  }\n\n  //when a user clicks a feature in the FeaturesDialog\n  clickFeature(feature) {\n    let ids = this.state.selectedFeatureIds;\n    if (ids.includes(feature.id)) {\n      //remove the feature if it is already selected\n      this.removeFeature(feature);\n    } else {\n      //add the feature to the selected feature array\n      this.addFeature(feature);\n    }\n  }\n\n  //removes a feature from the selectedFeatureIds array\n  removeFeature(feature) {\n    let ids = this.state.selectedFeatureIds;\n    //remove the feature  - this requires a callback on setState otherwise the state is not updated before updateSelectedFeatures is called\n    ids = ids.filter((value, index, arr) => {\n      return value !== feature.id;\n    });\n    return new Promise((resolve, reject) => {\n      this.setState({ selectedFeatureIds: ids }, () => {\n        resolve(\"Feature removed\");\n      });\n    });\n  }\n\n  //adds a feature to the selectedFeatureIds array\n  addFeature(feature, callback) {\n    let ids = this.state.selectedFeatureIds;\n    //add the feautre to the selected feature array\n    ids.push(feature.id);\n    this.setState({ selectedFeatureIds: ids }, callback);\n  }\n\n  //starts a digitising session\n  initialiseDigitising() {\n    //show the digitising controls if they are not already present, mapbox-gl-draw-cold and mapbox-gl-draw-hot\n    if (!this.map.getSource(\"mapbox-gl-draw-cold\"))\n      this.map.addControl(this.mapboxDrawControls);\n  }\n\n  //finalises the digitising\n  finaliseDigitising() {\n    //hide the drawing controls\n    this.map.removeControl(this.mapboxDrawControls);\n  }\n  //called when the user has drawn a polygon on screen\n  polygonDrawn(evt) {\n    //open the new feature dialog for the metadata\n    this.openNewFeatureDialog();\n    //save the feature in a local variable\n    this.digitisedFeatures = evt.features;\n  }\n\n  //selects all the features\n  selectAllFeatures() {\n    let ids = [];\n    this.state.allFeatures.forEach((feature) => {\n      ids.push(feature.id);\n    });\n    this.selectFeatures(ids);\n  }\n\n  //clears all the Conservation features\n  clearAllFeatures() {\n    this.setState({ selectedFeatureIds: [] });\n  }\n\n  //selects features\n  selectFeatures(ids) {\n    this.setState({ selectedFeatureIds: ids });\n  }\n\n  //updates the allFeatures to set the various properties based on which features have been selected in the FeaturesDialog or programmatically\n  updateSelectedFeatures() {\n    //delete the gap analysis as the features within the project have changed\n    this.deleteGapAnalysis();\n    let allFeatures = this.state.allFeatures;\n    allFeatures.forEach((feature) => {\n      if (this.state.selectedFeatureIds.includes(feature.id)) {\n        Object.assign(feature, { selected: true });\n      } else {\n        if (this.state.metadata.OLDVERSION) {\n          //for imported projects we cannot preprocess them any longer as we dont have access to the features spatial data - therefore dont set preprocessed to false or any of the other stats fields\n          Object.assign(feature, { selected: false });\n        } else {\n          Object.assign(feature, {\n            selected: false,\n            preprocessed: false,\n            protected_area: -1,\n            pu_area: -1,\n            pu_count: -1,\n            target_area: -1,\n            occurs_in_planning_grid: false,\n          });\n        }\n        //remove the feature layer if it is loaded\n        if (feature.feature_layer_loaded) this.toggleFeatureLayer(feature);\n        //remove the planning unit layer if it is loaded\n        if (feature.feature_puid_layer_loaded)\n          this.toggleFeaturePUIDLayer(feature);\n      }\n    });\n    //when the project features have been saved to state, update the spec.dat file\n    this.setFeaturesState(allFeatures, () => {\n      //persist the changes to the server\n      if (this.state.userData.ROLE !== \"ReadOnly\") this.updateSpecFile();\n      //close the dialog\n      this.closeFeaturesDialog();\n    });\n  }\n\n  //updates the target values for all features in the project to the passed value\n  updateTargetValueForFeatures(target_value) {\n    let allFeatures = this.state.allFeatures;\n    //iterate through all features\n    allFeatures.forEach((feature) => {\n      Object.assign(feature, { target_value: target_value });\n    });\n    //set the features in app state\n    this.setFeaturesState(allFeatures, () => {\n      //persist the changes to the server\n      if (this.state.userData.ROLE !== \"ReadOnly\") this.updateSpecFile();\n    });\n  }\n\n  //the callback is optional and will be called when the state has updated\n  setFeaturesState(newFeatures, callback) {\n    //update allFeatures and projectFeatures with the new value\n    this.setState(\n      {\n        allFeatures: newFeatures,\n        projectFeatures: newFeatures.filter((item) => {\n          return item.selected;\n        }),\n      },\n      callback\n    );\n  }\n\n  //unselects a single Conservation feature\n  unselectItem(feature) {\n    //remove it from the selectedFeatureIds array\n    this.removeFeature(feature).then(() => {\n      //refresh the selected features\n      this.updateSelectedFeatures();\n    });\n  }\n\n  //previews the feature\n  previewFeature(feature_metadata) {\n    this.setState({ feature_metadata: feature_metadata });\n    this.openFeatureDialog();\n  }\n\n  //unzips a shapefile on the server\n  unzipShapefile(filename) {\n    return new Promise((resolve, reject) => {\n      this._get(\"unzipShapefile?filename=\" + filename)\n        .then((response) => {\n          resolve(response);\n        })\n        .catch((error) => {\n          reject(error);\n        });\n    });\n  }\n\n  //deletes a zip file and shapefile (with the *.shp extension)\n  deleteShapefile(zipfile, shapefile) {\n    return new Promise((resolve, reject) => {\n      this._get(\n        \"deleteShapefile?zipfile=\" + zipfile + \"&shapefile=\" + shapefile\n      )\n        .then((response) => {\n          resolve(response);\n        })\n        .catch((error) => {\n          reject(error);\n        });\n    });\n  }\n\n  //gets a list of fieldnames from the passed shapefile - this must exist in the servers root directory\n  getShapefileFieldnames(filename) {\n    return new Promise((resolve, reject) => {\n      this._get(\"getShapefileFieldnames?filename=\" + filename)\n        .then((response) => {\n          resolve(response);\n        })\n        .catch((error) => {\n          reject(error);\n        });\n    });\n  }\n\n  //create new features from the already uploaded zipped shapefile\n  importFeatures(zipfile, name, description, shapefile, spiltfield) {\n    //start the logging\n    this.startLogging();\n    return new Promise((resolve, reject) => {\n      //get the request url\n      let url =\n        name !== \"\"\n          ? \"importFeatures?zipfile=\" +\n            zipfile +\n            \"&shapefile=\" +\n            shapefile +\n            \"&name=\" +\n            name +\n            \"&description=\" +\n            description\n          : \"importFeatures?zipfile=\" +\n            zipfile +\n            \"&shapefile=\" +\n            shapefile +\n            \"&splitfield=\" +\n            spiltfield;\n      this._ws(url, this.wsMessageCallback.bind(this))\n        .then((message) => {\n          //get the uploadIds\n          let uploadIds = message.uploadIds;\n          //get a promise array to see when all of the uploads are done\n          let promiseArray = [];\n          //iterate through the uploadIds to see when they are done\n          for (var i = 0; i < uploadIds.length; ++i) {\n            promiseArray.push(this.pollMapbox(uploadIds[i]));\n          }\n          //see when they're done\n          Promise.all(promiseArray).then((response) => {\n            resolve(\"All features uploaded\");\n          });\n        })\n        .catch((error) => {\n          reject(error);\n        });\n    }); //return\n  }\n\n  //imports features from a web resource\n  importFeaturesFromWeb(name, description, endpoint, srs, featureType) {\n    //start the logging\n    this.startLogging();\n    return new Promise((resolve, reject) => {\n      //get the request url\n      this._ws(\n        \"createFeaturesFromWFS?name=\" +\n          name +\n          \"&description=\" +\n          description +\n          \"&endpoint=\" +\n          endpoint +\n          \"&srs=\" +\n          srs +\n          \"&featuretype=\" +\n          featureType,\n        this.wsMessageCallback.bind(this)\n      )\n        .then((message) => {\n          //get the uploadId\n          let uploadId = message.uploadId;\n          this.pollMapbox(uploadId).then((response) => {\n            resolve(response);\n          });\n        })\n        .catch((error) => {\n          reject(error);\n        });\n    }); //return\n  }\n\n  //import features from GBIF\n  importGBIFData(item) {\n    //start the logging\n    this.startLogging();\n    return new Promise((resolve, reject) => {\n      //get the request url\n      this._ws(\n        \"importGBIFData?taxonKey=\" +\n          item.key +\n          \"&scientificName=\" +\n          item.scientificName,\n        this.wsMessageCallback.bind(this)\n      )\n        .then((message) => {\n          //get the uploadId\n          let uploadId = message.uploadId;\n          this.pollMapbox(uploadId).then((response) => {\n            resolve(response);\n          });\n        })\n        .catch((error) => {\n          reject(error);\n        });\n    }); //return\n  }\n\n  //requests matching species names in GBIF\n  gbifSpeciesSuggest(q) {\n    return new Promise((resolve, reject) => {\n      this.setState({ loading: true });\n      jsonp(\n        \"https://api.gbif.org/v1/species/suggest?q=\" + q + \"&rank=SPECIES\"\n      ).promise.then(\n        (response) => {\n          resolve(response);\n          this.setState({ loading: false });\n        },\n        (err) => {\n          reject(err);\n          this.setState({ loading: false });\n        }\n      );\n    });\n  }\n\n  //create the new feature from the feature that has been digitised on the map\n  createNewFeature(name, description) {\n    //start the logging\n    this.startLogging();\n    this.log({\n      method: \"createNewFeature\",\n      status: \"Started\",\n      info: \"Creating feature..\",\n    });\n    //post the geometry to the server with the metadata\n    let formData = new FormData();\n    formData.append(\"name\", name);\n    formData.append(\"description\", description);\n    //convert the coordinates into a linestring to create the polygon in postgis\n    let coords = this.digitisedFeatures[0].geometry.coordinates[0]\n      .map((coordinate) => {\n        return coordinate[0] + \" \" + coordinate[1];\n      })\n      .join(\",\");\n    formData.append(\"linestring\", \"Linestring(\" + coords + \")\");\n    this._post(\"createFeatureFromLinestring\", formData)\n      .then((response) => {\n        this.log({\n          method: \"createNewFeature\",\n          status: \"Finished\",\n          info: response.info,\n        });\n        //start polling to see when the upload is done\n        this.pollMapbox(response.uploadId).then(() => {\n          this.newFeatureCreated(response.id);\n          //close the dialog\n          this.closeNewFeatureDialog();\n        });\n      })\n      .catch((error) => {\n        this.log({ status: \"Finished\", error: error });\n      });\n  }\n\n  //gets the new feature information and updates the state\n  newFeatureCreated(id) {\n    //load the interest feature from the marxan web database\n    this._get(\"getFeature?oid=\" + id + \"&format=json\").then((response) => {\n      let feature = response.data[0];\n      //add the required attributes to use it in Marxan Web and update the allFeatures array\n      this.initialiseNewFeature(feature);\n      //if add to project is set then add the feature to the project, wait for the selectedFeatureIds state to be updated and then call updateSelectedFeatures\n      if (this.state.addToProject)\n        this.addFeature(feature, () => {\n          this.updateSelectedFeatures();\n        });\n    });\n  }\n\n  //adds the required attributes to use it in Marxan Web and update the allFeatures array\n  initialiseNewFeature(feature) {\n    //add the required attributes\n    this.addFeatureAttributes(feature);\n    //update the allFeatures array\n    this.addNewFeature(feature);\n  }\n  //adds a new feature to the allFeatures array\n  addNewFeature(feature) {\n    //update the allFeatures array\n    var featuresCopy = this.state.allFeatures;\n    featuresCopy.push(feature);\n    //sort the features alphabetically\n    featuresCopy.sort((a, b) => {\n      if (a.alias.toLowerCase() < b.alias.toLowerCase()) return -1;\n      if (a.alias.toLowerCase() > b.alias.toLowerCase()) return 1;\n      return 0;\n    });\n    this.setState({ allFeatures: featuresCopy });\n  }\n\n  //attempts to delete a feature - if the feature is in use in a project then it will not be deleted and the list of projects will be shown\n  deleteFeature(feature) {\n    this.getProjectsForFeature(feature).then((projects) => {\n      if (projects.length === 0) {\n        this._deleteFeature(feature);\n      } else {\n        this.showProjectListDialog(\n          projects,\n          \"Failed to delete planning feature\",\n          \"The feature is used in the following projects\"\n        );\n      }\n    });\n  }\n\n  //deletes a feature\n  _deleteFeature(feature) {\n    this._get(\"deleteFeature?feature_name=\" + feature.feature_class_name).then(\n      (response) => {\n        this.setSnackBar(\"Feature deleted\");\n        //remove it from the current project if necessary\n        this.removeFeature(feature);\n        //remove it from the allFeatures array\n        this.removeFeatureFromAllFeatures(feature);\n      }\n    );\n  }\n\n  //removes a feature from the allFeatures array\n  removeFeatureFromAllFeatures(feature) {\n    let featuresCopy = this.state.allFeatures;\n    //remove the feature\n    featuresCopy = featuresCopy.filter((item) => {\n      return item.id !== feature.id;\n    });\n    //update the allFeatures state\n    this.setState({ allFeatures: featuresCopy });\n  }\n\n  //makes a call to get the features from the server and returns them\n  getFeatures() {\n    return new Promise((resolve, reject) => {\n      this._get(\"getAllSpeciesData\")\n        .then((response) => {\n          resolve(response);\n        })\n        .catch((error) => {\n          //do something\n        });\n    });\n  }\n\n  //gets all the features from the server and updates the state\n  getAllFeatures() {\n    return new Promise((resolve, reject) => {\n      this.getFeatures()\n        .then((response) => {\n          //set the allfeatures state\n          this.setState({ allFeatures: response.data }, () => {\n            resolve(\"Features returned\");\n          });\n        })\n        .catch((error) => {\n          //do something\n        });\n    });\n  }\n\n  //gets the feature ids as a set from the allFeatures array\n  getFeatureIds(_features) {\n    return new Set(\n      _features.map((item) => {\n        return item.id;\n      })\n    );\n  }\n\n  //refreshes the allFeatures state\n  refreshFeatures() {\n    //refresh all features\n    this.getFeatures().then((response) => {\n      //get the existing feature ids in the client\n      let existingIds = this.getFeatureIds(this.state.allFeatures);\n      //get the new feature ids in the server\n      let newIds = this.getFeatureIds(response.data);\n      //get the features that have been removed as a set\n      let removedIds = new Set([...existingIds].filter((x) => !newIds.has(x)));\n      removedIds.forEach((item) => {\n        //remove it from the allFeatures array\n        this.removeFeatureFromAllFeatures({ id: item });\n      });\n      //get the features that have been added as a set\n      let addedIds = new Set([...newIds].filter((x) => !existingIds.has(x)));\n      //iterate through the new features and initialise them\n      let addedFeatures = response.data.filter((item) => addedIds.has(item.id));\n      addedFeatures.forEach((item) => {\n        this.initialiseNewFeature(item);\n      });\n    });\n  }\n  openFeatureMenu(evt, feature) {\n    this.setState({\n      featureMenuOpen: true,\n      currentFeature: feature,\n      menuAnchor: evt.currentTarget,\n    });\n  }\n  closeFeatureMenu(evt) {\n    this.setState({ featureMenuOpen: false });\n  }\n\n  //hides the feature layer\n  hideFeatureLayer() {\n    this.state.projectFeatures.forEach((feature) => {\n      if (feature.feature_layer_loaded) this.toggleFeatureLayer(feature);\n    });\n  }\n\n  //toggles the feature layer on the map\n  toggleFeatureLayer(feature) {\n    if (feature.tilesetid === \"\") {\n      this.setSnackBar(\n        \"This feature does not have a tileset on Mapbox. See <a href='\" +\n          CONSTANTS.ERRORS_PAGE +\n          \"#the-tileset-from-source-source-was-not-found' target='blank'>here</a>\"\n      );\n      return;\n    }\n    // this.closeFeatureMenu();\n    let layerName = feature.tilesetid.split(\".\")[1];\n    let layerId = \"marxan_feature_layer_\" + layerName;\n    if (this.map.getLayer(layerId)) {\n      this.removeMapLayer(layerId);\n      this.map.removeSource(layerId);\n      this.updateFeature(feature, { feature_layer_loaded: false });\n    } else {\n      //if a planning units layer for a feature is visible then we need to add the feature layer before it - first get the feature puid layer\n      var layers = this.getLayers([\n        CONSTANTS.LAYER_TYPE_FEATURE_PLANNING_UNIT_LAYER,\n      ]);\n      //get the before layer\n      let beforeLayer = layers.length > 0 ? layers[0].id : \"\";\n      //get the paint property\n      let paintProperty, typeProperty;\n      if (feature.source !== \"Imported shapefile (points)\") {\n        paintProperty = {\n          \"fill-color\": feature.color,\n          \"fill-opacity\": CONSTANTS.FEATURE_LAYER_OPACITY,\n          \"fill-outline-color\": \"rgba(0, 0, 0, 0.2)\",\n        };\n        typeProperty = \"fill\";\n      } else {\n        paintProperty = {\n          \"circle-color\": feature.color,\n          \"circle-opacity\": CONSTANTS.FEATURE_LAYER_OPACITY,\n          \"circle-stroke-color\": \"rgba(0, 0, 0, 0.7)\",\n          \"circle-radius\": 3,\n        };\n        typeProperty = \"circle\";\n      }\n      this.addMapLayer(\n        {\n          id: layerId,\n          metadata: {\n            name: feature.alias,\n            type: CONSTANTS.LAYER_TYPE_FEATURE_LAYER,\n          },\n          type: typeProperty,\n          source: {\n            type: \"vector\",\n            url: \"mapbox://\" + feature.tilesetid,\n          },\n          layout: {\n            visibility: \"visible\",\n          },\n          \"source-layer\": layerName,\n          paint: paintProperty,\n        },\n        beforeLayer\n      ); //add it before the layer that shows the planning unit outlines for the feature\n      this.updateFeature(feature, { feature_layer_loaded: true });\n    }\n  }\n\n  //toggles the planning unit feature layer on the map\n  toggleFeaturePUIDLayer(feature) {\n    // this.closeFeatureMenu();\n    let layerName = \"marxan_puid_\" + feature.id;\n    if (this.map.getLayer(layerName)) {\n      this.removeMapLayer(layerName);\n      this.updateFeature(feature, { feature_puid_layer_loaded: false });\n    } else {\n      //get the planning units where the feature occurs\n      this._get(\n        \"getFeaturePlanningUnits?user=\" +\n          this.state.owner +\n          \"&project=\" +\n          this.state.project +\n          \"&oid=\" +\n          feature.id\n      ).then((response) => {\n        //ids retrieved - add the layer\n        this.addMapLayer({\n          id: layerName,\n          metadata: {\n            name: feature.alias,\n            type: CONSTANTS.LAYER_TYPE_FEATURE_PLANNING_UNIT_LAYER,\n            lineColor: feature.color,\n          },\n          type: \"line\",\n          source: CONSTANTS.PLANNING_UNIT_SOURCE_NAME,\n          \"source-layer\": this.state.tileset.name,\n          layout: {\n            visibility: \"visible\",\n          },\n          paint: {\n            \"line-opacity\": CONSTANTS.FEATURE_PLANNING_GRID_LAYER_OPACITY,\n          },\n        });\n        //update the paint property for the layer\n        var line_color_expression = this.initialiseFillColorExpression(\"puid\");\n        response.data.forEach((puid) => {\n          line_color_expression.push(puid, feature.color);\n        });\n        // Last value is the default, used where there is no data\n        line_color_expression.push(\"rgba(0,0,0,0)\");\n        this.map.setPaintProperty(\n          layerName,\n          \"line-color\",\n          line_color_expression\n        );\n        //show the layer\n        this.showLayer(layerName);\n      });\n      this.updateFeature(feature, { feature_puid_layer_loaded: true });\n    }\n  }\n\n  //removes the current feature from the project\n  removeFromProject(feature) {\n    this.closeFeatureMenu();\n    this.unselectItem(feature);\n  }\n\n  //zooms to a features extent\n  zoomToFeature(feature) {\n    this.closeFeatureMenu();\n    //transform from BOX(-174.173506487 -18.788241791,-173.86528589 -18.5190063499999) to [[-73.9876, 40.7661], [-73.9397, 40.8002]]\n    let points = feature.extent\n      .substr(4, feature.extent.length - 5)\n      .replace(/ /g, \",\")\n      .split(\",\");\n    //get the points as numbers\n    let nums = points.map((item) => {\n      return Number(item);\n    });\n    //zoom to the feature\n    this.map.fitBounds(\n      [\n        [nums[0], nums[1]],\n        [nums[2], nums[3]],\n      ],\n      { padding: 100 }\n    );\n  }\n\n  //gets a list of projects for a feature\n  getProjectsForFeature(feature) {\n    return new Promise((resolve, reject) => {\n      this._get(\"listProjectsForFeature?feature_class_id=\" + feature.id).then(\n        (response) => {\n          resolve(response.projects);\n        }\n      );\n    });\n  }\n\n  //gets a list of projects for either a feature or a planning grid\n  getProjectList(obj, _type) {\n    if (_type === \"feature\") {\n      this.getProjectsForFeature(obj).then((projects) => {\n        this.showProjectListDialog(\n          projects,\n          \"Projects list\",\n          \"The feature is used in the following projects:\"\n        );\n      });\n    } else {\n      this.getProjectsForPlanningGrid(obj.feature_class_name).then(\n        (projects) => {\n          this.showProjectListDialog(\n            projects,\n            \"Projects list\",\n            \"The feature is used in the following projects:\"\n          );\n        }\n      );\n    }\n  }\n\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// DIALOG OPENING/CLOSING FUNCTIONS\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  showUserMenu(e) {\n    e.preventDefault();\n    this.setState({ userMenuOpen: true, menuAnchor: e.currentTarget });\n  }\n  hideUserMenu(e) {\n    this.setState({ userMenuOpen: false });\n  }\n  showHelpMenu(e) {\n    e.preventDefault();\n    this.setState({ helpMenuOpen: true, menuAnchor: e.currentTarget });\n  }\n  hideHelpMenu(e) {\n    this.setState({ helpMenuOpen: false });\n  }\n  showToolsMenu(e) {\n    e.preventDefault();\n    this.setState({ toolsMenuOpen: true, menuAnchor: e.currentTarget });\n  }\n  hideToolsMenu(e) {\n    this.setState({ toolsMenuOpen: false });\n  }\n  openRegisterDialog() {\n    this.setState({ registerDialogOpen: true });\n  }\n  closeRegisterDialog() {\n    this.setState({ registerDialogOpen: false });\n  }\n  openResendPasswordDialog() {\n    this.setState({ resendPasswordDialogOpen: true });\n  }\n  closeResendPasswordDialog() {\n    this.setState({ resendPasswordDialogOpen: false });\n  }\n  openProjectsDialog() {\n    this.setState({ projectsDialogOpen: true });\n    this.getProjects();\n  }\n  closeProjectsDialog() {\n    this.setState({\n      projectsDialogOpen: false,\n      importProjectPopoverOpen: false,\n    });\n  }\n  openNewProjectDialog() {\n    this.setState({ newProjectDialogOpen: true });\n  }\n  closeNewProjectDialog() {\n    this.setState({ newProjectDialogOpen: false });\n  }\n  openNewProjectWizardDialog() {\n    this.getCountries();\n    this.setState({ newProjectWizardDialogOpen: true });\n  }\n  closeNewProjectWizardDialog() {\n    this.setState({ newProjectWizardDialogOpen: false });\n  }\n  openNewPlanningGridDialog() {\n    this.getCountries();\n    this.setState({ NewPlanningGridDialogOpen: true });\n  }\n  closeNewPlanningGridDialog() {\n    this.setState({ NewPlanningGridDialogOpen: false });\n  }\n  openImportPlanningGridDialog() {\n    this.setState({ importPlanningGridDialogOpen: true });\n  }\n  closeImportPlanningGridDialog() {\n    this.setState({ importPlanningGridDialogOpen: false });\n  }\n  openInfoDialog() {\n    this.setState({ openInfoDialogOpen: true, featureMenuOpen: false });\n  }\n  closeInfoDialog() {\n    this.setState({ openInfoDialogOpen: false });\n  }\n\n  openUserSettingsDialog() {\n    this.setState({ UserSettingsDialogOpen: true });\n    this.hideUserMenu();\n  }\n\n  closeUserSettingsDialog() {\n    this.setState({ UserSettingsDialogOpen: false });\n  }\n\n  openProfileDialog() {\n    this.setState({ profileDialogOpen: true });\n    this.hideUserMenu();\n  }\n  closeProfileDialog() {\n    this.setState({ profileDialogOpen: false });\n  }\n\n  openAboutDialog() {\n    this.setState({ aboutDialogOpen: true });\n    this.hideHelpMenu();\n  }\n\n  closeAboutDialog() {\n    this.setState({ aboutDialogOpen: false });\n  }\n\n  showRunSettingsDialog() {\n    this.setState({ settingsDialogOpen: true });\n  }\n\n  closeRunSettingsDialog() {\n    this.setState({ settingsDialogOpen: false });\n  }\n\n  openClassificationDialog() {\n    this.setState({ classificationDialogOpen: true });\n  }\n  closeClassificationDialog() {\n    this.setState({ classificationDialogOpen: false });\n  }\n\n  openImportProjectDialog() {\n    this.setState({ importProjectDialogOpen: true });\n  }\n  closeImportDialog() {\n    this.setState({ importProjectDialogOpen: false });\n  }\n  openImportMXWDialog() {\n    this.setState({ importMXWDialogOpen: true });\n  }\n  closeImportMXWDialog() {\n    this.setState({ importMXWDialogOpen: false });\n  }\n  openUsersDialog() {\n    this.getUsers();\n    this.setState({ usersDialogOpen: true });\n  }\n  closeUsersDialog() {\n    this.setState({ usersDialogOpen: false });\n  }\n  closeAlertDialog() {\n    this.setState({ alertDialogOpen: false });\n  }\n  hideResults() {\n    this.setState({ resultsPanelOpen: false });\n  }\n  showResults() {\n    this.setState({ resultsPanelOpen: true });\n  }\n\n  toggleInfoPanel() {\n    this.setState({ infoPanelOpen: !this.state.infoPanelOpen });\n  }\n  toggleResultsPanel() {\n    this.setState({ resultsPanelOpen: !this.state.resultsPanelOpen });\n  }\n\n  openRunLogDialog() {\n    this.getRunLogs();\n    this.startPollingRunLogs();\n    this.setState({ runLogDialogOpen: true });\n  }\n  closeRunLogDialog() {\n    this.stopPollingRunLogs();\n    this.setState({ runLogDialogOpen: false });\n  }\n  openResetDialog() {\n    this.setState({ resetDialogOpen: true });\n  }\n  closeResetDialog() {\n    this.setState({ resetDialogOpen: false });\n  }\n  openGapAnalysisDialog() {\n    this.setState({ gapAnalysisDialogOpen: true, gapAnalysis: [] });\n    this.runGapAnalysis();\n  }\n  closeGapAnalysisDialog() {\n    this.setState({ gapAnalysisDialogOpen: false, gapAnalysis: [] });\n  }\n  openServerDetailsDialog() {\n    this.setState({ serverDetailsDialogOpen: true });\n    this.hideHelpMenu();\n  }\n  closeServerDetailsDialog() {\n    this.setState({ serverDetailsDialogOpen: false });\n  }\n  openChangePasswordDialog() {\n    this.hideUserMenu();\n    this.setState({ changePasswordDialogOpen: true });\n  }\n  closeChangePasswordDialog() {\n    this.setState({ changePasswordDialogOpen: false });\n  }\n\n  showProjectListDialog(\n    projectList,\n    projectListDialogTitle,\n    projectListDialogHeading\n  ) {\n    this.setState(\n      {\n        projectList: projectList,\n        projectListDialogTitle: projectListDialogTitle,\n        projectListDialogHeading: projectListDialogHeading,\n      },\n      () => {\n        this.openProjectsListDialog();\n      }\n    );\n  }\n  openProjectsListDialog() {\n    this.setState({ ProjectsListDialogOpen: true });\n  }\n  closeProjectsListDialog() {\n    this.setState({ ProjectsListDialogOpen: false });\n  }\n  openTargetDialog() {\n    this.setState({ targetDialogOpen: true });\n  }\n  closeTargetDialog() {\n    this.setState({ targetDialogOpen: false });\n  }\n  openShareableLinkDialog() {\n    this.setState({ shareableLinkDialogOpen: true });\n  }\n  closeShareableLinkDialog() {\n    this.setState({ shareableLinkDialogOpen: false });\n  }\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// PROTECTED AREAS LAYERS STUFF\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  changeIucnCategory(iucnCategory) {\n    //update the state\n    let _metadata = this.state.metadata;\n    _metadata.IUCN_CATEGORY = iucnCategory;\n    this.setState({ metadata: _metadata });\n    //update the input.dat file\n    this.updateProjectParameter(\"IUCN_CATEGORY\", iucnCategory);\n    //filter the wdpa vector tiles - NO LONGER USED\n    // this.filterWdpaByIucnCategory(iucnCategory);\n    //render the wdpa intersections on the grid\n    this.renderPAGridIntersections(iucnCategory);\n  }\n\n  filterWdpaByIucnCategory(iucnCategory) {\n    //get the individual iucn categories\n    let iucnCategories = this.getIndividualIucnCategories(iucnCategory);\n    //TODO FILTER THE WDPA CLIENT SIDE BY INTERSECTING IT WITH THE PLANNING GRID\n    //filter the vector tiles for those iucn categories - and if the planning unit name has an iso3 country code - then use that as well. e.g. pu_ton_marine_hexagon_50 (has iso3 code) or pu_a4402723a92444ff829e9411f07e7 (no iso3 code)\n    //let filterExpr = (this.state.metadata.PLANNING_UNIT_NAME.match(/_/g).length> 1) ? ['all', ['in', 'IUCN_CAT'].concat(iucnCategories), ['==', 'PARENT_ISO', this.state.metadata.PLANNING_UNIT_NAME.substr(3, 3).toUpperCase()]] : ['all', ['in', 'IUCN_CAT'].concat(iucnCategories)];\n    let filterExpr = [\"all\", [\"in\", \"iucn_cat\"].concat(iucnCategories)]; // no longer filter by ISO code\n    this.map.setFilter(CONSTANTS.WDPA_LAYER_NAME, filterExpr);\n    //turn on/off the protected areas legend\n    iucnCategory === \"None\" ? this.hidePALegend() : this.showPALegend();\n  }\n\n  getIndividualIucnCategories(iucnCategory) {\n    let retValue = [];\n    switch (iucnCategory) {\n      case \"None\":\n        retValue = [\"\"];\n        break;\n      case \"IUCN I-II\":\n        retValue = [\"Ia\", \"Ib\", \"II\"];\n        break;\n      case \"IUCN I-IV\":\n        retValue = [\"Ia\", \"Ib\", \"II\", \"III\", \"IV\"];\n        break;\n      case \"IUCN I-V\":\n        retValue = [\"Ia\", \"Ib\", \"II\", \"III\", \"IV\", \"V\"];\n        break;\n      case \"IUCN I-VI\":\n        retValue = [\"Ia\", \"Ib\", \"II\", \"III\", \"IV\", \"V\", \"VI\"];\n        break;\n      case \"All\":\n        retValue = [\n          \"Ia\",\n          \"Ib\",\n          \"II\",\n          \"III\",\n          \"IV\",\n          \"V\",\n          \"VI\",\n          \"Not Reported\",\n          \"Not Applicable\",\n          \"Not Assigned\",\n        ];\n        break;\n      default:\n    }\n    return retValue;\n  }\n\n  //gets the puids for those protected areas that intersect the planning grid in the passed iucn category\n  getPuidsFromIucnCategory(iucnCategory) {\n    let intersections_by_category = this.getIntersections(iucnCategory);\n    //get all the puids in this iucn category\n    let puids = this.getPuidsFromNormalisedData(intersections_by_category);\n    return puids;\n  }\n\n  //called when the iucn category changes - gets the puids that need to be added/removed, adds/removes them and updates the PuEdit layer\n  async renderPAGridIntersections(iucnCategory) {\n    await this.preprocessProtectedAreas(iucnCategory)\n      .then((intersections) => {\n        //get all the puids of the intersecting protected areas in this iucn category\n        let puids = this.getPuidsFromIucnCategory(iucnCategory);\n        //see if any of them will overwrite existing manually edited planning units - these will be in status 1 and 3\n        let manuallyEditedPuids = this.getPlanningUnitsByStatus(1).concat(\n          this.getPlanningUnitsByStatus(3)\n        );\n        let clashingPuids = manuallyEditedPuids.filter(\n          (value) => -1 !== puids.indexOf(value)\n        );\n        if (clashingPuids.length > 0) {\n          //remove them from the puids\n          puids = puids.filter((item) => !clashingPuids.includes(item));\n          this.setSnackBar(\n            \"Not all planning units have been added. See <a href='\" +\n              CONSTANTS.ERRORS_PAGE +\n              \"#not-all-planning-units-have-been-added' target='blank'>here</a>\"\n          );\n        }\n        //get all the puids for the existing iucn category - these will come from the previousPuids rather than getPuidsFromIucnCategory as there may have been some clashes and not all of the puids from getPuidsFromIucnCategory may actually be renderered\n        //if the previousPuids are undefined then get them from the projects previousIucnCategory\n        let previousPuids =\n          this.previousPuids !== undefined\n            ? this.previousPuids\n            : this.getPuidsFromIucnCategory(this.previousIucnCategory);\n        //set the previously selected puids\n        this.previousPuids = puids;\n        //and previousIucnCategory\n        this.previousIucnCategory = iucnCategory;\n        //rerender\n        this.updatePlanningUnits(previousPuids, puids);\n      })\n      .catch((error) => {\n        this.setSnackBar(error);\n      });\n  }\n\n  //updates the planning units by reconciling the passed arrays of puids\n  updatePlanningUnits(previousPuids, puids) {\n    //copy the current planning units state\n    let statuses = this.state.planning_units;\n    //get the new puids that need to be added\n    let newPuids = this.getNewPuids(previousPuids, puids);\n    if (newPuids.length === 0) {\n      //get the puids that need to be removed\n      let oldPuids = this.getNewPuids(puids, previousPuids);\n      this.removePuidsFromArray(statuses, 2, oldPuids);\n    } else {\n      //add all the new protected area intersections into the planning units as status 2\n      this.appPuidsToPlanningUnits(statuses, 2, newPuids);\n    }\n    //update the state\n    this.setState({ planning_units: statuses });\n    //re-render the layer\n    this.renderPuEditLayer();\n    //update the pu.dat file\n    this.updatePuDatFile();\n  }\n\n  getNewPuids(previousPuids, puids) {\n    return puids.filter((i) => {\n      return previousPuids.indexOf(i) === -1;\n    });\n  }\n\n  //turns on the legend for the protected areas\n  showPALegend() {\n    this.setState({ pa_layer_visible: true });\n  }\n\n  //hides the protected area legend\n  hidePALegend() {\n    this.setState({ pa_layer_visible: false });\n  }\n  preprocessProtectedAreas(iucnCategory) {\n    //have the intersections already been calculated\n    if (this.state.protected_area_intersections.length > 0) {\n      return Promise.resolve(this.state.protected_area_intersections);\n    } else {\n      //do the intersection on the server\n      return new Promise((resolve, reject) => {\n        //start the logging\n        this.startLogging();\n        //call the websocket\n        this._ws(\n          \"preprocessProtectedAreas?user=\" +\n            this.state.owner +\n            \"&project=\" +\n            this.state.project +\n            \"&planning_grid_name=\" +\n            this.state.metadata.PLANNING_UNIT_NAME,\n          this.wsMessageCallback.bind(this)\n        )\n          .then((message) => {\n            //set the state\n            this.setState({\n              protected_area_intersections: message.intersections,\n            });\n            //return a value to the then() call\n            resolve(message);\n          })\n          .catch((error) => {\n            reject(error);\n          });\n      }); //return\n    }\n  }\n\n  getIntersections(iucnCategory) {\n    //get the individual iucn categories\n    let _iucn_categories = this.getIndividualIucnCategories(iucnCategory);\n    //get the planning units that intersect the protected areas with the passed iucn category\n    return this.state.protected_area_intersections.filter((item) => {\n      return _iucn_categories.indexOf(item[0]) > -1;\n    });\n  }\n\n  //downloads and updates the WDPA on the server\n  updateWDPA() {\n    //start the logging\n    this.startLogging();\n    //call the webservice\n    return new Promise((resolve, reject) => {\n      this._ws(\n        \"updateWDPA?downloadUrl=\" +\n          this.state.registry.WDPA.downloadUrl +\n          \"&wdpaVersion=\" +\n          this.state.registry.WDPA.latest_version,\n        this.wsMessageCallback.bind(this)\n      )\n        .then((message) => {\n          //websocket has finished - set the new version of the wdpa\n          let obj = Object.assign(this.state.marxanServer, {\n            wdpa_version: this.state.registry.WDPA.latest_version,\n          });\n          //update the state and when it is finished, re-add the wdpa source and layer\n          this.setState({ newWDPAVersion: false, marxanServer: obj }, () => {\n            //set the source for the WDPA layer to the new vector tiles\n            this.setWDPAVectorTilesLayerName(\n              this.state.registry.WDPA.latest_version\n            );\n            //remove the existing WDPA layer and source\n            this.removeMapLayer(CONSTANTS.WDPA_LAYER_NAME);\n            if (\n              this.map &&\n              this.map.getSource(CONSTANTS.WDPA_SOURCE_NAME) !== undefined\n            )\n              this.map.removeSource(CONSTANTS.WDPA_SOURCE_NAME);\n            //re-add the WDPA source and layer\n            this.addWDPASource();\n            this.addWDPALayer();\n            //reset the protected area intersections on the client\n            this.setState({ protected_area_intersections: [] });\n            //recalculate the protected area intersections and refilter the vector tiles\n            this.changeIucnCategory(this.state.metadata.IUCN_CATEGORY);\n            //close the dialog\n            this.closeWDPAUpdateDialog();\n          });\n          resolve(message);\n        })\n        .catch((error) => {\n          reject(error);\n        });\n    }); //return\n  }\n\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// BOUNDARY LENGTH MODIFIER AND CLUMPING\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  async preprocessBoundaryLengths(iucnCategory) {\n    if (this.state.files.BOUNDNAME) {\n      //if the bounds.dat file already exists\n      return Promise.resolve();\n    } else {\n      //calculate the boundary lengths on the server\n      return new Promise((resolve, reject) => {\n        //start the logging\n        this.startLogging();\n        //call the websocket\n        this._ws(\n          \"preprocessPlanningUnits?user=\" +\n            this.state.owner +\n            \"&project=\" +\n            this.state.project,\n          this.wsMessageCallback.bind(this)\n        )\n          .then((message) => {\n            //update the state\n            var currentFiles = this.state.files;\n            currentFiles.BOUNDNAME = \"bounds.dat\";\n            this.setState({ files: currentFiles });\n            //return a value to the then() call\n            resolve(message);\n          })\n          .catch((error) => {\n            reject(error);\n          });\n      }); //return\n    }\n  }\n\n  showClumpingDialog() {\n    //update the map centre and zoom state which is used by the maps in the clumping dialog\n    this.updateMapCentreAndZoom();\n    //when the boundary lengths have been calculated\n    this.preprocessBoundaryLengths()\n      .then((intersections) => {\n        //update the spec.dat file with any that have been added or removed or changed target or spf\n        this.updateSpecFile()\n          .then((value) => {\n            //when the species file has been updated, update the planning unit file\n            this.updatePuFile();\n            //when the planning unit file has been updated, update the PuVSpr file - this does all the preprocessing using web sockets\n            this.updatePuvsprFile().then((value) => {\n              //show the clumping dialog\n              this.setState({\n                clumpingDialogOpen: true,\n                clumpingRunning: true,\n              });\n            });\n          })\n          .catch((error) => {\n            //updateSpecFile error\n          });\n      })\n      .catch((error) => {\n        //preprocessBoundaryLengths error\n        console.log(error);\n      });\n  }\n\n  hideClumpingDialog() {\n    //delete the project group\n    this.deleteProjects();\n    //reset the paint properties in the clumping dialog\n    this.resetPaintProperties();\n    //return state to normal\n    this.setState({ clumpingDialogOpen: false });\n  }\n\n  //creates a group of 5 projects with UUIDs in the _clumping folder\n  createProjectGroupAndRun(blmValues) {\n    //clear any exists projects\n    if (this.projects) this.deleteProjects();\n    return new Promise((resolve, reject) => {\n      this._get(\n        \"createProjectGroup?user=\" +\n          this.state.owner +\n          \"&project=\" +\n          this.state.project +\n          \"&copies=5&blmValues=\" +\n          blmValues.join(\",\")\n      )\n        .then((response) => {\n          //set the local variable for the projects\n          this.projects = response.data;\n          //run the projects\n          this.runProjects(response.data);\n          resolve(\"Project group created\");\n        })\n        .catch((error) => {\n          //do something\n          reject(error);\n        });\n    });\n  }\n\n  //deletes the projects from the _clumping folder\n  deleteProjects() {\n    if (this.projects) {\n      var projectNames = this.projects.map((item) => {\n        return item.projectName;\n      });\n      //clear the local variable\n      this.projects = undefined;\n      return new Promise((resolve, reject) => {\n        this._get(\"deleteProjects?projectNames=\" + projectNames.join(\",\"))\n          .then((response) => {\n            resolve(\"Projects deleted\");\n          })\n          .catch((error) => {\n            reject(error);\n          });\n      });\n    }\n  }\n\n  runProjects(projects) {\n    //reset the counter\n    this.projectsRun = 0;\n    //set the intitial state\n    this.setState({ clumpingRunning: true });\n    //run the projects\n    projects.forEach((project) => {\n      this.startMarxanJob(\"_clumping\", project.projectName, false).then(\n        (response) => {\n          if (!this.checkForErrors(response, false)) {\n            //run completed - get a single solution\n            this.loadOtherSolution(response.user, response.project, 1);\n          }\n          //increment the project counter\n          this.projectsRun = this.projectsRun + 1;\n          //set the state\n          if (this.projectsRun === 5) this.setState({ clumpingRunning: false });\n        }\n      );\n    });\n  }\n\n  rerunProjects(blmChanged, blmValues) {\n    //reset the paint properties in the clumping dialog\n    this.resetPaintProperties();\n    //if the blmValues have changed then recreate the project group and run\n    if (blmChanged) {\n      this.createProjectGroupAndRun(blmValues);\n    } else {\n      //rerun the projects\n      this.runProjects(this.projects);\n    }\n  }\n\n  setBlmValue(blmValue) {\n    var newRunParams = [],\n      value;\n    //iterate through the run parameters and update the value for the blm\n    this.state.runParams.forEach((item) => {\n      value = item.key === \"BLM\" ? String(blmValue) : item.value;\n      newRunParams.push({ key: item.key, value: value });\n    });\n    //update this run parameters\n    this.updateRunParams(newRunParams);\n  }\n\n  resetPaintProperties() {\n    //reset the paint properties\n    this.setState({\n      map0_paintProperty: [],\n      map1_paintProperty: [],\n      map2_paintProperty: [],\n      map3_paintProperty: [],\n      map4_paintProperty: [],\n    });\n  }\n\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// MANAGING RUNS\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //called when the run log dialog opens and starts polling the run log\n  startPollingRunLogs() {\n    this.runlogTimer = setInterval(() => {\n      this.getRunLogs();\n    }, 5000);\n  }\n\n  //called when the run log dialog closes and stops polling the run log\n  stopPollingRunLogs() {\n    clearInterval(this.runlogTimer);\n  }\n  //returns the log of all of the runs from the server\n  getRunLogs() {\n    if (!this.state.unauthorisedMethods.includes(\"getRunLogs\")) {\n      this._get(\"getRunLogs\").then((response) => {\n        this.setState({ runLogs: response.data });\n      });\n    }\n  }\n\n  //clears the records from the run logs file\n  clearRunLogs() {\n    this._get(\"clearRunLogs\").then((response) => {\n      this.getRunLogs();\n    });\n  }\n\n  getShareableLink() {\n    this.openShareableLinkDialog();\n  }\n\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// GAP ANALYSIS\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  runGapAnalysis() {\n    return new Promise((resolve, reject) => {\n      //switches the results pane to the log tab\n      this.setActiveTab(\"log\");\n      //call the websocket\n      this._ws(\n        \"runGapAnalysis?user=\" +\n          this.state.owner +\n          \"&project=\" +\n          this.state.project,\n        this.wsMessageCallback.bind(this)\n      )\n        .then((message) => {\n          this.setState({ gapAnalysis: message.data });\n          resolve(message);\n        })\n        .catch((error) => {\n          reject(error);\n        });\n    });\n  }\n\n  //deletes a stored gap analysis on the server\n  deleteGapAnalysis() {\n    this._get(\n      \"deleteGapAnalysis?user=\" +\n        this.state.owner +\n        \"&project=\" +\n        this.state.project\n    ).then((response) => {\n      console.log(response);\n    });\n  }\n\n  setAddToProject(evt, isChecked) {\n    this.setState({ addToProject: isChecked });\n  }\n\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ////////////////////////// COSTS\n  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  //changes the cost profile for a project\n  changeCostname(costname) {\n    return new Promise((resolve, reject) => {\n      this._get(\n        \"updateCosts?user=\" +\n          this.state.owner +\n          \"&project=\" +\n          this.state.project +\n          \"&costname=\" +\n          costname\n      )\n        .then((response) => {\n          //update the state\n          this.setState({\n            metadata: Object.assign(this.state.metadata, { COSTS: costname }),\n          });\n          resolve();\n        })\n        .catch((error) => {\n          reject(error);\n        });\n    });\n  }\n\n  //loads the costs layer\n  loadCostsLayer(forceReload = false) {\n    this.setState({ costsLoading: true });\n    this.getPlanningUnitsCostData(forceReload).then((cost_data) => {\n      this.renderPuCostLayer(cost_data).then(() => {\n        this.setState({ costsLoading: false });\n        //do something\n      });\n    });\n  }\n\n  //gets the cost data either from cache (if it has already been loaded) or from the server\n  getPlanningUnitsCostData(forceReload) {\n    return new Promise((resolve, reject) => {\n      //if the cost data has already been loaded\n      if (this.cost_data && !forceReload) {\n        resolve(this.cost_data);\n      } else {\n        this._get(\n          \"getPlanningUnitsCostData?user=\" +\n            this.state.owner +\n            \"&project=\" +\n            this.state.project\n        )\n          .then((response) => {\n            //save the cost data to a local variable\n            this.cost_data = response;\n            resolve(response);\n          })\n          .catch((error) => {\n            //do something\n          });\n      }\n    });\n  }\n\n  //after clicking cancel in the ImportCostsDialog\n  deleteCostFileThenClose(costname) {\n    return new Promise((resolve, reject) => {\n      if (costname) {\n        //delete the cost file\n        this.deleteCost(costname).then((_) => {\n          //close the import costs dialog\n          this.closeImportCostsDialog();\n          resolve();\n        });\n      } else {\n        resolve();\n      }\n    });\n  }\n  //adds a cost in application state\n  addCost(costname) {\n    //update the state\n    let _costnames = this.state.costnames;\n    //add the cost profile\n    _costnames.push(costname);\n    this.setState({ costnames: _costnames });\n  }\n  //deletes a cost file on the server\n  deleteCost(costname) {\n    return new Promise((resolve, reject) => {\n      this._get(\n        \"deleteCost?user=\" +\n          this.state.owner +\n          \"&project=\" +\n          this.state.project +\n          \"&costname=\" +\n          costname\n      )\n        .then((response) => {\n          //update the state\n          let _costnames = this.state.costnames;\n          //remove the deleted cost profile\n          _costnames = _costnames.filter((item) => item !== costname);\n          this.setState({ costnames: _costnames });\n          resolve();\n        })\n        .catch((error) => {\n          reject(error);\n        });\n    });\n  }\n  //restores the database back to its original state and runs a git reset on the file system\n  resetServer() {\n    return new Promise((resolve, reject) => {\n      //switches the results pane to the log tab\n      this.setActiveTab(\"log\");\n      //call the websocket\n      this._ws(\"resetDatabase\", this.wsMessageCallback.bind(this))\n        .then((message) => {\n          //websocket has finished\n          resolve(message);\n          this.closeResetDialog();\n        })\n        .catch((error) => {\n          reject(error);\n          this.closeResetDialog();\n        });\n    });\n  }\n\n  //cleans up the server - removes dissolved WDPA feature classes, deletes orphaned feature classes, scratch feature classes and clumping files\n  cleanup() {\n    return new Promise((resolve, reject) => {\n      this._get(\"cleanup?\")\n        .then((response) => {\n          resolve();\n        })\n        .catch((error) => {\n          reject(error);\n        });\n    });\n  }\n\n  render() {\n    const message = (\n      <span\n        id=\"snackbar-message-id\"\n        dangerouslySetInnerHTML={{ __html: this.state.snackbarMessage }}\n      />\n    );\n    return (\n      <MuiThemeProvider>\n        <React.Fragment>\n          <div\n            ref={(el) => (this.mapContainer = el)}\n            className=\"absolute top right left bottom\"\n          />\n          <LoadingDialog open={this.state.shareableLink} />\n          <LoginDialog\n            open={!this.state.loggedIn}\n            onOk={this.validateUser.bind(this)}\n            onCancel={this.openRegisterDialog.bind(this)}\n            loading={this.state.loading}\n            user={this.state.user}\n            password={this.state.password}\n            changeUserName={this.changeUserName.bind(this)}\n            changePassword={this.changePassword.bind(this)}\n            openResendPasswordDialog={this.openResendPasswordDialog.bind(this)}\n            marxanServers={this.state.marxanServers}\n            selectServer={this.selectServer.bind(this)}\n            marxanServer={this.state.marxanServer}\n            marxanClientReleaseVersion={MARXAN_CLIENT_VERSION}\n          />\n          <RegisterDialog\n            open={this.state.registerDialogOpen}\n            onOk={this.createNewUser.bind(this)}\n            onCancel={this.closeRegisterDialog.bind(this)}\n            loading={this.state.loading}\n          />\n          <ResendPasswordDialog\n            open={this.state.resendPasswordDialogOpen}\n            onOk={this.resendPassword.bind(this)}\n            onCancel={this.closeResendPasswordDialog.bind(this)}\n            loading={this.state.loading}\n            changeEmail={this.changeEmail.bind(this)}\n            email={this.state.resendEmail}\n          />\n          <Welcome\n            open={\n              this.state.userData.SHOWWELCOMESCREEN &&\n              this.state.welcomeDialogOpen\n            }\n            onOk={this.closeWelcomeDialog.bind(this)}\n            onCancel={this.closeWelcomeDialog.bind(this)}\n            userData={this.state.userData}\n            saveOptions={this.saveOptions.bind(this)}\n            notifications={this.state.notifications}\n            resetNotifications={this.resetNotifications.bind(this)}\n            removeNotification={this.removeNotification.bind(this)}\n            openNewProjectDialog={this.openNewProjectWizardDialog.bind(this)}\n          />\n          <ToolsMenu\n            open={this.state.toolsMenuOpen}\n            menuAnchor={this.state.menuAnchor}\n            hideToolsMenu={this.hideToolsMenu.bind(this)}\n            openUsersDialog={this.openUsersDialog.bind(this)}\n            openRunLogDialog={this.openRunLogDialog.bind(this)}\n            openGapAnalysisDialog={this.openGapAnalysisDialog.bind(this)}\n            openResetDialog={this.openResetDialog.bind(this)}\n            userRole={this.state.userData.ROLE}\n            marxanServer={this.state.marxanServer}\n            metadata={this.state.metadata}\n            cleanup={this.cleanup.bind(this)}\n          />\n          <UserMenu\n            open={this.state.userMenuOpen}\n            menuAnchor={this.state.menuAnchor}\n            user={this.state.user}\n            userRole={this.state.userData.ROLE}\n            hideUserMenu={this.hideUserMenu.bind(this)}\n            openUserSettingsDialog={this.openUserSettingsDialog.bind(this)}\n            openProfileDialog={this.openProfileDialog.bind(this)}\n            logout={this.logout.bind(this)}\n            marxanServer={this.state.marxanServer}\n            openChangePasswordDialog={this.openChangePasswordDialog.bind(this)}\n          />\n          <HelpMenu\n            open={this.state.helpMenuOpen}\n            menuAnchor={this.state.menuAnchor}\n            hideHelpMenu={this.hideHelpMenu.bind(this)}\n            openAboutDialog={this.openAboutDialog.bind(this)}\n          />\n          <UserSettingsDialog\n            open={this.state.UserSettingsDialogOpen}\n            onOk={this.closeUserSettingsDialog.bind(this)}\n            onCancel={this.closeUserSettingsDialog.bind(this)}\n            loading={this.state.loading}\n            userData={this.state.userData}\n            saveOptions={this.saveOptions.bind(this)}\n            changeBasemap={this.setBasemap.bind(this)}\n            basemaps={this.state.basemaps}\n            basemap={this.state.basemap}\n          />\n          <UsersDialog\n            open={this.state.usersDialogOpen}\n            onOk={this.closeUsersDialog.bind(this)}\n            onCancel={this.closeUsersDialog.bind(this)}\n            loading={this.state.loading}\n            user={this.state.user}\n            users={this.state.users}\n            deleteUser={this.deleteUser.bind(this)}\n            changeRole={this.changeRole.bind(this)}\n            guestUserEnabled={this.state.marxanServer.guestUserEnabled}\n            toggleEnableGuestUser={this.toggleEnableGuestUser.bind(this)}\n          />\n          <ProfileDialog\n            open={this.state.profileDialogOpen}\n            onOk={this.closeProfileDialog.bind(this)}\n            onCancel={this.closeProfileDialog.bind(this)}\n            loading={this.state.loading}\n            userData={this.state.userData}\n            updateUser={this.updateUser.bind(this)}\n          />\n          <AboutDialog\n            open={this.state.aboutDialogOpen}\n            onOk={this.closeAboutDialog.bind(this)}\n            marxanClientReleaseVersion={MARXAN_CLIENT_VERSION}\n            wdpaAttribution={this.state.wdpaAttribution}\n          />\n          <InfoPanel\n            open={this.state.infoPanelOpen}\n            activeTab={this.state.activeTab}\n            user={this.state.user}\n            owner={this.state.owner}\n            project={this.state.project}\n            metadata={this.state.metadata}\n            runMarxan={this.runMarxan.bind(this)}\n            stopProcess={this.stopProcess.bind(this)}\n            pid={this.state.pid}\n            renameProject={this.renameProject.bind(this)}\n            renameDescription={this.renameDescription.bind(this)}\n            features={this.state.projectFeatures}\n            project_tab_active={this.project_tab_active.bind(this)}\n            features_tab_active={this.features_tab_active.bind(this)}\n            pu_tab_active={this.pu_tab_active.bind(this)}\n            startPuEditSession={this.startPuEditSession.bind(this)}\n            stopPuEditSession={this.stopPuEditSession.bind(this)}\n            puEditing={this.state.puEditing}\n            clearManualEdits={this.clearManualEdits.bind(this)}\n            showRunSettingsDialog={this.showRunSettingsDialog.bind(this)}\n            openFeatureMenu={this.openFeatureMenu.bind(this)}\n            preprocessing={this.state.preprocessing}\n            openFeaturesDialog={this.openFeaturesDialog.bind(this)}\n            changeIucnCategory={this.changeIucnCategory.bind(this)}\n            updateFeature={this.updateFeature.bind(this)}\n            userRole={this.state.userData.ROLE}\n            toggleProjectPrivacy={this.toggleProjectPrivacy.bind(this)}\n            openTargetDialog={this.openTargetDialog.bind(this)}\n            getShareableLink={this.getShareableLink.bind(this)}\n            marxanServer={this.state.marxanServer}\n            toggleFeatureLayer={this.toggleFeatureLayer.bind(this)}\n            toggleFeaturePUIDLayer={this.toggleFeaturePUIDLayer.bind(this)}\n            useFeatureColors={this.state.userData.USEFEATURECOLORS}\n            smallLinearGauge={this.state.smallLinearGauge}\n            costname={this.state.metadata.COSTS}\n            costnames={this.state.costnames}\n            changeCostname={this.changeCostname.bind(this)}\n            loadCostsLayer={this.loadCostsLayer.bind(this)}\n            loading={this.state.loading}\n            openCostsDialog={this.openCostsDialog.bind(this)}\n            protected_area_intersections={\n              this.state.protected_area_intersections\n            }\n          />\n          <ResultsPanel\n            open={this.state.resultsPanelOpen}\n            preprocessing={this.state.preprocessing}\n            solutions={this.state.solutions}\n            loadSolution={this.loadSolution.bind(this)}\n            openClassificationDialog={this.openClassificationDialog.bind(this)}\n            hideResults={this.hideResults.bind(this)}\n            brew={this.state.brew}\n            messages={this.state.logMessages}\n            activeResultsTab={this.state.activeResultsTab}\n            setActiveTab={this.setActiveTab.bind(this)}\n            clearLog={this.clearLog.bind(this)}\n            owner={this.state.owner}\n            resultsLayer={this.state.resultsLayer}\n            wdpaLayer={this.state.wdpaLayer}\n            pa_layer_visible={this.state.pa_layer_visible}\n            changeOpacity={this.changeOpacity.bind(this)}\n            userRole={this.state.userData.ROLE}\n            visibleLayers={this.state.visibleLayers}\n            metadata={this.state.metadata}\n            costsLoading={this.state.costsLoading}\n          />\n          <FeatureInfoDialog\n            open={this.state.openInfoDialogOpen}\n            onOk={this.closeInfoDialog.bind(this)}\n            onCancel={this.closeInfoDialog.bind(this)}\n            loading={this.state.loading}\n            feature={this.state.currentFeature}\n            updateFeature={this.updateFeature.bind(this)}\n            userRole={this.state.userData.ROLE}\n            reportUnits={this.state.userData.REPORTUNITS}\n          />\n          <IdentifyPopup\n            visible={this.state.identifyVisible}\n            xy={this.state.popup_point}\n            identifyPlanningUnits={this.state.identifyPlanningUnits}\n            identifyProtectedAreas={this.state.identifyProtectedAreas}\n            identifyFeatures={this.state.identifyFeatures}\n            loading={this.state.loading}\n            hideIdentifyPopup={this.hideIdentifyPopup.bind(this)}\n            reportUnits={this.state.userData.REPORTUNITS}\n            metadata={this.state.metadata}\n          />\n          <ProjectsDialog\n            open={this.state.projectsDialogOpen}\n            onOk={this.closeProjectsDialog.bind(this)}\n            onCancel={this.closeProjectsDialog.bind(this)}\n            loading={this.state.loading}\n            projects={this.state.projects}\n            oldVersion={this.state.metadata.OLDVERSION}\n            deleteProject={this.deleteProject.bind(this)}\n            loadProject={this.loadProject.bind(this)}\n            exportProject={this.exportProject.bind(this)}\n            cloneProject={this.cloneProject.bind(this)}\n            openNewProjectDialog={this.openNewProjectDialog.bind(this)}\n            openImportProjectDialog={this.openImportProjectDialog.bind(this)}\n            unauthorisedMethods={this.state.unauthorisedMethods}\n            userRole={this.state.userData.ROLE}\n            getAllFeatures={this.getAllFeatures.bind(this)}\n            importProjectPopoverOpen={this.state.importProjectPopoverOpen}\n            showImportProjectPopover={this.showImportProjectPopover.bind(this)}\n            hideImportProjectPopover={this.hideImportProjectPopover.bind(this)}\n            openImportMXWDialog={this.openImportMXWDialog.bind(this)}\n            closeImportMXWDialog={this.closeImportMXWDialog.bind(this)}\n            importMXWDialogOpen={this.state.importMXWDialogOpen}\n          />\n          <NewProjectDialog\n            open={this.state.newProjectDialogOpen}\n            registry={this.state.registry}\n            onOk={this.closeNewProjectDialog.bind(this)}\n            loading={this.state.loading}\n            getPlanningUnitGrids={this.getPlanningUnitGrids.bind(this)}\n            planning_unit_grids={this.state.planning_unit_grids}\n            openFeaturesDialog={this.openFeaturesDialog.bind(this)}\n            features={this.state.allFeatures}\n            openCostsDialog={this.openCostsDialog.bind(this)}\n            selectedCosts={this.state.selectedCosts}\n            createNewProject={this.createNewProject.bind(this)}\n            previewFeature={this.previewFeature.bind(this)}\n          />\n          <NewProjectWizardDialog\n            open={this.state.newProjectWizardDialogOpen}\n            onOk={this.closeNewProjectWizardDialog.bind(this)}\n            okDisabled={true}\n            countries={this.state.countries}\n            closeNewProjectWizardDialog={this.closeNewProjectWizardDialog.bind(\n              this\n            )}\n            createNewNationalProject={this.createNewNationalProject.bind(this)}\n          />\n          <NewPlanningGridDialog\n            open={this.state.NewPlanningGridDialogOpen}\n            onCancel={this.closeNewPlanningGridDialog.bind(this)}\n            loading={\n              this.state.loading ||\n              this.state.preprocessing ||\n              this.state.uploading\n            }\n            createNewPlanningUnitGrid={this.createNewPlanningUnitGrid.bind(\n              this\n            )}\n            countries={this.state.countries}\n            setSnackBar={this.setSnackBar.bind(this)}\n          />\n          <ImportPlanningGridDialog\n            open={this.state.importPlanningGridDialogOpen}\n            onOk={this.importPlanningUnitGrid.bind(this)}\n            onCancel={this.closeImportPlanningGridDialog.bind(this)}\n            loading={this.state.loading || this.state.uploading}\n            fileUpload={this.uploadFileToFolder.bind(this)}\n          />\n          <FeaturesDialog\n            open={this.state.featuresDialogOpen}\n            onOk={this.updateSelectedFeatures.bind(this)}\n            onCancel={this.closeFeaturesDialog.bind(this)}\n            loading={this.state.loading || this.state.uploading}\n            metadata={this.state.metadata}\n            allFeatures={this.state.allFeatures}\n            deleteFeature={this.deleteFeature.bind(this)}\n            openImportFeaturesDialog={this.openImportFeaturesDialog.bind(this)}\n            openImportFromWebDialog={this.openImportFromWebDialog.bind(this)}\n            selectAllFeatures={this.selectAllFeatures.bind(this)}\n            clearAllFeatures={this.clearAllFeatures.bind(this)}\n            selectFeatures={this.selectFeatures.bind(this)}\n            userRole={this.state.userData.ROLE}\n            clickFeature={this.clickFeature.bind(this)}\n            addingRemovingFeatures={this.state.addingRemovingFeatures}\n            selectedFeatureIds={this.state.selectedFeatureIds}\n            initialiseDigitising={this.initialiseDigitising.bind(this)}\n            newFeaturePopoverOpen={this.state.newFeaturePopoverOpen}\n            hideNewFeaturePopover={this.hideNewFeaturePopover.bind(this)}\n            showNewFeaturePopover={this.showNewFeaturePopover.bind(this)}\n            importFeaturePopoverOpen={this.state.importFeaturePopoverOpen}\n            hideImportFeaturePopover={this.hideImportFeaturePopover.bind(this)}\n            showImportFeaturePopover={this.showImportFeaturePopover.bind(this)}\n            previewFeature={this.previewFeature.bind(this)}\n            openImportGBIFDialog={this.openImportGBIFDialog.bind(this)}\n            marxanServer={this.state.marxanServer}\n            refreshFeatures={this.refreshFeatures.bind(this)}\n          />\n          <FeatureDialog\n            open={this.state.featureDialogOpen}\n            onOk={this.closeFeatureDialog.bind(this)}\n            onCancel={this.closeFeatureDialog.bind(this)}\n            loading={this.state.loading}\n            feature_metadata={this.state.feature_metadata}\n            getTilesetMetadata={this.getMetadata.bind(this)}\n            setSnackBar={this.setSnackBar.bind(this)}\n            reportUnits={this.state.userData.REPORTUNITS}\n            getProjectList={this.getProjectList.bind(this)}\n          />\n          <NewFeatureDialog\n            open={this.state.NewFeatureDialogOpen}\n            onOk={this.closeNewFeatureDialog.bind(this)}\n            onCancel={this.closeNewFeatureDialog.bind(this)}\n            loading={this.state.loading || this.state.uploading}\n            createNewFeature={this.createNewFeature.bind(this)}\n            addToProject={this.state.addToProject}\n            setAddToProject={this.setAddToProject.bind(this)}\n          />\n          <ImportFeaturesDialog\n            open={this.state.importFeaturesDialogOpen}\n            importFeatures={this.importFeatures.bind(this)}\n            onCancel={this.closeImportFeaturesDialog.bind(this)}\n            loading={\n              this.state.loading ||\n              this.state.preprocessing ||\n              this.state.uploading\n            }\n            setFilename={this.setNewFeatureDatasetFilename.bind(this)}\n            filename={this.state.featureDatasetFilename}\n            fileUpload={this.uploadFileToFolder.bind(this)}\n            unzipShapefile={this.unzipShapefile.bind(this)}\n            getShapefileFieldnames={this.getShapefileFieldnames.bind(this)}\n            deleteShapefile={this.deleteShapefile.bind(this)}\n            addToProject={this.state.addToProject}\n            setAddToProject={this.setAddToProject.bind(this)}\n          />\n          <ImportFromWebDialog\n            open={this.state.importFromWebDialogOpen}\n            onCancel={this.closeImportFromWebDialog.bind(this)}\n            loading={\n              this.state.loading ||\n              this.state.preprocessing ||\n              this.state.uploading\n            }\n            importFeatures={this.importFeaturesFromWeb.bind(this)}\n            addToProject={this.state.addToProject}\n            setAddToProject={this.setAddToProject.bind(this)}\n          />\n          <ImportGBIFDialog\n            open={this.state.importGBIFDialogOpen}\n            onCancel={this.closeImportGBIFDialog.bind(this)}\n            loading={\n              this.state.loading ||\n              this.state.preprocessing ||\n              this.state.uploading\n            }\n            importGBIFData={this.importGBIFData.bind(this)}\n            gbifSpeciesSuggest={this.gbifSpeciesSuggest.bind(this)}\n            addToProject={this.state.addToProject}\n            setAddToProject={this.setAddToProject.bind(this)}\n          />\n          <PlanningGridsDialog\n            open={this.state.planningGridsDialogOpen}\n            onOk={this.closePlanningGridsDialog.bind(this)}\n            onCancel={this.closePlanningGridsDialog.bind(this)}\n            loading={this.state.loading}\n            getPlanningUnitGrids={this.getPlanningUnitGrids.bind(this)}\n            unauthorisedMethods={this.state.unauthorisedMethods}\n            planningGrids={this.state.planning_unit_grids}\n            openNewPlanningGridDialog={this.openNewPlanningGridDialog.bind(\n              this\n            )}\n            openImportPlanningGridDialog={this.openImportPlanningGridDialog.bind(\n              this\n            )}\n            exportPlanningGrid={this.exportPlanningGrid.bind(this)}\n            deletePlanningGrid={this.deletePlanningUnitGrid.bind(this)}\n            previewPlanningGrid={this.previewPlanningGrid.bind(this)}\n            marxanServer={this.state.marxanServer}\n          />\n          <PlanningGridDialog\n            open={this.state.planningGridDialogOpen}\n            onOk={this.closePlanningGridDialog.bind(this)}\n            onCancel={this.closePlanningGridDialog.bind(this)}\n            loading={this.state.loading}\n            planning_grid_metadata={this.state.planning_grid_metadata}\n            getTilesetMetadata={this.getMetadata.bind(this)}\n            setSnackBar={this.setSnackBar.bind(this)}\n            getProjectList={this.getProjectList.bind(this)}\n          />\n          <ProjectsListDialog\n            open={this.state.ProjectsListDialogOpen}\n            projects={this.state.projectList}\n            userRole={this.state.userData.ROLE}\n            onOk={this.closeProjectsListDialog.bind(this)}\n            title={this.state.projectListDialogTitle}\n            heading={this.state.projectListDialogHeading}\n          />\n          <CostsDialog\n            open={this.state.costsDialogOpen}\n            onOk={this.closeCostsDialog.bind(this)}\n            onCancel={this.closeCostsDialog.bind(this)}\n            unauthorisedMethods={this.state.unauthorisedMethods}\n            costname={this.state.metadata.COSTS}\n            openImportCostsDialog={this.openImportCostsDialog.bind(this)}\n            deleteCost={this.deleteCost.bind(this)}\n            data={this.state.costnames}\n          />\n          <ImportCostsDialog\n            open={this.state.importCostsDialogOpen}\n            addCost={this.addCost.bind(this)}\n            closeImportCostsDialog={this.closeImportCostsDialog.bind(this)}\n            deleteCostFileThenClose={this.deleteCostFileThenClose.bind(this)}\n            loading={this.state.loading}\n            fileUpload={this.uploadFileToProject.bind(this)}\n          />\n          <RunSettingsDialog\n            open={this.state.settingsDialogOpen}\n            onOk={this.closeRunSettingsDialog.bind(this)}\n            onCancel={this.closeRunSettingsDialog.bind(this)}\n            loading={this.state.loading || this.state.preprocessing}\n            updateRunParams={this.updateRunParams.bind(this)}\n            runParams={this.state.runParams}\n            showClumpingDialog={this.showClumpingDialog.bind(this)}\n            userRole={this.state.userData.ROLE}\n          />\n          <ClassificationDialog\n            open={this.state.classificationDialogOpen}\n            onOk={this.closeClassificationDialog.bind(this)}\n            onCancel={this.closeClassificationDialog.bind(this)}\n            loading={this.state.loading}\n            renderer={this.state.renderer}\n            changeColorCode={this.changeColorCode.bind(this)}\n            changeRenderer={this.changeRenderer.bind(this)}\n            changeNumClasses={this.changeNumClasses.bind(this)}\n            changeShowTopClasses={this.changeShowTopClasses.bind(this)}\n            summaryStats={this.state.summaryStats}\n            brew={this.state.brew}\n            dataBreaks={this.state.dataBreaks}\n          />\n          <ClumpingDialog\n            open={this.state.clumpingDialogOpen}\n            onOk={this.hideClumpingDialog.bind(this)}\n            onCancel={this.hideClumpingDialog.bind(this)}\n            tileset={this.state.tileset}\n            map0_paintProperty={this.state.map0_paintProperty}\n            map1_paintProperty={this.state.map1_paintProperty}\n            map2_paintProperty={this.state.map2_paintProperty}\n            map3_paintProperty={this.state.map3_paintProperty}\n            map4_paintProperty={this.state.map4_paintProperty}\n            mapCentre={this.state.mapCentre}\n            mapZoom={this.state.mapZoom}\n            createProjectGroupAndRun={this.createProjectGroupAndRun.bind(this)}\n            rerunProjects={this.rerunProjects.bind(this)}\n            setBlmValue={this.setBlmValue.bind(this)}\n            clumpingRunning={this.state.clumpingRunning}\n          />\n          <ImportProjectDialog\n            open={this.state.importProjectDialogOpen}\n            onOk={this.closeImportDialog.bind(this)}\n            loading={this.state.loading || this.state.uploading}\n            importProject={this.importProject.bind(this)}\n            fileUpload={this.uploadFileToFolder.bind(this)}\n            log={this.log.bind(this)}\n            setSnackBar={this.setSnackBar.bind(this)}\n          />\n          <ImportMXWDialog\n            open={this.state.importMXWDialogOpen}\n            onOk={this.closeImportMXWDialog.bind(this)}\n            loading={this.state.loading || this.state.preprocessing}\n            importMXWProject={this.importMXWProject.bind(this)}\n            fileUpload={this.uploadFileToFolder.bind(this)}\n            log={this.log.bind(this)}\n            setSnackBar={this.setSnackBar.bind(this)}\n            user={this.state.user}\n          />\n          <ResetDialog\n            open={this.state.resetDialogOpen}\n            onOk={this.resetServer.bind(this)}\n            onCancel={this.closeResetDialog.bind(this)}\n            onRequestClose={this.closeResetDialog.bind(this)}\n            loading={this.state.loading}\n          />\n          <RunLogDialog\n            open={this.state.runLogDialogOpen}\n            onOk={this.closeRunLogDialog.bind(this)}\n            onRequestClose={this.closeRunLogDialog.bind(this)}\n            loading={this.state.loading}\n            preprocessing={this.state.preprocessing}\n            unauthorisedMethods={this.state.unauthorisedMethods}\n            runLogs={this.state.runLogs}\n            getRunLogs={this.getRunLogs.bind(this)}\n            clearRunLogs={this.clearRunLogs.bind(this)}\n            stopMarxan={this.stopProcess.bind(this)}\n            userRole={this.state.userData.ROLE}\n          />\n          <ServerDetailsDialog\n            open={this.state.serverDetailsDialogOpen}\n            onOk={this.closeServerDetailsDialog.bind(this)}\n            onCancel={this.closeServerDetailsDialog.bind(this)}\n            onRequestClose={this.closeServerDetailsDialog.bind(this)}\n            marxanServer={this.state.marxanServer}\n            newWDPAVersion={this.state.newWDPAVersion}\n            showUpdateWDPADialog={this.openWDPAUpdateDialog.bind(this)}\n            registry={this.state.registry}\n          />\n          <UpdateWDPADialog\n            open={this.state.updateWDPADialogOpen}\n            onOk={this.closeWDPAUpdateDialog.bind(this)}\n            onCancel={this.closeWDPAUpdateDialog.bind(this)}\n            newWDPAVersion={this.state.newWDPAVersion}\n            updateWDPA={this.updateWDPA.bind(this)}\n            loading={this.state.preprocessing}\n            registry={this.state.registry}\n          />\n          <ChangePasswordDialog\n            open={this.state.changePasswordDialogOpen}\n            onOk={this.closeChangePasswordDialog.bind(this)}\n            user={this.state.user}\n            onRequestClose={this.closeChangePasswordDialog.bind(this)}\n            checkPassword={this.checkPassword.bind(this)}\n            setSnackBar={this.setSnackBar.bind(this)}\n            updateUser={this.updateUser.bind(this)}\n          />\n          <AlertDialog\n            open={this.state.alertDialogOpen}\n            onOk={this.closeAlertDialog.bind(this)}\n          />\n          <Snackbar\n            open={this.state.snackbarOpen}\n            message={message}\n            onRequestClose={this.closeSnackbar.bind(this)}\n            style={{ maxWidth: \"800px !important\" }}\n            contentStyle={{ maxWidth: \"800px !important\" }}\n            bodyStyle={{ maxWidth: \"800px !important\" }}\n          />\n          <Popover\n            open={this.state.featureMenuOpen}\n            anchorEl={this.state.menuAnchor}\n            onRequestClose={this.closeFeatureMenu.bind(this)}\n            style={{ width: \"307px\" }}\n          >\n            <Menu\n              style={{ width: \"207px\" }}\n              onMouseLeave={this.closeFeatureMenu.bind(this)}\n            >\n              <MenuItemWithButton\n                leftIcon={<Properties style={{ margin: \"1px\" }} />}\n                onClick={this.openInfoDialog.bind(this)}\n              >\n                Properties\n              </MenuItemWithButton>\n              <MenuItemWithButton\n                leftIcon={<RemoveFromProject style={{ margin: \"1px\" }} />}\n                style={{\n                  display:\n                    this.state.currentFeature.old_version ||\n                    this.state.userData.ROLE === \"ReadOnly\"\n                      ? \"none\"\n                      : \"block\",\n                }}\n                onClick={this.removeFromProject.bind(\n                  this,\n                  this.state.currentFeature\n                )}\n              >\n                Remove from project\n              </MenuItemWithButton>\n              <MenuItemWithButton\n                leftIcon={\n                  this.state.currentFeature.feature_layer_loaded ? (\n                    <RemoveFromMap style={{ margin: \"1px\" }} />\n                  ) : (\n                    <AddToMap style={{ margin: \"1px\" }} />\n                  )\n                }\n                style={{\n                  display: this.state.currentFeature.tilesetid\n                    ? \"block\"\n                    : \"none\",\n                }}\n                onClick={this.toggleFeatureLayer.bind(\n                  this,\n                  this.state.currentFeature\n                )}\n              >\n                {this.state.currentFeature.feature_layer_loaded\n                  ? \"Remove from map\"\n                  : \"Add to map\"}\n              </MenuItemWithButton>\n              <MenuItemWithButton\n                leftIcon={\n                  this.state.currentFeature.feature_puid_layer_loaded ? (\n                    <RemoveFromMap style={{ margin: \"1px\" }} />\n                  ) : (\n                    <AddToMap style={{ margin: \"1px\" }} />\n                  )\n                }\n                onClick={this.toggleFeaturePUIDLayer.bind(\n                  this,\n                  this.state.currentFeature\n                )}\n                disabled={\n                  !(\n                    this.state.currentFeature.preprocessed &&\n                    this.state.currentFeature.occurs_in_planning_grid\n                  )\n                }\n              >\n                {this.state.currentFeature.feature_puid_layer_loaded\n                  ? \"Remove planning unit outlines\"\n                  : \"Outline planning units where the feature occurs\"}\n              </MenuItemWithButton>\n              <MenuItemWithButton\n                leftIcon={<ZoomIn style={{ margin: \"1px\" }} />}\n                style={{\n                  display: this.state.currentFeature.extent ? \"block\" : \"none\",\n                }}\n                onClick={this.zoomToFeature.bind(\n                  this,\n                  this.state.currentFeature\n                )}\n              >\n                Zoom to feature extent\n              </MenuItemWithButton>\n              <MenuItemWithButton\n                leftIcon={<Preprocess style={{ margin: \"1px\" }} />}\n                style={{\n                  display:\n                    this.state.currentFeature.old_version ||\n                    this.state.userData.ROLE === \"ReadOnly\"\n                      ? \"none\"\n                      : \"block\",\n                }}\n                onClick={this.preprocessSingleFeature.bind(\n                  this,\n                  this.state.currentFeature\n                )}\n                disabled={\n                  this.state.currentFeature.preprocessed ||\n                  this.state.preprocessing\n                }\n              >\n                Pre-process\n              </MenuItemWithButton>\n            </Menu>\n          </Popover>\n          <TargetDialog\n            open={this.state.targetDialogOpen}\n            onOk={this.closeTargetDialog.bind(this)}\n            showCancelButton={true}\n            onCancel={this.closeTargetDialog.bind(this)}\n            updateTargetValueForFeatures={this.updateTargetValueForFeatures.bind(\n              this\n            )}\n          />\n          <GapAnalysisDialog\n            open={this.state.gapAnalysisDialogOpen}\n            showCancelButton={true}\n            onOk={this.closeGapAnalysisDialog.bind(this)}\n            onCancel={this.closeGapAnalysisDialog.bind(this)}\n            closeGapAnalysisDialog={this.closeGapAnalysisDialog.bind(this)}\n            gapAnalysis={this.state.gapAnalysis}\n            preprocessing={this.state.preprocessing}\n            projectFeatures={this.state.projectFeatures}\n            metadata={this.state.metadata}\n            marxanServer={this.state.marxanServer}\n            reportUnits={this.state.userData.REPORTUNITS}\n          />\n          <ShareableLinkDialog\n            open={this.state.shareableLinkDialogOpen}\n            onOk={this.closeShareableLinkDialog.bind(this)}\n            shareableLinkUrl={\n              window.location +\n              \"?server=\" +\n              this.state.marxanServer.name +\n              \"&user=\" +\n              this.state.user +\n              \"&project=\" +\n              this.state.project\n            }\n          />\n          <AppBar\n            open={this.state.loggedIn}\n            user={this.state.user}\n            userRole={this.state.userData.ROLE}\n            infoPanelOpen={this.state.infoPanelOpen}\n            resultsPanelOpen={this.state.resultsPanelOpen}\n            openProjectsDialog={this.openProjectsDialog.bind(this)}\n            openFeaturesDialog={this.openFeaturesDialog.bind(this)}\n            openPlanningGridsDialog={this.openPlanningGridsDialog.bind(this)}\n            toggleInfoPanel={this.toggleInfoPanel.bind(this)}\n            toggleResultsPanel={this.toggleResultsPanel.bind(this)}\n            showToolsMenu={this.showToolsMenu.bind(this)}\n            showUserMenu={this.showUserMenu.bind(this)}\n            showHelpMenu={this.showHelpMenu.bind(this)}\n            marxanServer={this.state.marxanServer.name}\n            openServerDetailsDialog={this.openServerDetailsDialog.bind(this)}\n          />\n        </React.Fragment>\n      </MuiThemeProvider>\n    );\n  }\n}\n\nexport default App;\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\n// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://goo.gl/SC7cgQ\"\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log(\"New content is available; please refresh.\");\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get(\"content-type\").indexOf(\"javascript\") === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport \"typeface-roboto\";\nimport registerServiceWorker from \"./registerServiceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\nregisterServiceWorker();\n","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","/*\n * Copyright (c) 2020 Andrew Cottam.\n *\n * This file is part of marxanweb/marxan-client\n * (see https://github.com/marxanweb/marxan-client).\n *\n * License: European Union Public Licence V. 1.2, see https://opensource.org/licenses/EUPL-1.2\n */\nvar FEATURE_PROPERTIES_CORE = [\n  {\n    name: \"id\",\n    key: \"ID\",\n    hint: \"The unique identifier for the feature\",\n    showForOld: false,\n    showForNew: false,\n  },\n  {\n    name: \"alias\",\n    key: \"Alias\",\n    hint: \"A human readable name for the feature\",\n    showForOld: false,\n    showForNew: false,\n  },\n  {\n    name: \"feature_class_name\",\n    key: \"Feature class name\",\n    hint: \"The internal name for the feature in the PostGIS database\",\n    showForOld: false,\n    showForNew: false,\n  },\n  {\n    name: \"description\",\n    key: \"Description\",\n    hint: \"Full description of the feature\",\n    showForOld: false,\n    showForNew: false,\n  },\n  {\n    name: \"creation_date\",\n    key: \"Creation date\",\n    hint: \"The date the feature was created or imported\",\n    showForOld: false,\n    showForNew: false,\n  },\n  {\n    name: \"tilesetid\",\n    key: \"Mapbox ID\",\n    hint: \"The unique identifier of the feature tileset in Mapbox\",\n    showForOld: false,\n    showForNew: false,\n  },\n  {\n    name: \"target_value\",\n    key: \"Target percent\",\n    hint: \"The target percentage for the feature within the planning grid\",\n    showForOld: true,\n    showForNew: true,\n  },\n  {\n    name: \"spf\",\n    key: \"Species Penalty Factor\",\n    hint:\n      \"The species penalty factor is used to weight the likelihood of getting a species in the results\",\n    showForOld: true,\n    showForNew: true,\n  },\n  {\n    name: \"preprocessed\",\n    key: \"Preprocessed\",\n    hint:\n      \"Whether or not the feature has been intersected with the planning units\",\n    showForOld: false,\n    showForNew: true,\n  },\n  {\n    name: \"pu_count\",\n    key: \"Planning unit count\",\n    hint:\n      \"The number of planning units that intersect the feature (calculated during pre-processing)\",\n    showForOld: true,\n    showForNew: true,\n  },\n];\n//application level global constants\nmodule.exports = Object.freeze({\n  MARXAN_REGISTRY: \"https://marxanweb.github.io/general/registry/marxan.json\", //url to the marxan registry\n  DOCS_ROOT: \"https://docs.marxanweb.org/\",\n  ERRORS_PAGE: \"https://docs.marxanweb.org/errors.html\",\n  SEND_CREDENTIALS: true, //if true all post requests will send credentials\n  TORNADO_PATH: \"/marxan-server/\",\n  TIMEOUT: 0, //disable timeout setting\n  MAPBOX_USER: \"andrewcottam\",\n  MAPBOX_STYLE_PREFIX: \"mapbox://styles/\",\n  PLANNING_UNIT_STATUSES: [1, 2, 3],\n  IUCN_CATEGORIES: [\n    \"None\",\n    \"IUCN I-II\",\n    \"IUCN I-IV\",\n    \"IUCN I-V\",\n    \"IUCN I-VI\",\n    \"All\",\n  ],\n  //constants for creating new planning grids\n  DOMAINS: [\"Marine\", \"Terrestrial\"],\n  SHAPES: [\"Hexagon\", \"Square\"],\n  AREAKM2S: [10, 20, 30, 40, 50, 100],\n  //layer source names\n  PLANNING_UNIT_SOURCE_NAME: \"marxan_planning_units_source\",\n  WDPA_SOURCE_NAME: \"marxan_wdpa_source\",\n  //layer names\n  PU_LAYER_NAME: \"marxan_pu_layer\", //layer showing the planning units\n  STATUS_LAYER_NAME: \"marxan_pu_status_layer\", //layer showing the status of planning units\n  COSTS_LAYER_NAME: \"marxan_pu_costs_layer\", //layer showing the cost of planning units\n  RESULTS_LAYER_NAME: \"marxan_pu_results_layer\", //layer for either the sum of solutions or the individual solutions\n  WDPA_LAYER_NAME: \"marxan_wdpa_polygon_layer\", //layer showing the protected areas from the WDPA\n  LAYER_TYPE_SUMMED_SOLUTIONS: \"summed_solutions\",\n  LAYER_TYPE_PLANNING_UNITS: \"pus\",\n  LAYER_TYPE_PLANNING_UNITS_COST: \"cost\",\n  LAYER_TYPE_PLANNING_UNITS_STATUS: \"status\",\n  LAYER_TYPE_PROTECTED_AREAS: \"pas\",\n  LAYER_TYPE_FEATURE_LAYER: \"feature\",\n  LAYER_TYPE_FEATURE_PLANNING_UNIT_LAYER: \"feature_puid\",\n  //planning unit statuses\n  PU_STATUS_DEFAULT: {\n    fillColor: \"none\",\n    strokeColor: \"lightgray\",\n    label: \"Default\",\n  },\n  PU_STATUS_LOCKED_IN: {\n    fillColor: \"none\",\n    strokeColor: \"blue\",\n    label: \"Locked in\",\n  },\n  PU_STATUS_LOCKED_OUT: {\n    fillColor: \"none\",\n    strokeColor: \"red\",\n    label: \"Locked out\",\n  },\n  //layer default styles\n  PU_LAYER_OPACITY: 0.6,\n  PU_COSTS_LAYER_OPACITY: 0.1,\n  STATUS_LAYER_LINE_WIDTH: 1.5,\n  WDPA_FILL_LAYER_OPACITY: 0.2,\n  FEATURE_LAYER_OPACITY: 0.9,\n  FEATURE_PLANNING_GRID_LAYER_OPACITY: 0.9,\n  RESULTS_LAYER_OPACITY: 0.8,\n  COST_COLORS: [\n    \"rgba(255,255,204,0.8)\",\n    \"rgba(255,237,160,0.8)\",\n    \"rgba(254,217,118,0.8)\",\n    \"rgba(254,178,76,0.8)\",\n    \"rgba(253,141,60,0.8)\",\n    \"rgba(252,78,42,0.8)\",\n    \"rgba(227,26,28,0.8)\",\n    \"rgba(189,0,38,0.8)\",\n    \"rgba(128,0,38,0.8)\",\n  ],\n  UNIFORM_COST_NAME: \"Equal area\",\n  //an array of feature property information that is used in the Feature Information dialog box - showForOld sets whether that property is shown for old versions of marxan\n  FEATURE_PROPERTIES_POLYGONS: FEATURE_PROPERTIES_CORE.concat([\n    {\n      name: \"area\",\n      key: \"Total area\",\n      hint: \"The total area for the feature in Km2 (i.e. globally)\",\n      showForOld: false,\n      showForNew: false,\n    },\n    {\n      name: \"pu_area\",\n      key: \"Planning grid area\",\n      hint:\n        \"The area of the feature within the planning grid in Km2 (calculated during pre-processing)\",\n      showForOld: true,\n      showForNew: true,\n    },\n    {\n      name: \"target_area\",\n      key: \"Target area\",\n      hint:\n        \"The total area that needs to be protected to achieve the target percentage in Km2 (calculated during a Marxan Run)\",\n      showForOld: true,\n      showForNew: true,\n    },\n    {\n      name: \"protected_area\",\n      key: \"Area protected\",\n      hint:\n        \"The total area protected in the current solution in Km2 (calculated during a Marxan Run)\",\n      showForOld: true,\n      showForNew: true,\n    },\n  ]),\n  FEATURE_PROPERTIES_POINTS: FEATURE_PROPERTIES_CORE.concat([\n    {\n      name: \"area\",\n      key: \"Total\",\n      hint: \"The total amount for the feature (i.e. globally)\",\n      showForOld: false,\n      showForNew: false,\n    },\n    {\n      name: \"pu_area\",\n      key: \"Planning grid amount\",\n      hint:\n        \"The total amount of the feature within the planning grid (calculated during pre-processing)\",\n      showForOld: true,\n      showForNew: true,\n    },\n    {\n      name: \"target_area\",\n      key: \"Target amount\",\n      hint:\n        \"The amount that needs to be protected to achieve the target percentage (calculated during a Marxan Run)\",\n      showForOld: true,\n      showForNew: true,\n    },\n    {\n      name: \"protected_area\",\n      key: \"Protected amount\",\n      hint:\n        \"The amount protected in the current solution (calculated during a Marxan Run)\",\n      showForOld: true,\n      showForNew: true,\n    },\n  ]),\n});\n"],"sourceRoot":""}